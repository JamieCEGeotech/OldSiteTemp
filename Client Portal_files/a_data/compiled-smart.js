window.jQuery=window.$=giscloud.exposeJQuery();window.Modernizr=function(e,c,s){function i(e){g.cssText=e}function t(e,t){return i(y.join(e+";")+(t||""))}function r(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function o(e,t){for(var i in e){var n=e[i];if(!a(n,"-")&&g[n]!==s)return t=="pfx"?n:!0}return!1}function l(e,t,i){for(var n in e){var a=t[e[n]];if(a!==s)return i===!1?e[n]:r(a,"function")?a.bind(i||t):a}return!1}function n(e,t,i){var n=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+w.join(n+" ")+n).split(" ");return r(t,"string")||r(t,"undefined")?o(a,t):(a=(e+" "+M.join(n+" ")+n).split(" "),l(a,t,i))}var d="2.6.2",u={},h=!0,f=c.documentElement,p="modernizr",m=c.createElement(p),g=m.style,_,v={}.toString,y=" -webkit- -moz- -o- -ms- ".split(" "),b="Webkit Moz O ms",w=b.split(" "),M=b.toLowerCase().split(" "),k={},L={},S={},T=[],x=T.slice,D,C=function(e,t,i,n){var a,s,r,o,l=c.createElement("div"),d=c.body,u=d||c.createElement("body");if(parseInt(i,10))while(i--)r=c.createElement("div"),r.id=n?n[i]:p+(i+1),l.appendChild(r);return a=["&#173;",'<style id="s',p,'">',e,"</style>"].join(""),l.id=p,(d?l:u).innerHTML+=a,u.appendChild(l),d||(u.style.background="",u.style.overflow="hidden",o=f.style.overflow,f.style.overflow="hidden",f.appendChild(u)),s=t(l,e),d?l.parentNode.removeChild(l):(u.parentNode.removeChild(u),f.style.overflow=o),!!s},I={}.hasOwnProperty,E;!r(I,"undefined")&&!r(I.call,"undefined")?E=function(e,t){return I.call(e,t)}:E=function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(n){var a=this;if(typeof a!="function")throw new TypeError;var s=x.call(arguments,1),r=function(){if(this instanceof r){var e=function(){};e.prototype=a.prototype;var t=new e,i=a.apply(t,s.concat(x.call(arguments)));return Object(i)===i?i:t}return a.apply(n,s.concat(x.call(arguments)))};return r}),k.touch=function(){var t;return"ontouchstart"in e||e.DocumentTouch&&c instanceof DocumentTouch?t=!0:C(["@media (",y.join("touch-enabled),("),p,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){t=e.offsetTop===9}),t},k.cssanimations=function(){return n("animationName")},k.csstransitions=function(){return n("transition")};for(var O in k)E(k,O)&&(D=O.toLowerCase(),u[D]=k[O](),T.push((u[D]?"":"no-")+D));return u.addTest=function(e,t){if(typeof e=="object")for(var i in e)E(e,i)&&u.addTest(i,e[i]);else{e=e.toLowerCase();if(u[e]!==s)return u;t=typeof t=="function"?t():t,typeof h!="undefined"&&h&&(f.className+=" "+(t?"":"no-")+e),u[e]=t}return u},i(""),m=_=null,function(e,r){function i(e,t){var i=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function o(){var e=_.elements;return typeof e=="string"?e.split(" "):e}function l(e){var t=m[e[f]];return t||(t={},p++,e[f]=p,m[p]=t),t}function n(e,t,i){t||(t=r);if(g)return t.createElement(e);i||(i=l(t));var n;return i.cache[e]?n=i.cache[e].cloneNode():c.test(e)?n=(i.cache[e]=i.createElem(e)).cloneNode():n=i.createElem(e),n.canHaveChildren&&!u.test(e)?i.frag.appendChild(n):n}function t(e,t){e||(e=r);if(g)return e.createDocumentFragment();t=t||l(e);var i=t.frag.cloneNode(),n=0,a=o(),s=a.length;for(;n<s;n++)i.createElement(a[n]);return i}function a(t,i){i.cache||(i.cache={},i.createElem=t.createElement,i.createFrag=t.createDocumentFragment,i.frag=i.createFrag()),t.createElement=function(e){return _.shivMethods?n(e,t,i):i.createElem(e)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+o().join().replace(/\w+/g,function(e){return i.createElem(e),i.frag.createElement(e),'c("'+e+'")'})+");return n}")(_,i.frag)}function s(e){e||(e=r);var t=l(e);return _.shivCSS&&!h&&!t.hasCSS&&(t.hasCSS=!!i(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),g||a(e,t),e}var d=e.html5||{},u=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h,f="_html5shiv",p=0,m={},g;(function(){try{var e=r.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,g=e.childNodes.length==1||function(){r.createElement("a");var e=r.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(e){h=!0,g=!0}})();var _={elements:d.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:d.shivCSS!==!1,supportsUnknownElements:g,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:s,createElement:n,createDocumentFragment:t};e.html5=_,s(r)}(this,c),u._version=d,u._prefixes=y,u._domPrefixes=M,u._cssomPrefixes=w,u.testProp=function(e){return o([e])},u.testAllProps=n,u.testStyles=C,u.prefixed=function(e,t,i){return t?n(e,t,i):n(e,"pfx")},f.className=f.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+T.join(" "):""),u}(this,this.document),function(e,h,l){function c(e){return"[object Function]"==n.call(e)}function f(e){return"string"==typeof e}function p(){}function m(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function g(){var e=y.shift();b=1,e?e.t?_(function(){("c"==e.t?x.injectCss:x.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),g()):b=0}function s(i,n,e,t,a,s,r){function o(e){if(!d&&m(l.readyState)&&(c.r=d=1,!b&&g(),l.onload=l.onreadystatechange=null,e)){"img"!=i&&_(function(){M.removeChild(l)},50);for(var t in S[n])S[n].hasOwnProperty(t)&&S[n][t].onload()}}var r=r||x.errorTimeout,l=h.createElement(i),d=0,u=0,c={t:e,s:n,e:a,a:s,x:r};1===S[n]&&(u=1,S[n]=[]),"object"==i?l.data=n:(l.src=n,l.type=i),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){o.call(this,u)},y.splice(t,0,c),"img"!=i&&(u||2===S[n]?(M.insertBefore(l,w?null:v),_(o,r)):S[n].push(l))}function t(e,t,i,n,a){return b=0,t=t||"j",f(e)?s("c"==t?o:r,e,t,this.i++,i,n,a):(y.splice(this.i++,0,e),1==y.length&&g()),this}function d(){var e=x;return e.loader={load:t,i:0},e}var i=h.documentElement,_=e.setTimeout,v=h.getElementsByTagName("script")[0],n={}.toString,y=[],b=0,a="MozAppearance"in i.style,w=a&&!!h.createRange().compareNode,M=w?i:v.parentNode,i=e.opera&&"[object Opera]"==n.call(e.opera),i=!!h.attachEvent&&!i,r=a?"object":i?"script":"img",o=i?"script":r,k=Array.isArray||function(e){return"[object Array]"==n.call(e)},L=[],S={},T={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},u,x;x=function(e){function o(e){var e=e.split("!"),t=L.length,i=e.pop(),n=e.length,i={url:i,origUrl:i,prefixes:e},a,s,r;for(s=0;s<n;s++)r=e[s].split("="),(a=T[r.shift()])&&(i=a(i,r));for(s=0;s<t;s++)i=L[s](i);return i}function u(e,t,i,n,a){var s=o(e),r=s.autoCallback;s.url.split(".").pop().split("?").shift(),s.bypass||(t&&(t=c(t)?t:t[e]||t[n]||t[e.split("/").pop().split("?")[0]]),s.instead?s.instead(e,t,i,n,a):(S[s.url]?s.noexec=!0:S[s.url]=1,i.load(s.url,s.forceCSS||!s.forceJS&&"css"==s.url.split(".").pop().split("?").shift()?"c":l,s.noexec,s.attrs,s.timeout),(c(t)||c(r))&&i.load(function(){d(),t&&t(s.origUrl,a,n),r&&r(s.origUrl,a,n),S[s.url]=2})))}function t(e,t){function i(i,e){if(i){if(f(i))e||(s=function(){var e=[].slice.call(arguments);r.apply(this,e),o()}),u(i,s,t,0,n);else if(Object(i)===i)for(d in l=function(){var e=0,t;for(t in i)i.hasOwnProperty(t)&&e++;return e}(),i)i.hasOwnProperty(d)&&(!e&&!--l&&(c(s)?s=function(){var e=[].slice.call(arguments);r.apply(this,e),o()}:s[d]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),o()}}(r[d])),u(i[d],s,t,d,n))}else!e&&o()}var n=!!e.test,a=e.load||e.both,s=e.callback||p,r=s,o=e.complete||p,l,d;i(n?e.yep:e.nope,!!a),a&&i(a)}var i,n,a=this.yepnope.loader;if(f(e))u(e,0,a,0);else if(k(e))for(i=0;i<e.length;i++)n=e[i],f(n)?u(n,0,a,0):k(n)?x(n):Object(n)===n&&t(n,a);else Object(e)===e&&t(e,a)},x.addPrefix=function(e,t){T[e]=t},x.addFilter=function(e){L.push(e)},x.errorTimeout=1e4,null==h.readyState&&h.addEventListener&&(h.readyState="loading",h.addEventListener("DOMContentLoaded",u=function(){h.removeEventListener("DOMContentLoaded",u,0),h.readyState="complete"},0)),e.yepnope=d(),e.yepnope.executeStack=g,e.yepnope.injectJs=function(e,t,i,n,a,s){var r=h.createElement("script"),o,l,n=n||x.errorTimeout;r.src=e;for(l in i)r.setAttribute(l,i[l]);t=s?g:t||p,r.onreadystatechange=r.onload=function(){!o&&m(r.readyState)&&(o=1,t(),r.onload=r.onreadystatechange=null)},_(function(){o||(o=1,t(1))},n),a?r.onload():v.parentNode.insertBefore(r,v)},e.yepnope.injectCss=function(e,t,i,n,a,s){var n=h.createElement("link"),r,t=s?g:t||p;n.href=e,n.rel="stylesheet",n.type="text/css";for(r in i)n.setAttribute(r,i[r]);a||(v.parentNode.insertBefore(n,v),_(t,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};(function(o,t,e){"use strict";var n=t.Modernizr,i=o("body");o.DLMenu=function(e,t){this.$el=o(t);this._init(e)};o.DLMenu.defaults={animationClasses:{classin:"dl-animate-in-1",classout:"dl-animate-out-1"},onLevelClick:function(e,t){return false},onLinkClick:function(e,t){return false}};o.DLMenu.prototype={_init:function(e){this.options=o.extend(true,{},o.DLMenu.defaults,e);this._config();var t={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.animEndEventName=t[n.prefixed("animation")]+".dlmenu";this.transEndEventName=i[n.prefixed("transition")]+".dlmenu",this.supportAnimations=n.cssanimations,this.supportTransitions=n.csstransitions;this._initEvents()},_config:function(){this.open=false;this.$trigger=this.$el.children(".dl-trigger");this.$menu=this.$el.children("ul.dl-menu");this.$menuitems=this.$menu.find("li:not(.dl-back)");this.$el.find("ul.dl-submenu").prepend('<li class="dl-back"><a href="#">back</a></li>');this.$back=this.$menu.find("li.dl-back")},_initEvents:function(){var r=this;this.$trigger.on("click.dlmenu",function(){if(r.open){r._closeMenu()}else{r._openMenu()}return false});this.$menuitems.on("click.dlmenu",function(e){e.stopPropagation();var t=o(this),i=t.children("ul.dl-submenu");if(i.length>0){var n=i.clone().css("opacity",0).insertAfter(r.$menu),a=function(){r.$menu.off(r.animEndEventName).removeClass(r.options.animationClasses.classout).addClass("dl-subview");t.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview");n.remove()};setTimeout(function(){n.addClass(r.options.animationClasses.classin);r.$menu.addClass(r.options.animationClasses.classout);if(r.supportAnimations){r.$menu.on(r.animEndEventName,a)}else{a.call()}r.options.onLevelClick(t,t.children("a:first").text())});return false}else{r.options.onLinkClick(t,e)}});this.$back.on("click.dlmenu",function(e){var t=o(this),i=t.parents("ul.dl-submenu:first"),n=i.parent(),a=i.clone().insertAfter(r.$menu);var s=function(){r.$menu.off(r.animEndEventName).removeClass(r.options.animationClasses.classin);a.remove()};setTimeout(function(){a.addClass(r.options.animationClasses.classout);r.$menu.addClass(r.options.animationClasses.classin);if(r.supportAnimations){r.$menu.on(r.animEndEventName,s)}else{s.call()}n.removeClass("dl-subviewopen");var e=t.parents(".dl-subview:first");if(e.is("li")){e.addClass("dl-subviewopen")}e.removeClass("dl-subview")});return false})},closeMenu:function(){if(this.open){this._closeMenu()}},_closeMenu:function(){var e=this,t=function(){e.$menu.off(e.transEndEventName);e._resetMenu()};this.$menu.removeClass("dl-menuopen");this.$menu.addClass("dl-menu-toggle");this.$trigger.removeClass("dl-active");if(this.supportTransitions){this.$menu.on(this.transEndEventName,t)}else{t.call()}this.open=false},openMenu:function(){if(!this.open){this._openMenu()}},_openMenu:function(){var e=this;i.off("click").on("click.dlmenu",function(){e._closeMenu()});this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName,function(){o(this).removeClass("dl-menu-toggle")});this.$trigger.addClass("dl-active");this.open=true},_resetMenu:function(){this.$menu.removeClass("dl-subview");this.$menuitems.removeClass("dl-subview dl-subviewopen")}};var a=function(e){if(t.console){t.console.error(e)}};o.fn.dlmenu=function(t){if(typeof t==="string"){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var e=o.data(this,"dlmenu");if(!e){a("cannot call methods on dlmenu prior to initialization; "+"attempted to call method '"+t+"'");return}if(!o.isFunction(e[t])||t.charAt(0)==="_"){a("no such method '"+t+"' for dlmenu instance");return}e[t].apply(e,i)})}else{this.each(function(){var e=o.data(this,"dlmenu");if(e){e._init()}else{e=o.data(this,"dlmenu",new o.DLMenu(t,this))}})}return this}})(jQuery,window);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(h){var t=/\+/g;function f(e){return _.raw?e:encodeURIComponent(e)}function p(e){return _.raw?e:decodeURIComponent(e)}function m(e){return f(_.json?JSON.stringify(e):String(e))}function n(e){if(e.indexOf('"')===0){e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{e=decodeURIComponent(e.replace(t," "));return _.json?JSON.parse(e):e}catch(e){}}function g(e,t){var i=_.raw?e:n(e);return h.isFunction(t)?t(i):i}var _=h.cookie=function(e,t,i){if(t!==undefined&&!h.isFunction(t)){i=h.extend({},_.defaults,i);if(typeof i.expires==="number"){var n=i.expires,a=i.expires=new Date;a.setTime(+a+n*864e5)}return document.cookie=[f(e),"=",m(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}var s=e?undefined:{};var r=document.cookie?document.cookie.split("; "):[];for(var o=0,l=r.length;o<l;o++){var d=r[o].split("=");var u=p(d.shift());var c=d.join("=");if(e&&e===u){s=g(c,t);break}if(!e&&(c=g(c))!==undefined){s[u]=c}}return s};_.defaults={};h.removeCookie=function(e,t){if(h.cookie(e)===undefined){return false}h.cookie(e,"",h.extend({},t,{expires:-1}));return!h.cookie(e)}});(function(l){l.browserTest=function(e,t){var s="unknown",r="X",o=function(e,t){for(var i=0;i<t.length;i=i+1){e=e.replace(t[i][0],t[i][1])}return e},i=function(e,t,i,n){var a={name:o((t.exec(e)||[s,s])[1],i)};a[a.name]=true;a.version=(n.exec(e)||[r,r,r,r])[3];if(a.name.match(/safari/)&&a.version>400){a.version="2.0"}if(a.name==="presto"){a.version=l.browser.version>9.27?"futhark":"linear_b"}a.versionNumber=parseFloat(a.version,10)||0;a.versionX=a.version!==r?(a.version+"").substr(0,1):r;a.className=a.name+a.versionX;return a};e=(e.match(/Opera|Navigator|Minefield|KHTML|Chrome/)?o(e,[[/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/,""],["Chrome Safari","Chrome"],["KHTML","Konqueror"],["Minefield","Firefox"],["Navigator","Netscape"]]):e).toLowerCase();l.browser=l.extend(!t?l.browser:{},i(e,/(camino|chrome|firefox|netscape|konqueror|lynx|msie|opera|safari)/,[],/(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/));l.layout=i(e,/(gecko|konqueror|msie|opera|webkit)/,[["konqueror","khtml"],["msie","trident"],["opera","presto"]],/(applewebkit|rv|konqueror|msie)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/);l.os={name:(/(win|mac|linux|sunos|solaris|iphone)/.exec(navigator.platform.toLowerCase())||[s])[0].replace("sunos","solaris")};if(!t){l("html").addClass([l.os.name,l.browser.name,l.browser.className,l.layout.name,l.layout.className].join(" "))}};l.browserTest(navigator.userAgent)})(jQuery);(function(c,e){var d=c.fn.domManip,u="_tmplitem",i=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,h={},f={},p,r={key:0,data:{}},m=0,g=0,s=[];function _(e,t,i,n){var a={data:n||(n===0||n===false)?n:t?t.data:{},_wrap:t?t._wrap:null,tmpl:null,parent:t||null,nodes:[],calls:w,nest:M,wrap:k,html:L,update:S};if(e){c.extend(a,e,{nodes:[],parent:t})}if(i){a.tmpl=i;a._ctnt=a._ctnt||a.tmpl(c,a);a.key=++m;(s.length?f:h)[m]=a}return a}c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,d){c.fn[l]=function(e){var t=[],i=c(e),n,a,s,r,o=this.length===1&&this[0].parentNode;p=h||{};if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1){i[d](this[0]);t=this}else{for(a=0,s=i.length;a<s;a++){g=a;n=(a>0?this.clone(true):this).get();c(i[a])[d](n);t=t.concat(n)}g=0;t=this.pushStack(t,l,i.selector)}r=p;p=null;c.tmpl.complete(r);return t}});c.fn.extend({tmpl:function(e,t,i){return c.tmpl(this[0],e,t,i)},tmplItem:function(){return c.tmplItem(this[0])},template:function(e){return c.template(e,this[0])},domManip:function(e,t,i,n){if(e[0]&&c.isArray(e[0])){var a=c.makeArray(arguments),s=e[0],r=s.length,o=0,l;while(o<r&&!(l=c.data(s[o++],"tmplItem"))){}if(l&&g){a[2]=function(e){c.tmpl.afterManip(this,e,i)}}d.apply(this,a)}else{d.apply(this,arguments)}g=0;if(!p){c.tmpl.complete(h)}return this}});c.extend({tmpl:function(t,e,i,n){var a,s=!n;if(s){n=r;t=c.template[t]||c.template(null,t);f={}}else if(!t){t=n.tmpl;h[n.key]=n;n.nodes=[];if(n.wrapped){v(n,n.wrapped)}return c(o(n,null,n.tmpl(c,n)))}if(!t){return[]}if(typeof e==="function"){e=e.call(n||{})}if(i&&i.wrapped){v(i,i.wrapped)}a=c.isArray(e)?c.map(e,function(e){return e?_(i,n,t,e):null}):[_(i,n,t,e)];return s?c(o(n,null,a)):a},tmplItem:function(e){var t;if(e instanceof c){e=e[0]}while(e&&e.nodeType===1&&!(t=c.data(e,"tmplItem"))&&(e=e.parentNode)){}return t||r},template:function(e,t){if(t){if(typeof t==="string"){t=n(t)}else if(t instanceof c){t=t[0]||{}}if(t.nodeType){t=c.data(t,"tmpl")||c.data(t,"tmpl",n(t.innerHTML))}return typeof e==="string"?c.template[e]=t:t}return e?typeof e!=="string"?c.template(null,e):c.template[e]||c.template(null,i.test(e)?e:c(e)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});c.extend(c.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(e){h={}},afterManip:function e(t,i,n){var a=i.nodeType===11?c.makeArray(i.childNodes):i.nodeType===1?[i]:[];n.call(t,i);b(a);g++}});function o(t,e,i){var a,n=i?c.map(i,function(e){return typeof e==="string"?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+u+'="'+t.key+'" $2'):e:o(e,t,e._ctnt)}):t;if(e){return n}n=n.join("");n.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(e,t,i,n){a=c(i).get();b(a);if(t){a=l(t).concat(a)}if(n){a=a.concat(l(n))}});return a?a:l(n)}function l(e){var t=document.createElement("div");t.innerHTML=e;return c.makeArray(t.childNodes)}function n(e){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;"+"with($data){__.push('"+c.trim(e).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(e,t,i,n,a,s,r){var o=c.tmpl.tag[i],l,d,u;if(!o){throw"Unknown template tag: "+i}l=o._default||[];if(s&&!/\w$/.test(a)){a+=s;s=""}if(a){a=y(a);r=r?","+y(r)+")":s?")":"";d=s?a.indexOf(".")>-1?a+y(s):"("+a+").call($item"+r:a;u=s?d:"(typeof("+a+")==='function'?("+a+").call($item):("+a+"))"}else{u=d=l.$1||"null"}n=y(n);return"');"+o[t?"close":"open"].split("$notnull_1").join(a?"typeof("+a+")!=='undefined' && ("+a+")!=null":"true").split("$1a").join(u).split("$1").join(d).split("$2").join(n||l.$2||"")+"__.push('"})+"');}return __;")}function v(e,t){e._wrap=o(e,true,c.isArray(t)?t:[i.test(t)?t:c(t).html()]).join("")}function y(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function a(e){var t=document.createElement("div");t.appendChild(e.cloneNode(true));return t.innerHTML}function b(e){var o="_"+g,t,i,l={},n,a,s;for(n=0,a=e.length;n<a;n++){if((t=e[n]).nodeType!==1){continue}i=t.getElementsByTagName("*");for(s=i.length-1;s>=0;s--){r(i[s])}r(t)}function r(e){var t,i=e,n,a,s;if(s=e.getAttribute(u)){while(i.parentNode&&(i=i.parentNode).nodeType===1&&!(t=i.getAttribute(u))){}if(t!==s){i=i.parentNode?i.nodeType===11?0:i.getAttribute(u)||0:0;if(!(a=h[s])){a=f[s];a=_(a,h[i]||f[i]);a.key=++m;h[m]=a}if(g){r(s)}}e.removeAttribute(u)}else if(g&&(a=c.data(e,"tmplItem"))){r(a.key);h[a.key]=a;i=c.data(e.parentNode,"tmplItem");i=i?i.key:0}if(a){n=a;while(n&&n.key!=i){n.nodes.push(e);n=n.parent}delete a._ctnt;delete a._wrap;c.data(e,"tmplItem",a)}function r(e){e=e+o;a=l[e]=l[e]||_(a,h[a.parent.key+o]||a.parent)}}}function w(e,t,i,n){if(!e){return s.pop()}s.push({_:e,tmpl:t,item:this,data:i,options:n})}function M(e,t,i){return c.tmpl(c.template(e),t,i,this)}function k(e,t){var i=e.options||{};i.wrapped=t;return c.tmpl(c.template(e.tmpl),e.data,i,e.item)}function L(e,t){var i=this._wrap;return c.map(c(c.isArray(i)?i.join(""):i).filter(e||"*"),function(e){return t?e.innerText||e.textContent:e.outerHTML||a(e)})}function S(){var e=this.nodes;c.tmpl(null,null,null,this).insertBefore(e[0]);c(e).remove()}})(jQuery);(function e(t,i){if(typeof exports==="object"&&typeof module==="object")module.exports=i();else if(typeof define==="function"&&define.amd)define([],i);else if(typeof exports==="object")exports["Handlebars"]=i();else t["Handlebars"]=i()})(this,function(){return function(i){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:false};i[e].call(t.exports,t,t.exports,a);t.loaded=true;return t.exports}a.m=i;a.c=n;a.p="";return a(0)}([function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;var a=i(2);var s=n(a);var r=i(35);var o=n(r);var l=i(36);var d=i(41);var u=i(42);var c=n(u);var h=i(39);var f=n(h);var p=i(34);var m=n(p);var g=s["default"].create;function _(){var i=g();i.compile=function(e,t){return d.compile(e,t,i)};i.precompile=function(e,t){return d.precompile(e,t,i)};i.AST=o["default"];i.Compiler=d.Compiler;i.JavaScriptCompiler=c["default"];i.Parser=l.parser;i.parse=l.parse;return i}var v=_();v.create=_;m["default"](v);v.Visitor=f["default"];v["default"]=v;t["default"]=v;e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=true},function(e,t,i){"use strict";var n=i(3)["default"];var a=i(1)["default"];t.__esModule=true;var s=i(4);var r=n(s);var o=i(21);var l=a(o);var d=i(6);var u=a(d);var c=i(5);var h=n(c);var f=i(22);var p=n(f);var m=i(34);var g=a(m);function _(){var t=new r.HandlebarsEnvironment;h.extend(t,r);t.SafeString=l["default"];t.Exception=u["default"];t.Utils=h;t.escapeExpression=h.escapeExpression;t.VM=p;t.template=function(e){return p.template(e,t)};return t}var v=_();v.create=_;g["default"](v);v["default"]=v;t["default"]=v;e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i))t[i]=e[i]}}t["default"]=e;return t}};t.__esModule=true},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;t.HandlebarsEnvironment=m;var a=i(5);var s=i(6);var r=n(s);var o=i(10);var l=i(18);var d=i(20);var u=n(d);var c="4.0.10";t.VERSION=c;var h=7;t.COMPILER_REVISION=h;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=f;var p="[object Object]";function m(e,t,i){this.helpers=e||{};this.partials=t||{};this.decorators=i||{};o.registerDefaultHelpers(this);l.registerDefaultDecorators(this)}m.prototype={constructor:m,logger:u["default"],log:u["default"].log,registerHelper:function e(t,i){if(a.toString.call(t)===p){if(i){throw new r["default"]("Arg not supported with multiple helpers")}a.extend(this.helpers,t)}else{this.helpers[t]=i}},unregisterHelper:function e(t){delete this.helpers[t]},registerPartial:function e(t,i){if(a.toString.call(t)===p){a.extend(this.partials,t)}else{if(typeof i==="undefined"){throw new r["default"]('Attempting to register a partial called "'+t+'" as undefined')}this.partials[t]=i}},unregisterPartial:function e(t){delete this.partials[t]},registerDecorator:function e(t,i){if(a.toString.call(t)===p){if(i){throw new r["default"]("Arg not supported with multiple decorators")}a.extend(this.decorators,t)}else{this.decorators[t]=i}},unregisterDecorator:function e(t){delete this.decorators[t]}};var g=u["default"].log;t.log=g;t.createFrame=a.createFrame;t.logger=u["default"]},function(e,t){"use strict";t.__esModule=true;t.extend=r;t.indexOf=u;t.escapeExpression=c;t.isEmpty=h;t.createFrame=f;t.blockParams=p;t.appendContextPath=m;var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"};var n=/[&<>"'`=]/g,a=/[&<>"'`=]/;function s(e){return i[e]}function r(e){for(var t=1;t<arguments.length;t++){for(var i in arguments[t]){if(Object.prototype.hasOwnProperty.call(arguments[t],i)){e[i]=arguments[t][i]}}}return e}var o=Object.prototype.toString;t.toString=o;var l=function e(t){return typeof t==="function"};if(l(/x/)){t.isFunction=l=function(e){return typeof e==="function"&&o.call(e)==="[object Function]"}}t.isFunction=l;var d=Array.isArray||function(e){return e&&typeof e==="object"?o.call(e)==="[object Array]":false};t.isArray=d;function u(e,t){for(var i=0,n=e.length;i<n;i++){if(e[i]===t){return i}}return-1}function c(e){if(typeof e!=="string"){if(e&&e.toHTML){return e.toHTML()}else if(e==null){return""}else if(!e){return e+""}e=""+e}if(!a.test(e)){return e}return e.replace(n,s)}function h(e){if(!e&&e!==0){return true}else if(d(e)&&e.length===0){return true}else{return false}}function f(e){var t=r({},e);t._parent=e;return t}function p(e,t){e.path=t;return e}function m(e,t){return(e?e+".":"")+t}},function(e,t,i){"use strict";var o=i(7)["default"];t.__esModule=true;var l=["description","fileName","lineNumber","message","name","number","stack"];function d(e,t){var i=t&&t.loc,n=undefined,a=undefined;if(i){n=i.start.line;a=i.start.column;e+=" - "+n+":"+a}var s=Error.prototype.constructor.call(this,e);for(var r=0;r<l.length;r++){this[l[r]]=s[l[r]]}if(Error.captureStackTrace){Error.captureStackTrace(this,d)}try{if(i){this.lineNumber=n;if(o){Object.defineProperty(this,"column",{value:a,enumerable:true})}else{this.column=a}}}catch(e){}}d.prototype=new Error;t["default"]=d;e.exports=t["default"]},function(e,t,i){e.exports={default:i(8),__esModule:true}},function(e,t,i){var a=i(9);e.exports=function e(t,i,n){return a.setDesc(t,i,n)}},function(e,t){var i=Object;e.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;t.registerDefaultHelpers=v;var a=i(11);var s=n(a);var r=i(12);var o=n(r);var l=i(13);var d=n(l);var u=i(14);var c=n(u);var h=i(15);var f=n(h);var p=i(16);var m=n(p);var g=i(17);var _=n(g);function v(e){s["default"](e);o["default"](e);d["default"](e);c["default"](e);f["default"](e);m["default"](e);_["default"](e)}},function(e,t,i){"use strict";t.__esModule=true;var r=i(5);t["default"]=function(s){s.registerHelper("blockHelperMissing",function(e,t){var i=t.inverse,n=t.fn;if(e===true){return n(this)}else if(e===false||e==null){return i(this)}else if(r.isArray(e)){if(e.length>0){if(t.ids){t.ids=[t.name]}return s.helpers.each(e,t)}else{return i(this)}}else{if(t.data&&t.ids){var a=r.createFrame(t.data);a.contextPath=r.appendContextPath(t.data.contextPath,t.name);t={data:a}}return n(e,t)}})};e.exports=t["default"]},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;var h=i(5);var a=i(6);var f=n(a);t["default"]=function(e){e.registerHelper("each",function(n,e){if(!e){throw new f["default"]("Must pass iterator to #each")}var a=e.fn,t=e.inverse,i=0,s="",r=undefined,o=undefined;if(e.data&&e.ids){o=h.appendContextPath(e.data.contextPath,e.ids[0])+"."}if(h.isFunction(n)){n=n.call(this)}if(e.data){r=h.createFrame(e.data)}function l(e,t,i){if(r){r.key=e;r.index=t;r.first=t===0;r.last=!!i;if(o){r.contextPath=o+e}}s=s+a(n[e],{data:r,blockParams:h.blockParams([n[e],e],[o+e,null])})}if(n&&typeof n==="object"){if(h.isArray(n)){for(var d=n.length;i<d;i++){if(i in n){l(i,i,i===n.length-1)}}}else{var u=undefined;for(var c in n){if(n.hasOwnProperty(c)){if(u!==undefined){l(u,i-1)}u=c;i++}}if(u!==undefined){l(u,i-1,true)}}}if(i===0){s=t(this)}return s})};e.exports=t["default"]},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;var a=i(6);var s=n(a);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(arguments.length===1){return undefined}else{throw new s["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}})};e.exports=t["default"]},function(e,t,i){"use strict";t.__esModule=true;var n=i(5);t["default"]=function(i){i.registerHelper("if",function(e,t){if(n.isFunction(e)){e=e.call(this)}if(!t.hash.includeZero&&!e||n.isEmpty(e)){return t.inverse(this)}else{return t.fn(this)}});i.registerHelper("unless",function(e,t){return i.helpers["if"].call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})};e.exports=t["default"]},function(e,t){"use strict";t.__esModule=true;t["default"]=function(a){a.registerHelper("log",function(){var e=[undefined],t=arguments[arguments.length-1];for(var i=0;i<arguments.length-1;i++){e.push(arguments[i])}var n=1;if(t.hash.level!=null){n=t.hash.level}else if(t.data&&t.data.level!=null){n=t.data.level}e[0]=n;a.log.apply(a,e)})};e.exports=t["default"]},function(e,t){"use strict";t.__esModule=true;t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})};e.exports=t["default"]},function(e,t,i){"use strict";t.__esModule=true;var a=i(5);t["default"]=function(e){e.registerHelper("with",function(e,t){if(a.isFunction(e)){e=e.call(this)}var i=t.fn;if(!a.isEmpty(e)){var n=t.data;if(t.data&&t.ids){n=a.createFrame(t.data);n.contextPath=a.appendContextPath(t.data.contextPath,t.ids[0])}return i(e,{data:n,blockParams:a.blockParams([e],[n&&n.contextPath])})}else{return t.inverse(this)}})};e.exports=t["default"]},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;t.registerDefaultDecorators=r;var a=i(19);var s=n(a);function r(e){s["default"](e)}},function(e,t,i){"use strict";t.__esModule=true;var o=i(5);t["default"]=function(e){e.registerDecorator("inline",function(a,s,r,e){var t=a;if(!s.partials){s.partials={};t=function(e,t){var i=r.partials;r.partials=o.extend({},i,s.partials);var n=a(e,t);r.partials=i;return n}}s.partials[e.args[0]]=e.fn;return t})};e.exports=t["default"]},function(e,t,i){"use strict";t.__esModule=true;var n=i(5);var r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function e(t){if(typeof t==="string"){var i=n.indexOf(r.methodMap,t.toLowerCase());if(i>=0){t=i}else{t=parseInt(t,10)}}return t},log:function e(t){t=r.lookupLevel(t);if(typeof console!=="undefined"&&r.lookupLevel(r.level)<=t){var i=r.methodMap[t];if(!console[i]){i="log"}for(var n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++){a[s-1]=arguments[s]}console[i].apply(console,a)}}};t["default"]=r;e.exports=t["default"]},function(e,t){"use strict";t.__esModule=true;function i(e){this.string=e}i.prototype.toString=i.prototype.toHTML=function(){return""+this.string};t["default"]=i;e.exports=t["default"]},function(e,t,i){"use strict";var n=i(23)["default"];var a=i(3)["default"];var s=i(1)["default"];t.__esModule=true;t.checkRevision=d;t.template=h;t.wrapProgram=f;t.resolvePartial=p;t.invokePartial=m;t.noop=g;var r=i(5);var u=a(r);var o=i(6);var c=s(o);var l=i(4);function d(e){var t=e&&e[0]||1,i=l.COMPILER_REVISION;if(t!==i){if(t<i){var n=l.REVISION_CHANGES[i],a=l.REVISION_CHANGES[t];throw new c["default"]("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+a+").")}else{throw new c["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+e[1]+").")}}}function h(o,l){if(!l){throw new c["default"]("No environment passed to template")}if(!o||!o.main){throw new c["default"]("Unknown template object: "+typeof o)}o.main.decorator=o.main_d;l.VM.checkRevision(o.compiler);function e(e,t,i){if(i.hash){t=u.extend({},t,i.hash);if(i.ids){i.ids[0]=true}}e=l.VM.resolvePartial.call(this,e,t,i);var n=l.VM.invokePartial.call(this,e,t,i);if(n==null&&l.compile){i.partials[i.name]=l.compile(e,o.compilerOptions,l);n=i.partials[i.name](t,i)}if(n!=null){if(i.indent){var a=n.split("\n");for(var s=0,r=a.length;s<r;s++){if(!a[s]&&s+1===r){break}a[s]=i.indent+a[s]}n=a.join("\n")}return n}else{throw new c["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}}var r={strict:function e(t,i){if(!(i in t)){throw new c["default"]('"'+i+'" not defined in '+t)}return t[i]},lookup:function e(t,i){var n=t.length;for(var a=0;a<n;a++){if(t[a]&&t[a][i]!=null){return t[a][i]}}},lambda:function e(t,i){return typeof t==="function"?t.call(i):t},escapeExpression:u.escapeExpression,invokePartial:e,fn:function e(t){var i=o[t];i.decorator=o[t+"_d"];return i},programs:[],program:function e(t,i,n,a,s){var r=this.programs[t],o=this.fn(t);if(i||s||a||n){r=f(this,t,o,i,n,a,s)}else if(!r){r=this.programs[t]=f(this,t,o)}return r},data:function e(t,i){while(t&&i--){t=t._parent}return t},merge:function e(t,i){var n=t||i;if(t&&i&&t!==i){n=u.extend({},i,t)}return n},nullContext:n({}),noop:l.VM.noop,compilerInfo:o.compiler};function d(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=t.data;d._setup(t);if(!t.partial&&o.useData){i=_(e,i)}var n=undefined,a=o.useBlockParams?[]:undefined;if(o.useDepths){if(t.depths){n=e!=t.depths[0]?[e].concat(t.depths):t.depths}else{n=[e]}}function s(e){return""+o.main(r,e,r.helpers,r.partials,i,a,n)}s=v(o.main,s,r,t.depths||[],i,a);return s(e,t)}d.isTop=true;d._setup=function(e){if(!e.partial){r.helpers=r.merge(e.helpers,l.helpers);if(o.usePartial){r.partials=r.merge(e.partials,l.partials)}if(o.usePartial||o.useDecorators){r.decorators=r.merge(e.decorators,l.decorators)}}else{r.helpers=e.helpers;r.partials=e.partials;r.decorators=e.decorators}};d._child=function(e,t,i,n){if(o.useBlockParams&&!i){throw new c["default"]("must pass block params")}if(o.useDepths&&!n){throw new c["default"]("must pass parent depths")}return f(r,e,o[e],t,0,i,n)};return d}function f(n,e,a,s,t,r,o){function i(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=o;if(o&&e!=o[0]&&!(e===n.nullContext&&o[0]===null)){i=[e].concat(o)}return a(n,e,n.helpers,n.partials,t.data||s,r&&[t.blockParams].concat(r),i)}i=v(a,i,n,o,s,r);i.program=e;i.depth=o?o.length:0;i.blockParams=t||0;return i}function p(e,t,i){if(!e){if(i.name==="@partial-block"){e=i.data["partial-block"]}else{e=i.partials[i.name]}}else if(!e.call&&!i.name){i.name=e;e=i.partials[e]}return e}function m(e,t,i){var a=i.data&&i.data["partial-block"];i.partial=true;if(i.ids){i.data.contextPath=i.ids[0]||i.data.contextPath}var s=undefined;if(i.fn&&i.fn!==g){(function(){i.data=l.createFrame(i.data);var n=i.fn;s=i.data["partial-block"]=function e(t){var i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];i.data=l.createFrame(i.data);i.data["partial-block"]=a;return n(t,i)};if(n.partials){i.partials=u.extend({},i.partials,n.partials)}})()}if(e===undefined&&s){e=s}if(e===undefined){throw new c["default"]("The partial "+i.name+" could not be found")}else if(e instanceof Function){return e(t,i)}}function g(){return""}function _(e,t){if(!t||!("root"in t)){t=t?l.createFrame(t):{};t.root=e}return t}function v(e,t,i,n,a,s){if(e.decorator){var r={};t=e.decorator(t,r,i,n&&n[0],a,s,n);u.extend(t,r)}return t}},function(e,t,i){e.exports={default:i(24),__esModule:true}},function(e,t,i){i(25);e.exports=i(30).Object.seal},function(e,t,i){var n=i(26);i(27)("seal",function(i){return function e(t){return i&&n(t)?i(t):t}})},function(e,t){e.exports=function(e){return typeof e==="object"?e!==null:typeof e==="function"}},function(e,t,i){var a=i(28),s=i(30),r=i(33);e.exports=function(e,t){var i=(s.Object||{})[e]||Object[e],n={};n[e]=t(i);a(a.S+a.F*r(function(){i(1)}),"Object",n)}},function(e,t,i){var p=i(29),m=i(30),g=i(31),_="prototype";var v=function(e,t,i){var n=e&v.F,a=e&v.G,s=e&v.S,r=e&v.P,o=e&v.B,l=e&v.W,d=a?m:m[t]||(m[t]={}),u=a?p:s?p[t]:(p[t]||{})[_],c,h,f;if(a)i=t;for(c in i){h=!n&&u&&c in u;if(h&&c in d)continue;f=h?u[c]:i[c];d[c]=a&&typeof u[c]!="function"?i[c]:o&&h?g(f,p):l&&u[c]==f?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};e[_]=t[_];return e}(f):r&&typeof f=="function"?g(Function.call,f):f;if(r)(d[_]||(d[_]={}))[c]=f}};v.F=1;v.G=2;v.S=4;v.P=8;v.B=16;v.W=32;e.exports=v},function(e,t){var i=e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=i},function(e,t){var i=e.exports={version:"1.2.6"};if(typeof __e=="number")__e=i},function(e,t,i){var s=i(32);e.exports=function(n,a,e){s(n);if(a===undefined)return n;switch(e){case 1:return function(e){return n.call(a,e)};case 2:return function(e,t){return n.call(a,e,t)};case 3:return function(e,t,i){return n.call(a,e,t,i)}}return function(){return n.apply(a,arguments)}}},function(e,t){e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},function(e,t){(function(n){"use strict";t.__esModule=true;t["default"]=function(e){var t=typeof n!=="undefined"?n:window,i=t.Handlebars;e.noConflict=function(){if(t.Handlebars===e){t.Handlebars=i}return e}};e.exports=t["default"]}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=true;var i={helpers:{helperExpression:function e(t){return t.type==="SubExpression"||(t.type==="MustacheStatement"||t.type==="BlockStatement")&&!!(t.params&&t.params.length||t.hash)},scopedId:function e(t){return/^\.|this\b/.test(t.original)},simpleId:function e(t){return t.parts.length===1&&!i.helpers.scopedId(t)&&!t.depth}}};t["default"]=i;e.exports=t["default"]},function(e,t,i){"use strict";var n=i(1)["default"];var a=i(3)["default"];t.__esModule=true;t.parse=f;var s=i(37);var r=n(s);var o=i(38);var l=n(o);var d=i(40);var u=a(d);var c=i(5);t.parser=r["default"];var h={};c.extend(h,u);function f(e,t){if(e.type==="Program"){return e}r["default"].yy=h;h.locInfo=function(e){return new h.SourceLocation(t&&t.srcName,e)};var i=new l["default"](t);return i.accept(r["default"].parse(e))}},function(e,t){"use strict";t.__esModule=true;var i=function(){var e={trace:function e(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function e(t,i,n,a,s,r,o){var l=r.length-1;switch(s){case 1:return r[l-1];break;case 2:this.$=a.prepareProgram(r[l]);break;case 3:this.$=r[l];break;case 4:this.$=r[l];break;case 5:this.$=r[l];break;case 6:this.$=r[l];break;case 7:this.$=r[l];break;case 8:this.$=r[l];break;case 9:this.$={type:"CommentStatement",value:a.stripComment(r[l]),strip:a.stripFlags(r[l],r[l]),loc:a.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:r[l],value:r[l],loc:a.locInfo(this._$)};break;case 11:this.$=a.prepareRawBlock(r[l-2],r[l-1],r[l],this._$);break;case 12:this.$={path:r[l-3],params:r[l-2],hash:r[l-1]};break;case 13:this.$=a.prepareBlock(r[l-3],r[l-2],r[l-1],r[l],false,this._$);break;case 14:this.$=a.prepareBlock(r[l-3],r[l-2],r[l-1],r[l],true,this._$);break;case 15:this.$={open:r[l-5],path:r[l-4],params:r[l-3],hash:r[l-2],blockParams:r[l-1],strip:a.stripFlags(r[l-5],r[l])};break;case 16:this.$={path:r[l-4],params:r[l-3],hash:r[l-2],blockParams:r[l-1],strip:a.stripFlags(r[l-5],r[l])};break;case 17:this.$={path:r[l-4],params:r[l-3],hash:r[l-2],blockParams:r[l-1],strip:a.stripFlags(r[l-5],r[l])};break;case 18:this.$={strip:a.stripFlags(r[l-1],r[l-1]),program:r[l]};break;case 19:var d=a.prepareBlock(r[l-2],r[l-1],r[l],r[l],false,this._$),u=a.prepareProgram([d],r[l-1].loc);u.chained=true;this.$={strip:r[l-2].strip,program:u,chain:true};break;case 20:this.$=r[l];break;case 21:this.$={path:r[l-1],strip:a.stripFlags(r[l-2],r[l])};break;case 22:this.$=a.prepareMustache(r[l-3],r[l-2],r[l-1],r[l-4],a.stripFlags(r[l-4],r[l]),this._$);break;case 23:this.$=a.prepareMustache(r[l-3],r[l-2],r[l-1],r[l-4],a.stripFlags(r[l-4],r[l]),this._$);break;case 24:this.$={type:"PartialStatement",name:r[l-3],params:r[l-2],hash:r[l-1],indent:"",strip:a.stripFlags(r[l-4],r[l]),loc:a.locInfo(this._$)};break;case 25:this.$=a.preparePartialBlock(r[l-2],r[l-1],r[l],this._$);break;case 26:this.$={path:r[l-3],params:r[l-2],hash:r[l-1],strip:a.stripFlags(r[l-4],r[l])};break;case 27:this.$=r[l];break;case 28:this.$=r[l];break;case 29:this.$={type:"SubExpression",path:r[l-3],params:r[l-2],hash:r[l-1],loc:a.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:r[l],loc:a.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:a.id(r[l-2]),value:r[l],loc:a.locInfo(this._$)};break;case 32:this.$=a.id(r[l-1]);break;case 33:this.$=r[l];break;case 34:this.$=r[l];break;case 35:this.$={type:"StringLiteral",value:r[l],original:r[l],loc:a.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(r[l]),original:Number(r[l]),loc:a.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:r[l]==="true",original:r[l]==="true",loc:a.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:undefined,value:undefined,loc:a.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:a.locInfo(this._$)};break;case 40:this.$=r[l];break;case 41:this.$=r[l];break;case 42:this.$=a.preparePath(true,r[l],this._$);break;case 43:this.$=a.preparePath(false,r[l],this._$);break;case 44:r[l-2].push({part:a.id(r[l]),original:r[l],separator:r[l-1]});this.$=r[l-2];break;case 45:this.$=[{part:a.id(r[l]),original:r[l]}];break;case 46:this.$=[];break;case 47:r[l-1].push(r[l]);break;case 48:this.$=[r[l]];break;case 49:r[l-1].push(r[l]);break;case 50:this.$=[];break;case 51:r[l-1].push(r[l]);break;case 58:this.$=[];break;case 59:r[l-1].push(r[l]);break;case 64:this.$=[];break;case 65:r[l-1].push(r[l]);break;case 70:this.$=[];break;case 71:r[l-1].push(r[l]);break;case 78:this.$=[];break;case 79:r[l-1].push(r[l]);break;case 82:this.$=[];break;case 83:r[l-1].push(r[l]);break;case 86:this.$=[];break;case 87:r[l-1].push(r[l]);break;case 90:this.$=[];break;case 91:r[l-1].push(r[l]);break;case 94:this.$=[];break;case 95:r[l-1].push(r[l]);break;case 98:this.$=[r[l]];break;case 99:r[l-1].push(r[l]);break;case 100:this.$=[r[l]];break;case 101:r[l-1].push(r[l]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function e(t,i){throw new Error(t)},parse:function e(t){var i=this,n=[0],a=[null],s=[],r=this.table,o="",l=0,d=0,u=0,c=2,h=1;this.lexer.setInput(t);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var f=this.lexer.yylloc;s.push(f);var p=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function m(e){n.length=n.length-2*e;a.length=a.length-e;s.length=s.length-e}function g(){var e;e=i.lexer.lex()||1;if(typeof e!=="number"){e=i.symbols_[e]||e}return e}var _,v,y,b,w,M,k={},L,S,T,x;while(true){y=n[n.length-1];if(this.defaultActions[y]){b=this.defaultActions[y]}else{if(_===null||typeof _=="undefined"){_=g()}b=r[y]&&r[y][_]}if(typeof b==="undefined"||!b.length||!b[0]){var D="";if(!u){x=[];for(L in r[y])if(this.terminals_[L]&&L>2){x.push("'"+this.terminals_[L]+"'")}if(this.lexer.showPosition){D="Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[_]||_)+"'"}else{D="Parse error on line "+(l+1)+": Unexpected "+(_==1?"end of input":"'"+(this.terminals_[_]||_)+"'")}this.parseError(D,{text:this.lexer.match,token:this.terminals_[_]||_,line:this.lexer.yylineno,loc:f,expected:x})}}if(b[0]instanceof Array&&b.length>1){throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+_)}switch(b[0]){case 1:n.push(_);a.push(this.lexer.yytext);s.push(this.lexer.yylloc);n.push(b[1]);_=null;if(!v){d=this.lexer.yyleng;o=this.lexer.yytext;l=this.lexer.yylineno;f=this.lexer.yylloc;if(u>0)u--}else{_=v;v=null}break;case 2:S=this.productions_[b[1]][1];k.$=a[a.length-S];k._$={first_line:s[s.length-(S||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(S||1)].first_column,last_column:s[s.length-1].last_column};if(p){k._$.range=[s[s.length-(S||1)].range[0],s[s.length-1].range[1]]}M=this.performAction.call(k,o,d,l,this.yy,b[1],a,s);if(typeof M!=="undefined"){return M}if(S){n=n.slice(0,-1*S*2);a=a.slice(0,-1*S);s=s.slice(0,-1*S)}n.push(this.productions_[b[1]][0]);a.push(k.$);s.push(k._$);T=r[n[n.length-2]][n[n.length-1]];n.push(T);break;case 3:return true}}return true}};var t=function(){var e={EOF:1,parseError:function e(t,i){if(this.yy.parser){this.yy.parser.parseError(t,i)}else{throw new Error(t)}},setInput:function e(t){this._input=t;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function e(){var t=this._input[0];this.yytext+=t;this.yyleng++;this.offset++;this.match+=t;this.matched+=t;var i=t.match(/(?:\r\n?|\n).*/g);if(i){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return t},unput:function e(t){var i=t.length;var n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-i-1);this.offset-=i;var a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(n.length-1)this.yylineno-=n.length-1;var s=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===a.length?this.yylloc.first_column:0)+a[a.length-n.length].length-n[0].length:this.yylloc.first_column-i};if(this.options.ranges){this.yylloc.range=[s[0],s[0]+this.yyleng-i]}return this},more:function e(){this._more=true;return this},less:function e(t){this.unput(this.match.slice(t))},pastInput:function e(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function e(){var t=this.match;if(t.length<20){t+=this._input.substr(0,20-t.length)}return(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function e(){var t=this.pastInput();var i=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+i+"^"},next:function e(){if(this.done){return this.EOF}if(!this._input)this.done=true;var t,i,n,a,s,r;if(!this._more){this.yytext="";this.match=""}var o=this._currentRules();for(var l=0;l<o.length;l++){n=this._input.match(this.rules[o[l]]);if(n&&(!i||n[0].length>i[0].length)){i=n;a=l;if(!this.options.flex)break}}if(i){r=i[0].match(/(?:\r\n?|\n).*/g);if(r)this.yylineno+=r.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+i[0].length};this.yytext+=i[0];this.match+=i[0];this.matches=i;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(i[0].length);this.matched+=i[0];t=this.performAction.call(this,this.yy,this,o[a],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(t)return t;else return}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function e(){var t=this.next();if(typeof t!=="undefined"){return t}else{return this.lex()}},begin:function e(t){this.conditionStack.push(t)},popState:function e(){return this.conditionStack.pop()},_currentRules:function e(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function e(){return this.conditionStack[this.conditionStack.length-2]},pushState:function e(t){this.begin(t)}};e.options={};e.performAction=function e(t,i,n,a){function s(e,t){return i.yytext=i.yytext.substr(e,i.yyleng-t)}var r=a;switch(n){case 0:if(i.yytext.slice(-2)==="\\\\"){s(0,1);this.begin("mu")}else if(i.yytext.slice(-1)==="\\"){s(0,1);this.begin("emu")}else{this.begin("mu")}if(i.yytext)return 15;break;case 1:return 15;break;case 2:this.popState();return 15;break;case 3:this.begin("raw");return 15;break;case 4:this.popState();if(this.conditionStack[this.conditionStack.length-1]==="raw"){return 15}else{i.yytext=i.yytext.substr(5,i.yyleng-9);return"END_RAW_BLOCK"}break;case 5:return 15;break;case 6:this.popState();return 14;break;case 7:return 65;break;case 8:return 68;break;case 9:return 19;break;case 10:this.popState();this.begin("raw");return 23;break;case 11:return 55;break;case 12:return 60;break;case 13:return 29;break;case 14:return 47;break;case 15:this.popState();return 44;break;case 16:this.popState();return 44;break;case 17:return 34;break;case 18:return 39;break;case 19:return 51;break;case 20:return 48;break;case 21:this.unput(i.yytext);this.popState();this.begin("com");break;case 22:this.popState();return 14;break;case 23:return 48;break;case 24:return 73;break;case 25:return 72;break;case 26:return 72;break;case 27:return 87;break;case 28:break;case 29:this.popState();return 54;break;case 30:this.popState();return 33;break;case 31:i.yytext=s(1,2).replace(/\\"/g,'"');return 80;break;case 32:i.yytext=s(1,2).replace(/\\'/g,"'");return 80;break;case 33:return 85;break;case 34:return 82;break;case 35:return 82;break;case 36:return 83;break;case 37:return 84;break;case 38:return 81;break;case 39:return 75;break;case 40:return 77;break;case 41:return 72;break;case 42:i.yytext=i.yytext.replace(/\\([\\\]])/g,"$1");return 72;break;case 43:return"INVALID";break;case 44:return 5;break}};e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/];e.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[6],inclusive:false},raw:{rules:[3,4,5],inclusive:false},INITIAL:{rules:[0,1,44],inclusive:true}};return e}();e.lexer=t;function i(){this.yy={}}i.prototype=e;e.Parser=i;return new i}();t["default"]=i;e.exports=t["default"]},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;var a=i(39);var s=n(a);function r(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.options=e}r.prototype=new s["default"];r.prototype.Program=function(e){var t=!this.options.ignoreStandalone;var i=!this.isRootSeen;this.isRootSeen=true;var n=e.body;for(var a=0,s=n.length;a<s;a++){var r=n[a],o=this.accept(r);if(!o){continue}var l=f(n,a,i),d=p(n,a,i),u=o.openStandalone&&l,c=o.closeStandalone&&d,h=o.inlineStandalone&&l&&d;if(o.close){m(n,a,true)}if(o.open){g(n,a,true)}if(t&&h){m(n,a);if(g(n,a)){if(r.type==="PartialStatement"){r.indent=/([ \t]+$)/.exec(n[a-1].original)[1]}}}if(t&&u){m((r.program||r.inverse).body);g(n,a)}if(t&&c){m(n,a);g((r.inverse||r.program).body)}}return e};r.prototype.BlockStatement=r.prototype.DecoratorBlock=r.prototype.PartialBlockStatement=function(e){this.accept(e.program);this.accept(e.inverse);var t=e.program||e.inverse,i=e.program&&e.inverse,n=i,a=i;if(i&&i.chained){n=i.body[0].program;while(a.chained){a=a.body[a.body.length-1].program}}var s={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:p(t.body),closeStandalone:f((n||t).body)};if(e.openStrip.close){m(t.body,null,true)}if(i){var r=e.inverseStrip;if(r.open){g(t.body,null,true)}if(r.close){m(n.body,null,true)}if(e.closeStrip.open){g(a.body,null,true)}if(!this.options.ignoreStandalone&&f(t.body)&&p(n.body)){g(t.body);m(n.body)}}else if(e.closeStrip.open){g(t.body,null,true)}return s};r.prototype.Decorator=r.prototype.MustacheStatement=function(e){return e.strip};r.prototype.PartialStatement=r.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:true,open:t.open,close:t.close}};function f(e,t,i){if(t===undefined){t=e.length}var n=e[t-1],a=e[t-2];if(!n){return i}if(n.type==="ContentStatement"){return(a||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original)}}function p(e,t,i){if(t===undefined){t=-1}var n=e[t+1],a=e[t+2];if(!n){return i}if(n.type==="ContentStatement"){return(a||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original)}}function m(e,t,i){var n=e[t==null?0:t+1];if(!n||n.type!=="ContentStatement"||!i&&n.rightStripped){return}var a=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,"");n.rightStripped=n.value!==a}function g(e,t,i){var n=e[t==null?e.length-1:t-1];if(!n||n.type!=="ContentStatement"||!i&&n.leftStripped){return}var a=n.value;n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,"");n.leftStripped=n.value!==a;return n.leftStripped}t["default"]=r;e.exports=t["default"]},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;var a=i(6);var s=n(a);function r(){this.parents=[]}r.prototype={constructor:r,mutating:false,acceptKey:function e(t,i){var n=this.accept(t[i]);if(this.mutating){if(n&&!r.prototype[n.type]){throw new s["default"]('Unexpected node type "'+n.type+'" found when accepting '+i+" on "+t.type)}t[i]=n}},acceptRequired:function e(t,i){this.acceptKey(t,i);if(!t[i]){throw new s["default"](t.type+" requires "+i)}},acceptArray:function e(t){for(var i=0,n=t.length;i<n;i++){this.acceptKey(t,i);if(!t[i]){t.splice(i,1);i--;n--}}},accept:function e(t){if(!t){return}if(!this[t.type]){throw new s["default"]("Unknown type: "+t.type,t)}if(this.current){this.parents.unshift(this.current)}this.current=t;var i=this[t.type](t);this.current=this.parents.shift();if(!this.mutating||i){return i}else if(i!==false){return t}},Program:function e(t){this.acceptArray(t.body)},MustacheStatement:o,Decorator:o,BlockStatement:l,DecoratorBlock:l,PartialStatement:d,PartialBlockStatement:function e(t){d.call(this,t);this.acceptKey(t,"program")},ContentStatement:function e(){},CommentStatement:function e(){},SubExpression:o,PathExpression:function e(){},StringLiteral:function e(){},NumberLiteral:function e(){},BooleanLiteral:function e(){},UndefinedLiteral:function e(){},NullLiteral:function e(){},Hash:function e(t){this.acceptArray(t.pairs)},HashPair:function e(t){this.acceptRequired(t,"value")}};function o(e){this.acceptRequired(e,"path");this.acceptArray(e.params);this.acceptKey(e,"hash")}function l(e){o.call(this,e);this.acceptKey(e,"program");this.acceptKey(e,"inverse")}function d(e){this.acceptRequired(e,"name");this.acceptArray(e.params);this.acceptKey(e,"hash")}t["default"]=r;e.exports=t["default"]},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;t.SourceLocation=s;t.id=r;t.stripFlags=o;t.stripComment=l;t.preparePath=u;t.prepareMustache=h;t.prepareRawBlock=f;t.prepareBlock=p;t.prepareProgram=m;t.preparePartialBlock=g;var a=i(6);var c=n(a);function d(e,t){t=t.path?t.path.original:t;if(e.path.original!==t){var i={loc:e.path.loc};throw new c["default"](e.path.original+" doesn't match "+t,i)}}function s(e,t){this.source=e;this.start={line:t.first_line,column:t.first_column};this.end={line:t.last_line,column:t.last_column}}function r(e){if(/^\[.*\]$/.test(e)){return e.substr(1,e.length-2)}else{return e}}function o(e,t){return{open:e.charAt(2)==="~",close:t.charAt(t.length-3)==="~"}}function l(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function u(e,t,i){i=this.locInfo(i);var n=e?"@":"",a=[],s=0,r="";for(var o=0,l=t.length;o<l;o++){var d=t[o].part,u=t[o].original!==d;n+=(t[o].separator||"")+d;if(!u&&(d===".."||d==="."||d==="this")){if(a.length>0){throw new c["default"]("Invalid path: "+n,{loc:i})}else if(d===".."){s++;r+="../"}}else{a.push(d)}}return{type:"PathExpression",data:e,depth:s,parts:a,original:n,loc:i}}function h(e,t,i,n,a,s){var r=n.charAt(3)||n.charAt(2),o=r!=="{"&&r!=="&";var l=/\*/.test(n);return{type:l?"Decorator":"MustacheStatement",path:e,params:t,hash:i,escaped:o,strip:a,loc:this.locInfo(s)}}function f(e,t,i,n){d(e,i);n=this.locInfo(n);var a={type:"Program",body:t,strip:{},loc:n};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:a,openStrip:{},inverseStrip:{},closeStrip:{},loc:n}}function p(e,t,i,n,a,s){if(n&&n.path){d(e,n)}var r=/\*/.test(e.open);t.blockParams=e.blockParams;var o=undefined,l=undefined;if(i){if(r){throw new c["default"]("Unexpected inverse block on decorator",i)}if(i.chain){i.program.body[0].closeStrip=n.strip}l=i.strip;o=i.program}if(a){a=o;o=t;t=a}return{type:r?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:o,openStrip:e.strip,inverseStrip:l,closeStrip:n&&n.strip,loc:this.locInfo(s)}}function m(e,t){if(!t&&e.length){var i=e[0].loc,n=e[e.length-1].loc;if(i&&n){t={source:i.source,start:{line:i.start.line,column:i.start.column},end:{line:n.end.line,column:n.end.column}}}}return{type:"Program",body:e,strip:{},loc:t}}function g(e,t,i,n){d(e,i);return{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:i&&i.strip,loc:this.locInfo(n)}}},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;t.Compiler=o;t.precompile=c;t.compile=h;var a=i(6);var l=n(a);var d=i(5);var s=i(35);var u=n(s);var r=[].slice;function o(){}o.prototype={compiler:o,equals:function e(t){var i=this.opcodes.length;if(t.opcodes.length!==i){return false}for(var n=0;n<i;n++){var a=this.opcodes[n],s=t.opcodes[n];if(a.opcode!==s.opcode||!f(a.args,s.args)){return false}}i=this.children.length;for(var n=0;n<i;n++){if(!this.children[n].equals(t.children[n])){return false}}return true},guid:0,compile:function e(t,i){this.sourceNode=[];this.opcodes=[];this.children=[];this.options=i;this.stringParams=i.stringParams;this.trackIds=i.trackIds;i.blockParams=i.blockParams||[];var n=i.knownHelpers;i.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,if:true,unless:true,with:true,log:true,lookup:true};if(n){for(var a in n){if(a in n){this.options.knownHelpers[a]=n[a]}}}return this.accept(t)},compileProgram:function e(t){var i=new this.compiler,n=i.compile(t,this.options),a=this.guid++;this.usePartial=this.usePartial||n.usePartial;this.children[a]=n;this.useDepths=this.useDepths||n.useDepths;return a},accept:function e(t){if(!this[t.type]){throw new l["default"]("Unknown type: "+t.type,t)}this.sourceNode.unshift(t);var i=this[t.type](t);this.sourceNode.shift();return i},Program:function e(t){this.options.blockParams.unshift(t.blockParams);var i=t.body,n=i.length;for(var a=0;a<n;a++){this.accept(i[a])}this.options.blockParams.shift();this.isSimple=n===1;this.blockParams=t.blockParams?t.blockParams.length:0;return this},BlockStatement:function e(t){p(t);var i=t.program,n=t.inverse;i=i&&this.compileProgram(i);n=n&&this.compileProgram(n);var a=this.classifySexpr(t);if(a==="helper"){this.helperSexpr(t,i,n)}else if(a==="simple"){this.simpleSexpr(t);this.opcode("pushProgram",i);this.opcode("pushProgram",n);this.opcode("emptyHash");this.opcode("blockValue",t.path.original)}else{this.ambiguousSexpr(t,i,n);this.opcode("pushProgram",i);this.opcode("pushProgram",n);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},DecoratorBlock:function e(t){var i=t.program&&this.compileProgram(t.program);var n=this.setupFullMustacheParams(t,i,undefined),a=t.path;this.useDecorators=true;this.opcode("registerDecorator",n.length,a.original)},PartialStatement:function e(t){this.usePartial=true;var i=t.program;if(i){i=this.compileProgram(t.program)}var n=t.params;if(n.length>1){throw new l["default"]("Unsupported number of partial arguments: "+n.length,t)}else if(!n.length){if(this.options.explicitPartialContext){this.opcode("pushLiteral","undefined")}else{n.push({type:"PathExpression",parts:[],depth:0})}}var a=t.name.original,s=t.name.type==="SubExpression";if(s){this.accept(t.name)}this.setupFullMustacheParams(t,i,undefined,true);var r=t.indent||"";if(this.options.preventIndent&&r){this.opcode("appendContent",r);r=""}this.opcode("invokePartial",s,a,r);this.opcode("append")},PartialBlockStatement:function e(t){this.PartialStatement(t)},MustacheStatement:function e(t){this.SubExpression(t);if(t.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},Decorator:function e(t){this.DecoratorBlock(t)},ContentStatement:function e(t){if(t.value){this.opcode("appendContent",t.value)}},CommentStatement:function e(){},SubExpression:function e(t){p(t);var i=this.classifySexpr(t);if(i==="simple"){this.simpleSexpr(t)}else if(i==="helper"){this.helperSexpr(t)}else{this.ambiguousSexpr(t)}},ambiguousSexpr:function e(t,i,n){var a=t.path,s=a.parts[0],r=i!=null||n!=null;this.opcode("getContext",a.depth);this.opcode("pushProgram",i);this.opcode("pushProgram",n);a.strict=true;this.accept(a);this.opcode("invokeAmbiguous",s,r)},simpleSexpr:function e(t){var i=t.path;i.strict=true;this.accept(i);this.opcode("resolvePossibleLambda")},helperSexpr:function e(t,i,n){var a=this.setupFullMustacheParams(t,i,n),s=t.path,r=s.parts[0];if(this.options.knownHelpers[r]){this.opcode("invokeKnownHelper",a.length,r)}else if(this.options.knownHelpersOnly){throw new l["default"]("You specified knownHelpersOnly, but used the unknown helper "+r,t)}else{s.strict=true;s.falsy=true;this.accept(s);this.opcode("invokeHelper",a.length,s.original,u["default"].helpers.simpleId(s))}},PathExpression:function e(t){this.addDepth(t.depth);this.opcode("getContext",t.depth);var i=t.parts[0],n=u["default"].helpers.scopedId(t),a=!t.depth&&!n&&this.blockParamIndex(i);if(a){this.opcode("lookupBlockParam",a,t.parts)}else if(!i){this.opcode("pushContext")}else if(t.data){this.options.data=true;this.opcode("lookupData",t.depth,t.parts,t.strict)}else{this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,n)}},StringLiteral:function e(t){this.opcode("pushString",t.value)},NumberLiteral:function e(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function e(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function e(){this.opcode("pushLiteral","undefined")},NullLiteral:function e(){this.opcode("pushLiteral","null")},Hash:function e(t){var i=t.pairs,n=0,a=i.length;this.opcode("pushHash");for(;n<a;n++){this.pushParam(i[n].value)}while(n--){this.opcode("assignToHash",i[n].key)}this.opcode("popHash")},opcode:function e(t){this.opcodes.push({opcode:t,args:r.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function e(t){if(!t){return}this.useDepths=true},classifySexpr:function e(t){var i=u["default"].helpers.simpleId(t.path);var n=i&&!!this.blockParamIndex(t.path.parts[0]);var a=!n&&u["default"].helpers.helperExpression(t);var s=!n&&(a||i);if(s&&!a){var r=t.path.parts[0],o=this.options;if(o.knownHelpers[r]){a=true}else if(o.knownHelpersOnly){s=false}}if(a){return"helper"}else if(s){return"ambiguous"}else{return"simple"}},pushParams:function e(t){for(var i=0,n=t.length;i<n;i++){this.pushParam(t[i])}},pushParam:function e(t){var i=t.value!=null?t.value:t.original||"";if(this.stringParams){if(i.replace){i=i.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")}if(t.depth){this.addDepth(t.depth)}this.opcode("getContext",t.depth||0);this.opcode("pushStringParam",i,t.type);if(t.type==="SubExpression"){this.accept(t)}}else{if(this.trackIds){var n=undefined;if(t.parts&&!u["default"].helpers.scopedId(t)&&!t.depth){n=this.blockParamIndex(t.parts[0])}if(n){var a=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,a)}else{i=t.original||i;if(i.replace){i=i.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")}this.opcode("pushId",t.type,i)}}this.accept(t)}},setupFullMustacheParams:function e(t,i,n,a){var s=t.params;this.pushParams(s);this.opcode("pushProgram",i);this.opcode("pushProgram",n);if(t.hash){this.accept(t.hash)}else{this.opcode("emptyHash",a)}return s},blockParamIndex:function e(t){for(var i=0,n=this.options.blockParams.length;i<n;i++){var a=this.options.blockParams[i],s=a&&d.indexOf(a,t);if(a&&s>=0){return[i,s]}}}};function c(e,t,i){if(e==null||typeof e!=="string"&&e.type!=="Program"){throw new l["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e)}t=t||{};if(!("data"in t)){t.data=true}if(t.compat){t.useDepths=true}var n=i.parse(e,t),a=(new i.Compiler).compile(n,t);return(new i.JavaScriptCompiler).compile(a,t)}function h(n,a,s){if(a===undefined)a={};if(n==null||typeof n!=="string"&&n.type!=="Program"){throw new l["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n)}a=d.extend({},a);if(!("data"in a)){a.data=true}if(a.compat){a.useDepths=true}var r=undefined;function o(){var e=s.parse(n,a),t=(new s.Compiler).compile(e,a),i=(new s.JavaScriptCompiler).compile(t,a,undefined,true);return s.template(i)}function e(e,t){if(!r){r=o()}return r.call(this,e,t)}e._setup=function(e){if(!r){r=o()}return r._setup(e)};e._child=function(e,t,i,n){if(!r){r=o()}return r._child(e,t,i,n)};return e}function f(e,t){if(e===t){return true}if(d.isArray(e)&&d.isArray(t)&&e.length===t.length){for(var i=0;i<e.length;i++){if(!f(e[i],t[i])){return false}}return true}}function p(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:false,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}},function(e,t,i){"use strict";var n=i(1)["default"];t.__esModule=true;var a=i(4);var s=i(6);var m=n(s);var r=i(5);var o=i(43);var l=n(o);function d(e){this.value=e}function u(){}u.prototype={nameLookup:function e(t,i){if(u.isValidJavaScriptVariableName(i)){return[t,".",i]}else{return[t,"[",JSON.stringify(i),"]"]}},depthedLookup:function e(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function e(){var t=a.COMPILER_REVISION,i=a.REVISION_CHANGES[t];return[t,i]},appendToBuffer:function e(t,i,n){if(!r.isArray(t)){t=[t]}t=this.source.wrap(t,i);if(this.environment.isSimple){return["return ",t,";"]}else if(n){return["buffer += ",t,";"]}else{t.appendToBuffer=true;return t}},initializeBuffer:function e(){return this.quotedString("")},compile:function e(t,i,n,a){this.environment=t;this.options=i;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!a;this.name=this.environment.name;this.isChild=!!n;this.context=n||{decorators:[],programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(t,i);this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat;this.useBlockParams=this.useBlockParams||t.useBlockParams;var s=t.opcodes,r=undefined,o=undefined,l=undefined,d=undefined;for(l=0,d=s.length;l<d;l++){r=s[l];this.source.currentLocation=r.loc;o=o||r.loc;this[r.opcode].apply(this,r.args)}this.source.currentLocation=o;this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new m["default"]("Compile completed with content left on stack")}if(!this.decorators.isEmpty()){this.useDecorators=true;this.decorators.prepend("var decorators = container.decorators;\n");this.decorators.push("return fn;");if(a){this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()])}else{this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n");this.decorators.push("}\n");this.decorators=this.decorators.merge()}}else{this.decorators=undefined}var u=this.createFunctionContext(a);if(!this.isChild){var c={compiler:this.compilerInfo(),main:u};if(this.decorators){c.main_d=this.decorators;c.useDecorators=true}var h=this.context;var f=h.programs;var p=h.decorators;for(l=0,d=f.length;l<d;l++){if(f[l]){c[l]=f[l];if(p[l]){c[l+"_d"]=p[l];c.useDecorators=true}}}if(this.environment.usePartial){c.usePartial=true}if(this.options.data){c.useData=true}if(this.useDepths){c.useDepths=true}if(this.useBlockParams){c.useBlockParams=true}if(this.options.compat){c.compat=true}if(!a){c.compiler=JSON.stringify(c.compiler);this.source.currentLocation={start:{line:1,column:0}};c=this.objectLiteral(c);if(i.srcName){c=c.toStringWithSourceMap({file:i.destName});c.map=c.map&&c.map.toString()}else{c=c.toString()}}else{c.compilerOptions=this.options}return c}else{return u}},preamble:function e(){this.lastContext=0;this.source=new l["default"](this.options.srcName);this.decorators=new l["default"](this.options.srcName)},createFunctionContext:function e(t){var i="";var n=this.stackVars.concat(this.registers.list);if(n.length>0){i+=", "+n.join(", ")}var a=0;for(var s in this.aliases){var r=this.aliases[s];if(this.aliases.hasOwnProperty(s)&&r.children&&r.referenceCount>1){i+=", alias"+ ++a+"="+s;r.children[0]="alias"+a}}var o=["container","depth0","helpers","partials","data"];if(this.useBlockParams||this.useDepths){o.push("blockParams")}if(this.useDepths){o.push("depths")}var l=this.mergeSource(i);if(t){o.push(l);return Function.apply(this,o)}else{return this.source.wrap(["function(",o.join(","),") {\n  ",l,"}"])}},mergeSource:function e(t){var i=this.environment.isSimple,n=!this.forceBuffer,a=undefined,s=undefined,r=undefined,o=undefined;this.source.each(function(e){if(e.appendToBuffer){if(r){e.prepend("  + ")}else{r=e}o=e}else{if(r){if(!s){a=true}else{r.prepend("buffer += ")}o.add(";");r=o=undefined}s=true;if(!i){n=false}}});if(n){if(r){r.prepend("return ");o.add(";")}else if(!s){this.source.push('return "";')}}else{t+=", buffer = "+(a?"":this.initializeBuffer());if(r){r.prepend("return buffer + ");o.add(";")}else{this.source.push("return buffer;")}}if(t){this.source.prepend("var "+t.substring(2)+(a?"":";\n"))}return this.source.merge()},blockValue:function e(t){var i=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(t,0,n);var a=this.popStack();n.splice(1,0,a);this.push(this.source.functionCall(i,"call",n))},ambiguousBlockValue:function e(){var t=this.aliasable("helpers.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs("",0,i,true);this.flushInline();var n=this.topStack();i.splice(1,0,n);this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(t,"call",i),"}"])},appendContent:function e(t){if(this.pendingContent){t=this.pendingContent+t}else{this.pendingLocation=this.source.currentLocation}this.pendingContent=t},append:function e(){if(this.isInline()){this.replaceStack(function(e){return[" != null ? ",e,' : ""']});this.pushSource(this.appendToBuffer(this.popStack()))}else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,undefined,true)," }"]);if(this.environment.isSimple){this.pushSource(["else { ",this.appendToBuffer("''",undefined,true)," }"])}}},appendEscaped:function e(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function e(t){this.lastContext=t},pushContext:function e(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function e(t,i,n,a){var s=0;if(!a&&this.options.compat&&!this.lastContext){this.push(this.depthedLookup(t[s++]))}else{this.pushContext()}this.resolvePath("context",t,s,i,n)},lookupBlockParam:function e(t,i){this.useBlockParams=true;this.push(["blockParams[",t[0],"][",t[1],"]"]);this.resolvePath("context",i,1)},lookupData:function e(t,i,n){if(!t){this.pushStackLiteral("data")}else{this.pushStackLiteral("container.data(data, "+t+")")}this.resolvePath("data",i,0,true,n)},resolvePath:function e(i,n,a,s,t){var r=this;if(this.options.strict||this.options.assumeObjects){this.push(c(this.options.strict&&t,this,n,i));return}var o=n.length;for(;a<o;a++){this.replaceStack(function(e){var t=r.nameLookup(e,n[a],i);if(!s){return[" != null ? ",t," : ",e]}else{return[" && ",t]}})}},resolvePossibleLambda:function e(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function e(t,i){this.pushContext();this.pushString(i);if(i!=="SubExpression"){if(typeof t==="string"){this.pushString(t)}else{this.pushStackLiteral(t)}}},emptyHash:function e(t){if(this.trackIds){this.push("{}")}if(this.stringParams){this.push("{}");this.push("{}")}this.pushStackLiteral(t?"undefined":"{}")},pushHash:function e(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function e(){var t=this.hash;this.hash=this.hashes.pop();if(this.trackIds){this.push(this.objectLiteral(t.ids))}if(this.stringParams){this.push(this.objectLiteral(t.contexts));this.push(this.objectLiteral(t.types))}this.push(this.objectLiteral(t.values))},pushString:function e(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function e(t){this.pushStackLiteral(t)},pushProgram:function e(t){if(t!=null){this.pushStackLiteral(this.programExpression(t))}else{this.pushStackLiteral(null)}},registerDecorator:function e(t,i){var n=this.nameLookup("decorators",i,"decorator"),a=this.setupHelperArgs(i,t);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",a])," || fn;"])},invokeHelper:function e(t,i,n){var a=this.popStack(),s=this.setupHelper(t,i),r=n?[s.name," || "]:"";var o=["("].concat(r,a);if(!this.options.strict){o.push(" || ",this.aliasable("helpers.helperMissing"))}o.push(")");this.push(this.source.functionCall(o,"call",s.callParams))},invokeKnownHelper:function e(t,i){var n=this.setupHelper(t,i);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function e(t,i){this.useRegister("helper");var n=this.popStack();this.emptyHash();var a=this.setupHelper(0,t,i);var s=this.lastHelper=this.nameLookup("helpers",t,"helper");var r=["(","(helper = ",s," || ",n,")"];if(!this.options.strict){r[0]="(helper = ";r.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))}this.push(["(",r,a.paramsInit?["),(",a.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",a.callParams)," : helper))"])},invokePartial:function e(t,i,n){var a=[],s=this.setupParams(i,1,a);if(t){i=this.popStack();delete s.name}if(n){s.indent=JSON.stringify(n)}s.helpers="helpers";s.partials="partials";s.decorators="container.decorators";if(!t){a.unshift(this.nameLookup("partials",i,"partial"))}else{a.unshift(i)}if(this.options.compat){s.depths="depths"}s=this.objectLiteral(s);a.push(s);this.push(this.source.functionCall("container.invokePartial","",a))},assignToHash:function e(t){var i=this.popStack(),n=undefined,a=undefined,s=undefined;if(this.trackIds){s=this.popStack()}if(this.stringParams){a=this.popStack();n=this.popStack()}var r=this.hash;if(n){r.contexts[t]=n}if(a){r.types[t]=a}if(s){r.ids[t]=s}r.values[t]=i},pushId:function e(t,i,n){if(t==="BlockParam"){this.pushStackLiteral("blockParams["+i[0]+"].path["+i[1]+"]"+(n?" + "+JSON.stringify("."+n):""))}else if(t==="PathExpression"){this.pushString(i)}else if(t==="SubExpression"){this.pushStackLiteral("true")}else{this.pushStackLiteral("null")}},compiler:u,compileChildren:function e(t,i){var n=t.children,a=undefined,s=undefined;for(var r=0,o=n.length;r<o;r++){a=n[r];s=new this.compiler;var l=this.matchExistingProgram(a);if(l==null){this.context.programs.push("");var d=this.context.programs.length;a.index=d;a.name="program"+d;this.context.programs[d]=s.compile(a,i,this.context,!this.precompile);this.context.decorators[d]=s.decorators;this.context.environments[d]=a;this.useDepths=this.useDepths||s.useDepths;this.useBlockParams=this.useBlockParams||s.useBlockParams;a.useDepths=this.useDepths;a.useBlockParams=this.useBlockParams}else{a.index=l.index;a.name="program"+l.index;this.useDepths=this.useDepths||l.useDepths;this.useBlockParams=this.useBlockParams||l.useBlockParams}}},matchExistingProgram:function e(t){for(var i=0,n=this.context.environments.length;i<n;i++){var a=this.context.environments[i];if(a&&a.equals(t)){return a}}},programExpression:function e(t){var i=this.environment.children[t],n=[i.index,"data",i.blockParams];if(this.useBlockParams||this.useDepths){n.push("blockParams")}if(this.useDepths){n.push("depths")}return"container.program("+n.join(", ")+")"},useRegister:function e(t){if(!this.registers[t]){this.registers[t]=true;this.registers.list.push(t)}},push:function e(t){if(!(t instanceof d)){t=this.source.wrap(t)}this.inlineStack.push(t);return t},pushStackLiteral:function e(t){this.push(new d(t))},pushSource:function e(t){if(this.pendingContent){this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation));this.pendingContent=undefined}if(t){this.source.push(t)}},replaceStack:function e(t){var i=["("],n=undefined,a=undefined,s=undefined;if(!this.isInline()){throw new m["default"]("replaceStack on non-inline")}var r=this.popStack(true);if(r instanceof d){n=[r.value];i=["(",n];s=true}else{a=true;var o=this.incrStack();i=["((",this.push(o)," = ",r,")"];n=this.topStack()}var l=t.call(this,n);if(!s){this.popStack()}if(a){this.stackSlot--}this.push(i.concat(l,")"))},incrStack:function e(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function e(){return"stack"+this.stackSlot},flushInline:function e(){var t=this.inlineStack;this.inlineStack=[];for(var i=0,n=t.length;i<n;i++){var a=t[i];if(a instanceof d){this.compileStack.push(a)}else{var s=this.incrStack();this.pushSource([s," = ",a,";"]);this.compileStack.push(s)}}},isInline:function e(){return this.inlineStack.length},popStack:function e(t){var i=this.isInline(),n=(i?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof d){return n.value}else{if(!i){if(!this.stackSlot){throw new m["default"]("Invalid stack pop")}this.stackSlot--}return n}},topStack:function e(){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];if(i instanceof d){return i.value}else{return i}},contextName:function e(t){if(this.useDepths&&t){return"depths["+t+"]"}else{return"depth"+t}},quotedString:function e(t){return this.source.quotedString(t)},objectLiteral:function e(t){return this.source.objectLiteral(t)},aliasable:function e(t){var i=this.aliases[t];if(i){i.referenceCount++;return i}i=this.aliases[t]=this.source.wrap(t);i.aliasable=true;i.referenceCount=1;return i},setupHelper:function e(t,i,n){var a=[],s=this.setupHelperArgs(i,t,a,n);var r=this.nameLookup("helpers",i,"helper"),o=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:a,paramsInit:s,name:r,callParams:[o].concat(a)}},setupParams:function e(t,i,n){var a={},s=[],r=[],o=[],l=!n,d=undefined;if(l){n=[]}a.name=this.quotedString(t);a.hash=this.popStack();if(this.trackIds){a.hashIds=this.popStack()}if(this.stringParams){a.hashTypes=this.popStack();a.hashContexts=this.popStack()}var u=this.popStack(),c=this.popStack();if(c||u){a.fn=c||"container.noop";a.inverse=u||"container.noop"}var h=i;while(h--){d=this.popStack();n[h]=d;if(this.trackIds){o[h]=this.popStack()}if(this.stringParams){r[h]=this.popStack();s[h]=this.popStack()}}if(l){a.args=this.source.generateArray(n)}if(this.trackIds){a.ids=this.source.generateArray(o)}if(this.stringParams){a.types=this.source.generateArray(r);a.contexts=this.source.generateArray(s)}if(this.options.data){a.data="data"}if(this.useBlockParams){a.blockParams="blockParams"}return a},setupHelperArgs:function e(t,i,n,a){var s=this.setupParams(t,i,n);s=this.objectLiteral(s);if(a){this.useRegister("options");n.push("options");return["options=",s]}else if(n){n.push(s);return""}else{return s}}};(function(){var e=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield await"+" null true false").split(" ");var t=u.RESERVED_WORDS={};for(var i=0,n=e.length;i<n;i++){t[e[i]]=true}})();u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)};function c(e,t,i,n){var a=t.popStack(),s=0,r=i.length;if(e){r--}for(;s<r;s++){a=t.nameLookup(a,i[s],n)}if(e){return[t.aliasable("container.strict"),"(",a,", ",t.quotedString(i[s]),")"]}else{return a}}t["default"]=u;e.exports=t["default"]},function(e,t,i){"use strict";t.__esModule=true;var r=i(5);var n=undefined;try{if(false){var a=require("source-map");n=a.SourceNode}}catch(e){}if(!n){n=function(e,t,i,n){this.src="";if(n){this.add(n)}};n.prototype={add:function e(t){if(r.isArray(t)){t=t.join("")}this.src+=t},prepend:function e(t){if(r.isArray(t)){t=t.join("")}this.src=t+this.src},toStringWithSourceMap:function e(){return{code:this.toString()}},toString:function e(){return this.src}}}function o(e,t,i){if(r.isArray(e)){var n=[];for(var a=0,s=e.length;a<s;a++){n.push(t.wrap(e[a],i))}return n}else if(typeof e==="boolean"||typeof e==="number"){return e+""}return e}function s(e){this.srcFile=e;this.source=[]}s.prototype={isEmpty:function e(){return!this.source.length},prepend:function e(t,i){this.source.unshift(this.wrap(t,i))},push:function e(t,i){this.source.push(this.wrap(t,i))},merge:function e(){var t=this.empty();this.each(function(e){t.add(["  ",e,"\n"])});return t},each:function e(t){for(var i=0,n=this.source.length;i<n;i++){t(this.source[i])}},empty:function e(){var t=this.currentLocation||{start:{}};return new n(t.start.line,t.start.column,this.srcFile)},wrap:function e(t){var i=arguments.length<=1||arguments[1]===undefined?this.currentLocation||{start:{}}:arguments[1];if(t instanceof n){return t}t=o(t,this,i);return new n(i.start.line,i.start.column,this.srcFile,t)},functionCall:function e(t,i,n){n=this.generateList(n);return this.wrap([t,i?"."+i+"(":"(",n,")"])},quotedString:function e(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function e(t){var i=[];for(var n in t){if(t.hasOwnProperty(n)){var a=o(t[n],this);if(a!=="undefined"){i.push([this.quotedString(n),":",a])}}}var s=this.generateList(i);s.prepend("{");s.add("}");return s},generateList:function e(t){var i=this.empty();for(var n=0,a=t.length;n<a;n++){if(n){i.add(",")}i.add(o(t[n],this))}return i},generateArray:function e(t){var i=this.generateList(t);i.prepend("[");i.add("]");return i}};t["default"]=s;e.exports=t["default"]}])});(function(i){var n={};i.fn.handlebars=function(e,t){if(e instanceof jQuery){e=i(e).html()}n[e]=Handlebars.compile(e);this.html(n[e](t))};Handlebars.registerHelper("debug",function(e){console.log("Current Context");console.log("====================");console.log(this);if(e){console.log("Value");console.log("====================");console.log(e)}})})(jQuery);(function(o){o.fn.editInPlace=function(e){var t=o.extend({},o.fn.editInPlace.defaults,e);n(t);a(t.saving_image);return this.each(function(){var e=o(this);if(e.data("editInPlace"))return;e.data("editInPlace",true);new i(t,e).init()})};o.fn.editInPlace.defaults={url:"",bg_over:"#ffc",bg_out:"transparent",hover_class:"",show_buttons:false,save_button:'<button class="inplace_save">Save</button>',cancel_button:'<button class="inplace_cancel">Cancel</button>',params:"",field_type:"text",default_text:"(Click here to add text)",use_html:false,textarea_rows:10,textarea_cols:25,select_text:"Choose new value",select_options:"",text_size:null,saving_text:undefined,saving_image:"",saving_animation_color:"transparent",value_required:false,element_id:"element_id",update_value:"update_value",original_value:"original_value",original_html:"original_html",save_if_nothing_changed:false,on_blur:"save",cancel:"",callback:null,callback_skip_dom_reset:false,success:null,error:null,error_sink:function(e,t){alert(t)},preinit:null,postclose:null,delegate:null};var e={shouldOpenEditInPlace:function(e,t,i){},willOpenEditInPlace:function(e,t){},didOpenEditInPlace:function(e,t){},shouldCloseEditInPlace:function(e,t,i){},willCloseEditInPlace:function(e,t){},didCloseEditInPlace:function(e,t){},missingCommaErrorPreventer:""};function i(e,t){this.settings=e;this.dom=t;this.originalValue=null;this.didInsertDefaultText=false;this.shouldDelayReinit=false}o.extend(i.prototype,{init:function(){this.setDefaultTextIfNeccessary();this.connectOpeningEvents()},reinit:function(){if(this.shouldDelayReinit)return;this.triggerCallback(this.settings.postclose,this.dom);this.triggerDelegateCall("didCloseEditInPlace");this.markEditorAsInactive();this.connectOpeningEvents()},setDefaultTextIfNeccessary:function(){if(""!==this.dom.html())return;this.dom.html(this.settings.default_text);this.didInsertDefaultText=true},connectOpeningEvents:function(){var t=this;this.dom.bind("mouseenter.editInPlace",function(){t.addHoverEffect()}).bind("mouseleave.editInPlace",function(){t.removeHoverEffect()}).bind("click.editInPlace",function(e){t.openEditor(e)})},disconnectOpeningEvents:function(){this.dom.unbind(".editInPlace")},addHoverEffect:function(){if(this.settings.hover_class)this.dom.addClass(this.settings.hover_class);else this.dom.css("background-color",this.settings.bg_over)},removeHoverEffect:function(){if(this.settings.hover_class)this.dom.removeClass(this.settings.hover_class);else this.dom.css("background-color",this.settings.bg_out)},openEditor:function(e){if(!this.shouldOpenEditor(e))return;this.disconnectOpeningEvents();this.removeHoverEffect();this.removeInsertedDefaultTextIfNeccessary();this.saveOriginalValue();this.markEditorAsActive();this.replaceContentWithEditor();this.setInitialValue();this.workAroundMissingBlurBug();this.connectClosingEventsToEditor();this.triggerDelegateCall("didOpenEditInPlace")},shouldOpenEditor:function(e){if(this.isClickedObjectCancelled(e.target))return false;if(false===this.triggerCallback(this.settings.preinit,this.dom))return false;if(false===this.triggerDelegateCall("shouldOpenEditInPlace",true,e))return false;return true},removeInsertedDefaultTextIfNeccessary:function(){if(!this.didInsertDefaultText||this.dom.html()!==this.settings.default_text)return;this.dom.html("");this.didInsertDefaultText=false},isClickedObjectCancelled:function(e){if(!this.settings.cancel)return false;var t=o(e).parents().andSelf();var i=t.filter(this.settings.cancel);return 0!==i.length},saveOriginalValue:function(){if(this.settings.use_html)this.originalValue=this.dom.html();else this.originalValue=l(this.dom.text())},restoreOriginalValue:function(){this.setClosedEditorContent(this.originalValue)},setClosedEditorContent:function(e){if(this.settings.use_html)this.dom.html(e);else this.dom.text(e)},workAroundMissingBlurBug:function(){var e=this.dom.find(":input");this.dom.parents(":last").find(".editInPlace-active :input").not(e).blur()},replaceContentWithEditor:function(){var e=this.settings.show_buttons?this.settings.save_button+" "+this.settings.cancel_button:"";var t=this.createEditorElement();this.dom.html("").append('<form class="inplace_form" style="display: inline; margin: 0; padding: 0;"></form>').find("form").append(t).append(e)},createEditorElement:function(){if(-1===o.inArray(this.settings.field_type,["text","textarea","select"]))throw"Unknown field_type <fnord>, supported are 'text', 'textarea' and 'select'";var e=null;if("select"===this.settings.field_type)e=this.createSelectEditor();else if("text"===this.settings.field_type)e=o('<input type="text" '+this.inputNameAndClass()+' size="'+this.settings.text_size+'" />');else if("textarea"===this.settings.field_type)e=o("<textarea "+this.inputNameAndClass()+' rows="'+this.settings.textarea_rows+'" '+' cols="'+this.settings.textarea_cols+'" />');return e},setInitialValue:function(){var e=this.triggerDelegateCall("willOpenEditInPlace",this.originalValue);var t=this.dom.find(":input");t.val(e);if(t.val()!==e)t.val("")},inputNameAndClass:function(){return' name="inplace_value" class="inplace_field" '},createSelectEditor:function(){var e=o("<select"+this.inputNameAndClass()+">"+'<option disabled="true" value="">'+this.settings.select_text+"</option>"+"</select>");var t=this.settings.select_options;if(!o.isArray(t))t=t.split(",");for(var i=0;i<t.length;i++){var n=t[i];if(!o.isArray(n))n=n.split(":");var a=l(n[1]||n[0]);var s=l(n[0]);var r=o("<option>").val(a).text(s);e.append(r)}return e},connectClosingEventsToEditor:function(){var t=this;function i(e){t.handleCancelEditor(e);return false}function e(e){t.handleSaveEditor(e);return false}var n=this.dom.find("form");n.find(".inplace_field").focus().select();n.find(".inplace_cancel").click(i);n.find(".inplace_save").click(e);if(!this.settings.show_buttons){if("save"===this.settings.on_blur)n.find(".inplace_field").blur(e);else n.find(".inplace_field").blur(i);if(o.browser.mozilla||o.browser.msie)this.bindSubmitOnEnterInInput()}n.keyup(function(e){var t=27;if(t===e.which)return i()});if(o.browser.safari)this.bindSubmitOnEnterInInput();n.submit(e)},bindSubmitOnEnterInInput:function(){if("textarea"===this.settings.field_type)return;var i=this;this.dom.find(":input").keyup(function(e){var t=13;if(t===e.which)return i.dom.find("form").submit()})},handleCancelEditor:function(e){if(false===this.triggerDelegateCall("shouldCloseEditInPlace",true,e))return;var t=this.dom.find(":input").val();t=this.triggerDelegateCall("willCloseEditInPlace",t);this.restoreOriginalValue();if(s(t)&&!this.isDisabledDefaultSelectChoice())this.setClosedEditorContent(t);this.reinit()},handleSaveEditor:function(e){if(false===this.triggerDelegateCall("shouldCloseEditInPlace",true,e))return;var t=this.dom.find(":input").val();t=this.triggerDelegateCall("willCloseEditInPlace",t);if(this.isDisabledDefaultSelectChoice()||this.isUnchangedInput(t)){this.handleCancelEditor(e);return}if(this.didForgetRequiredText(t)){this.handleCancelEditor(e);this.reportError("Error: You must enter a value to save this field");return}this.showSaving(t);if(this.settings.callback)this.handleSubmitToCallback(t);else this.handleSubmitToServer(t)},didForgetRequiredText:function(e){return this.settings.value_required&&(""===e||undefined===e||null===e)},isDisabledDefaultSelectChoice:function(){return this.dom.find("option").eq(0).is(":selected:disabled")},isUnchangedInput:function(e){return!this.settings.save_if_nothing_changed&&this.originalValue===e},showSaving:function(e){if(this.settings.callback&&this.settings.callback_skip_dom_reset)return;var t=e;if(s(this.settings.saving_text))t=this.settings.saving_text;if(s(this.settings.saving_image))t=o("<img />").attr("src",this.settings.saving_image).attr("alt",t);this.dom.html(t)},handleSubmitToCallback:function(e){this.enableOrDisableAnimationCallbacks(true,false);var t=this.triggerCallback(this.settings.callback,this.id(),e,this.originalValue,this.settings.params,this.savingAnimationCallbacks());if(this.settings.callback_skip_dom_reset);else if(undefined===t){this.reportError("Error: Failed to save value: "+e);this.restoreOriginalValue()}else this.dom.html(t);if(this.didCallNoCallbacks()){this.enableOrDisableAnimationCallbacks(false,false);this.reinit()}},handleSubmitToServer:function(e){var t=this.settings.update_value+"="+encodeURIComponent(e)+"&"+this.settings.element_id+"="+this.dom.attr("id")+(this.settings.params?"&"+this.settings.params:"")+"&"+this.settings.original_html+"="+encodeURIComponent(this.originalValue)+"&"+this.settings.original_value+"="+encodeURIComponent(this.originalValue);this.enableOrDisableAnimationCallbacks(true,false);this.didStartSaving();var i=this;o.ajax({url:i.settings.url,type:"POST",data:t,dataType:"html",complete:function(e){i.didEndSaving()},success:function(e){var t=e||i.settings.default_text;i.dom.html(t);i.triggerCallback(i.settings.success,e)},error:function(e){i.dom.html(i.originalHTML);if(i.settings.error)i.triggerCallback(i.settings.error,e);else i.reportError("Failed to save value: "+e.responseText||"Unspecified Error")}})},triggerCallback:function(e){if(!e)return;var t=Array.prototype.slice.call(arguments,1);return e.apply(this.dom[0],t)},triggerDelegateCall:function(e,t,i){if(!this.settings.delegate||!o.isFunction(this.settings.delegate[e]))return t;var n=this.settings.delegate[e](this.dom,this.settings,i);return undefined===n?t:n},reportError:function(e){this.triggerCallback(this.settings.error_sink,this.id(),e)},id:function(){return this.dom.attr("id")},markEditorAsActive:function(){this.dom.addClass("editInPlace-active")},markEditorAsInactive:function(){this.dom.removeClass("editInPlace-active")},savingAnimationCallbacks:function(){var e=this;return{didStartSaving:function(){e.didStartSaving()},didEndSaving:function(){e.didEndSaving()}}},enableOrDisableAnimationCallbacks:function(e,t){this.didStartSaving.enabled=e;this.didEndSaving.enabled=t},didCallNoCallbacks:function(){return this.didStartSaving.enabled&&!this.didEndSaving.enabled},assertCanCall:function(e){if(!this[e].enabled)throw new Error("Cannot call "+e+" now. See documentation for details.")},didStartSaving:function(){this.assertCanCall("didStartSaving");this.shouldDelayReinit=true;this.enableOrDisableAnimationCallbacks(false,true);this.startSavingAnimation()},didEndSaving:function(){this.assertCanCall("didEndSaving");this.shouldDelayReinit=false;this.enableOrDisableAnimationCallbacks(false,false);this.reinit();this.stopSavingAnimation()},startSavingAnimation:function(){var e=this;this.dom.animate({backgroundColor:this.settings.saving_animation_color},400).animate({backgroundColor:"transparent"},400,"swing",function(){setTimeout(function(){e.startSavingAnimation()},10)})},stopSavingAnimation:function(){this.dom.stop(true).css({backgroundColor:""})},missingCommaErrorPreventer:""});function n(e){if(e.url||e.callback)return;throw new Error("Need to set either url: or callback: option for the inline editor to work.")}function a(e){if(""===e)return;var t=new Image;t.src=e}function l(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function s(e){if(undefined===e||null===e)return false;if(0===e.length)return false;return true}})(jQuery);(function(s){s.InFieldLabels=function(e,t,i){var n=this;n.$label=s(e);n.label=e;n.$field=s(t);n.field=t;n.$label.data("InFieldLabels",n);n.showing=true;n.init=function(){var e;n.options=s.extend({},s.InFieldLabels.defaultOptions,i);if(n.options.className){n.$label.addClass(n.options.className)}setTimeout(function(){if(n.$field.val()!==""){n.$label.hide();n.showing=false}else{n.$label.show();n.showing=true}},200);n.$field.focus(function(){n.fadeOnFocus()}).blur(function(){n.checkForEmpty(true)}).bind("keydown.infieldlabel",function(e){n.hideOnChange(e)}).bind("paste",function(){n.setOpacity(0)}).change(function(){n.checkForEmpty()}).bind("onPropertyChange",function(){n.checkForEmpty()}).bind("keyup.infieldlabel",function(){n.checkForEmpty()});if(n.options.pollDuration>0){e=setInterval(function(){if(n.$field.val()!==""){n.$label.hide();n.showing=false;clearInterval(e)}},n.options.pollDuration)}};n.fadeOnFocus=function(){if(n.showing){n.setOpacity(n.options.fadeOpacity)}};n.setOpacity=function(e){n.$label.stop().animate({opacity:e},n.options.fadeDuration,function(){if(e===0){n.$label.hide()}});n.showing=e>0};n.checkForEmpty=function(e){if(n.$field.val()===""){n.prepForShow();n.setOpacity(e?1:n.options.fadeOpacity)}else{n.setOpacity(0)}};n.prepForShow=function(){if(!n.showing){n.$label.css({opacity:0}).show();n.$field.bind("keydown.infieldlabel",function(e){n.hideOnChange(e)})}};n.hideOnChange=function(e){if(e.keyCode===16||e.keyCode===9){return}if(n.showing){n.$label.hide();n.showing=false}n.$field.unbind("keydown.infieldlabel")};n.init()};s.InFieldLabels.defaultOptions={fadeOpacity:.5,fadeDuration:300,pollDuration:0,enabledInputTypes:["text","search","tel","url","email","password","number","textarea"],className:false};s.fn.inFieldLabels=function(n){var a=n&&n.enabledInputTypes||s.InFieldLabels.defaultOptions.enabledInputTypes;return this.each(function(){var e=s(this).attr("for"),t,i;if(!e){return}t=document.getElementById(e);if(!t){return}i=s.inArray(t.type,a);if(i===-1&&t.nodeName!=="TEXTAREA"){return}new s.InFieldLabels(this,t,n)})}})(jQuery);(function(c,u){c.support.htmlMenuitem="HTMLMenuItemElement"in window;c.support.htmlCommand="HTMLCommandElement"in window;c.support.eventSelectstart="onselectstart"in document.documentElement;if(!c.ui||!c.ui.widget){var n=c.cleanData;c.cleanData=function(e){for(var t=0,i;(i=e[t])!=null;t++){try{c(i).triggerHandler("remove")}catch(e){}}n(e)}}var r=null,l=false,h=c(window),d=0,f={},p={},m={},g={selector:null,appendTo:null,trigger:"right",autoHide:false,delay:200,reposition:true,determinePosition:function(e){if(c.ui&&c.ui.position){e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none")}else{var t=this.offset();t.top+=this.outerHeight();t.left+=this.outerWidth()/2-e.outerWidth()/2;e.css(t)}},position:function(e,t,i){var n=this,a;if(!t&&!i){e.determinePosition.call(this,e.$menu);return}else if(t==="maintain"&&i==="maintain"){a=e.$menu.position()}else{a={top:i,left:t}}var s=h.scrollTop()+h.height(),r=h.scrollLeft()+h.width(),o=e.$menu.height(),l=e.$menu.width();if(a.top+o>s){a.top-=o}if(a.left+l>r){a.left-=l}e.$menu.css(a)},positionSubmenu:function(e){if(c.ui&&c.ui.position){e.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","")}else{var t={top:0,left:this.outerWidth()};e.css(t)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:c.noop,hide:c.noop},callback:null,items:{}},a={timer:null,pageX:null,pageY:null},o=function(e){var t=0,i=e;while(true){t=Math.max(t,parseInt(i.css("z-index"),10)||0);i=i.parent();if(!i||!i.length||"html body".indexOf(i.prop("nodeName").toLowerCase())>-1){break}}return t},_={abortevent:function(e){e.preventDefault();e.stopImmediatePropagation()},contextmenu:function(e){var t=c(this);e.preventDefault();e.stopImmediatePropagation();if(e.data.trigger!="right"&&e.originalEvent){return}if(t.hasClass("context-menu-active")){return}if(!t.hasClass("context-menu-disabled")){r=t;if(e.data.build){var i=e.data.build(r,e);if(i===false){return}e.data=c.extend(true,{},g,e.data,i||{});if(!e.data.items||c.isEmptyObject(e.data.items)){if(window.console){(console.error||console.log)("No items specified to show in contextMenu")}throw new Error("No Items sepcified")}e.data.$trigger=r;v.create(e.data)}v.show.call(t,e.data,e.pageX,e.pageY)}},click:function(e){e.preventDefault();e.stopImmediatePropagation();c(this).trigger(c.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))},mousedown:function(e){var t=c(this);if(r&&r.length&&!r.is(t)){r.data("contextMenu").$menu.trigger("contextmenu:hide")}if(e.button==2){r=t.data("contextMenuActive",true)}},mouseup:function(e){var t=c(this);if(t.data("contextMenuActive")&&r&&r.length&&r.is(t)&&!t.hasClass("context-menu-disabled")){e.preventDefault();e.stopImmediatePropagation();r=t;t.trigger(c.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY}))}t.removeData("contextMenuActive")},mouseenter:function(e){var t=c(this),i=c(e.relatedTarget),n=c(document);if(i.is(".context-menu-list")||i.closest(".context-menu-list").length){return}if(r&&r.length){return}a.pageX=e.pageX;a.pageY=e.pageY;a.data=e.data;n.on("mousemove.contextMenuShow",_.mousemove);a.timer=setTimeout(function(){a.timer=null;n.off("mousemove.contextMenuShow");r=t;t.trigger(c.Event("contextmenu",{data:a.data,pageX:a.pageX,pageY:a.pageY}))},e.data.delay)},mousemove:function(e){a.pageX=e.pageX;a.pageY=e.pageY},mouseleave:function(e){var t=c(e.relatedTarget);if(t.is(".context-menu-list")||t.closest(".context-menu-list").length){return}try{clearTimeout(a.timer)}catch(e){}a.timer=null},layerClick:function(a){var e=c(this),s=e.data("contextMenuRoot"),t=false,r=a.button,o=a.pageX,l=a.pageY,d,u,i;a.preventDefault();a.stopImmediatePropagation();setTimeout(function(){var e,t,i;var n=s.trigger=="left"&&r===0||s.trigger=="right"&&r===2;if(document.elementFromPoint){s.$layer.hide();d=document.elementFromPoint(o-h.scrollLeft(),l-h.scrollTop());s.$layer.show()}if(s.reposition&&n){if(document.elementFromPoint){if(s.$trigger.is(d)||s.$trigger.has(d).length){s.position.call(s.$trigger,s,o,l);return}}else{u=s.$trigger.offset();e=c(window);u.top+=e.scrollTop();if(u.top<=a.pageY){u.left+=e.scrollLeft();if(u.left<=a.pageX){u.bottom=u.top+s.$trigger.outerHeight();if(u.bottom>=a.pageY){u.right=u.left+s.$trigger.outerWidth();if(u.right>=a.pageX){s.position.call(s.$trigger,s,o,l);return}}}}}}if(d&&n){s.$trigger.one("contextmenu:hidden",function(){c(d).contextMenu({x:o,y:l})})}s.$menu.trigger("contextmenu:hide")},50)},keyStop:function(e,t){if(!t.isInput){e.preventDefault()}e.stopPropagation()},key:function(e){var t=r.data("contextMenu")||{};switch(e.keyCode){case 9:case 38:_.keyStop(e,t);if(t.isInput){if(e.keyCode==9&&e.shiftKey){e.preventDefault();t.$selected&&t.$selected.find("input, textarea, select").blur();t.$menu.trigger("prevcommand");return}else if(e.keyCode==38&&t.$selected.find("input, textarea, select").prop("type")=="checkbox"){e.preventDefault();return}}else if(e.keyCode!=9||e.shiftKey){t.$menu.trigger("prevcommand");return}case 40:_.keyStop(e,t);if(t.isInput){if(e.keyCode==9){e.preventDefault();t.$selected&&t.$selected.find("input, textarea, select").blur();t.$menu.trigger("nextcommand");return}else if(e.keyCode==40&&t.$selected.find("input, textarea, select").prop("type")=="checkbox"){e.preventDefault();return}}else{t.$menu.trigger("nextcommand");return}break;case 37:_.keyStop(e,t);if(t.isInput||!t.$selected||!t.$selected.length){break}if(!t.$selected.parent().hasClass("context-menu-root")){var i=t.$selected.parent().parent();t.$selected.trigger("contextmenu:blur");t.$selected=i;return}break;case 39:_.keyStop(e,t);if(t.isInput||!t.$selected||!t.$selected.length){break}var n=t.$selected.data("contextMenu")||{};if(n.$menu&&t.$selected.hasClass("context-menu-submenu")){t.$selected=null;n.$selected=null;n.$menu.trigger("nextcommand");return}break;case 35:case 36:if(t.$selected&&t.$selected.find("input, textarea, select").length){return}else{(t.$selected&&t.$selected.parent()||t.$menu).children(":not(.disabled, .not-selectable)")[e.keyCode==36?"first":"last"]().trigger("contextmenu:focus");e.preventDefault();return}break;case 13:_.keyStop(e,t);if(t.isInput){if(t.$selected&&!t.$selected.is("textarea, select")){e.preventDefault();return}break}t.$selected&&t.$selected.trigger("mouseup");return;case 32:case 33:case 34:_.keyStop(e,t);return;case 27:_.keyStop(e,t);t.$menu.trigger("contextmenu:hide");return;default:var a=String.fromCharCode(e.keyCode).toUpperCase();if(t.accesskeys[a]){t.accesskeys[a].$node.trigger(t.accesskeys[a].$menu?"contextmenu:focus":"mouseup");return}break}e.stopPropagation();t.$selected&&t.$selected.trigger(e)},prevItem:function(e){e.stopPropagation();var t=c(this).data("contextMenu")||{};if(t.$selected){var i=t.$selected;t=t.$selected.parent().data("contextMenu")||{};t.$selected=i}var n=t.$menu.children(),a=!t.$selected||!t.$selected.prev().length?n.last():t.$selected.prev(),s=a;while(a.hasClass("disabled")||a.hasClass("not-selectable")){if(a.prev().length){a=a.prev()}else{a=n.last()}if(a.is(s)){return}}if(t.$selected){_.itemMouseleave.call(t.$selected.get(0),e)}_.itemMouseenter.call(a.get(0),e);var r=a.find("input, textarea, select");if(r.length){r.focus()}},nextItem:function(e){e.stopPropagation();var t=c(this).data("contextMenu")||{};if(t.$selected){var i=t.$selected;t=t.$selected.parent().data("contextMenu")||{};t.$selected=i}var n=t.$menu.children(),a=!t.$selected||!t.$selected.next().length?n.first():t.$selected.next(),s=a;while(a.hasClass("disabled")||a.hasClass("not-selectable")){if(a.next().length){a=a.next()}else{a=n.first()}if(a.is(s)){return}}if(t.$selected){_.itemMouseleave.call(t.$selected.get(0),e)}_.itemMouseenter.call(a.get(0),e);var r=a.find("input, textarea, select");if(r.length){r.focus()}},focusInput:function(e){var t=c(this).closest(".context-menu-item"),i=t.data(),n=i.contextMenu,a=i.contextMenuRoot;a.$selected=n.$selected=t;a.isInput=n.isInput=true},blurInput:function(e){var t=c(this).closest(".context-menu-item"),i=t.data(),n=i.contextMenu,a=i.contextMenuRoot;a.isInput=n.isInput=false},menuMouseenter:function(e){var t=c(this).data().contextMenuRoot;t.hovering=true},menuMouseleave:function(e){var t=c(this).data().contextMenuRoot;if(t.$layer&&t.$layer.is(e.relatedTarget)){t.hovering=false}},itemMouseenter:function(e){var t=c(this),i=t.data(),n=i.contextMenu,a=i.contextMenuRoot;a.hovering=true;if(e&&a.$layer&&a.$layer.is(e.relatedTarget)){e.preventDefault();e.stopImmediatePropagation()}(n.$menu?n:a).$menu.children(".hover").trigger("contextmenu:blur");if(t.hasClass("disabled")||t.hasClass("not-selectable")){n.$selected=null;return}t.trigger("contextmenu:focus")},itemMouseleave:function(e){var t=c(this),i=t.data(),n=i.contextMenu,a=i.contextMenuRoot;if(a!==n&&a.$layer&&a.$layer.is(e.relatedTarget)){a.$selected&&a.$selected.trigger("contextmenu:blur");e.preventDefault();e.stopImmediatePropagation();a.$selected=n.$selected=n.$node;return}t.trigger("contextmenu:blur")},itemClick:function(e){var t=c(this),i=t.data(),n=i.contextMenu,a=i.contextMenuRoot,s=i.contextMenuKey,r;if(!n.items[s]||t.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){return}e.preventDefault();e.stopImmediatePropagation();if(c.isFunction(a.callbacks[s])&&Object.prototype.hasOwnProperty.call(a.callbacks,s)){r=a.callbacks[s]}else if(c.isFunction(a.callback)){r=a.callback}else{return}if(r.call(a.$trigger,s,a)!==false){a.$menu.trigger("contextmenu:hide")}else if(a.$menu.parent().length){v.update.call(a.$trigger,a)}},inputClick:function(e){e.stopImmediatePropagation()},hideMenu:function(e,t){var i=c(this).data("contextMenuRoot");v.hide.call(i.$trigger,i,t&&t.force)},focusItem:function(e){e.stopPropagation();var t=c(this),i=t.data(),n=i.contextMenu,a=i.contextMenuRoot;t.addClass("hover").siblings(".hover").trigger("contextmenu:blur");n.$selected=a.$selected=t;if(n.$node){a.positionSubmenu.call(n.$node,n.$menu)}},blurItem:function(e){e.stopPropagation();var t=c(this),i=t.data(),n=i.contextMenu,a=i.contextMenuRoot;t.removeClass("hover");n.$selected=null}},v={show:function(i,e,t){var n=c(this),a,s={};c("#context-menu-layer").trigger("mousedown");i.$trigger=n;if(i.events.show.call(n,i)===false){r=null;return}v.update.call(n,i);i.position.call(n,i,e,t);if(i.zIndex){s.zIndex=o(n)+i.zIndex}v.layer.call(i.$menu,i,s.zIndex);i.$menu.find("ul").css("zIndex",s.zIndex+1);i.$menu.css(s)[i.animation.show](i.animation.duration,function(){n.trigger("contextmenu:visible")});n.data("contextMenu",i).addClass("context-menu-active");c(document).off("keydown.contextMenu").on("keydown.contextMenu",_.key);if(i.autoHide){c(document).on("mousemove.contextMenuAutoHide",function(e){var t=n.offset();t.right=t.left+n.outerWidth();t.bottom=t.top+n.outerHeight();if(i.$layer&&!i.hovering&&(!(e.pageX>=t.left&&e.pageX<=t.right)||!(e.pageY>=t.top&&e.pageY<=t.bottom))){i.$menu.trigger("contextmenu:hide")}})}},hide:function(i,e){var t=c(this);if(!i){i=t.data("contextMenu")||{}}if(!e&&i.events&&i.events.hide.call(t,i)===false){return}t.removeData("contextMenu").removeClass("context-menu-active");if(i.$layer){setTimeout(function(e){return function(){e.remove()}}(i.$layer),10);try{delete i.$layer}catch(e){i.$layer=null}}r=null;i.$menu.find(".hover").trigger("contextmenu:blur");i.$selected=null;c(document).off(".contextMenuAutoHide").off("keydown.contextMenu");i.$menu&&i.$menu[i.animation.hide](i.animation.duration,function(){if(i.build){i.$menu.remove();c.each(i,function(e,t){switch(e){case"ns":case"selector":case"build":case"trigger":return true;default:i[e]=u;try{delete i[e]}catch(e){}return true}})}setTimeout(function(){t.trigger("contextmenu:hidden")},10)})},create:function(l,d){if(d===u){d=l}l.$menu=c('<ul class="context-menu-list"></ul>').addClass(l.className||"").data({contextMenu:l,contextMenuRoot:d});c.each(["callbacks","commands","inputs"],function(e,t){l[t]={};if(!d[t]){d[t]={}}});d.accesskeys||(d.accesskeys={});c.each(l.items,function(i,n){var e=c('<li class="context-menu-item"></li>').addClass(n.className||""),t=null,a=null;e.on("click",c.noop);n.$node=e.data({contextMenu:l,contextMenuRoot:d,contextMenuKey:i});if(n.accesskey){var s=y(n.accesskey);for(var r=0,o;o=s[r];r++){if(!d.accesskeys[o]){d.accesskeys[o]=n;n._name=n.name.replace(new RegExp("("+o+")","i"),'<span class="context-menu-accesskey">$1</span>');break}}}if(typeof n=="string"){e.addClass("context-menu-separator not-selectable")}else if(n.type&&m[n.type]){m[n.type].call(e,n,l,d);c.each([l,d],function(e,t){t.commands[i]=n;if(c.isFunction(n.callback)){t.callbacks[i]=n.callback}})}else{if(n.type=="html"){e.addClass("context-menu-html not-selectable")}else if(n.type){t=c("<label></label>").appendTo(e);c("<span></span>").html(n._name||n.name).appendTo(t);e.addClass("context-menu-input");l.hasTypes=true;c.each([l,d],function(e,t){t.commands[i]=n;t.inputs[i]=n})}else if(n.items){n.type="sub"}switch(n.type){case"text":a=c('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+i).val(n.value||"").appendTo(t);break;case"textarea":a=c('<textarea name=""></textarea>').attr("name","context-menu-input-"+i).val(n.value||"").appendTo(t);if(n.height){a.height(n.height)}break;case"checkbox":a=c('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+i).val(n.value||"").prop("checked",!!n.selected).prependTo(t);break;case"radio":a=c('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+n.radio).val(n.value||"").prop("checked",!!n.selected).prependTo(t);break;case"select":a=c('<select name="">').attr("name","context-menu-input-"+i).appendTo(t);if(n.options){c.each(n.options,function(e,t){c("<option></option>").val(e).text(t).appendTo(a)});a.val(n.selected)}break;case"sub":c("<span></span>").html(n._name||n.name).appendTo(e);n.appendTo=n.$node;v.create(n,d);e.data("contextMenu",n).addClass("context-menu-submenu");n.callback=null;break;case"html":c(n.html).appendTo(e);break;default:c.each([l,d],function(e,t){t.commands[i]=n;if(c.isFunction(n.callback)){t.callbacks[i]=n.callback}});c("<span></span>").html(n._name||n.name||"").appendTo(e);break}if(n.type&&n.type!="sub"&&n.type!="html"){a.on("focus",_.focusInput).on("blur",_.blurInput);if(n.events){a.on(n.events,l)}}if(n.icon){e.addClass("icon icon-"+n.icon)}}n.$input=a;n.$label=t;e.appendTo(l.$menu);if(!l.hasTypes&&c.support.eventSelectstart){e.on("selectstart.disableTextSelect",_.abortevent)}});if(!l.$node){l.$menu.css("display","none").addClass("context-menu-root")}l.$menu.appendTo(l.appendTo||document.body)},resize:function(e,t){e.css({position:"absolute",display:"block"});e.data("width",Math.ceil(e.width())+1);e.css({position:"static",minWidth:"0px",maxWidth:"100000px"});e.find("> li > ul").each(function(){v.resize(c(this),true)});if(!t){e.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return c(this).data("width")})}},update:function(a,s){var r=this;if(s===u){s=a;v.resize(a.$menu)}a.$menu.children().each(function(){var e=c(this),t=e.data("contextMenuKey"),i=a.items[t],n=c.isFunction(i.disabled)&&i.disabled.call(r,t,s)||i.disabled===true;e[n?"addClass":"removeClass"]("disabled");if(i.type){e.find("input, select, textarea").prop("disabled",n);switch(i.type){case"text":case"textarea":i.$input.val(i.value||"");break;case"checkbox":case"radio":i.$input.val(i.value||"").prop("checked",!!i.selected);break;case"select":i.$input.val(i.selected||"");break}}if(i.$menu){v.update.call(r,i,s)}})},layer:function(e,t){var i=e.$layer=c('<div id="context-menu-layer" style="position:fixed; z-index:'+t+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:h.height(),width:h.width(),display:"block"}).data("contextMenuRoot",e).insertBefore(this).on("contextmenu",_.abortevent).on("mousedown",_.layerClick);if(!c.support.fixedPosition){i.css({position:"absolute",height:c(document).height()})}return i}};function y(e){var t=e.split(/\s+/),i=[];for(var n=0,a;a=t[n];n++){a=a[0].toUpperCase();i.push(a)}return i}c.fn.contextMenu=function(e){if(e===u){this.first().trigger("contextmenu")}else if(e.x&&e.y){this.first().trigger(c.Event("contextmenu",{pageX:e.x,pageY:e.y}))}else if(e==="hide"){var t=this.data("contextMenu").$menu;t&&t.trigger("contextmenu:hide")}else if(e==="destroy"){c.contextMenu("destroy",{context:this})}else if(c.isPlainObject(e)){e.context=this;c.contextMenu("create",e)}else if(e){this.removeClass("context-menu-disabled")}else if(!e){this.addClass("context-menu-disabled")}return this};c.contextMenu=function(e,t){if(typeof e!="string"){t=e;e="create"}if(typeof t=="string"){t={selector:t}}else if(t===u){t={}}var i=c.extend(true,{},g,t||{});var n=c(document);var a=n;var s=false;if(!i.context||!i.context.length){i.context=document}else{a=c(i.context).first();i.context=a.get(0);s=i.context!==document}switch(e){case"create":if(!i.selector){throw new Error("No selector specified")}if(i.selector.match(/.context-menu-(list|item|input)($|\s)/)){throw new Error('Cannot bind to selector "'+i.selector+'" as it contains a reserved className')}if(!i.build&&(!i.items||c.isEmptyObject(i.items))){throw new Error("No Items sepcified")}d++;i.ns=".contextMenu"+d;if(!s){f[i.selector]=i.ns}p[i.ns]=i;if(!i.trigger){i.trigger="right"}if(!l){n.on({"contextmenu:hide.contextMenu":_.hideMenu,"prevcommand.contextMenu":_.prevItem,"nextcommand.contextMenu":_.nextItem,"contextmenu.contextMenu":_.abortevent,"mouseenter.contextMenu":_.menuMouseenter,"mouseleave.contextMenu":_.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",_.inputClick).on({"mouseup.contextMenu":_.itemClick,"contextmenu:focus.contextMenu":_.focusItem,"contextmenu:blur.contextMenu":_.blurItem,"contextmenu.contextMenu":_.abortevent,"mouseenter.contextMenu":_.itemMouseenter,"mouseleave.contextMenu":_.itemMouseleave},".context-menu-item");l=true}a.on("contextmenu"+i.ns,i.selector,i,_.contextmenu);if(s){a.on("remove"+i.ns,function(){c(this).contextMenu("destroy")})}switch(i.trigger){case"hover":a.on("mouseenter"+i.ns,i.selector,i,_.mouseenter).on("mouseleave"+i.ns,i.selector,i,_.mouseleave);break;case"left":a.on("click"+i.ns,i.selector,i,_.click);break}if(!i.build){v.create(i)}break;case"destroy":var r;if(s){var o=i.context;c.each(p,function(e,t){if(t.context!==o){return true}r=c(".context-menu-list").filter(":visible");if(r.length&&r.data().contextMenuRoot.$trigger.is(c(t.context).find(t.selector))){r.trigger("contextmenu:hide",{force:true})}try{if(p[t.ns].$menu){p[t.ns].$menu.remove()}delete p[t.ns]}catch(e){p[t.ns]=null}c(t.context).off(t.ns);return true})}else if(!i.selector){n.off(".contextMenu .contextMenuAutoHide");c.each(p,function(e,t){c(t.context).off(t.ns)});f={};p={};d=0;l=false;c("#context-menu-layer, .context-menu-list").remove()}else if(f[i.selector]){r=c(".context-menu-list").filter(":visible");if(r.length&&r.data().contextMenuRoot.$trigger.is(i.selector)){r.trigger("contextmenu:hide",{force:true})}try{if(p[f[i.selector]].$menu){p[f[i.selector]].$menu.remove()}delete p[f[i.selector]]}catch(e){p[f[i.selector]]=null}n.off(f[i.selector])}break;case"html5":if(!c.support.htmlCommand&&!c.support.htmlMenuitem||typeof t=="boolean"&&t){c('menu[type="context"]').each(function(){if(this.id){c.contextMenu({selector:"[contextmenu="+this.id+"]",items:c.contextMenu.fromMenu(this)})}}).css("display","none")}break;default:throw new Error('Unknown operation "'+e+'"')}return this};c.contextMenu.setInputValues=function(e,i){if(i===u){i={}}c.each(e.inputs,function(e,t){switch(t.type){case"text":case"textarea":t.value=i[e]||"";break;case"checkbox":t.selected=i[e]?true:false;break;case"radio":t.selected=(i[t.radio]||"")==t.value?true:false;break;case"select":t.selected=i[e]||"";break}})};c.contextMenu.getInputValues=function(e,i){if(i===u){i={}}c.each(e.inputs,function(e,t){switch(t.type){case"text":case"textarea":case"select":i[e]=t.$input.val();break;case"checkbox":i[e]=t.$input.prop("checked");break;case"radio":if(t.$input.prop("checked")){i[t.radio]=t.value}break}});return i};function b(e){return e.id&&c('label[for="'+e.id+'"]').val()||e.name}function w(s,e,r){if(!r){r=0}e.each(function(){var e=c(this),t=this,i=this.nodeName.toLowerCase(),n,a;if(i=="label"&&e.find("input, textarea, select").length){n=e.text();e=e.children().first();t=e.get(0);i=t.nodeName.toLowerCase()}switch(i){case"menu":a={name:e.attr("label"),items:{}};r=w(a.items,e.children(),r);break;case"a":case"button":a={name:e.text(),disabled:!!e.attr("disabled"),callback:function(){return function(){e.click()}}()};break;case"menuitem":case"command":switch(e.attr("type")){case u:case"command":case"menuitem":a={name:e.attr("label"),disabled:!!e.attr("disabled"),callback:function(){return function(){e.click()}}()};break;case"checkbox":a={type:"checkbox",disabled:!!e.attr("disabled"),name:e.attr("label"),selected:!!e.attr("checked")};break;case"radio":a={type:"radio",disabled:!!e.attr("disabled"),name:e.attr("label"),radio:e.attr("radiogroup"),value:e.attr("id"),selected:!!e.attr("checked")};break;default:a=u}break;case"hr":a="-------";break;case"input":switch(e.attr("type")){case"text":a={type:"text",name:n||b(t),disabled:!!e.attr("disabled"),value:e.val()};break;case"checkbox":a={type:"checkbox",name:n||b(t),disabled:!!e.attr("disabled"),selected:!!e.attr("checked")};break;case"radio":a={type:"radio",name:n||b(t),disabled:!!e.attr("disabled"),radio:!!e.attr("name"),value:e.val(),selected:!!e.attr("checked")};break;default:a=u;break}break;case"select":a={type:"select",name:n||b(t),disabled:!!e.attr("disabled"),selected:e.val(),options:{}};e.children().each(function(){a.options[this.value]=c(this).text()});break;case"textarea":a={type:"textarea",name:n||b(t),disabled:!!e.attr("disabled"),value:e.val()};break;case"label":break;default:a={type:"html",html:e.clone(true)};break}if(a){r++;s["key"+r]=a}});return r}c.contextMenu.fromMenu=function(e){var t=c(e),i={};w(i,t.children());return i};c.contextMenu.defaults=g;c.contextMenu.types=m;c.contextMenu.handle=_;c.contextMenu.op=v;c.contextMenu.menus=p})(jQuery);(function(i){if(typeof define==="function"&&define.amd){define(["jquery"],i)}else if(typeof module==="object"&&module.exports){module.exports=function(e,t){if(t===undefined){if(typeof window!=="undefined"){t=require("jquery")}else{t=require("jquery")(e)}}i(t);return t}}else{i(jQuery)}})(function(i){var e=function(){if(i&&i.fn&&i.fn.select2&&i.fn.select2.amd){var t=i.fn.select2.amd}var t;(function(){if(!t||!t.requirejs){if(!t){t={}}else{a=t}var e,a,u;(function(f){var s,r,p,m,g={},_={},v={},y={},i=Object.prototype.hasOwnProperty,n=[].slice,b=/\.js$/;function w(e,t){return i.call(e,t)}function o(e,t){var i,n,a,s,r,o,l,d,u,c,h,f,p=t&&t.split("/"),m=v.map,g=m&&m["*"]||{};if(e){e=e.split("/");r=e.length-1;if(v.nodeIdCompat&&b.test(e[r])){e[r]=e[r].replace(b,"")}if(e[0].charAt(0)==="."&&p){f=p.slice(0,p.length-1);e=f.concat(e)}for(u=0;u<e.length;u++){h=e[u];if(h==="."){e.splice(u,1);u-=1}else if(h===".."){if(u===0||u===1&&e[2]===".."||e[u-1]===".."){continue}else if(u>0){e.splice(u-1,2);u-=2}}}e=e.join("/")}if((p||g)&&m){i=e.split("/");for(u=i.length;u>0;u-=1){n=i.slice(0,u).join("/");if(p){for(c=p.length;c>0;c-=1){a=m[p.slice(0,c).join("/")];if(a){a=a[n];if(a){s=a;o=u;break}}}}if(s){break}if(!l&&g&&g[n]){l=g[n];d=u}}if(!s&&l){s=l;o=d}if(s){i.splice(0,o,s);e=i.join("/")}}return e}function M(t,i){return function(){var e=n.call(arguments,0);if(typeof e[0]!=="string"&&e.length===1){e.push(null)}return r.apply(f,e.concat([t,i]))}}function l(t){return function(e){return o(e,t)}}function k(t){return function(e){g[t]=e}}function L(e){if(w(_,e)){var t=_[e];delete _[e];y[e]=true;s.apply(f,t)}if(!w(g,e)&&!w(y,e)){throw new Error("No "+e)}return g[e]}function d(e){var t,i=e?e.indexOf("!"):-1;if(i>-1){t=e.substring(0,i);e=e.substring(i+1,e.length)}return[t,e]}function S(e){return e?d(e):[]}p=function(e,t){var i,n=d(e),a=n[0],s=t[1];e=n[1];if(a){a=o(a,s);i=L(a)}if(a){if(i&&i.normalize){e=i.normalize(e,l(s))}else{e=o(e,s)}}else{e=o(e,s);n=d(e);a=n[0];e=n[1];if(a){i=L(a)}}return{f:a?a+"!"+e:e,n:e,pr:a,p:i}};function t(e){return function(){return v&&v.config&&v.config[e]||{}}}m={require:function(e){return M(e)},exports:function(e){var t=g[e];if(typeof t!=="undefined"){return t}else{return g[e]={}}},module:function(e){return{id:e,uri:"",exports:g[e],config:t(e)}}};s=function(e,t,i,n){var a,s,r,o,l,d,u=[],c=typeof i,h;n=n||e;d=S(n);if(c==="undefined"||c==="function"){t=!t.length&&i.length?["require","exports","module"]:t;for(l=0;l<t.length;l+=1){o=p(t[l],d);s=o.f;if(s==="require"){u[l]=m.require(e)}else if(s==="exports"){u[l]=m.exports(e);h=true}else if(s==="module"){a=u[l]=m.module(e)}else if(w(g,s)||w(_,s)||w(y,s)){u[l]=L(s)}else if(o.p){o.p.load(o.n,M(n,true),k(s),{});u[l]=g[s]}else{throw new Error(e+" missing "+s)}}r=i?i.apply(g[e],u):undefined;if(e){if(a&&a.exports!==f&&a.exports!==g[e]){g[e]=a.exports}else if(r!==f||!h){g[e]=r}}}else if(e){g[e]=i}};e=a=r=function(e,t,i,n,a){if(typeof e==="string"){if(m[e]){return m[e](t)}return L(p(e,S(t)).f)}else if(!e.splice){v=e;if(v.deps){r(v.deps,v.callback)}if(!t){return}if(t.splice){e=t;t=i;i=null}else{e=f}}t=t||function(){};if(typeof i==="function"){i=n;n=a}if(n){s(f,e,t,i)}else{setTimeout(function(){s(f,e,t,i)},4)}return r};r.config=function(e){return r(e)};e._defined=g;u=function(e,t,i){if(typeof e!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!t.splice){i=t;t=[]}if(!w(g,e)&&!w(_,e)){_[e]=[e,t,i]}};u.amd={jQuery:true}})();t.requirejs=e;t.require=a;t.define=u}})();t.define("almond",function(){});t.define("jquery",[],function(){var e=i||$;if(e==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return e});t.define("select2/utils",["jquery"],function(s){var a={};a.Extend=function(e,t){var i={}.hasOwnProperty;function n(){this.constructor=e}for(var a in t){if(i.call(t,a)){e[a]=t[a]}}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e};function c(e){var t=e.prototype;var i=[];for(var n in t){var a=t[n];if(typeof a!=="function"){continue}if(n==="constructor"){continue}i.push(n)}return i}a.Decorate=function(n,a){var e=c(a);var t=c(n);function s(){var e=Array.prototype.unshift;var t=a.prototype.constructor.length;var i=n.prototype.constructor;if(t>0){e.call(arguments,n.prototype.constructor);i=a.prototype.constructor}i.apply(this,arguments)}a.displayName=n.displayName;function i(){this.constructor=s}s.prototype=new i;for(var r=0;r<t.length;r++){var o=t[r];s.prototype[o]=n.prototype[o]}var l=function(e){var t=function(){};if(e in s.prototype){t=s.prototype[e]}var i=a.prototype[e];return function(){var e=Array.prototype.unshift;e.call(arguments,t);return i.apply(this,arguments)}};for(var d=0;d<e.length;d++){var u=e[d];s.prototype[u]=l(u)}return s};var e=function(){this.listeners={}};e.prototype.on=function(e,t){this.listeners=this.listeners||{};if(e in this.listeners){this.listeners[e].push(t)}else{this.listeners[e]=[t]}};e.prototype.trigger=function(e){var t=Array.prototype.slice;var i=t.call(arguments,1);this.listeners=this.listeners||{};if(i==null){i=[]}if(i.length===0){i.push({})}i[0]._type=e;if(e in this.listeners){this.invoke(this.listeners[e],t.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};e.prototype.invoke=function(e,t){for(var i=0,n=e.length;i<n;i++){e[i].apply(this,t)}};a.Observable=e;a.generateChars=function(e){var t="";for(var i=0;i<e;i++){var n=Math.floor(Math.random()*36);t+=n.toString(36)}return t};a.bind=function(e,t){return function(){e.apply(t,arguments)}};a._convertData=function(e){for(var t in e){var i=t.split("-");var n=e;if(i.length===1){continue}for(var a=0;a<i.length;a++){var s=i[a];s=s.substring(0,1).toLowerCase()+s.substring(1);if(!(s in n)){n[s]={}}if(a==i.length-1){n[s]=e[t]}n=n[s]}delete e[t]}return e};a.hasScroll=function(e,t){var i=s(t);var n=t.style.overflowX;var a=t.style.overflowY;if(n===a&&(a==="hidden"||a==="visible")){return false}if(n==="scroll"||a==="scroll"){return true}return i.innerHeight()<t.scrollHeight||i.innerWidth()<t.scrollWidth};a.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof e!=="string"){return e}return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})};a.__cache={};var i=0;a.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");if(t!=null){return t}if(e.id){t="select2-data-"+e.id}else{t="select2-data-"+(++i).toString()+"-"+a.generateChars(4)}e.setAttribute("data-select2-id",t);return t};a.StoreData=function(e,t,i){var n=a.GetUniqueElementId(e);if(!a.__cache[n]){a.__cache[n]={}}a.__cache[n][t]=i};a.GetData=function(e,t){var i=a.GetUniqueElementId(e);if(t){if(a.__cache[i]){if(a.__cache[i][t]!=null){return a.__cache[i][t]}return s(e).data(t)}return s(e).data(t)}else{return a.__cache[i]}};a.RemoveData=function(e){var t=a.GetUniqueElementId(e);if(a.__cache[t]!=null){delete a.__cache[t]}e.removeAttribute("data-select2-id")};a.copyNonInternalCssClasses=function(e,t){var i;var n=e.getAttribute("class").trim().split(/\s+/);n=n.filter(function(e){return e.indexOf("select2-")===0});var a=t.getAttribute("class").trim().split(/\s+/);a=a.filter(function(e){return e.indexOf("select2-")!==0});var s=n.concat(a);e.setAttribute("class",s.join(" "))};return a});t.define("select2/results",["jquery","./utils"],function(f,p){function n(e,t,i){this.$element=e;this.data=i;this.options=t;n.__super__.constructor.call(this)}p.Extend(n,p.Observable);n.prototype.render=function(){var e=f('<ul class="select2-results__options" role="listbox"></ul>');if(this.options.get("multiple")){e.attr("aria-multiselectable","true")}this.$results=e;return e};n.prototype.clear=function(){this.$results.empty()};n.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear();this.hideLoading();var i=f('<li role="alert" aria-live="assertive"'+' class="select2-results__option"></li>');var n=this.options.get("translations").get(e.message);i.append(t(n(e.args)));i[0].className+=" select2-results__message";this.$results.append(i)};n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};n.prototype.append=function(e){this.hideLoading();var t=[];if(e.results==null||e.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=e.results[i];var a=this.option(n);t.push(a)}this.$results.append(t)};n.prototype.position=function(e,t){var i=t.find(".select2-results");i.append(e)};n.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)};n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable");var t=e.filter(".select2-results__option--selected");if(t.length>0){t.first().trigger("mouseenter")}else{e.first().trigger("mouseenter")}this.ensureHighlightVisible()};n.prototype.setClasses=function(){var i=this;this.data.current(function(e){var n=e.map(function(e){return e.id.toString()});var t=i.$results.find(".select2-results__option--selectable");t.each(function(){var e=f(this);var t=p.GetData(this,"data");var i=""+t.id;if(t.element!=null&&t.element.selected||t.element==null&&n.indexOf(i)>-1){this.classList.add("select2-results__option--selected");e.attr("aria-selected","true")}else{this.classList.remove("select2-results__option--selected");e.attr("aria-selected","false")}})})};n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching");var i={disabled:true,loading:true,text:t(e)};var n=this.option(i);n.className+=" loading-results";this.$results.prepend(n)};n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};n.prototype.option=function(e){var t=document.createElement("li");t.classList.add("select2-results__option");t.classList.add("select2-results__option--selectable");var i={role:"option"};var n=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;if(e.element!=null&&n.call(e.element,":disabled")||e.element==null&&e.disabled){i["aria-disabled"]="true";t.classList.remove("select2-results__option--selectable");t.classList.add("select2-results__option--disabled")}if(e.id==null){t.classList.remove("select2-results__option--selectable")}if(e._resultId!=null){t.id=e._resultId}if(e.title){t.title=e.title}if(e.children){i.role="group";i["aria-label"]=e.text;t.classList.remove("select2-results__option--selectable");t.classList.add("select2-results__option--group")}for(var a in i){var s=i[a];t.setAttribute(a,s)}if(e.children){var r=f(t);var o=document.createElement("strong");o.className="select2-results__group";this.template(e,o);var l=[];for(var d=0;d<e.children.length;d++){var u=e.children[d];var c=this.option(u);l.push(c)}var h=f("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});h.append(l);r.append(o);r.append(h)}else{this.template(e,t)}p.StoreData(t,"data",e);return t};n.prototype.bind=function(t,e){var l=this;var i=t.id+"-results";this.$results.attr("id",i);t.on("results:all",function(e){l.clear();l.append(e.data);if(t.isOpen()){l.setClasses();l.highlightFirstItem()}});t.on("results:append",function(e){l.append(e.data);if(t.isOpen()){l.setClasses()}});t.on("query",function(e){l.hideMessages();l.showLoading(e)});t.on("select",function(){if(!t.isOpen()){return}l.setClasses();if(l.options.get("scrollAfterSelect")){l.highlightFirstItem()}});t.on("unselect",function(){if(!t.isOpen()){return}l.setClasses();if(l.options.get("scrollAfterSelect")){l.highlightFirstItem()}});t.on("open",function(){l.$results.attr("aria-expanded","true");l.$results.attr("aria-hidden","false");l.setClasses();l.ensureHighlightVisible()});t.on("close",function(){l.$results.attr("aria-expanded","false");l.$results.attr("aria-hidden","true");l.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var e=l.getHighlightedResults();if(e.length===0){return}e.trigger("mouseup")});t.on("results:select",function(){var e=l.getHighlightedResults();if(e.length===0){return}var t=p.GetData(e[0],"data");if(e.hasClass("select2-results__option--selected")){l.trigger("close",{})}else{l.trigger("select",{data:t})}});t.on("results:previous",function(){var e=l.getHighlightedResults();var t=l.$results.find(".select2-results__option--selectable");var i=t.index(e);if(i<=0){return}var n=i-1;if(e.length===0){n=0}var a=t.eq(n);a.trigger("mouseenter");var s=l.$results.offset().top;var r=a.offset().top;var o=l.$results.scrollTop()+(r-s);if(n===0){l.$results.scrollTop(0)}else if(r-s<0){l.$results.scrollTop(o)}});t.on("results:next",function(){var e=l.getHighlightedResults();var t=l.$results.find(".select2-results__option--selectable");var i=t.index(e);var n=i+1;if(n>=t.length){return}var a=t.eq(n);a.trigger("mouseenter");var s=l.$results.offset().top+l.$results.outerHeight(false);var r=a.offset().top+a.outerHeight(false);var o=l.$results.scrollTop()+r-s;if(n===0){l.$results.scrollTop(0)}else if(r>s){l.$results.scrollTop(o)}});t.on("results:focus",function(e){e.element[0].classList.add("select2-results__option--highlighted");e.element[0].setAttribute("aria-selected","true")});t.on("results:message",function(e){l.displayMessage(e)});if(f.fn.mousewheel){this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop();var i=l.$results.get(0).scrollHeight-t+e.deltaY;var n=e.deltaY>0&&t-e.deltaY<=0;var a=e.deltaY<0&&i<=l.$results.height();if(n){l.$results.scrollTop(0);e.preventDefault();e.stopPropagation()}else if(a){l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height());e.preventDefault();e.stopPropagation()}})}this.$results.on("mouseup",".select2-results__option--selectable",function(e){var t=f(this);var i=p.GetData(this,"data");if(t.hasClass("select2-results__option--selected")){if(l.options.get("multiple")){l.trigger("unselect",{originalEvent:e,data:i})}else{l.trigger("close",{})}return}l.trigger("select",{originalEvent:e,data:i})});this.$results.on("mouseenter",".select2-results__option--selectable",function(e){var t=p.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false");l.trigger("results:focus",{data:t,element:f(this)})})};n.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e};n.prototype.destroy=function(){this.$results.remove()};n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(e.length===0){return}var t=this.$results.find(".select2-results__option--selectable");var i=t.index(e);var n=this.$results.offset().top;var a=e.offset().top;var s=this.$results.scrollTop()+(a-n);var r=a-n;s-=e.outerHeight(false)*2;if(i<=2){this.$results.scrollTop(0)}else if(r>this.$results.outerHeight()||r<0){this.$results.scrollTop(s)}};n.prototype.template=function(e,t){var i=this.options.get("templateResult");var n=this.options.get("escapeMarkup");var a=i(e,t);if(a==null){t.style.display="none"}else if(typeof a==="string"){t.innerHTML=n(a)}else{f(t).append(a)}};return n});t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e});t.define("select2/selection/base",["jquery","../utils","../keys"],function(a,s,r){function i(e,t){this.$element=e;this.options=t;i.__super__.constructor.call(this)}s.Extend(i,s.Observable);i.prototype.render=function(){var e=a('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(s.GetData(this.$element[0],"old-tabindex")!=null){this._tabindex=s.GetData(this.$element[0],"old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}e.attr("title",this.$element.attr("title"));e.attr("tabindex",this._tabindex);e.attr("aria-disabled","false");this.$selection=e;return e};i.prototype.bind=function(e,t){var i=this;var n=e.id+"-results";this.container=e;this.$selection.on("focus",function(e){i.trigger("focus",e)});this.$selection.on("blur",function(e){i._handleBlur(e)});this.$selection.on("keydown",function(e){i.trigger("keypress",e);if(e.which===r.SPACE){e.preventDefault()}});e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)});e.on("selection:update",function(e){i.update(e.data)});e.on("open",function(){i.$selection.attr("aria-expanded","true");i.$selection.attr("aria-owns",n);i._attachCloseHandler(e)});e.on("close",function(){i.$selection.attr("aria-expanded","false");i.$selection.removeAttr("aria-activedescendant");i.$selection.removeAttr("aria-owns");i.$selection.trigger("focus");i._detachCloseHandler(e)});e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex);i.$selection.attr("aria-disabled","false")});e.on("disable",function(){i.$selection.attr("tabindex","-1");i.$selection.attr("aria-disabled","true")})};i.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){if(document.activeElement==t.$selection[0]||a.contains(t.$selection[0],document.activeElement)){return}t.trigger("blur",e)},1)};i.prototype._attachCloseHandler=function(e){a(document.body).on("mousedown.select2."+e.id,function(e){var t=a(e.target);var i=t.closest(".select2");var n=a(".select2.select2-container--open");n.each(function(){if(this==i[0]){return}var e=s.GetData(this,"element");e.select2("close")})})};i.prototype._detachCloseHandler=function(e){a(document.body).off("mousedown.select2."+e.id)};i.prototype.position=function(e,t){var i=t.find(".selection");i.append(e)};i.prototype.destroy=function(){this._detachCloseHandler(this.container)};i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")};i.prototype.isEnabled=function(){return!this.isDisabled()};i.prototype.isDisabled=function(){return this.options.get("disabled")};return i});t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,n){function a(){a.__super__.constructor.apply(this,arguments)}i.Extend(a,t);a.prototype.render=function(){var e=a.__super__.render.call(this);e[0].classList.add("select2-selection--single");e.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return e};a.prototype.bind=function(t,e){var i=this;a.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",n);this.$selection.attr("aria-controls",n);this.$selection.on("mousedown",function(e){if(e.which!==1){return}i.trigger("toggle",{originalEvent:e})});this.$selection.on("focus",function(e){});this.$selection.on("blur",function(e){});t.on("focus",function(e){if(!t.isOpen()){i.$selection.trigger("focus")}})};a.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};a.prototype.display=function(e,t){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(e,t))};a.prototype.selectionContainer=function(){return e("<span></span>")};a.prototype.update=function(e){if(e.length===0){this.clear();return}var t=e[0];var i=this.$selection.find(".select2-selection__rendered");var n=this.display(t,i);i.empty().append(n);var a=t.title||t.text;if(a){i.attr("title",a)}else{i.removeAttr("title")}};return a});t.define("select2/selection/multiple",["jquery","./base","../utils"],function(s,e,h){function n(e,t){n.__super__.constructor.apply(this,arguments)}h.Extend(n,e);n.prototype.render=function(){var e=n.__super__.render.call(this);e[0].classList.add("select2-selection--multiple");e.html('<ul class="select2-selection__rendered"></ul>');return e};n.prototype.bind=function(e,t){var a=this;n.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i);this.$selection.on("click",function(e){a.trigger("toggle",{originalEvent:e})});this.$selection.on("click",".select2-selection__choice__remove",function(e){if(a.isDisabled()){return}var t=s(this);var i=t.parent();var n=h.GetData(i[0],"data");a.trigger("unselect",{originalEvent:e,data:n})});this.$selection.on("keydown",".select2-selection__choice__remove",function(e){if(a.isDisabled()){return}e.stopPropagation()})};n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};n.prototype.display=function(e,t){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(e,t))};n.prototype.selectionContainer=function(){var e=s('<li class="select2-selection__choice">'+'<button type="button" class="select2-selection__choice__remove" '+'tabindex="-1">'+'<span aria-hidden="true">&times;</span>'+"</button>"+'<span class="select2-selection__choice__display"></span>'+"</li>");return e};n.prototype.update=function(e){this.clear();if(e.length===0){return}var t=[];var i=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-";for(var n=0;n<e.length;n++){var a=e[n];var s=this.selectionContainer();var r=this.display(a,s);var o=i+h.generateChars(4)+"-";if(a.id){o+=a.id}else{o+=h.generateChars(4)}s.find(".select2-selection__choice__display").append(r).attr("id",o);var l=a.title||a.text;if(l){s.attr("title",l)}var d=this.options.get("translations").get("removeItem");var u=s.find(".select2-selection__choice__remove");u.attr("title",d());u.attr("aria-label",d());u.attr("aria-describedby",o);h.StoreData(s[0],"data",a);t.push(s)}var c=this.$selection.find(".select2-selection__rendered");c.append(t)};return n});t.define("select2/selection/placeholder",[],function(){function e(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));e.call(this,t,i)}e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();i.html(this.display(t));i[0].classList.add("select2-selection__placeholder");i[0].classList.remove("select2-selection__choice");var n=t.title||t.text||i.text();this.$selection.find(".select2-selection__rendered").attr("title",n);return i};e.prototype.update=function(e,t){var i=t.length==1&&t[0].id!=this.placeholder.id;var n=t.length>1;if(n||i){return e.call(this,t)}this.clear();var a=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(a)};return e});t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(s,n,o){function e(){}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(e){n._handleClear(e)});t.on("keypress",function(e){n._handleKeyboardClear(e,t)})};e.prototype._handleClear=function(e,t){if(this.isDisabled()){return}var i=this.$selection.find(".select2-selection__clear");if(i.length===0){return}t.stopPropagation();var n=o.GetData(i[0],"data");var a=this.$element.val();this.$element.val(this.placeholder.id);var s={data:n};this.trigger("clear",s);if(s.prevented){this.$element.val(a);return}for(var r=0;r<n.length;r++){s={data:n[r]};this.trigger("unselect",s);if(s.prevented){this.$element.val(a);return}}this.$element.trigger("input").trigger("change");this.trigger("toggle",{})};e.prototype._handleKeyboardClear=function(e,t,i){if(i.isOpen()){return}if(t.which==n.DELETE||t.which==n.BACKSPACE){this._handleClear(t)}};e.prototype.update=function(e,t){e.call(this,t);this.$selection.find(".select2-selection__clear").remove();this.$selection[0].classList.remove("select2-selection--clearable");if(this.$selection.find(".select2-selection__placeholder").length>0||t.length===0){return}var i=this.$selection.find(".select2-selection__rendered").attr("id");var n=this.options.get("translations").get("removeAllItems");var a=s('<button type="button" class="select2-selection__clear" tabindex="-1">'+'<span aria-hidden="true">&times;</span>'+"</button>");a.attr("title",n());a.attr("aria-label",n());a.attr("aria-describedby",i);o.StoreData(a[0],"data",t);this.$selection.prepend(a);this.$selection[0].classList.add("select2-selection--clearable")};return e});t.define("select2/selection/search",["jquery","../utils","../keys"],function(a,l,d){function e(e,t,i){e.call(this,t,i)}e.prototype.render=function(e){var t=this.options.get("translations").get("search");var i=a('<span class="select2-search select2-search--inline">'+'<textarea class="select2-search__field"'+' type="search" tabindex="-1"'+' autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" >'+"</textarea>"+"</span>");this.$searchContainer=i;this.$search=i.find("textarea");this.$search.prop("autocomplete",this.options.get("autocomplete"));this.$search.attr("aria-label",t());var n=e.call(this);this._transferTabIndex();n.append(this.$searchContainer);return n};e.prototype.bind=function(e,t,i){var a=this;var n=t.id+"-results";var s=t.id+"-container";e.call(this,t,i);a.$search.attr("aria-describedby",s);t.on("open",function(){a.$search.attr("aria-controls",n);a.$search.trigger("focus")});t.on("close",function(){a.$search.val("");a.resizeSearch();a.$search.removeAttr("aria-controls");a.$search.removeAttr("aria-activedescendant");a.$search.trigger("focus")});t.on("enable",function(){a.$search.prop("disabled",false);a._transferTabIndex()});t.on("disable",function(){a.$search.prop("disabled",true)});t.on("focus",function(e){a.$search.trigger("focus")});t.on("results:focus",function(e){if(e.data._resultId){a.$search.attr("aria-activedescendant",e.data._resultId)}else{a.$search.removeAttr("aria-activedescendant")}});this.$selection.on("focusin",".select2-search--inline",function(e){a.trigger("focus",e)});this.$selection.on("focusout",".select2-search--inline",function(e){a._handleBlur(e)});this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation();a.trigger("keypress",e);a._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===d.BACKSPACE&&a.$search.val()===""){var i=a.$selection.find(".select2-selection__choice").last();if(i.length>0){var n=l.GetData(i[0],"data");a.searchRemoveChoice(n);e.preventDefault()}}});this.$selection.on("click",".select2-search--inline",function(e){if(a.$search.val()){e.stopPropagation()}});var r=document.documentMode;var o=r&&r<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(o){a.$selection.off("input.search input.searchcheck");return}a.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(o&&e.type==="input"){a.$selection.off("input.search input.searchcheck");return}var t=e.which;if(t==d.SHIFT||t==d.CTRL||t==d.ALT){return}if(t==d.TAB){return}a.handleSearch(e)})};e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)};e.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");e.call(this,t);this.resizeSearch();if(i){this.$search.trigger("focus")}};e.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()};e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";if(this.$search.attr("placeholder")===""){var t=this.$search.val().length+1;e=t*.75+"em"}this.$search.css("width",e)};return e});t.define("select2/selection/selectionCss",["../utils"],function(n){function e(){}e.prototype.render=function(e){var t=e.call(this);var i=this.options.get("selectionCssClass")||"";if(i.indexOf(":all:")!==-1){i=i.replace(":all:","");n.copyNonInternalCssClasses(t[0],this.$element[0])}t.addClass(i);return t};return e});t.define("select2/selection/eventRelay",["jquery"],function(r){function e(){}e.prototype.bind=function(e,t,i){var n=this;var a=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"];var s=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,i);t.on("*",function(e,t){if(a.indexOf(e)===-1){return}t=t||{};var i=r.Event("select2:"+e,{params:t});n.$element.trigger(i);if(s.indexOf(e)===-1){return}t.prevented=i.isDefaultPrevented()})};return e});t.define("select2/translation",["jquery","require"],function(t,i){function n(e){this.dict=e||{}}n.prototype.all=function(){return this.dict};n.prototype.get=function(e){return this.dict[e]};n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)};n._cache={};n.loadPath=function(e){if(!(e in n._cache)){var t=i(e);n._cache[e]=t}return new n(n._cache[e])};return n});t.define("select2/diacritics",[],function(){var e={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"};return e});t.define("select2/data/base",["../utils"],function(n){function i(e,t){i.__super__.constructor.call(this)}n.Extend(i,n.Observable);i.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")};i.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")};i.prototype.bind=function(e,t){};i.prototype.destroy=function(){};i.prototype.generateResultId=function(e,t){var i=e.id+"-result-";i+=n.generateChars(4);if(t.id!=null){i+="-"+t.id.toString()}else{i+="-"+n.generateChars(4)}return i};return i});t.define("select2/data/select",["./base","../utils","jquery"],function(e,l,d){function i(e,t){this.$element=e;this.options=t;i.__super__.constructor.call(this)}l.Extend(i,e);i.prototype.current=function(e){var t=this;var i=Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(e){return t.item(d(e))});e(i)};i.prototype.select=function(a){var s=this;a.selected=true;if(a.element!=null&&a.element.tagName.toLowerCase()==="option"){a.element.selected=true;this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple")){this.current(function(e){var t=[];a=[a];a.push.apply(a,e);for(var i=0;i<a.length;i++){var n=a[i].id;if(t.indexOf(n)===-1){t.push(n)}}s.$element.val(t);s.$element.trigger("input").trigger("change")})}else{var e=a.id;this.$element.val(e);this.$element.trigger("input").trigger("change")}};i.prototype.unselect=function(a){var s=this;if(!this.$element.prop("multiple")){return}a.selected=false;if(a.element!=null&&a.element.tagName.toLowerCase()==="option"){a.element.selected=false;this.$element.trigger("input").trigger("change");return}this.current(function(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i].id;if(n!==a.id&&t.indexOf(n)===-1){t.push(n)}}s.$element.val(t);s.$element.trigger("input").trigger("change")})};i.prototype.bind=function(e,t){var i=this;this.container=e;e.on("select",function(e){i.select(e.data)});e.on("unselect",function(e){i.unselect(e.data)})};i.prototype.destroy=function(){this.$element.find("*").each(function(){l.RemoveData(this)})};i.prototype.query=function(n,e){var a=[];var s=this;var t=this.$element.children();t.each(function(){if(this.tagName.toLowerCase()!=="option"&&this.tagName.toLowerCase()!=="optgroup"){return}var e=d(this);var t=s.item(e);var i=s.matches(n,t);if(i!==null){a.push(i)}});e({results:a})};i.prototype.addOptions=function(e){this.$element.append(e)};i.prototype.option=function(e){var t;if(e.children){t=document.createElement("optgroup");t.label=e.text}else{t=document.createElement("option");if(t.textContent!==undefined){t.textContent=e.text}else{t.innerText=e.text}}if(e.id!==undefined){t.value=e.id}if(e.disabled){t.disabled=true}if(e.selected){t.selected=true}if(e.title){t.title=e.title}var i=this._normalizeItem(e);i.element=t;l.StoreData(t,"data",i);return d(t)};i.prototype.item=function(e){var t={};t=l.GetData(e[0],"data");if(t!=null){return t}var i=e[0];if(i.tagName.toLowerCase()==="option"){t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")}}else if(i.tagName.toLowerCase()==="optgroup"){t={text:e.prop("label"),children:[],title:e.prop("title")};var n=e.children("option");var a=[];for(var s=0;s<n.length;s++){var r=d(n[s]);var o=this.item(r);a.push(o)}t.children=a}t=this._normalizeItem(t);t.element=e[0];l.StoreData(e[0],"data",t);return t};i.prototype._normalizeItem=function(e){if(e!==Object(e)){e={id:e,text:e}}e=d.extend({},{text:""},e);var t={selected:false,disabled:false};if(e.id!=null){e.id=e.id.toString()}if(e.text!=null){e.text=e.text.toString()}if(e._resultId==null&&e.id&&this.container!=null){e._resultId=this.generateResultId(this.container,e)}return d.extend({},t,e)};i.prototype.matches=function(e,t){var i=this.options.get("matcher");return i(e,t)};return i});t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,p){function n(e,t){this._dataToConvert=t.get("data")||[];n.__super__.constructor.call(this,e,t)}t.Extend(n,e);n.prototype.bind=function(e,t){n.__super__.bind.call(this,e,t);this.addOptions(this.convertToOptions(this._dataToConvert))};n.prototype.select=function(i){var e=this.$element.find("option").filter(function(e,t){return t.value==i.id.toString()});if(e.length===0){e=this.option(i);this.addOptions(e)}n.__super__.select.call(this,i)};n.prototype.convertToOptions=function(e){var t=this;var i=this.$element.find("option");var n=i.map(function(){return t.item(p(this)).id}).get();var a=[];function s(e){return function(){return p(this).val()==e.id}}for(var r=0;r<e.length;r++){var o=this._normalizeItem(e[r]);if(n.indexOf(o.id)>=0){var l=i.filter(s(o));var d=this.item(l);var u=p.extend(true,{},o,d);var c=this.option(u);l.replaceWith(c);continue}var h=this.option(o);if(o.children){var f=this.convertToOptions(o.children);h.append(f)}a.push(h)}return a};return n});t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,r){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}i.__super__.constructor.call(this,e,t)}t.Extend(i,e);i.prototype._applyDefaults=function(e){var t={data:function(e){return r.extend({},e,{q:e.term})},transport:function(e,t,i){var n=r.ajax(e);n.then(t);n.fail(i);return n}};return r.extend({},t,e,true)};i.prototype.processResults=function(e){return e};i.prototype.query=function(i,n){var e=[];var a=this;if(this._request!=null){if(typeof this._request.abort==="function"){this._request.abort()}this._request=null}var t=r.extend({type:"GET"},this.ajaxOptions);if(typeof t.url==="function"){t.url=t.url.call(this.$element,i)}if(typeof t.data==="function"){t.data=t.data.call(this.$element,i)}function s(){var e=t.transport(t,function(e){var t=a.processResults(e,i);if(a.options.get("debug")&&window.console&&console.error){if(!t||!t.results||!Array.isArray(t.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}n(t)},function(){if("status"in e&&(e.status===0||e.status==="0")){return}a.trigger("results:message",{message:"errorLoading"})});a._request=e}if(this.ajaxOptions.delay&&i.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(s,this.ajaxOptions.delay)}else{s()}};return i});t.define("select2/data/tags",["jquery"],function(i){function e(e,t,i){var n=i.get("tags");var a=i.get("createTag");if(a!==undefined){this.createTag=a}var s=i.get("insertTag");if(s!==undefined){this.insertTag=s}e.call(this,t,i);if(Array.isArray(n)){for(var r=0;r<n.length;r++){var o=n[r];var l=this._normalizeItem(o);var d=this.option(l);this.$element.append(d)}}}e.prototype.query=function(e,c,h){var f=this;this._removeOldTags();if(c.term==null||c.page!=null){e.call(this,c,h);return}function p(e,t){var i=e.results;for(var n=0;n<i.length;n++){var a=i[n];var s=a.children!=null&&!p({results:a.children},true);var r=(a.text||"").toUpperCase();var o=(c.term||"").toUpperCase();var l=r===o;if(l||s){if(t){return false}e.data=i;h(e);return}}if(t){return true}var d=f.createTag(c);if(d!=null){var u=f.option(d);u.attr("data-select2-tag","true");f.addOptions([u]);f.insertTag(i,d)}e.results=i;h(e)}e.call(this,c,p)};e.prototype.createTag=function(e,t){if(t.term==null){return null}var i=t.term.trim();if(i===""){return null}return{id:i,text:i}};e.prototype.insertTag=function(e,t,i){t.unshift(i)};e.prototype._removeOldTags=function(e){var t=this.$element.find("option[data-select2-tag]");t.each(function(){if(this.selected){return}i(this).remove()})};return e});t.define("select2/data/tokenizer",["jquery"],function(h){function e(e,t,i){var n=i.get("tokenizer");if(n!==undefined){this.tokenizer=n}e.call(this,t,i)}e.prototype.bind=function(e,t,i){e.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")};e.prototype.query=function(e,t,i){var a=this;function n(e){var t=a._normalizeItem(e);var i=a.$element.find("option").filter(function(){return h(this).val()===t.id});if(!i.length){var n=a.option(t);n.attr("data-select2-tag",true);a._removeOldTags();a.addOptions([n])}s(t)}function s(e){a.trigger("select",{data:e})}t.term=t.term||"";var r=this.tokenizer(t,this.options,n);if(r.term!==t.term){if(this.$search.length){this.$search.val(r.term);this.$search.trigger("focus")}t.term=r.term}e.call(this,t,i)};e.prototype.tokenizer=function(e,t,i,n){var a=i.get("tokenSeparators")||[];var s=t.term;var r=0;var o=this.createTag||function(e){return{id:e.term,text:e.term}};while(r<s.length){var l=s[r];if(a.indexOf(l)===-1){r++;continue}var d=s.substr(0,r);var u=h.extend({},t,{term:d});var c=o(u);if(c==null){r++;continue}n(c);s=s.substr(r+1)||"";r=0}return{term:s}};return e});t.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){t.term=t.term||"";if(t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}e.call(this,t,i)};return e});t.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){t.term=t.term||"";if(this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}e.call(this,t,i)};return e});t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");e.call(this,t,i)}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("select",function(){n._checkIfMaximumSelected()})};e.prototype.query=function(e,t,i){var n=this;this._checkIfMaximumSelected(function(){e.call(n,t,i)})};e.prototype._checkIfMaximumSelected=function(e,i){var n=this;this.current(function(e){var t=e!=null?e.length:0;if(n.maximumSelectionLength>0&&t>=n.maximumSelectionLength){n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}});return}if(i){i()}})};return e});t.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(e,t){this.$element=e;this.options=t;i.__super__.constructor.call(this)}e.Extend(i,e.Observable);i.prototype.render=function(){var e=t('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");e.attr("dir",this.options.get("dir"));this.$dropdown=e;return e};i.prototype.bind=function(){};i.prototype.position=function(e,t){};i.prototype.destroy=function(){this.$dropdown.remove()};return i});t.define("select2/dropdown/search",["jquery"],function(s){function e(){}e.prototype.render=function(e){var t=e.call(this);var i=this.options.get("translations").get("search");var n=s('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</span>");this.$searchContainer=n;this.$search=n.find("input");this.$search.prop("autocomplete",this.options.get("autocomplete"));this.$search.attr("aria-label",i());t.prepend(n);return t};e.prototype.bind=function(e,t,i){var n=this;var a=t.id+"-results";e.call(this,t,i);this.$search.on("keydown",function(e){n.trigger("keypress",e);n._keyUpPrevented=e.isDefaultPrevented()});this.$search.on("input",function(e){s(this).off("keyup")});this.$search.on("keyup input",function(e){n.handleSearch(e)});t.on("open",function(){n.$search.attr("tabindex",0);n.$search.attr("aria-controls",a);n.$search.trigger("focus");window.setTimeout(function(){n.$search.trigger("focus")},0)});t.on("close",function(){n.$search.attr("tabindex",-1);n.$search.removeAttr("aria-controls");n.$search.removeAttr("aria-activedescendant");n.$search.val("");n.$search.trigger("blur")});t.on("focus",function(){if(!t.isOpen()){n.$search.trigger("focus")}});t.on("results:all",function(e){if(e.query.term==null||e.query.term===""){var t=n.showSearch(e);if(t){n.$searchContainer[0].classList.remove("select2-search--hide")}else{n.$searchContainer[0].classList.add("select2-search--hide")}}});t.on("results:focus",function(e){if(e.data._resultId){n.$search.attr("aria-activedescendant",e.data._resultId)}else{n.$search.removeAttr("aria-activedescendant")}})};e.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};e.prototype.showSearch=function(e,t){return true};return e});t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));e.call(this,t,i,n)}e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results);e.call(this,t)};e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.removePlaceholder=function(e,t){var i=t.slice(0);for(var n=t.length-1;n>=0;n--){var a=t[n];if(this.placeholder.id===a.id){i.splice(n,1)}}return i};return e});t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,i,n){this.lastParams={};e.call(this,t,i,n);this.$loadingMore=this.createLoadingMore();this.loading=false}e.prototype.append=function(e,t){this.$loadingMore.remove();this.loading=false;e.call(this,t);if(this.showLoadingMore(t)){this.$results.append(this.$loadingMore);this.loadMoreIfNeeded()}};e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("query",function(e){n.lastParams=e;n.loading=true});t.on("query:append",function(e){n.lastParams=e;n.loading=true});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))};e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);if(this.loading||!e){return}var t=this.$results.offset().top+this.$results.outerHeight(false);var i=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(false);if(t+50>=i){this.loadMore()}};e.prototype.loadMore=function(){this.loading=true;var e=n.extend({},{page:1},this.lastParams);e.page++;this.trigger("query:append",e)};e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more};e.prototype.createLoadingMore=function(){var e=n("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="option" aria-disabled="true"></li>');var t=this.options.get("translations").get("loadingMore");e.html(t(this.lastParams));return e};return e});t.define("select2/dropdown/attachBody",["jquery","../utils"],function(f,o){function e(e,t,i){this.$dropdownParent=f(i.get("dropdownParent")||document.body);e.call(this,t,i)}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("open",function(){n._showDropdown();n._attachPositioningHandler(t);n._bindContainerResultHandlers(t)});t.on("close",function(){n._hideDropdown();n._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})};e.prototype.destroy=function(e){e.call(this);this.$dropdownContainer.remove()};e.prototype.position=function(e,t,i){t.attr("class",i.attr("class"));t[0].classList.remove("select2");t[0].classList.add("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i};e.prototype.render=function(e){var t=f("<span></span>");var i=e.call(this);t.append(i);this.$dropdownContainer=t;return t};e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()};e.prototype._bindContainerResultHandlers=function(e,t){if(this._containerResultsHandlersBound){return}var i=this;t.on("results:all",function(){i._positionDropdown();i._resizeDropdown()});t.on("results:append",function(){i._positionDropdown();i._resizeDropdown()});t.on("results:message",function(){i._positionDropdown();i._resizeDropdown()});t.on("select",function(){i._positionDropdown();i._resizeDropdown()});t.on("unselect",function(){i._positionDropdown();i._resizeDropdown()});this._containerResultsHandlersBound=true};e.prototype._attachPositioningHandler=function(e,t){var i=this;var n="scroll.select2."+t.id;var a="resize.select2."+t.id;var s="orientationchange.select2."+t.id;var r=this.$container.parents().filter(o.hasScroll);r.each(function(){o.StoreData(this,"select2-scroll-position",{x:f(this).scrollLeft(),y:f(this).scrollTop()})});r.on(n,function(e){var t=o.GetData(this,"select2-scroll-position");f(this).scrollTop(t.y)});f(window).on(n+" "+a+" "+s,function(e){i._positionDropdown();i._resizeDropdown()})};e.prototype._detachPositioningHandler=function(e,t){var i="scroll.select2."+t.id;var n="resize.select2."+t.id;var a="orientationchange.select2."+t.id;var s=this.$container.parents().filter(o.hasScroll);s.off(i);f(window).off(i+" "+n+" "+a)};e.prototype._positionDropdown=function(){var e=f(window);var t=this.$dropdown[0].classList.contains("select2-dropdown--above");var i=this.$dropdown[0].classList.contains("select2-dropdown--below");var n=null;var a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(false);var s={height:this.$container.outerHeight(false)};s.top=a.top;s.bottom=a.top+s.height;var r={height:this.$dropdown.outerHeight(false)};var o={top:e.scrollTop(),bottom:e.scrollTop()+e.height()};var l=o.top<a.top-r.height;var d=o.bottom>a.bottom+r.height;var u={left:a.left,top:s.bottom};var c=this.$dropdownParent;if(c.css("position")==="static"){c=c.offsetParent()}var h={top:0,left:0};if(f.contains(document.body,c[0])||c[0].isConnected){h=c.offset()}u.top-=h.top;u.left-=h.left;if(!t&&!i){n="below"}if(!d&&l&&!t){n="above"}else if(!l&&d&&t){n="below"}if(n=="above"||t&&n!=="below"){u.top=s.top-h.top-r.height}if(n!=null){this.$dropdown[0].classList.remove("select2-dropdown--below");this.$dropdown[0].classList.remove("select2-dropdown--above");this.$dropdown[0].classList.add("select2-dropdown--"+n);this.$container[0].classList.remove("select2-container--below");this.$container[0].classList.remove("select2-container--above");this.$container[0].classList.add("select2-container--"+n)}this.$dropdownContainer.css(u)};e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){e.minWidth=e.width;e.position="relative";e.width="auto"}this.$dropdown.css(e)};e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return e});t.define("select2/dropdown/minimumResultsForSearch",[],function(){function a(e){var t=0;for(var i=0;i<e.length;i++){var n=e[i];if(n.children){t+=a(n.children)}else{t++}}return t}function e(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}e.call(this,t,i,n)}e.prototype.showSearch=function(e,t){if(a(t.data.results)<this.minimumResultsForSearch){return false}return e.call(this,t)};return e});t.define("select2/dropdown/selectOnClose",["../utils"],function(s){function e(){}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("close",function(e){n._handleSelectOnClose(e)})};e.prototype._handleSelectOnClose=function(e,t){if(t&&t.originalSelect2Event!=null){var i=t.originalSelect2Event;if(i._type==="select"||i._type==="unselect"){return}}var n=this.getHighlightedResults();if(n.length<1){return}var a=s.GetData(n[0],"data");if(a.element!=null&&a.element.selected||a.element==null&&a.selected){return}this.trigger("select",{data:a})};return e});t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("select",function(e){n._selectTriggered(e)});t.on("unselect",function(e){n._selectTriggered(e)})};e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;if(i&&(i.ctrlKey||i.metaKey)){return}this.trigger("close",{originalEvent:i,originalSelect2Event:t})};return e});t.define("select2/dropdown/dropdownCss",["../utils"],function(n){function e(){}e.prototype.render=function(e){var t=e.call(this);var i=this.options.get("dropdownCssClass")||"";if(i.indexOf(":all:")!==-1){i=i.replace(":all:","");n.copyNonInternalCssClasses(t[0],this.$element[0])}t.addClass(i);return t};return e});t.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(s){function e(){}e.prototype.highlightFirstItem=function(e){var t=this.$results.find(".select2-results__option--selectable"+":not(.select2-results__option--selected)");if(t.length>0){var i=t.first();var n=s.GetData(i[0],"data");var a=n.element;if(a&&a.getAttribute){if(a.getAttribute("data-select2-tag")==="true"){i.trigger("mouseenter");return}}}e.call(this)};return e});t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum;var i="Please delete "+t+" character";if(t!=1){i+="s"}return i},inputTooShort:function(e){var t=e.minimum-e.input.length;var i="Please enter "+t+" or more characters";return i},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";if(e.maximum!=1){t+="s"}return t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}});t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(u,s,r,o,l,d,c,h,f,p,m,i,g,_,v,y,b,w,M,k,L,S,T,x,D,C,I,E,O,Y,e){function t(){this.reset()}t.prototype.apply=function(e){e=u.extend(true,{},this.defaults,e);if(e.dataAdapter==null){if(e.ajax!=null){e.dataAdapter=v}else if(e.data!=null){e.dataAdapter=_}else{e.dataAdapter=g}if(e.minimumInputLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,w)}if(e.maximumInputLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,M)}if(e.maximumSelectionLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,k)}if(e.tags){e.dataAdapter=p.Decorate(e.dataAdapter,y)}if(e.tokenSeparators!=null||e.tokenizer!=null){e.dataAdapter=p.Decorate(e.dataAdapter,b)}}if(e.resultsAdapter==null){e.resultsAdapter=s;if(e.ajax!=null){e.resultsAdapter=p.Decorate(e.resultsAdapter,x)}if(e.placeholder!=null){e.resultsAdapter=p.Decorate(e.resultsAdapter,T)}if(e.selectOnClose){e.resultsAdapter=p.Decorate(e.resultsAdapter,I)}if(e.tags){e.resultsAdapter=p.Decorate(e.resultsAdapter,Y)}}if(e.dropdownAdapter==null){if(e.multiple){e.dropdownAdapter=L}else{var t=p.Decorate(L,S);e.dropdownAdapter=t}if(e.minimumResultsForSearch!==0){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,C)}if(e.closeOnSelect){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,E)}if(e.dropdownCssClass!=null){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,O)}e.dropdownAdapter=p.Decorate(e.dropdownAdapter,D)}if(e.selectionAdapter==null){if(e.multiple){e.selectionAdapter=o}else{e.selectionAdapter=r}if(e.placeholder!=null){e.selectionAdapter=p.Decorate(e.selectionAdapter,l)}if(e.allowClear){e.selectionAdapter=p.Decorate(e.selectionAdapter,d)}if(e.multiple){e.selectionAdapter=p.Decorate(e.selectionAdapter,c)}if(e.selectionCssClass!=null){e.selectionAdapter=p.Decorate(e.selectionAdapter,h)}e.selectionAdapter=p.Decorate(e.selectionAdapter,f)}e.language=this._resolveLanguage(e.language);e.language.push("en");var i=[];for(var n=0;n<e.language.length;n++){var a=e.language[n];if(i.indexOf(a)===-1){i.push(a)}}e.language=i;e.translations=this._processTranslations(e.language,e.debug);return e};t.prototype.reset=function(){function l(e){function t(e){return i[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function d(e,t){if(e.term==null||e.term.trim()===""){return t}if(t.children&&t.children.length>0){var i=u.extend(true,{},t);for(var n=t.children.length-1;n>=0;n--){var a=t.children[n];var s=d(e,a);if(s==null){i.children.splice(n,1)}}if(i.children.length>0){return i}return d(e,i)}var r=l(t.text).toUpperCase();var o=l(e.term).toUpperCase();if(r.indexOf(o)>-1){return t}return null}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:p.escapeMarkup,language:{},matcher:d,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,scrollAfterSelect:false,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}};t.prototype.applyFromElement=function(e,t){var i=e.language;var n=this.defaults.language;var a=t.prop("lang");var s=t.closest("[lang]").prop("lang");var r=Array.prototype.concat.call(this._resolveLanguage(a),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(s));e.language=r;return e};t.prototype._resolveLanguage=function(e){if(!e){return[]}if(u.isEmptyObject(e)){return[]}if(u.isPlainObject(e)){return[e]}var t;if(!Array.isArray(e)){t=[e]}else{t=e}var i=[];for(var n=0;n<t.length;n++){i.push(t[n]);if(typeof t[n]==="string"&&t[n].indexOf("-")>0){var a=t[n].split("-");var s=a[0];i.push(s)}}return i};t.prototype._processTranslations=function(e,t){var i=new m;for(var n=0;n<e.length;n++){var a=new m;var s=e[n];if(typeof s==="string"){try{a=m.loadPath(s)}catch(e){try{s=this.defaults.amdLanguageBase+s;a=m.loadPath(s)}catch(e){if(t&&window.console&&console.warn){console.warn('Select2: The language file for "'+s+'" could '+"not be automatically loaded. A fallback will be used instead.")}}}}else if(u.isPlainObject(s)){a=new m(s)}else{a=s}i.extend(a)}return i};t.prototype.set=function(e,t){var i=u.camelCase(e);var n={};n[i]=t;var a=p._convertData(n);u.extend(true,this.defaults,a)};var n=new t;return n});t.define("select2/options",["jquery","./defaults","./utils"],function(h,i,f){function e(e,t){this.options=e;if(t!=null){this.fromElement(t)}if(t!=null){this.options=i.applyFromElement(this.options,t)}this.options=i.apply(this.options)}e.prototype.fromElement=function(e){var t=["select2"];if(this.options.multiple==null){this.options.multiple=e.prop("multiple")}if(this.options.disabled==null){this.options.disabled=e.prop("disabled")}if(this.options.autocomplete==null&&e.prop("autocomplete")){this.options.autocomplete=e.prop("autocomplete")}if(this.options.dir==null){if(e.prop("dir")){this.options.dir=e.prop("dir")}else if(e.closest("[dir]").prop("dir")){this.options.dir=e.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}e.prop("disabled",this.options.disabled);e.prop("multiple",this.options.multiple);if(f.GetData(e[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}f.StoreData(e[0],"data",f.GetData(e[0],"select2Tags"));f.StoreData(e[0],"tags",true)}if(f.GetData(e[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}e.attr("ajax--url",f.GetData(e[0],"ajaxUrl"));f.StoreData(e[0],"ajax-Url",f.GetData(e[0],"ajaxUrl"))}var i={};function n(e,t){return t.toUpperCase()}for(var a=0;a<e[0].attributes.length;a++){var s=e[0].attributes[a].name;var r="data-";if(s.substr(0,r.length)==r){var o=s.substring(r.length);var l=f.GetData(e[0],o);var d=o.replace(/-([a-z])/g,n);i[d]=l}}if(h.fn.jquery&&h.fn.jquery.substr(0,2)=="1."&&e[0].dataset){i=h.extend(true,{},e[0].dataset,i)}var u=h.extend(true,{},f.GetData(e[0]),i);u=f._convertData(u);for(var c in u){if(t.indexOf(c)>-1){continue}if(h.isPlainObject(this.options[c])){h.extend(this.options[c],u[c])}else{this.options[c]=u[c]}}return this};e.prototype.get=function(e){return this.options[e]};e.prototype.set=function(e,t){this.options[e]=t};return e});t.define("select2/core",["jquery","./options","./utils","./keys"],function(t,d,u,n){var c=function(e,t){if(u.GetData(e[0],"select2")!=null){u.GetData(e[0],"select2").destroy()}this.$element=e;this.id=this._generateId(e);t=t||{};this.options=new d(t,e);c.__super__.constructor.call(this);var i=e.attr("tabindex")||0;u.StoreData(e[0],"old-tabindex",i);e.attr("tabindex","-1");var n=this.options.get("dataAdapter");this.dataAdapter=new n(e,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(e,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,a);var r=this.options.get("dropdownAdapter");this.dropdown=new r(e,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,a);var o=this.options.get("resultsAdapter");this.results=new o(e,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})});e[0].classList.add("select2-hidden-accessible");e.attr("aria-hidden","true");this._syncAttributes();u.StoreData(e[0],"select2",this);e.data("select2",this)};u.Extend(c,u.Observable);c.prototype._generateId=function(e){var t="";if(e.attr("id")!=null){t=e.attr("id")}else if(e.attr("name")!=null){t=e.attr("name")+"-"+u.generateChars(2)}else{t=u.generateChars(4)}t=t.replace(/(:|\.|\[|\]|,)/g,"");t="select2-"+t;return t};c.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));if(t!=null){e.css("width",t)}};c.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(t=="resolve"){var n=this._resolveWidth(e,"style");if(n!=null){return n}return this._resolveWidth(e,"element")}if(t=="element"){var a=e.outerWidth(false);if(a<=0){return"auto"}return a+"px"}if(t=="style"){var s=e.attr("style");if(typeof s!=="string"){return null}var r=s.split(";");for(var o=0,l=r.length;o<l;o=o+1){var d=r[o].replace(/\s/g,"");var u=d.match(i);if(u!==null&&u.length>=1){return u[1]}}return null}if(t=="computedstyle"){var c=window.getComputedStyle(e[0]);return c.width}return t};c.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};c.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})});this.$element.on("focus.select2",function(e){t.trigger("focus",e)});this._syncA=u.bind(this._syncAttributes,this);this._syncS=u.bind(this._syncSubtree,this);this._observer=new window.MutationObserver(function(e){t._syncA();t._syncS(e)});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})};c.prototype._registerDataEvents=function(){var i=this;this.dataAdapter.on("*",function(e,t){i.trigger(e,t)})};c.prototype._registerSelectionEvents=function(){var i=this;var n=["toggle","focus"];this.selection.on("toggle",function(){i.toggleDropdown()});this.selection.on("focus",function(e){i.focus(e)});this.selection.on("*",function(e,t){if(n.indexOf(e)!==-1){return}i.trigger(e,t)})};c.prototype._registerDropdownEvents=function(){var i=this;this.dropdown.on("*",function(e,t){i.trigger(e,t)})};c.prototype._registerResultsEvents=function(){var i=this;this.results.on("*",function(e,t){i.trigger(e,t)})};c.prototype._registerEvents=function(){var i=this;this.on("open",function(){i.$container[0].classList.add("select2-container--open")});this.on("close",function(){i.$container[0].classList.remove("select2-container--open")});this.on("enable",function(){i.$container[0].classList.remove("select2-container--disabled")});this.on("disable",function(){i.$container[0].classList.add("select2-container--disabled")});this.on("blur",function(){i.$container[0].classList.remove("select2-container--focus")});this.on("query",function(t){if(!i.isOpen()){i.trigger("open",{})}this.dataAdapter.query(t,function(e){i.trigger("results:all",{data:e,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(e){i.trigger("results:append",{data:e,query:t})})});this.on("keypress",function(e){var t=e.which;if(i.isOpen()){if(t===n.ESC||t===n.UP&&e.altKey){i.close(e);e.preventDefault()}else if(t===n.ENTER||t===n.TAB){i.trigger("results:select",{});e.preventDefault()}else if(t===n.SPACE&&e.ctrlKey){i.trigger("results:toggle",{});e.preventDefault()}else if(t===n.UP){i.trigger("results:previous",{});e.preventDefault()}else if(t===n.DOWN){i.trigger("results:next",{});e.preventDefault()}}else{if(t===n.ENTER||t===n.SPACE||t===n.DOWN&&e.altKey){i.open();e.preventDefault()}}})};c.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.isDisabled()){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};c.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&e.addedNodes.length>0){for(var i=0;i<e.addedNodes.length;i++){var n=e.addedNodes[i];if(n.selected){return true}}}else if(e.removedNodes&&e.removedNodes.length>0){return true}else if(Array.isArray(e)){return e.some(function(e){return t._isChangeMutation(e)})}return false};c.prototype._syncSubtree=function(e){var t=this._isChangeMutation(e);var i=this;if(t){this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}};c.prototype.trigger=function(e,t){var i=c.__super__.trigger;var n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(t===undefined){t={}}if(e in n){var a=n[e];var s={prevented:false,name:e,args:t};i.call(this,a,s);if(s.prevented){t.prevented=true;return}}i.call(this,e,t)};c.prototype.toggleDropdown=function(){if(this.isDisabled()){return}if(this.isOpen()){this.close()}else{this.open()}};c.prototype.open=function(){if(this.isOpen()){return}if(this.isDisabled()){return}this.trigger("query",{})};c.prototype.close=function(e){if(!this.isOpen()){return}this.trigger("close",{originalEvent:e})};c.prototype.isEnabled=function(){return!this.isDisabled()};c.prototype.isDisabled=function(){return this.options.get("disabled")};c.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")};c.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")};c.prototype.focus=function(e){if(this.hasFocus()){return}this.$container[0].classList.add("select2-container--focus");this.trigger("focus",{})};c.prototype.enable=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(e==null||e.length===0){e=[true]}var t=!e[0];this.$element.prop("disabled",t)};c.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var t=[];this.dataAdapter.current(function(e){t=e});return t};c.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(e==null||e.length===0){return this.$element.val()}var t=e[0];if(Array.isArray(t)){t=t.map(function(e){return e.toString()})}this.$element.val(t).trigger("input").trigger("change")};c.prototype.destroy=function(){u.RemoveData(this.$container[0]);this.$container.remove();this._observer.disconnect();this._observer=null;this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",u.GetData(this.$element[0],"old-tabindex"));this.$element[0].classList.remove("select2-hidden-accessible");this.$element.attr("aria-hidden","false");u.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};c.prototype.render=function(){var e=t('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");e.attr("dir",this.options.get("dir"));this.$container=e;this.$container[0].classList.add("select2-container--"+this.options.get("theme"));u.StoreData(e[0],"element",this.$element);return e};return c});t.define("jquery-mousewheel",["jquery"],function(e){return e});t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(a,e,s,t,r){if(a.fn.select2==null){var o=["open","close","destroy"];a.fn.select2=function(i){i=i||{};if(typeof i==="object"){this.each(function(){var e=a.extend(true,{},i);var t=new s(a(this),e)});return this}else if(typeof i==="string"){var t;var n=Array.prototype.slice.call(arguments,1);this.each(function(){var e=r.GetData(this,"select2");if(e==null&&window.console&&console.error){console.error("The select2('"+i+"') method was called on an "+"element that is not using Select2.")}t=e[i].apply(e,n)});if(o.indexOf(i)>-1){return this}return t}else{throw new Error("Invalid arguments for Select2: "+i)}}}if(a.fn.select2.defaults==null){a.fn.select2.defaults=t}return s});return{define:t.define,require:t.require}}();var t=e.require("jquery.select2");i.fn.select2.amd=e;return t});(function(g,e){var a=0;g.widget("ech.multiselect",{options:{header:true,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:false,multiple:true,position:{}},_create:function(){var e=this.element.hide(),t=this.options;this.speed=g.fx.speeds._default;this._isOpen=false;var i=(this.button=g('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(t.classes).attr({title:e.attr("title"),"aria-haspopup":true,tabIndex:e.attr("tabIndex")}).insertAfter(e),n=(this.buttonlabel=g("<span />")).html(t.noneSelectedText).appendTo(i),a=(this.menu=g("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(t.classes).appendTo(document.body),s=(this.header=g("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(a),r=(this.headerLinkContainer=g("<ul />")).addClass("ui-helper-reset").html(function(){if(t.header===true){return'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+t.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+t.uncheckAllText+"</span></a></li>"}else if(typeof t.header==="string"){return"<li>"+t.header+"</li>"}else{return""}}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(s),o=(this.checkboxContainer=g("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(a);this._bindEvents();this.refresh(true);if(!t.multiple){a.addClass("ui-multiselect-single")}},_init:function(){if(this.options.header===false){this.header.hide()}if(!this.options.multiple){this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()}if(this.options.autoOpen){this.open()}if(this.element.is(":disabled")){this.disable()}},refresh:function(e){var t=this.element,h=this.options,i=this.menu,n=this.checkboxContainer,f=[],p="",m=t.attr("id")||a++;t.find("option").each(function(e){var t=g(this),i=this.parentNode,n=this.innerHTML,a=this.title,s=this.value,r="ui-multiselect-"+(this.id||m+"-option-"+e),o=this.disabled,l=this.selected,d=["ui-corner-all"],u=(o?"ui-multiselect-disabled ":" ")+this.className,c;if(i.tagName==="OPTGROUP"){c=i.getAttribute("label");if(g.inArray(c,f)===-1){p+='<li class="ui-multiselect-optgroup-label '+i.className+'"><a href="#">'+c+"</a></li>";f.push(c)}}if(o){d.push("ui-state-disabled")}if(l&&!h.multiple){d.push("ui-state-active")}p+='<li class="'+u+'">';p+='<label for="'+r+'" title="'+a+'" class="'+d.join(" ")+'">';p+='<input id="'+r+'" name="multiselect_'+m+'" type="'+(h.multiple?"checkbox":"radio")+'" value="'+s+'" title="'+n+'"';if(l){p+=' checked="checked"';p+=' aria-selected="true"'}if(o){p+=' disabled="disabled"';p+=' aria-disabled="true"'}p+=" /><span>"+n+"</span></label></li>"});n.html(p);this.labels=i.find("label");this.inputs=this.labels.children("input");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();if(!e){this._trigger("refresh")}},update:function(){var e=this.options,t=this.inputs,i=t.filter(":checked"),n=i.length,a;if(n===0){a=e.noneSelectedText}else{if(g.isFunction(e.selectedText)){a=e.selectedText.call(this,n,t.length,i.get())}else if(/\d/.test(e.selectedList)&&e.selectedList>0&&n<=e.selectedList){a=i.map(function(){return g(this).next().html()}).get().join(", ")}else{a=e.selectedText.replace("#",n).replace("#",t.length)}}this.buttonlabel.html(a);return a},_bindEvents:function(){var s=this,e=this.button;function t(){s[s._isOpen?"close":"open"]();return false}e.find("span").bind("click.multiselect",t);e.bind({click:t,keypress:function(e){switch(e.which){case 27:case 38:case 37:s.close();break;case 39:case 40:s.open();break}},mouseenter:function(){if(!e.hasClass("ui-state-disabled")){g(this).addClass("ui-state-hover")}},mouseleave:function(){g(this).removeClass("ui-state-hover")},focus:function(){if(!e.hasClass("ui-state-disabled")){g(this).addClass("ui-state-focus")}},blur:function(){g(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(e){if(g(this).hasClass("ui-multiselect-close")){s.close()}else{s[g(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}e.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(e){e.preventDefault();var t=g(this),i=t.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),n=i.get(),a=t.parent().text();if(s._trigger("beforeoptgrouptoggle",e,{inputs:n,label:a})===false){return}s._toggleChecked(i.filter(":checked").length!==i.length,i);s._trigger("optgrouptoggle",e,{inputs:n,label:a,checked:n[0].checked})}).delegate("label","mouseenter.multiselect",function(){if(!g(this).hasClass("ui-state-disabled")){s.labels.removeClass("ui-state-hover");g(this).addClass("ui-state-hover").find("input").focus()}}).delegate("label","keydown.multiselect",function(e){e.preventDefault();switch(e.which){case 9:case 27:s.close();break;case 38:case 40:case 37:case 39:s._traverse(e.which,this);break;case 13:g(this).find("input")[0].click();break}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(e){var t=g(this),i=this.value,n=this.checked,a=s.element.find("option");if(this.disabled||s._trigger("click",e,{value:i,text:this.title,checked:n})===false){e.preventDefault();return}t.focus();t.attr("aria-selected",n);a.each(function(){if(this.value===i){this.selected=n}else if(!s.options.multiple){this.selected=false}});if(!s.options.multiple){s.labels.removeClass("ui-state-active");t.closest("label").toggleClass("ui-state-active",n);s.close()}s.element.trigger("change");setTimeout(g.proxy(s.update,s),10)});g(document).bind("mousedown.multiselect",function(e){if(s._isOpen&&!g.contains(s.menu[0],e.target)&&!g.contains(s.button[0],e.target)&&e.target!==s.button[0]){s.close()}});g(this.element[0].form).bind("reset.multiselect",function(){setTimeout(g.proxy(s.refresh,s),10)})},_setButtonWidth:function(){var e=this.element.outerWidth(),t=this.options;if(t.minWidth=="auto")return;if(/\d/.test(t.minWidth)&&e<t.minWidth){e=t.minWidth}this.button.width(e)},_setMenuWidth:function(){var e=this.menu,t=this.button.outerWidth()-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10)-parseInt(e.css("border-right-width"),10)-parseInt(e.css("border-left-width"),10);e.width(t||this.button.outerWidth())},_traverse:function(e,t){var i=g(t),n=e===38||e===37,a=i.parent()[n?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[n?"last":"first"]();if(!a.length){var s=this.menu.find("ul").last();this.menu.find("label")[n?"last":"first"]().trigger("mouseover");s.scrollTop(n?s.height():0)}else{a.find("label").trigger("mouseover")}},_toggleState:function(e,t){return function(){if(!this.disabled){this[e]=t}if(t){this.setAttribute("aria-selected",true)}else{this.removeAttribute("aria-selected")}}},_toggleChecked:function(e,t){var i=t&&t.length?t:this.inputs,n=this;i.each(this._toggleState("checked",e));i.eq(0).focus();this.update();var a=i.map(function(){return this.value}).get();this.element.find("option").each(function(){if(!this.disabled&&g.inArray(this.value,a)>-1){n._toggleState("selected",e).call(this)}});if(i.length){this.element.trigger("change")}},_toggleDisabled:function(e){this.button.attr({disabled:e,"aria-disabled":e})[e?"addClass":"removeClass"]("ui-state-disabled");var t=this.menu.find("input");var i="ech-multiselect-disabled";if(e){t=t.filter(":enabled").data(i,true)}else{t=t.filter(function(){return g.data(this,i)===true}).removeData(i)}t.attr({disabled:e,"arial-disabled":e}).parent()[e?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:e,"aria-disabled":e})},open:function(e){var t=this,i=this.button,n=this.menu,a=this.speed,s=this.options,r=[];if(this._trigger("beforeopen")===false||i.hasClass("ui-state-disabled")||this._isOpen){return}var o=n.find("ul").last(),l=s.show,d=i.offset();if(g.isArray(s.show)){l=s.show[0];a=s.show[1]||t.speed}if(l){r=[l,a]}o.scrollTop(0).height(s.height);if(g.ui.position&&!g.isEmptyObject(s.position)){s.position.of=s.position.of||i;n.show().position(s.position).hide()}else{n.css({top:d.top+i.outerHeight(),left:d.left})}g.fn.show.apply(n,r);this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");i.addClass("ui-state-active");this._isOpen=true;this._trigger("open")},close:function(){if(this._trigger("beforeclose")===false){return}var e=this.options,t=e.hide,i=this.speed,n=[];if(g.isArray(e.hide)){t=e.hide[0];i=e.hide[1]||this.speed}if(t){n=[t,i]}g.fn.hide.apply(this.menu,n);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=false;this._trigger("close")},enable:function(){this._toggleDisabled(false)},disable:function(){this._toggleDisabled(true)},checkAll:function(e){this._toggleChecked(true);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(false);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){g.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},_setOption:function(e,t){var i=this.menu;switch(e){case"header":i.find("div.ui-multiselect-header")[t?"show":"hide"]();break;case"checkAllText":i.find("a.ui-multiselect-all span").eq(-1).text(t);break;case"uncheckAllText":i.find("a.ui-multiselect-none span").eq(-1).text(t);break;case"height":i.find("ul").last().height(parseInt(t,10));break;case"minWidth":this.options[e]=parseInt(t,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[e]=t;this.update();break;case"classes":i.add(this.button).removeClass(this.options.classes).addClass(t);break;case"multiple":i.toggleClass("ui-multiselect-single",!t);this.options.multiple=t;this.element[0].multiple=t;this.refresh()}g.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);(function(e){"use strict";var t=window.define;if(typeof t==="function"&&t.amd){t(["jquery","jquery-ui/sortable"],e)}else{e(window.jQuery)}})(function(w){"use strict";function o(e,t,i){return e>t&&e<t+i}w.widget("mjs.nestedSortable",w.extend({},w.ui.sortable.prototype,{options:{disableParentChange:false,doNotClear:false,expandOnHover:700,isAllowed:function(){return true},isTree:false,listType:"ol",maxLevels:0,protectRoot:false,rootID:null,rtl:false,startCollapsed:false,tabSize:20,branchClass:"mjs-nestedSortable-branch",collapsedClass:"mjs-nestedSortable-collapsed",disableNestingClass:"mjs-nestedSortable-no-nesting",errorClass:"mjs-nestedSortable-error",expandedClass:"mjs-nestedSortable-expanded",hoveringClass:"mjs-nestedSortable-hovering",leafClass:"mjs-nestedSortable-leaf",disabledClass:"mjs-nestedSortable-disabled"},_create:function(){var n=this,e;this.element.data("ui-sortable",this.element.data("mjs-nestedSortable"));if(!this.element.is(this.options.listType)){e="nestedSortable: "+"Please check that the listType option is set to your actual list type";throw new Error(e)}if(this.options.isTree&&this.options.expandOnHover){this.options.tolerance="intersect"}w.ui.sortable.prototype._create.apply(this,arguments);if(this.options.isTree){w(this.items).each(function(){var e=this.item,t=e.hasClass(n.options.collapsedClass),i=e.hasClass(n.options.expandedClass);if(e.children(n.options.listType).length){e.addClass(n.options.branchClass);if(!t&&!i){if(n.options.startCollapsed){e.addClass(n.options.collapsedClass)}else{e.addClass(n.options.expandedClass)}}}else{e.addClass(n.options.leafClass)}})}},_destroy:function(){this.element.removeData("mjs-nestedSortable").removeData("ui-sortable");return w.ui.sortable.prototype._destroy.apply(this,arguments)},_mouseDrag:function(e){var t,i,n,a,s=this,r=this.options,o=false,l=w(document),d,u,c,h,f,p,m,g,_,v,y,b;this.position=this._generatePosition(e);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity){o=this.scrollParent.scrollTop()+r.scrollSpeed;this.scrollParent.scrollTop(o)}else if(e.pageY-this.overflowOffset.top<r.scrollSensitivity){o=this.scrollParent.scrollTop()-r.scrollSpeed;this.scrollParent.scrollTop(o)}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity){o=this.scrollParent.scrollLeft()+r.scrollSpeed;this.scrollParent.scrollLeft(o)}else if(e.pageX-this.overflowOffset.left<r.scrollSensitivity){o=this.scrollParent.scrollLeft()-r.scrollSpeed;this.scrollParent.scrollLeft(o)}}else{if(e.pageY-l.scrollTop()<r.scrollSensitivity){o=l.scrollTop()-r.scrollSpeed;l.scrollTop(o)}else if(w(window).height()-(e.pageY-l.scrollTop())<r.scrollSensitivity){o=l.scrollTop()+r.scrollSpeed;l.scrollTop(o)}if(e.pageX-l.scrollLeft()<r.scrollSensitivity){o=l.scrollLeft()-r.scrollSpeed;l.scrollLeft(o)}else if(w(window).width()-(e.pageX-l.scrollLeft())<r.scrollSensitivity){o=l.scrollLeft()+r.scrollSpeed;l.scrollLeft(o)}}if(o!==false&&w.ui.ddmanager&&!r.dropBehaviour){w.ui.ddmanager.prepareOffsets(this,e)}}this.positionAbs=this._convertPositionTo("absolute");d=this.placeholder.offset().top;if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+window.scrollY+"px"}this.hovering=this.hovering?this.hovering:null;this.mouseentered=this.mouseentered?this.mouseentered:false;(function(){var e=this.placeholder.parent().parent();if(e&&e.closest(".ui-sortable").length){u=e}}).call(this);c=this._getLevel(this.placeholder);h=this._getChildLevels(this.helper);m=document.createElement(r.listType);for(t=this.items.length-1;t>=0;t--){i=this.items[t];n=i.item[0];a=this._intersectsWithPointer(i);if(!a){continue}if(i.instance!==this.currentContainer){continue}if(n.className.indexOf(r.disabledClass)!==-1){if(a===2){f=this.items[t+1];if(f&&f.item.hasClass(r.disabledClass)){continue}}else if(a===1){p=this.items[t-1];if(p&&p.item.hasClass(r.disabledClass)){continue}}}g=a===1?"next":"prev";if(n!==this.currentItem[0]&&this.placeholder[g]()[0]!==n&&!w.contains(this.placeholder[0],n)&&(this.options.type==="semi-dynamic"?!w.contains(this.element[0],n):true)){if(!this.mouseentered){w(n).mouseenter();this.mouseentered=true}if(r.isTree&&w(n).hasClass(r.collapsedClass)&&r.expandOnHover){if(!this.hovering){w(n).addClass(r.hoveringClass);this.hovering=window.setTimeout(function(){w(n).removeClass(r.collapsedClass).addClass(r.expandedClass);s.refreshPositions();s._trigger("expand",e,s._uiHash())},r.expandOnHover)}}this.direction=a===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(i)){w(n).mouseleave();this.mouseentered=false;w(n).removeClass(r.hoveringClass);if(this.hovering){window.clearTimeout(this.hovering)}this.hovering=null;if(r.protectRoot&&!(this.currentItem[0].parentNode===this.element[0]&&n.parentNode!==this.element[0])){if(this.currentItem[0].parentNode!==this.element[0]&&n.parentNode===this.element[0]){if(!w(n).children(r.listType).length){n.appendChild(m);if(r.isTree){w(n).removeClass(r.leafClass).addClass(r.branchClass+" "+r.expandedClass)}}if(this.direction==="down"){_=w(n).prev().children(r.listType)}else{_=w(n).children(r.listType)}if(_[0]!==undefined){this._rearrange(e,null,_)}}else{this._rearrange(e,i)}}else if(!r.protectRoot){this._rearrange(e,i)}}else{break}this._clearEmpty(n);this._trigger("change",e,this._uiHash());break}}(function(){var e=this.placeholder.prev();if(e.length){v=e}else{v=null}}).call(this);if(v!=null){while(v[0].nodeName.toLowerCase()!=="li"||v[0].className.indexOf(r.disabledClass)!==-1||v[0]===this.currentItem[0]||v[0]===this.helper[0]){if(v[0].previousSibling){v=w(v[0].previousSibling)}else{v=null;break}}}(function(){var e=this.placeholder.next();if(e.length){y=e}else{y=null}}).call(this);if(y!=null){while(y[0].nodeName.toLowerCase()!=="li"||y[0].className.indexOf(r.disabledClass)!==-1||y[0]===this.currentItem[0]||y[0]===this.helper[0]){if(y[0].nextSibling){y=w(y[0].nextSibling)}else{y=null;break}}}this.beyondMaxLevels=0;if(u!=null&&y==null&&!(r.protectRoot&&u[0].parentNode==this.element[0])&&(r.rtl&&this.positionAbs.left+this.helper.outerWidth()>u.offset().left+u.outerWidth()||!r.rtl&&this.positionAbs.left<u.offset().left)){u.after(this.placeholder[0]);b=!u.children(r.listItem).children("li:visible:not(.ui-sortable-helper)").length;if(r.isTree&&b){u.removeClass(this.options.branchClass+" "+this.options.expandedClass).addClass(this.options.leafClass)}if(typeof u!=="undefined")this._clearEmpty(u[0]);this._trigger("change",e,this._uiHash())}else if(v!=null&&!v.hasClass(r.disableNestingClass)&&(v.children(r.listType).length&&v.children(r.listType).is(":visible")||!v.children(r.listType).length)&&!(r.protectRoot&&this.currentItem[0].parentNode===this.element[0])&&(r.rtl&&this.positionAbs.left+this.helper.outerWidth()<v.offset().left+v.outerWidth()-r.tabSize||!r.rtl&&this.positionAbs.left>v.offset().left+r.tabSize)){this._isAllowed(v,c,c+h+1);if(!v.children(r.listType).length){v[0].appendChild(m);if(r.isTree){v.removeClass(r.leafClass).addClass(r.branchClass+" "+r.expandedClass)}}if(d&&d<=v.offset().top){v.children(r.listType).prepend(this.placeholder)}else{v.children(r.listType)[0].appendChild(this.placeholder[0])}if(typeof u!=="undefined")this._clearEmpty(u[0]);this._trigger("change",e,this._uiHash())}else{this._isAllowed(u,c,c+h)}this._contactContainers(e);if(w.ui.ddmanager){w.ui.ddmanager.drag(this,e)}this._trigger("sort",e,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e){if(this.beyondMaxLevels){this.placeholder.removeClass(this.options.errorClass);if(this.domPosition.prev){w(this.domPosition.prev).after(this.placeholder)}else{w(this.domPosition.parent).prepend(this.placeholder)}this._trigger("revert",e,this._uiHash())}w("."+this.options.hoveringClass).mouseleave().removeClass(this.options.hoveringClass);this.mouseentered=false;if(this.hovering){window.clearTimeout(this.hovering)}this.hovering=null;this._relocate_event=e;this._pid_current=w(this.domPosition.parent).parent().attr("id");this._sort_current=this.domPosition.prev?w(this.domPosition.prev).next().index():0;w.ui.sortable.prototype._mouseStop.apply(this,arguments)},_intersectsWithSides:function(e){var t=this.options.isTree?.8:.5,i=o(this.positionAbs.top+this.offset.click.top,e.top+e.height*t,e.height),n=o(this.positionAbs.top+this.offset.click.top,e.top-e.height*t,e.height),a=o(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();if(this.floating&&r){return r==="right"&&a||r==="left"&&!a}else{return s&&(s==="down"&&i||s==="up"&&n)}},_contactContainers:function(){if(this.options.protectRoot&&this.currentItem[0].parentNode===this.element[0]){return}w.ui.sortable.prototype._contactContainers.apply(this,arguments)},_clear:function(){var e,t;w.ui.sortable.prototype._clear.apply(this,arguments);if(!(this._pid_current===this._uiHash().item.parent().parent().attr("id")&&this._sort_current===this._uiHash().item.index())){this._trigger("relocate",this._relocate_event,this._uiHash())}for(e=this.items.length-1;e>=0;e--){t=this.items[e].item[0];this._clearEmpty(t)}},serialize:function(e){var i=w.extend({},this.options,e),t=this._getItemsAsjQuery(i&&i.connected),n=[];w(t).each(function(){var e=(w(i.item||this).attr(i.attribute||"id")||"").match(i.expression||/(.+)[-=_](.+)/),t=(w(i.item||this).parent(i.listType).parent(i.items).attr(i.attribute||"id")||"").match(i.expression||/(.+)[-=_](.+)/);if(e){n.push((i.key||e[1])+"["+(i.key&&i.expression?e[1]:e[2])+"]"+"="+(t?i.key&&i.expression?t[1]:t[2]:i.rootID))}});if(!n.length&&i.key){n.push(i.key+"=")}return n.join("&")},toHierarchy:function(e){var n=w.extend({},this.options,e),t=[];w(this.element).children(n.items).each(function(){var e=a(this);t.push(e)});return t;function a(e){var t=(w(e).attr(n.attribute||"id")||"").match(n.expression||/(.+)[-=_](.+)/),i;if(t){i={id:t[2]};if(w(e).children(n.listType).children(n.items).length>0){i.children=[];w(e).children(n.listType).children(n.items).each(function(){var e=a(this);i.children.push(e)})}return i}}},toArray:function(e){var o=w.extend({},this.options,e),l=o.startDepthCount||0,d=[],t=1;if(!o.excludeRoot){d.push({item_id:o.rootID,parent_id:null,depth:l,left:t,right:(w(o.items,this.element).length+1)*2});t++}w(this.element).children(o.items).each(function(){t=u(this,l+1,t)});d=d.sort(function(e,t){return e.left-t.left});return d;function u(e,t,i){var n=i+1,a,s,r;if(w(e).children(o.listType).children(o.items).length>0){t++;w(e).children(o.listType).children(o.items).each(function(){n=u(w(this),t,n)});t--}a=w(e).attr(o.attribute||"id").match(o.expression||/(.+)[-=_](.+)/);if(t===l+1){s=o.rootID}else{r=w(e).parent(o.listType).parent(o.items).attr(o.attribute||"id").match(o.expression||/(.+)[-=_](.+)/);s=r[2]}if(a){d.push({item_id:a[2],parent_id:s,depth:t,left:i,right:n})}i=n+1;return i}},_clearEmpty:function(e){function t(e,t,i,n){if(n){t=[i,i=t][0]}w(e).removeClass(t).addClass(i)}var i=this.options,n=w(e).children(i.listType),a=n.is(":not(:empty)");var s=i.doNotClear||a||i.protectRoot&&w(e)[0]===this.element[0];if(i.isTree){t(e,i.branchClass,i.leafClass,s);if(s&&a){t(e,i.collapsedClass,i.expandedClass)}}if(!s){n.remove()}},_getLevel:function(e){var t=1,i;if(this.options.listType){i=e.closest(this.options.listType);while(i&&i.length>0&&!i.is(".ui-sortable")){t++;i=i.parent().closest(this.options.listType)}}return t},_getChildLevels:function(e,i){var n=this,t=this.options,a=0;i=i||0;w(e).children(t.listType).children(t.items).each(function(e,t){a=Math.max(n._getChildLevels(t,i+1),a)});return i?a+1:a},_isAllowed:function(e,t,i){var n=this.options,a=this.placeholder.closest(".ui-sortable").nestedSortable("option","maxLevels"),s=this.currentItem.parent().parent(),r=n.disableParentChange&&(typeof e!=="undefined"&&!s.is(e)||typeof e==="undefined"&&s.is("li"));if(r||!n.isAllowed(this.placeholder,e,this.currentItem)){this.placeholder.addClass(n.errorClass);if(a<i&&a!==0){this.beyondMaxLevels=i-a}else{this.beyondMaxLevels=1}}else{if(a<i&&a!==0){this.placeholder.addClass(n.errorClass);this.beyondMaxLevels=i-a}else{this.placeholder.removeClass(n.errorClass);this.beyondMaxLevels=0}}}}));w.mjs.nestedSortable.prototype.options=w.extend({},w.ui.sortable.prototype.options,w.mjs.nestedSortable.prototype.options)});(function(r){var e=/android|iphone|ipad/i.test(navigator.userAgent.toLowerCase()),t=e?"touchend":"click";r.fn.doubletap=function(a,s){if(!e)return;s=s==null?300:s;this.unselectable="on";r(this).css("-moz-user-select","none");r(this).css("-webkit-user-select","none");this.bind(t,function(e){var t=(new Date).getTime();var i=r(this).data("lastTouch")||t+1;var n=t-i;if(n<s&&0<n){r(this).data("lastTouch",null);if(a!==null&&typeof a==="function"){a(e)}}else{r(this).data("lastTouch",t)}})}})(jQuery);(function(w,M){var k=/[<>&\r\n"']/gm;var L={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"apos;"};w.extend({fileDownload:function(n,e){var a=w.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:true},prepareCallback:function(e){},successCallback:function(e){},failCallback:function(e,t){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:true},e);var i=new w.Deferred;var t=(navigator.userAgent||navigator.vendor||M.opera).toLowerCase();var s;var r;var o;if(/ip(ad|hone|od)/.test(t)){s=true}else if(t.indexOf("android")!==-1){r=true}else{o=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}var l=a.httpMethod.toUpperCase();if(r&&l!=="GET"){if(w().dialog){w("<div>").html(a.androidPostUnsupportedMessageHtml).dialog(a.dialogOptions)}else{alert(a.androidPostUnsupportedMessageHtml)}return i.reject()}var d=null;var u={onPrepare:function(e){if(a.preparingMessageHtml){d=w("<div>").html(a.preparingMessageHtml).dialog(a.dialogOptions)}else if(a.prepareCallback){a.prepareCallback(e)}},onSuccess:function(e){if(d){d.dialog("close")}a.successCallback(e);i.resolve(e)},onFail:function(e,t){if(d){d.dialog("close")}if(a.failMessageHtml){w("<div>").html(a.failMessageHtml).dialog(a.dialogOptions)}a.failCallback(e,t);i.reject(e,t)}};u.onPrepare(n);if(a.data!==null&&typeof a.data!=="string"){a.data=w.param(a.data)}var c,h,f,p;if(l==="GET"){if(a.data!==null){var m=n.indexOf("?");if(m!==-1){if(n.substring(n.length-1)!=="&"){n=n+"&"}}else{n=n+"?"}n=n+a.data}if(s||r){h=M.open(n);h.document.title=a.popupWindowTitle;M.focus()}else if(o){M.location(n)}else{c=w("<iframe>").hide().prop("src",n).appendTo("body")}}else{var g="";if(a.data!==null){w.each(a.data.replace(/\+/g," ").split("&"),function(){var e=this.split("=");var t=a.encodeHTMLEntities?b(decodeURIComponent(e[0])):decodeURIComponent(e[0]);if(t){var i=a.encodeHTMLEntities?b(decodeURIComponent(e[1])):decodeURIComponent(e[1]);g+='<input type="hidden" name="'+t+'" value="'+i+'" />'}})}if(o){p=w("<form>").appendTo("body");p.hide().prop("method",a.httpMethod).prop("action",n).html(g)}else{if(s){h=M.open("about:blank");h.document.title=a.popupWindowTitle;f=h.document;M.focus()}else{c=w("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body");f=v(c)}f.write("<html><head></head><body><form method='"+a.httpMethod+"' action='"+n+"'>"+g+"</form>"+a.popupWindowTitle+"</body></html>");p=w(f).find("form")}p.submit()}setTimeout(_,a.checkInterval);function _(){if(document.cookie.indexOf(a.cookieName+"="+a.cookieValue)!=-1){u.onSuccess(n);document.cookie=a.cookieName+"=; expires="+new Date(1e3).toUTCString()+"; path="+a.cookiePath;y(false);return}if(h||c){try{var e=h?h.document:v(c);if(e&&e.body!=null&&e.body.innerHTML.length){var t=true;if(p&&p.length){var i=w(e.body).contents().first();if(i.length&&i[0]===p[0]){t=false}}if(t){u.onFail(e.body.innerHTML,n);y(true);return}}}catch(e){u.onFail("",n);y(true);return}}setTimeout(_,a.checkInterval)}function v(e){var t=e[0].contentWindow||e[0].contentDocument;if(t.document){t=t.document}return t}function y(e){setTimeout(function(){if(h){if(r){h.close()}if(s){h.focus();if(e){h.close()}}}},0)}function b(e){return e.replace(k,function(e){return"&"+L[e]})}return i.promise()}})})(jQuery,this);(function(c){c.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};function e(e){if(typeof e.data==="string"){e.data={keys:e.data}}if(!e.data||!e.data.keys||typeof e.data.keys!=="string"){return}var l=e.handler,d=e.data.keys.toLowerCase().split(" "),u=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color"];e.handler=function(e){if(this!==e.target&&(/textarea|select/i.test(e.target.nodeName)||c.inArray(e.target.type,u)>-1)){return}var t=e.type!=="keypress"&&c.hotkeys.specialKeys[e.which],i=String.fromCharCode(e.which).toLowerCase(),n,a="",s={};if(e.altKey&&t!=="alt"){a+="alt+"}if(e.ctrlKey&&t!=="ctrl"){a+="ctrl+"}if(e.metaKey&&!e.ctrlKey&&t!=="meta"){a+="meta+"}if(e.shiftKey&&t!=="shift"){a+="shift+"}if(t){s[a+t]=true}else{s[a+i]=true;s[a+c.hotkeys.shiftNums[i]]=true;if(a==="shift+"){s[c.hotkeys.shiftNums[i]]=true}}for(var r=0,o=d.length;r<o;r++){if(s[d[r]]){return l.apply(this,arguments)}}}}c.each(["keydown","keyup","keypress"],function(){c.event.special[this]={add:e}})})(jQuery);(function(l,e){var s=0,t=window.navigator.userAgent,c=t.indexOf("MSIE ")>0,h=c?"-ie":"",r=c?false:/mozilla/.test(t.toLowerCase())&&!/webkit/.test(t.toLowerCase()),d=[],o=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],u=["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"],f=["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],p=[["003366","336699","3366cc","003399","000099","0000cc","000066"],["006666","006699","0099cc","0066cc","0033cc","0000ff","3333ff","333399"],["669999","009999","33cccc","00ccff","0099ff","0066ff","3366ff","3333cc","666699"],["339966","00cc99","00ffcc","00ffff","33ccff","3399ff","6699ff","6666ff","6600ff","6600cc"],["339933","00cc66","00ff99","66ffcc","66ffff","66ccff","99ccff","9999ff","9966ff","9933ff","9900ff"],["006600","00cc00","00ff00","66ff99","99ffcc","ccffff","ccccff","cc99ff","cc66ff","cc33ff","cc00ff","9900cc"],["003300","009933","33cc33","66ff66","99ff99","ccffcc","ffffff","ffccff","ff99ff","ff66ff","ff00ff","cc00cc","660066"],["333300","009900","66ff33","99ff66","ccff99","ffffcc","ffcccc","ff99cc","ff66cc","ff33cc","cc0099","993399"],["336600","669900","99ff33","ccff66","ffff99","ffcc99","ff9999","ff6699","ff3399","cc3399","990099"],["666633","99cc00","ccff33","ffff66","ffcc66","ff9966","ff6666","ff0066","d60094","993366"],["a58800","cccc00","ffff00","ffcc00","ff9933","ff6600","ff0033","cc0066","660033"],["996633","cc9900","ff9900","cc6600","ff3300","ff0000","cc0000","990033"],["663300","996600","cc3300","993300","990000","800000","993333"]],i=function(e){var t=e.toString(16);if(t.length==1){t="0"+t}return t},a=function(e){return i(Number(e))},m=function(e){var t=i(e);return t+t+t},n=function(e){if(e.length>10){var t=1+e.indexOf("("),i=e.indexOf(")"),n=e.substring(t,i).split(",");return["#",a(n[0]),a(n[1]),a(n[2])].join("")}else{return e}};l.widget("evol.colorpicker",{version:"2.2.4",options:{color:null,showOn:"both",displayIndicator:true,history:true,strings:"Theme Colors,Standard Colors,More Colors,Less Colors,Back to Palette,History,No history yet."},_create:function(){this._paletteIdx=1;this._id="evo-cp"+s++;this._enabled=true;var i=this;if(window.__){this.options.strings=__(this.options.strings)}switch(this.element.get(0).tagName){case"INPUT":var e=this.options.color,t=this.element;this._isPopup=true;this._palette=null;if(e!==null){t.val(e)}else{var n=t.val();if(n!==""){e=this.options.color=n}}t.addClass("colorPicker "+this._id).wrap('<div style="float: left; width:'+(this.element.width()+32)+"px;"+(r?"padding:1px 0;":"")+'"></div>').after('<div class="'+(this.options.showOn==="focus"?"":"evo-pointer ")+"evo-colorind"+(r?"-ff":h)+" "+(e===null?"nocolorLayerList":"")+'" '+(e!==null?'style="background-color:'+e+'"':"")+"></div>").on("keyup onpaste",function(e){var t=l(this).val();if(t!=i.options.color){i._setValue(t,true)}});var a=this.options.showOn;if(a==="both"||a==="focus"){t.on("focus",function(){i.showPalette()})}if(a==="both"||a==="button"){t.next().on("click",function(e){e.stopPropagation();i.togglePalette()})}break;default:this._isPopup=false;this._palette=l(this._paletteHTML()).appendTo(l(document.body));this._palette.position({my:"left bottom",at:"left bottom-20",of:this.element});this._bindColors()}if(e!==null&&this.options.history){this._add2History(e)}},_paletteHTML:function(){var e=[],t=this._paletteIdx=Math.abs(this._paletteIdx),i=this.options,n=i.strings.split(",");e.push('<div class="evo-pop',h,' ui-widget ui-widget-content ui-corner-all"',this._isPopup?' style="position:absolute"':"",">");e.push("<span>",this["_paletteHTML"+t](),"</span>");e.push('<div class="evo-more"><a href="javascript:void(0)">',n[1+t],"</a>");if(i.history){e.push('<a href="javascript:void(0)" class="evo-hist">',n[5],"</a>")}e.push("</div>");if(i.displayIndicator){e.push(this._colorIndHTML(this.options.color),this._colorIndHTML(""))}e.push("</div>");return e.join("")},_colorIndHTML:function(e){var t;if(e===null){t="white"}else{t=e.substring(1)}return['<div class="evo-color" style="float:left"><div style="',e?"background-color:"+e:"display:none",c?'" class="evo-colorbox-ie"></div><span class=".evo-colortxt-ie" ':'"></div><span id="editable-part" ',e?'>#<u id="hex-changes" style="cursor:pointer;">'+t+"</u></span>":"/>","</div>"].join("")},_paletteHTML1:function(){var e=[],t=this.options.strings.split(","),i='<td style="background-color:#',n=c?'"><div style="width:2px;"></div></td>':'"><span/></td>',a='<tr><th colspan="10" class="ui-widget-content">';e.push('<table class="evo-palette',h,'"></tr><tr>');for(var s=0;s<10;s++){e.push(i,o[s],n)}e.push("</tr>");if(!c){e.push('<tr><th colspan="10"></th></tr>')}e.push('<tr class="top">');for(s=0;s<10;s++){e.push(i,u[s],n)}for(var r=1;r<4;r++){e.push('</tr><tr class="in">');for(s=0;s<10;s++){e.push(i,u[r*10+s],n)}}e.push('</tr><tr class="bottom">');for(s=40;s<50;s++){e.push(i,u[s],n)}e.push("</tr>",a,t[1],"</th></tr><tr>");for(s=0;s<10;s++){e.push(i,f[s],n)}e.push("</tr></table>");return e.join("")},_paletteHTML2:function(){var e,t,i=[],n='<td style="background-color:#',a=c?'"><div style="width:5px;"></div></td>':'"><span/></td>',s='<table class="evo-palette2'+h+'"><tr>',r="</tr></table>";i.push('<div class="evo-palcenter">');for(var o=0,l=p.length;o<l;o++){i.push(s);var d=p[o];for(e=0,t=d.length;e<t;e++){i.push(n,d[e],a)}i.push(r)}i.push('<div class="evo-sep"/>');var u=[];i.push(s);for(e=255;e>10;e-=10){i.push(n,m(e),a);e-=10;u.push(n,m(e),a)}i.push(r,s,u.join(""),r);i.push("</div>");return i.join("")},_switchPalette:function(e){if(this._enabled){var t,i,n,a=this.options.strings.split(",");if(l(e).hasClass("evo-hist")){var s=['<table class="evo-palette"><tr><th class="ui-widget-content">',a[5],"</th></tr></tr></table>",'<div class="evo-cHist">'];if(d.length===0){s.push("<p>&nbsp;",a[6],"</p>")}else{for(var r=d.length-1;r>-1;r--){s.push('<div style="background-color:',d[r],'"></div>')}}s.push("</div>");t=-this._paletteIdx;i=s.join("");n=a[4]}else{if(this._paletteIdx<0){t=-this._paletteIdx;this._palette.find(".evo-hist").show()}else{t=this._paletteIdx==2?1:2}i=this["_paletteHTML"+t]();n=a[t+1];this._paletteIdx=t}this._paletteIdx=t;var o=this._palette.find(".evo-more").prev().html(i).end().children().eq(0).html(n);if(t<0){o.next().hide()}}},makeEditableHex:function(){var i=this;l("#hex-changes").click(function(){l("#hex-changes").hide();l("#editable-part").append('<input type="text" id="hex-new-value" align="middle" maxlength="6" value='+l("#hex-changes").text()+">");l("#hex-new-value").focus().keypress(function(e){if(e.which===13){var t=l("#hex-new-value").val();l("#hex-new-value").remove();l("#hex-changes").text(t).show();i._setValue("#"+t)}})})},togglePalette:function(){if(this._palette===null){this.showPalette();this.makeEditableHex()}else{this.hidePalette()}},showPalette:function(){if(this._enabled){l(".colorPicker").not("."+this._id).colorpicker("hidePalette");if(this._palette===null){this._palette=l(this._paletteHTML()).appendTo(l(document.body)).on("click",function(e){e.stopPropagation()});this._palette.position({my:"left bottom",at:"left bottom-20",of:this.element.next()});this._bindColors();var t=this;l(document.body).on("click."+this._id,function(e){console.log("doc click",e.target);if(e.target!=t.element.get(0)){t.hidePalette()}})}}return this},hidePalette:function(){if(this._isPopup&&this._palette){l(document.body).off("click."+this._id);var e=this;this._palette.off("mouseover click","td").fadeOut(function(){e._palette.remove();e._palette=e._cTxt=null}).find(".evo-more a").off("click")}return this},_bindColors:function(){var e=this._palette.find("div.evo-color"),t=this.options.history?"td,.evo-cHist>div":"td";this._cTxt1=e.eq(0).children().eq(0);this._cTxt2=e.eq(1).children().eq(0);var i=this;this._palette.on("click",t,function(e){if(i._enabled){var t=n(l(this).attr("style").substring(17));i._setValue(t)}}).on("mouseover",t,function(e){if(i._enabled){var t=n(l(this).attr("style").substring(17));if(i.options.displayIndicator){i._setColorInd(t,2)}i.element.trigger("mouseover.color",t)}}).find(".evo-more a").on("click",function(){i._switchPalette(this)})},val:function(e){if(typeof e=="undefined"){return this.options.color}else{this._setValue(e);return this}},_setValue:function(e,t){e=e.replace(/ /g,"");this.options.color=e;if(this._isPopup){if(!t){this.hidePalette()}this.element.val(e).next().attr("style","background-color:"+e)}else{this._setColorInd(e,1)}if(this.options.history&&this._paletteIdx>0){this._add2History(e)}this.element.trigger("change.color",e)},_setColorInd:function(e,t){this["_cTxt"+t].attr("style","background-color:"+e).next().html(e)},_setOption:function(e,t){if(e=="color"){this._setValue(t,true)}else{this.options[e]=t}},_add2History:function(e){var t=d.length;for(var i=0;i<t;i++){if(e==d[i]){return}}if(t>27){d.shift()}d.push(e)},enable:function(){var e=this.element;if(this._isPopup){e.removeAttr("disabled")}else{e.css({opacity:"1","pointer-events":"auto"})}if(this.options.showOn!=="focus"){this.element.next().addClass("evo-pointer")}e.removeAttr("aria-disabled");this._enabled=true;return this},disable:function(){var e=this.element;if(this._isPopup){e.attr("disabled","disabled")}else{this.hidePalette();e.css({opacity:"0.3","pointer-events":"none"})}if(this.options.showOn!=="focus"){this.element.next().removeClass("evo-pointer")}e.attr("aria-disabled","true");this._enabled=false;return this},isDisabled:function(){return!this._enabled},destroy:function(){l(document.body).off("click."+this._id);if(this._palette){this._palette.off("mouseover click","td,.evo-cHist>div").find(".evo-more a").off("click");if(this._isPopup){this._palette.remove()}this._palette=this._cTxt=null}if(this._isPopup){this.element.next().off("click").remove().end().off("focus").unwrap()}this.element.removeClass("colorPicker "+this.id).empty();l.Widget.prototype.destroy.call(this)}})})(jQuery);(function(m){var e={className:"autosizejs",id:"autosizejs",append:"\n",callback:false,resizeDelay:10,placeholder:true},t='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',g=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],_,v=m(t).data("autosize",true)[0];v.style.lineHeight="99px";if(m(v).css("lineHeight")==="99px"){g.push("lineHeight")}v.style.lineHeight="";m.fn.autosize=function(p){if(!this.length){return this}p=m.extend({},e,p||{});if(v.parentNode!==document.body){m(document.body).append(v)}return this.each(function(){var a=this,s=m(a),n,i,r=0,o=m.isFunction(p.callback),e={height:a.style.height,overflow:a.style.overflow,overflowY:a.style.overflowY,wordWrap:a.style.wordWrap,resize:a.style.resize},t,l=s.width(),d=s.css("resize");if(s.data("autosize")){return}s.data("autosize",true);if(s.css("box-sizing")==="border-box"||s.css("-moz-box-sizing")==="border-box"||s.css("-webkit-box-sizing")==="border-box"){r=s.outerHeight()-s.height()}i=Math.max(parseFloat(s.css("minHeight"))-r||0,s.height());s.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"});if(d==="vertical"){s.css("resize","none")}else if(d==="both"){s.css("resize","horizontal")}function u(){var i;var n=window.getComputedStyle?window.getComputedStyle(a,null):null;if(n){i=parseFloat(n.width);if(n.boxSizing==="border-box"||n.webkitBoxSizing==="border-box"||n.mozBoxSizing==="border-box"){m.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,t){i-=parseFloat(n[t])})}}else{i=s.width()}v.style.width=Math.max(i,0)+"px"}function c(){var i={};_=a;v.className=p.className;v.id=p.id;n=parseFloat(s.css("maxHeight"));m.each(g,function(e,t){i[t]=s.css(t)});m(v).css(i).attr("wrap",s.attr("wrap"));u();if(window.chrome){var e=a.style.width;a.style.width="0px";var t=a.offsetWidth;a.style.width=e}}function h(){var e,t;if(_!==a){c()}else{u()}if(!a.value&&p.placeholder){v.value=s.attr("placeholder")||""}else{v.value=a.value}v.value+=p.append||"";v.style.overflowY=a.style.overflowY;t=parseFloat(a.style.height)||0;v.scrollTop=0;v.scrollTop=9e4;e=v.scrollTop;if(n&&e>n){a.style.overflowY="scroll";e=n}else{a.style.overflowY="hidden";if(e<i){e=i}}e+=r;if(Math.abs(t-e)>1/100){a.style.height=e+"px";v.className=v.className;if(o){p.callback.call(a,a)}s.trigger("autosize.resized")}}function f(){clearTimeout(t);t=setTimeout(function(){var e=s.width();if(e!==l){l=e;h()}},parseInt(p.resizeDelay,10))}if("onpropertychange"in a){if("oninput"in a){s.on("input.autosize keyup.autosize",h)}else{s.on("propertychange.autosize",function(){if(event.propertyName==="value"){h()}})}}else{s.on("input.autosize",h)}if(p.resizeDelay!==false){m(window).on("resize.autosize",f)}s.on("autosize.resize",h);s.on("autosize.resizeIncludeStyle",function(){_=null;h()});s.on("autosize.destroy",function(){_=null;clearTimeout(t);m(window).off("resize",f);s.off("autosize").off(".autosize").css(e).removeData("autosize")});h()})}})(jQuery||$);(function(a,e){var t=/chrome/i.exec(e),i=/android/i.exec(e),s="ontouchstart"in window&&!(t&&!i),n=s?"touchstart":"mousedown",r=s?"touchend touchcancel":"mouseup mouseleave",o=s?"touchmove":"mousemove",l="finger",d=a("html")[0],u={},c={},h,f,p,m,g,_,v=a.Finger={pressDuration:300,doubleTapInterval:300,flickDuration:150,motionThreshold:5};function y(e){e.preventDefault();a.event.remove(d,"click",y)}function b(e,t){return(s?t.originalEvent.touches[0]:t)["page"+e.toUpperCase()]}function w(e,t,i){var n=a.Event(t,c);a.event.trigger(n,{originalEvent:e},e.target);if(n.isDefaultPrevented()){if(~t.indexOf("tap")&&!s)a.event.add(d,"click",y);else e.preventDefault()}if(i){a.event.remove(d,o+"."+l,k);a.event.remove(d,r+"."+l,L)}}function M(e){var t=e.timeStamp||+new Date;if(p==t)return;p=t;u.x=c.x=b("x",e);u.y=c.y=b("y",e);u.time=t;u.target=e.target;c.orientation=null;c.end=false;h=false;f=false;m=setTimeout(function(){f=true;w(e,"press")},a.Finger.pressDuration);a.event.add(d,o+"."+l,k);a.event.add(d,r+"."+l,L);if(v.preventDefault){e.preventDefault();a.event.add(d,"click",y)}}function k(e){c.x=b("x",e);c.y=b("y",e);c.dx=c.x-u.x;c.dy=c.y-u.y;c.adx=Math.abs(c.dx);c.ady=Math.abs(c.dy);h=c.adx>v.motionThreshold||c.ady>v.motionThreshold;if(!h)return;clearTimeout(m);if(!c.orientation){if(c.adx>c.ady){c.orientation="horizontal";c.direction=c.dx>0?+1:-1}else{c.orientation="vertical";c.direction=c.dy>0?+1:-1}}while(e.target&&e.target!==u.target)e.target=e.target.parentNode;if(e.target!==u.target){e.target=u.target;L.call(this,a.Event(r+"."+l,e));return}w(e,"drag")}function L(e){var t=e.timeStamp||+new Date,i=t-u.time,n;clearTimeout(m);if(!h&&!f&&e.target===u.target){var a=g===e.target&&t-_<v.doubleTapInterval;n=a?"doubletap":"tap";g=a?null:u.target;_=t}else{e.target=u.target;if(i<v.flickDuration)w(e,"flick");c.end=true;n="drag"}w(e,n,true)}a.event.add(d,n+"."+l,M)})(jQuery,navigator.userAgent);!function(l){"use strict";var n=function(e){this.defined="undefined"!=typeof localStorage;var t="garlic:"+document.domain+">test";try{localStorage.setItem(t,t),localStorage.removeItem(t)}catch(e){this.defined=!1}};n.prototype={constructor:n,get:function(e,t){var i=localStorage.getItem(e);if(i){try{i=JSON.parse(i)}catch(e){}return i}return void 0!==t?t:null},has:function(e){return!!localStorage.getItem(e)},set:function(e,t,i){return""===t||t instanceof Array&&0===t.length?this.destroy(e):(t=JSON.stringify(t),localStorage.setItem(e,t)),"function"!=typeof i||i()},destroy:function(e,t){return localStorage.removeItem(e),"function"!=typeof t||t()},clean:function(e){for(var t=localStorage.length-1;t>=0;t--)void 0===Array.indexOf&&-1!==localStorage.key(t).indexOf("garlic:")&&localStorage.removeItem(localStorage.key(t));return"function"!=typeof e||e()},clear:function(e){return localStorage.clear(),"function"!=typeof e||e()}};var o=function(e,t,i){this.init("garlic",e,t,i)};o.prototype={constructor:o,init:function(e,t,i,n){this.type=e,this.$element=l(t),this.options=this.getOptions(n),this.storage=i,this.path=this.options.getPath(this.$element)||this.getPath(),this.parentForm=this.$element.closest("form"),this.$element.addClass("garlic-auto-save"),this.expiresFlag=!!this.options.expires&&(this.$element.data("expires")?this.path:this.getPath(this.parentForm))+"_flag",this.$element.on(this.options.events.join("."+this.type+" "),!1,l.proxy(this.persist,this)),this.options.destroy&&l(this.parentForm).on("submit reset",!1,l.proxy(this.destroy,this)),this.retrieve()},getOptions:function(e){return l.extend({},l.fn[this.type].defaults,e,this.$element.data())},persist:function(){if(this.val!==this.getVal()){this.val=this.getVal(),this.options.expires&&this.storage.set(this.expiresFlag,((new Date).getTime()+1e3*this.options.expires).toString());var e=this.options.prePersist(this.$element,this.val);"string"==typeof e&&(this.val=e),this.storage.set(this.path,this.val),this.options.onPersist(this.$element,this.val)}},getVal:function(){return this.$element.is("input[type=checkbox]")?this.$element.prop("checked")?"checked":"unchecked":this.$element.val()},retrieve:function(){if(this.storage.has(this.path)){if(this.options.expires){var e=(new Date).getTime();if(this.storage.get(this.expiresFlag)<e.toString())return void this.storage.destroy(this.path);this.$element.attr("expires-in",Math.floor((parseInt(this.storage.get(this.expiresFlag))-e)/1e3))}var t=this.$element.val(),i=this.storage.get(this.path);if("boolean"==typeof(i=this.options.preRetrieve(this.$element,t,i))&&0==i)return;return this.options.conflictManager.enabled&&this.detectConflict()?this.conflictManager():this.$element.is("input[type=radio], input[type=checkbox]")?"checked"===i||this.$element.val()===i?this.$element.prop("checked",!0):void("unchecked"===i&&this.$element.prop("checked",!1)):(this.$element.val(i),this.$element.trigger("input"),void this.options.onRetrieve(this.$element,i))}},detectConflict:function(){var e=this;if(this.$element.is("input[type=checkbox], input[type=radio]"))return!1;if(this.$element.val()&&this.storage.get(this.path)!==this.$element.val()){if(this.$element.is("select")){var t=!1;return this.$element.find("option").each(function(){0!==l(this).index()&&l(this).attr("selected")&&l(this).val()!==e.storage.get(this.path)&&(t=!0)}),t}return!0}return!1},conflictManager:function(){if("function"==typeof this.options.conflictManager.onConflictDetected&&!this.options.conflictManager.onConflictDetected(this.$element,this.storage.get(this.path)))return!1;this.options.conflictManager.garlicPriority?(this.$element.data("swap-data",this.$element.val()),this.$element.data("swap-state","garlic"),this.$element.val(this.storage.get(this.path))):(this.$element.data("swap-data",this.storage.get(this.path)),this.$element.data("swap-state","default")),this.swapHandler(),this.$element.addClass("garlic-conflict-detected"),this.$element.closest("input[type=submit]").attr("disabled",!0)},swapHandler:function(){var e=l(this.options.conflictManager.template);this.$element.after(e.text(this.options.conflictManager.message)),e.on("click",!1,l.proxy(this.swap,this))},swap:function(){var e=this.$element.data("swap-data");this.$element.data("swap-state","garlic"===this.$element.data("swap-state")?"default":"garlic"),this.$element.data("swap-data",this.$element.val()),l(this.$element).val(e),this.options.onSwap(this.$element,this.$element.data("swap-data"),e)},destroy:function(){this.storage.destroy(this.path)},remove:function(){this.destroy(),this.$element.is("input[type=radio], input[type=checkbox]")?l(this.$element).attr("checked",!1):this.$element.val("")},getPath:function(e){if(void 0===e&&(e=this.$element),this.options.getPath(e))return this.options.getPath(e);if(1!=e.length)return!1;for(var t="",i=e.is("input[type=checkbox]"),n=e;n.length;){var a=n[0],s=a.nodeName;if(!s)break;s=s.toLowerCase();var r=n.parent(),o=r.children(s);if(l(a).is("form, input, select, textarea")||i){if(s+=l(a).attr("name")?"."+l(a).attr("name"):"",o.length>1&&!l(a).is("input[type=radio]")&&(s+=":eq("+o.index(a)+")"),t=s+(t?">"+t:""),"form"==a.nodeName.toLowerCase())break;n=r}else n=r}return"garlic:"+document.domain+(this.options.domain?"*":window.location.pathname)+">"+t},getStorage:function(){return this.storage}},l.fn.garlic=function(a,e){var s=l.extend(!0,{},l.fn.garlic.defaults,a,this.data()),r=new n,t=!1;if(!r.defined)return!1;function i(e){var t=l(e),i=t.data("garlic"),n=l.extend({},s,t.data());if((void 0===n.storage||n.storage)&&"password"!==l(e).attr("type"))return i||t.data("garlic",i=new o(e,r,n)),"string"==typeof a&&"function"==typeof i[a]?i[a]():void 0}return this.each(function(){if(l(this).is("form"))l(this).find(s.inputs).each(function(){l(this).is(s.excluded)||(t=i(l(this)))});else if(l(this).is(s.inputs)){if(l(this).is(s.excluded))return;t=i(l(this))}}),"function"==typeof e?e():t},l.fn.garlic.Constructor=o,l.fn.garlic.defaults={destroy:!0,inputs:"input, textarea, select",excluded:'input[type="file"], input[type="hidden"], input[type="submit"], input[type="reset"]',events:["DOMAttrModified","textInput","input","change","click","keypress","paste","focus"],domain:!1,expires:!1,conflictManager:{enabled:!1,garlicPriority:!0,template:'<span class="garlic-swap"></span>',message:"This is your saved data. Click here to see default one",onConflictDetected:function(e,t){return!0}},getPath:function(e){},preRetrieve:function(e,t,i){return i},onRetrieve:function(e,t){},prePersist:function(e,t){return!1},onPersist:function(e,t){},onSwap:function(e,t,i){}},l(window).on("load",function(){l('[data-persist="garlic"]').each(function(){l(this).garlic()})})}(window.jQuery||window.Zepto);(function(c){c.widget("ui.tagit",{options:{itemName:"item",fieldName:"tags",availableTags:[],tagSource:null,removeConfirmation:false,caseSensitive:true,allowSpaces:false,singleField:false,singleFieldDelimiter:",",singleFieldNode:null,tabIndex:null,onTagAdded:null,onTagRemoved:null,onTagClicked:null},_init:function(e,t){},_create:function(){var a=this;if(this.element.is("input")){this.tagList=c("<ul></ul>").insertAfter(this.element);this.options.singleField=true;this.options.singleFieldNode=this.element;this.element.css("display","none")}else{this.tagList=this.element.find("ul, ol").andSelf().last()}this._tagInput=c('<input type="text">').addClass("ui-widget-content");if(this.options.tabIndex){this._tagInput.attr("tabindex",this.options.tabIndex)}this.options.tagSource=this.options.tagSource||function(e,t){var i=e.term.toLowerCase();var n=c.grep(a.options.availableTags,function(e){return e.toLowerCase().indexOf(i)===0});t(a._subtractArray(n,a.assignedTags()))};this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(c('<li class="tagit-new"></li>').append(this._tagInput)).click(function(e){var t=c(e.target);if(t.hasClass("tagit-label")){a._trigger("onTagClicked",e,t.closest(".tagit-choice"))}else{a._tagInput.focus()}});this.tagList.children("li").each(function(){if(!c(this).hasClass("tagit-new")){a.createTag(c(this).html(),c(this).attr("class"));c(this).remove()}});if(this.options.singleField){if(this.options.singleFieldNode){var e=c(this.options.singleFieldNode);var t=e.val().split(this.options.singleFieldDelimiter);e.val("");c.each(t,function(e,t){a.createTag(t,null,true)})}else{this.options.singleFieldNode=this.tagList.after('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'">')}}this._tagInput.keydown(function(e){if(e.which==c.ui.keyCode.BACKSPACE&&a._tagInput.val()===""){var t=a._lastTag();if(!a.options.removeConfirmation||t.hasClass("remove")){a.removeTag(t)}else if(a.options.removeConfirmation){t.addClass("remove ui-state-highlight")}}else if(a.options.removeConfirmation){a._lastTag().removeClass("remove ui-state-highlight")}if(e.which==c.ui.keyCode.COMMA||e.which==c.ui.keyCode.ENTER||e.which==c.ui.keyCode.TAB&&a._tagInput.val()!==""||e.which==c.ui.keyCode.SPACE&&a.options.allowSpaces!==true&&(c.trim(a._tagInput.val()).replace(/^s*/,"").charAt(0)!='"'||c.trim(a._tagInput.val()).charAt(0)=='"'&&c.trim(a._tagInput.val()).charAt(c.trim(a._tagInput.val()).length-1)=='"'&&c.trim(a._tagInput.val()).length-1!==0)){e.preventDefault();a.createTag(a._cleanedInput());a._tagInput.autocomplete("close")}}).blur(function(e){a.createTag(a._cleanedInput())});if(this.options.availableTags||this.options.tagSource){this._tagInput.autocomplete({autoFocus:false,minLength:0,source:this.options.tagSource,select:function(e,t){a.createTag(t.item.value);return false}});this._tagInput.focus(function(){})}},_cleanedInput:function(){return c.trim(this._tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.children(".tagit-choice:last")},assignedTags:function(){var e=this;var t=[];if(this.options.singleField){t=c(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter);if(t[0]===""){t=[]}}else{this.tagList.children(".tagit-choice").each(function(){t.push(e.tagLabel(this))})}return t},_updateSingleTagsField:function(e){c(this.options.singleFieldNode).val(e.join(this.options.singleFieldDelimiter))},_subtractArray:function(e,t){var i=[];for(var n=0;n<e.length;n++){if(c.inArray(e[n],t)==-1){i.push(e[n])}}return i},tagLabel:function(e){if(this.options.singleField){return c(e).children(".tagit-label").text()}else{return c(e).children("input").val()}},_isNew:function(t){var i=this;var n=true;this.tagList.children(".tagit-choice").each(function(e){if(i._formatStr(t)==i._formatStr(i.tagLabel(this))){n=false;return false}});return n},_formatStr:function(e){if(this.options.caseSensitive){return e}return c.trim(e.toLowerCase())},createTag:function(e,t,i){that=this;e=c.trim(e);if(!this._isNew(e)||e===""){return false}if(this.options.onlyFromAvailableTags){var n=false;var a=that._formatStr(e);c.each(this.options.availableTags,function(e,t){if(!that.options.caseSensitive){t=t.toLowerCase()}if(t==a){n=true}});if(!n){this._trigger("onError",null,r);return}}var s=c(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(e);var r=c("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(t).append(s);var o=c("<span></span>").addClass("ui-icon ui-icon-close");var l=c('<a><span class="text-icon"></span></a>').addClass("close").append(o).click(function(e){that.removeTag(r)});r.append(l);if(this.options.singleField){var d=this.assignedTags();d.push(e);this._updateSingleTagsField(d)}else{var u=s.html();r.append('<input type="hidden" style="display:none;" value="'+u+'" name="'+this.options.itemName+"["+this.options.fieldName+'][]">')}this._trigger("onTagAdded",null,r);this._tagInput.val("");this._tagInput.parent().before(r);if(!i)this._trigger("onTagAddedAfter",null,r)},removeTag:function(e,t){if(typeof t==="undefined"){t=true}e=c(e);this._trigger("onTagRemoved",null,e);if(this.options.singleField){var i=this.assignedTags();var n=this.tagLabel(e);i=c.grep(i,function(e){return e!=n});this._updateSingleTagsField(i)}if(t){e.fadeOut("fast").hide("blind",{direction:"horizontal"},"fast",function(){e.remove()}).dequeue()}else{e.remove()}this._trigger("onTagRemovedAfter",null,e)},removeAll:function(){var i=this;this.tagList.children(".tagit-choice").each(function(e,t){i.removeTag(t,false)})}})})(jQuery);(function(e){jQuery.fn.selectToUISlider=function(t){var s=jQuery.extend({labels:3,tooltip:true,tooltipSrc:"text",labelSrc:"value",sliderOptions:null,data:null,selects:null},t);var i=s.selects&&s.selects.length>0;var n=jQuery(s.selects);var r=function(){var e=[];n.each(function(){e.push("handle_"+jQuery(this).attr("id"))});return e}();if(i){var a=function(){var e=[];n.eq(0).find("option").each(function(){e.push({value:jQuery(this).attr("value"),text:jQuery(this).text()})});return e}();var o=function(){if(n.eq(0).find("optgroup").size()>0){var t=[];n.eq(0).find("optgroup").each(function(e){t[e]={};t[e].label=jQuery(this).attr("label");t[e].options=[];jQuery(this).find("option").each(function(){t[e].options.push({text:jQuery(this).text(),value:jQuery(this).attr("value")})})});return t}else return null}()}else{var a=function(){var e=[];jQuery(s.data).each(function(){jQuery(this.options).each(function(){e.push(this)})});return e}();var o=s.data}jQuery(this).data("options",a);function e(e){return e.constructor==Array}function l(e){return s.tooltipSrc=="text"?a[e].text:a[e].value}var d={step:1,min:0,orientation:"horizontal",max:a.length-1,range:i?n.length>1:s.data.length>1,slide:function(e,t){var i=jQuery(t.handle);var n=l(t.value);i.attr("aria-valuetext",n).attr("aria-valuenow",t.value).find(".ui-slider-tooltip .ttContent").text(n)},values:function(){var e=[];if(i){n.each(function(){e.push(jQuery(this).get(0).selectedIndex)})}else{e=t.defaultValues}return e}()};s.sliderOptions=t?jQuery.extend(d,t.sliderOptions):d;var u=jQuery(this);u.removeAttr("slide");u[0].slide=null;if(i){n.bind("change keyup click",function(){var e=jQuery(this).get(0).selectedIndex;var t=jQuery("#handle_"+jQuery(this).attr("id"));var i=t.data("handleNum");t.parents(".ui-slider:eq(0)").slider("values",i,e)});n.each(function(e){return;var t="";var i=jQuery("label[for="+jQuery(this).attr("id")+"]");var n=i.size()>0?"Slider control for "+i.text()+"":"";var a=i.attr("id")||i.attr("id","label_"+r[e]).attr("id");if(s.tooltip==false){t=' style="display: none;"'}jQuery("<a "+'href="#" tabindex="0" '+'id="'+r[e]+'" '+'class="ui-slider-handle" '+'role="slider" '+'aria-labelledby="'+a+'" '+'aria-valuemin="'+s.sliderOptions.min+'" '+'aria-valuemax="'+s.sliderOptions.max+'" '+'aria-valuenow="'+s.sliderOptions.values[e]+'" '+'aria-valuetext="'+l(s.sliderOptions.values[e])+'" '+'><span class="screenReaderContext">'+n+"</span>"+'<span class="ui-slider-tooltip ui-widget-content ui-corner-all"'+t+'><span class="ttContent"></span>'+'<span class="ui-tooltip-pointer-down ui-widget-content"><span class="ui-tooltip-pointer-down-inner"></span></span>'+"</span></a>").data("handleNum",e).appendTo(u)})}if(o){var c=0;var h=u.append('<dl class="ui-slider-scale ui-helper-reset" role="presentation"></dl>').find(".ui-slider-scale:eq(0)");jQuery(o).each(function(e){h.append('<dt style="width: '+(100/o.length).toFixed(2)+"%"+"; left:"+(e/(o.length-1)*100).toFixed(2)+"%"+'"><span>'+this.label+"</span></dt>");var n=this.options;jQuery(this.options).each(function(e){var t=c==a.length-1||c==0?'style="display: none;"':"";var i=n[e].text;h.append('<dd style="left:'+f(c)+'"><span class="ui-slider-label">'+i+'</span><span class="ui-slider-tic ui-widget-content"'+t+"></span></dd>");c++})})}else{var h=u.append('<ol class="ui-slider-scale ui-helper-reset" role="presentation"></ol>').find(".ui-slider-scale:eq(0)");jQuery(a).each(function(e){var t=e==a.length-1||e==0?'style="display: none;"':"";var i=this.text;h.append('<li style="left:'+f(e)+'"><span class="ui-slider-label">'+i+'</span><span class="ui-slider-tic ui-widget-content"'+t+"></span></li>")})}function f(e){return(e/(a.length-1)*100).toFixed(2)+"%"}if(s.labels>1)u.find(".ui-slider-scale li:last span.ui-slider-label, .ui-slider-scale dd:last span.ui-slider-label").addClass("ui-slider-label-show");var p=Math.max(1,Math.round(a.length/s.labels));for(var m=0;m<a.length;m+=p){if(a.length-m>p){u.find(".ui-slider-scale li:eq("+m+") span.ui-slider-label, .ui-slider-scale dd:eq("+m+") span.ui-slider-label").addClass("ui-slider-label-show")}}u.find(".ui-slider-scale dt").each(function(e){jQuery(this).css({left:(100/o.length*e).toFixed(2)+"%"})});u.slider(s.sliderOptions).attr("role","application").find(".ui-slider-label").each(function(){jQuery(this).css("marginLeft",-jQuery(this).width()/2)});u.find(".ui-tooltip-pointer-down-inner").each(function(){var e=jQuery(".ui-tooltip-pointer-down-inner").css("borderTopWidth");var t=jQuery(this).parents(".ui-slider-tooltip").css("backgroundColor");jQuery(this).css("border-top",e+" solid "+t)});var g=u.slider("values");if(e(g)){jQuery(g).each(function(e){u.find(".ui-slider-tooltip .ttContent").eq(e).text(l(this))})}else{u.find(".ui-slider-tooltip .ttContent").eq(0).text(l(g))}return this}})(jQuery);(function(s,o,e){giscloud.ui.Options=function(t,i,n){var r=this;function a(e){r.ulcont.empty();if(!e||!e.data.length)return;r.template.tmpl(e.data).appendTo(r.ulcont);r.lis=r.ulcont.children("li");r.lis.each(function(e,t){var i={},n={};t=o(t);var a=o.tmplItem(t).data;t.children(".usr-opt-name").editInPlace({use_html:true,callback:function(e,t){if(!t){r.removeAppOption(a.id)}if(!r.updateOption(a.id,t,a.option_value)){return a.option_name}return t}});var s=t.find(".opt-remove-bt");t.children(".usr-opt-value").editInPlace({use_html:true,preinit:function(){s.hide()},postclose:function(){s.show()},callback:function(e,t){if(!r.updateOption(a.id,a.option_name,t)){return a.option_value}return t}});t.mouseover(function(){t.find(".opt-tools").show()});t.mouseleave(function(){t.find(".opt-tools").hide()});s.click(function(){var e=o.tmplItem(this).data;r.removeAppOption(e.id)})})}this.init=function(){r.container=o(t);r.options=i;r.restOptions=n;r.template=o("<div>"+'    <li class="gc-list-item" style="font-size:12px;" >'+'        <div class="usr-opt-name"  style="float:left; min-height:12px; width:60%; overflow:hidden; white-space:nowrap; text-overflow:ellipsis;" title="${option_name}" >${option_name}</div>'+'        <div class="usr-opt-value" style="float:left; min-height:12px; width:25%; margin-left:20px" >${option_value}</div>'+'        <div class="opt-tools" style="float:right; display:none; margin-top:-2px" >'+'            <a style="" class="opt-remove-bt deletebutton" >'+gclang.Remove+"</a>"+"        </div>"+'        <div style="clear: both"></div>'+"    </li>"+"</div>");r.inpdiv=o("<div style='position:relative' ></div>").appendTo(r.container);var e=Math.round(Math.random()*1e7);r.keylabel=o("<label fo='opt_key_"+e+"' style='position:absolute; top:7px; left:7px; color:#999' ></label>").appendTo(r.inpdiv);r.keyinp=o("<input id='opt_key_"+e+"' type='text' style='width:200px' name='name' value='' />").attr("placeholder",__("Name")).appendTo(r.inpdiv);r.vallabel=o("<label fo='opt_val_"+e+"' style='position:absolute; top:7px; left:220px; color:#999' ></label>").appendTo(r.inpdiv);r.valinp=o("<input id='opt_val_"+e+"' type='text' style='width:100px; margin-left:5px' name='' value='' />").attr("placeholder",__("Value")).appendTo(r.inpdiv);r.addbt=o("<a style='margin-left:20px' class='linkbutton extrabig' >"+gclang.Add+"</a>").appendTo(r.inpdiv);r.ulcont=o("<ul style='margin-top:10px' class='gc-list' ></ul>").appendTo(r.container);r.keylabel.inFieldLabels();r.vallabel.inFieldLabels();r.valinp.keypress(function(e){if(e.keyCode==13){r.addOption()}});if(i&&i.availableOptions){r.keyinp.autocomplete({source:i.availableOptions,minLength:0,select:function(e,t){r.keyinp.val(t.item.value)}});r.keyinp.focus(function(e){r.keyinp.autocomplete("search")})}else{r.keyinp.keypress(function(e){if(e.keyCode==13){r.addOption()}})}r.addbt.click(function(e){r.addOption()});r.listAppOption();return this};this.validateOptionValue=function(e){var t=e.value.toLowerCase();if(e.name==="LOGIN_PAGE_LOGO_URL"){if(t.indexOf("http://")===0&&s.location.protocol==="https:"){return __("Please use secure URL that begins with https://")}}return true};this.addOption=function(){var e=o.extend({name:r.keyinp.val(),value:r.valinp.val()},r.options);if(!e.name||!e.value){alert(__("Please enter the option name and value."));return}var t=this.validateOptionValue(e);if(t!==true){alert(t);return}function i(e){r.listAppOption();if(e){}r.keyinp.val("");r.valinp.val("");om.showConfirm("Option has been added successfully.")}if(r.restOptions)giscloud.options.create({resource:r.restOptions.resource,id:r.restOptions.id},{option_name:e.name,option_value:e.value}).done(i);else om.kcall("option/add",e,i)};this.removeAppOption=function(e){if(!e)return;function t(e){r.listAppOption()}if(r.restOptions)giscloud.options.remove(e).done(t);else om.kcall("option/remove",{option_id:e},t)};this.updateOption=function(e,t,i){if(!e||!t||!i)return;var n=this.validateOptionValue({name:t,value:i});if(n!==true){alert(n);return false}function a(){r.listAppOption()}if(r.restOptions)giscloud.options.update(e,{resource:r.restOptions.resource,id:r.restOptions.id},{option_name:t,option_value:i}).done(a);else om.kcall("option/update",{option_id:e,name:t,value:i},a);return true};this.listAppOption=function(){var e=o.extend({name:r.keyinp.val(),value:r.valinp.val()},r.options);r.ulcont.loader();if(r.restOptions)giscloud.options.list({resource:r.restOptions.resource,id:r.restOptions.id,option_type:r.restOptions.option_type}).done(a);else om.kcall("option/list",e,a)};return this.init()}})(window,window.giscloud.exposeJQuery());if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(a){"use strict";function e(){var e=document.createElement("bootstrap");var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t){if(e.style[i]!==undefined){return{end:t[i]}}}return false}a.fn.emulateTransitionEnd=function(e){var t=false;var i=this;a(this).one("bsTransitionEnd",function(){t=true});var n=function(){if(!t)a(i).trigger(a.support.transition.end)};setTimeout(n,e);return this};a(function(){a.support.transition=e();if(!a.support.transition)return;a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(e){if(a(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function(s){"use strict";var t='[data-dismiss="alert"]';var n=function(e){s(e).on("click",t,this.close)};n.VERSION="3.2.0";n.prototype.close=function(e){var t=s(this);var i=t.attr("data-target");if(!i){i=t.attr("href");i=i&&i.replace(/.*(?=#[^\s]*$)/,"")}var n=s(i);if(e)e.preventDefault();if(!n.length){n=t.hasClass("alert")?t:t.parent()}n.trigger(e=s.Event("close.bs.alert"));if(e.isDefaultPrevented())return;n.removeClass("in");function a(){n.detach().trigger("closed.bs.alert").remove()}s.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",a).emulateTransitionEnd(150):a()};function e(i){return this.each(function(){var e=s(this);var t=e.data("bs.alert");if(!t)e.data("bs.alert",t=new n(this));if(typeof i=="string")t[i].call(e)})}var i=s.fn.alert;s.fn.alert=e;s.fn.alert.Constructor=n;s.fn.alert.noConflict=function(){s.fn.alert=i;return this};s(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery);+function(s){"use strict";var a=function(e,t){this.$element=s(e);this.options=s.extend({},a.DEFAULTS,t);this.isLoading=false};a.VERSION="3.2.0";a.DEFAULTS={loadingText:"loading..."};a.prototype.setState=function(e){var t="disabled";var i=this.$element;var n=i.is("input")?"val":"html";var a=i.data();e=e+"Text";if(a.resetText==null)i.data("resetText",i[n]());i[n](a[e]==null?this.options[e]:a[e]);setTimeout(s.proxy(function(){if(e=="loadingText"){this.isLoading=true;i.addClass(t).attr(t,t)}else if(this.isLoading){this.isLoading=false;i.removeClass(t).removeAttr(t)}},this),0)};a.prototype.toggle=function(){var e=true;var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");if(i.prop("type")=="radio"){if(i.prop("checked")&&this.$element.hasClass("active"))e=false;else t.find(".active").removeClass("active")}if(e)i.prop("checked",!this.$element.hasClass("active")).trigger("change")}if(e)this.$element.toggleClass("active")};function i(n){return this.each(function(){var e=s(this);var t=e.data("bs.button");var i=typeof n=="object"&&n;if(!t)e.data("bs.button",t=new a(this,i));if(n=="toggle")t.toggle();else if(n)t.setState(n)})}var e=s.fn.button;s.fn.button=i;s.fn.button.Constructor=a;s.fn.button.noConflict=function(){s.fn.button=e;return this};s(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var t=s(e.target);if(!t.hasClass("btn"))t=t.closest(".btn");i.call(t,"toggle");e.preventDefault()})}(jQuery);+function(h){"use strict";var s=function(e,t){this.$element=h(e).on("keydown.bs.carousel",h.proxy(this.keydown,this));this.$indicators=this.$element.find(".carousel-indicators");this.options=t;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.pause=="hover"&&this.$element.on("mouseenter.bs.carousel",h.proxy(this.pause,this)).on("mouseleave.bs.carousel",h.proxy(this.cycle,this))};s.VERSION="3.2.0";s.DEFAULTS={interval:5e3,pause:"hover",wrap:true};s.prototype.keydown=function(e){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};s.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(h.proxy(this.next,this),this.options.interval));return this};s.prototype.getItemIndex=function(e){this.$items=e.parent().children(".item");return this.$items.index(e||this.$active)};s.prototype.to=function(e){var t=this;var i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){t.to(e)});if(i==e)return this.pause().cycle();return this.slide(e>i?"next":"prev",h(this.$items[e]))};s.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&h.support.transition){this.$element.trigger(h.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};s.prototype.next=function(){if(this.sliding)return;return this.slide("next")};s.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};s.prototype.slide=function(e,t){var i=this.$element.find(".item.active");var n=t||i[e]();var a=this.interval;var s=e=="next"?"left":"right";var r=e=="next"?"first":"last";var o=this;if(!n.length){if(!this.options.wrap)return;n=this.$element.find(".item")[r]()}if(n.hasClass("active"))return this.sliding=false;var l=n[0];var d=h.Event("slide.bs.carousel",{relatedTarget:l,direction:s});this.$element.trigger(d);if(d.isDefaultPrevented())return;this.sliding=true;a&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=h(this.$indicators.children()[this.getItemIndex(n)]);u&&u.addClass("active")}var c=h.Event("slid.bs.carousel",{relatedTarget:l,direction:s});if(h.support.transition&&this.$element.hasClass("slide")){n.addClass(e);n[0].offsetWidth;i.addClass(s);n.addClass(s);i.one("bsTransitionEnd",function(){n.removeClass([e,s].join(" ")).addClass("active");i.removeClass(["active",s].join(" "));o.sliding=false;setTimeout(function(){o.$element.trigger(c)},0)}).emulateTransitionEnd(i.css("transition-duration").slice(0,-1)*1e3)}else{i.removeClass("active");n.addClass("active");this.sliding=false;this.$element.trigger(c)}a&&this.cycle();return this};function r(a){return this.each(function(){var e=h(this);var t=e.data("bs.carousel");var i=h.extend({},s.DEFAULTS,e.data(),typeof a=="object"&&a);var n=typeof a=="string"?a:i.slide;if(!t)e.data("bs.carousel",t=new s(this,i));if(typeof a=="number")t.to(a);else if(n)t[n]();else if(i.interval)t.pause().cycle()})}var e=h.fn.carousel;h.fn.carousel=r;h.fn.carousel.Constructor=s;h.fn.carousel.noConflict=function(){h.fn.carousel=e;return this};h(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var t;var i=h(this);var n=h(i.attr("data-target")||(t=i.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,""));if(!n.hasClass("carousel"))return;var a=h.extend({},n.data(),i.data());var s=i.attr("data-slide-to");if(s)a.interval=false;r.call(n,a);if(s){n.data("bs.carousel").to(s)}e.preventDefault()});h(window).on("load",function(){h('[data-ride="carousel"]').each(function(){var e=h(this);r.call(e,e.data())})})}(jQuery);+function(d){"use strict";var a=function(e,t){this.$element=d(e);this.options=d.extend({},a.DEFAULTS,t);this.transitioning=null;if(this.options.parent)this.$parent=d(this.options.parent);if(this.options.toggle)this.toggle()};a.VERSION="3.2.0";a.DEFAULTS={toggle:true};a.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"};a.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var e=d.Event("show.bs.collapse");this.$element.trigger(e);if(e.isDefaultPrevented())return;var t=this.$parent&&this.$parent.find("> .panel > .in");if(t&&t.length){var i=t.data("bs.collapse");if(i&&i.transitioning)return;u.call(t,"hide");i||t.data("bs.collapse",null)}var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0);this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!d.support.transition)return a.call(this);var s=d.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",d.proxy(a,this)).emulateTransitionEnd(350)[n](this.$element[0][s])};a.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var e=d.Event("hide.bs.collapse");this.$element.trigger(e);if(e.isDefaultPrevented())return;var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var i=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!d.support.transition)return i.call(this);this.$element[t](0).one("bsTransitionEnd",d.proxy(i,this)).emulateTransitionEnd(350)};a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};function u(n){return this.each(function(){var e=d(this);var t=e.data("bs.collapse");var i=d.extend({},a.DEFAULTS,e.data(),typeof n=="object"&&n);if(!t&&i.toggle&&n=="show")n=!n;if(!t)e.data("bs.collapse",t=new a(this,i));if(typeof n=="string")t[n]()})}var e=d.fn.collapse;d.fn.collapse=u;d.fn.collapse.Constructor=a;d.fn.collapse.noConflict=function(){d.fn.collapse=e;return this};d(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var t;var i=d(this);var n=i.attr("data-target")||e.preventDefault()||(t=i.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");var a=d(n);var s=a.data("bs.collapse");var r=s?"toggle":i.data();var o=i.attr("data-parent");var l=o&&d(o);if(!s||!s.transitioning){if(l)l.find('[data-toggle="collapse"][data-parent="'+o+'"]').not(i).addClass("collapsed");i[a.hasClass("in")?"addClass":"removeClass"]("collapsed")}u.call(a,r)})}(jQuery);+function(o){"use strict";var e=".dropdown-backdrop";var l='[data-toggle="dropdown"]';var n=function(e){o(e).on("click.bs.dropdown",this.toggle)};n.VERSION="3.2.0";n.prototype.toggle=function(e){var t=o(this);if(t.is(".disabled, :disabled"))return;var i=d(t);var n=i.hasClass("open");s();if(!n){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length){o('<div class="dropdown-backdrop"/>').insertAfter(o(this)).on("click",s)}var a={relatedTarget:this};i.trigger(e=o.Event("show.bs.dropdown",a));if(e.isDefaultPrevented())return;t.trigger("focus");i.toggleClass("open").trigger("shown.bs.dropdown",a)}return false};n.prototype.keydown=function(e){if(!/(38|40|27)/.test(e.keyCode))return;var t=o(this);e.preventDefault();e.stopPropagation();if(t.is(".disabled, :disabled"))return;var i=d(t);var n=i.hasClass("open");if(!n||n&&e.keyCode==27){if(e.which==27)i.find(l).trigger("focus");return t.trigger("click")}var a=" li:not(.divider):visible a";var s=i.find('[role="menu"]'+a+', [role="listbox"]'+a);if(!s.length)return;var r=s.index(s.filter(":focus"));if(e.keyCode==38&&r>0)r--;if(e.keyCode==40&&r<s.length-1)r++;if(!~r)r=0;s.eq(r).trigger("focus")};function s(i){if(i&&i.which===3)return;o(e).remove();o(l).each(function(){var e=d(o(this));var t={relatedTarget:this};if(!e.hasClass("open"))return;e.trigger(i=o.Event("hide.bs.dropdown",t));if(i.isDefaultPrevented())return;e.removeClass("open").trigger("hidden.bs.dropdown",t)})}function d(e){var t=e.attr("data-target");if(!t){t=e.attr("href");t=t&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,"")}var i=t&&o(t);return i&&i.length?i:e.parent()}function t(i){return this.each(function(){var e=o(this);var t=e.data("bs.dropdown");if(!t)e.data("bs.dropdown",t=new n(this));if(typeof i=="string")t[i].call(e)})}var i=o.fn.dropdown;o.fn.dropdown=t;o.fn.dropdown.Constructor=n;o.fn.dropdown.noConflict=function(){o.fn.dropdown=i;return this};o(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",l,n.prototype.toggle).on("keydown.bs.dropdown.data-api",l+', [role="menu"], [role="listbox"]',n.prototype.keydown)}(jQuery);+function(s){"use strict";var r=function(e,t){this.options=t;this.$body=s(document.body);this.$element=s(e);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,s.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};r.VERSION="3.2.0";r.DEFAULTS={backdrop:true,keyboard:true,show:true};r.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};r.prototype.show=function(i){var n=this;var e=s.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.$body.addClass("modal-open");this.setScrollbar();this.escape();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',s.proxy(this.hide,this));this.backdrop(function(){var e=s.support.transition&&n.$element.hasClass("fade");if(!n.$element.parent().length){n.$element.appendTo(n.$body)}n.$element.show().scrollTop(0);if(e){n.$element[0].offsetWidth}n.$element.addClass("in").attr("aria-hidden",false);n.enforceFocus();var t=s.Event("shown.bs.modal",{relatedTarget:i});e?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(300):n.$element.trigger("focus").trigger(t)})};r.prototype.hide=function(e){if(e)e.preventDefault();e=s.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.$body.removeClass("modal-open");this.resetScrollbar();this.escape();s(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.bs.modal");s.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",s.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()};r.prototype.enforceFocus=function(){s(document).off("focusin.bs.modal").on("focusin.bs.modal",s.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};r.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.bs.modal",s.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keyup.dismiss.bs.modal")}};r.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})};r.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};r.prototype.backdrop=function(e){var t=this;var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=s.support.transition&&i;this.$backdrop=s('<div class="modal-backdrop '+i+'" />').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",s.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this));if(n)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){t.removeBackdrop();e&&e()};s.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(150):a()}else if(e){e()}};r.prototype.checkScrollbar=function(){if(document.body.clientWidth>=window.innerWidth)return;this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar()};r.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);if(this.scrollbarWidth)this.$body.css("padding-right",e+this.scrollbarWidth)};r.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};r.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure";this.$body.append(e);var t=e.offsetWidth-e.clientWidth;this.$body[0].removeChild(e);return t};function o(n,a){return this.each(function(){var e=s(this);var t=e.data("bs.modal");var i=s.extend({},r.DEFAULTS,e.data(),typeof n=="object"&&n);if(!t)e.data("bs.modal",t=new r(this,i));if(typeof n=="string")t[n](a);else if(i.show)t.show(a)})}var e=s.fn.modal;s.fn.modal=o;s.fn.modal.Constructor=r;s.fn.modal.noConflict=function(){s.fn.modal=e;return this};s(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=s(this);var i=t.attr("href");var n=s(t.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,""));var a=n.data("bs.modal")?"toggle":s.extend({remote:!/#/.test(i)&&i},n.data(),t.data());if(t.is("a"))e.preventDefault();n.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;n.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})});o.call(n,a,this)})}(jQuery);+function(g){"use strict";var a=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",e,t)};a.VERSION="3.2.0";a.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};a.prototype.init=function(e,t,i){this.enabled=true;this.type=e;this.$element=g(t);this.options=this.getOptions(i);this.$viewport=this.options.viewport&&g(this.options.viewport.selector||this.options.viewport);var n=this.options.trigger.split(" ");for(var a=n.length;a--;){var s=n[a];if(s=="click"){this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this))}else if(s!="manual"){var r=s=="hover"?"mouseenter":"focusin";var o=s=="hover"?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,g.proxy(this.enter,this));this.$element.on(o+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};a.prototype.getDefaults=function(){return a.DEFAULTS};a.prototype.getOptions=function(e){e=g.extend({},this.getDefaults(),this.$element.data(),e);if(e.delay&&typeof e.delay=="number"){e.delay={show:e.delay,hide:e.delay}}return e};a.prototype.getDelegateOptions=function(){var i={};var n=this.getDefaults();this._options&&g.each(this._options,function(e,t){if(n[e]!=t)i[e]=t});return i};a.prototype.enter=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(!t){t=new this.constructor(e.currentTarget,this.getDelegateOptions());g(e.currentTarget).data("bs."+this.type,t)}clearTimeout(t.timeout);t.hoverState="in";if(!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){if(t.hoverState=="in")t.show()},t.options.delay.show)};a.prototype.leave=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(!t){t=new this.constructor(e.currentTarget,this.getDelegateOptions());g(e.currentTarget).data("bs."+this.type,t)}clearTimeout(t.timeout);t.hoverState="out";if(!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){if(t.hoverState=="out")t.hide()},t.options.delay.hide)};a.prototype.show=function(){var e=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var t=g.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!t)return;var i=this;var n=this.tip();var a=this.getUID(this.type);this.setContent();n.attr("id",a);this.$element.attr("aria-describedby",a);if(this.options.animation)n.addClass("fade");var s=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement;var r=/\s?auto?\s?/i;var o=r.test(s);if(o)s=s.replace(r,"")||"top";n.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this);this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var l=this.getPosition();var d=n[0].offsetWidth;var u=n[0].offsetHeight;if(o){var c=s;var h=this.$element.parent();var f=this.getPosition(h);s=s=="bottom"&&l.top+l.height+u-f.scroll>f.height?"top":s=="top"&&l.top-f.scroll-u<0?"bottom":s=="right"&&l.right+d>f.width?"left":s=="left"&&l.left-d<f.left?"right":s;n.removeClass(c).addClass(s)}var p=this.getCalculatedOffset(s,l,d,u);this.applyPlacement(p,s);var m=function(){i.$element.trigger("shown.bs."+i.type);i.hoverState=null};g.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",m).emulateTransitionEnd(150):m()}};a.prototype.applyPlacement=function(e,t){var i=this.tip();var n=i[0].offsetWidth;var a=i[0].offsetHeight;var s=parseInt(i.css("margin-top"),10);var r=parseInt(i.css("margin-left"),10);if(isNaN(s))s=0;if(isNaN(r))r=0;e.top=e.top+s;e.left=e.left+r;g.offset.setOffset(i[0],g.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0);i.addClass("in");var o=i[0].offsetWidth;var l=i[0].offsetHeight;if(t=="top"&&l!=a){e.top=e.top+a-l}var d=this.getViewportAdjustedDelta(t,e,o,l);if(d.left)e.left+=d.left;else e.top+=d.top;var u=d.left?d.left*2-n+o:d.top*2-a+l;var c=d.left?"left":"top";var h=d.left?"offsetWidth":"offsetHeight";i.offset(e);this.replaceArrow(u,i[0][h],c)};a.prototype.replaceArrow=function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")};a.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t);e.removeClass("fade in top bottom left right")};a.prototype.hide=function(){var e=this;var t=this.tip();var i=g.Event("hide.bs."+this.type);this.$element.removeAttr("aria-describedby");function n(){if(e.hoverState!="in")t.detach();e.$element.trigger("hidden.bs."+e.type)}this.$element.trigger(i);if(i.isDefaultPrevented())return;t.removeClass("in");g.support.transition&&this.$tip.hasClass("fade")?t.one("bsTransitionEnd",n).emulateTransitionEnd(150):n();this.hoverState=null;return this};a.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof e.attr("data-original-title")!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};a.prototype.hasContent=function(){return this.getTitle()};a.prototype.getPosition=function(e){e=e||this.$element;var t=e[0];var i=t.tagName=="BODY";return g.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():null,{scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:i?g(window).width():e.outerWidth(),height:i?g(window).height():e.outerHeight()},i?{top:0,left:0}:e.offset())};a.prototype.getCalculatedOffset=function(e,t,i,n){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:e=="top"?{top:t.top-n,left:t.left+t.width/2-i/2}:e=="left"?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}};a.prototype.getViewportAdjustedDelta=function(e,t,i,n){var a={top:0,left:0};if(!this.$viewport)return a;var s=this.options.viewport&&this.options.viewport.padding||0;var r=this.getPosition(this.$viewport);if(/right|left/.test(e)){var o=t.top-s-r.scroll;var l=t.top+s-r.scroll+n;if(o<r.top){a.top=r.top-o}else if(l>r.top+r.height){a.top=r.top+r.height-l}}else{var d=t.left-s;var u=t.left+s+i;if(d<r.left){a.left=r.left-d}else if(u>r.width){a.left=r.left+r.width-u}}return a};a.prototype.getTitle=function(){var e;var t=this.$element;var i=this.options;e=t.attr("data-original-title")||(typeof i.title=="function"?i.title.call(t[0]):i.title);return e};a.prototype.getUID=function(e){do{e+=~~(Math.random()*1e6)}while(document.getElementById(e));return e};a.prototype.tip=function(){return this.$tip=this.$tip||g(this.options.template)};a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};a.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}};a.prototype.enable=function(){this.enabled=true};a.prototype.disable=function(){this.enabled=false};a.prototype.toggleEnabled=function(){this.enabled=!this.enabled};a.prototype.toggle=function(e){var t=this;if(e){t=g(e.currentTarget).data("bs."+this.type);if(!t){t=new this.constructor(e.currentTarget,this.getDelegateOptions());g(e.currentTarget).data("bs."+this.type,t)}}t.tip().hasClass("in")?t.leave(t):t.enter(t)};a.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};function e(n){return this.each(function(){var e=g(this);var t=e.data("bs.tooltip");var i=typeof n=="object"&&n;if(!t&&n=="destroy")return;if(!t)e.data("bs.tooltip",t=new a(this,i));if(typeof n=="string")t[n]()})}var t=g.fn.tooltip;g.fn.tooltip=e;g.fn.tooltip.Constructor=a;g.fn.tooltip.noConflict=function(){g.fn.tooltip=t;return this}}(jQuery);+function(a){"use strict";var s=function(e,t){this.init("popover",e,t)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");s.VERSION="3.2.0";s.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});s.prototype=a.extend({},a.fn.tooltip.Constructor.prototype);s.prototype.constructor=s;s.prototype.getDefaults=function(){return s.DEFAULTS};s.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();var i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t);e.find(".popover-content").empty()[this.options.html?typeof i=="string"?"html":"append":"text"](i);e.removeClass("fade top bottom left right in");if(!e.find(".popover-title").html())e.find(".popover-title").hide()};s.prototype.hasContent=function(){return this.getTitle()||this.getContent()};s.prototype.getContent=function(){var e=this.$element;var t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)};s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};s.prototype.tip=function(){if(!this.$tip)this.$tip=a(this.options.template);return this.$tip};function e(n){return this.each(function(){var e=a(this);var t=e.data("bs.popover");var i=typeof n=="object"&&n;if(!t&&n=="destroy")return;if(!t)e.data("bs.popover",t=new s(this,i));if(typeof n=="string")t[n]()})}var t=a.fn.popover;a.fn.popover=e;a.fn.popover.Constructor=s;a.fn.popover.noConflict=function(){a.fn.popover=t;return this}}(jQuery);+function(s){"use strict";function a(e,t){var i=s.proxy(this.process,this);this.$body=s("body");this.$scrollElement=s(e).is("body")?s(window):s(e);this.options=s.extend({},a.DEFAULTS,t);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",i);this.refresh();this.process()}a.VERSION="3.2.0";a.DEFAULTS={offset:10};a.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};a.prototype.refresh=function(){var n="offset";var a=0;if(!s.isWindow(this.$scrollElement[0])){n="position";a=this.$scrollElement.scrollTop()}this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();var e=this;this.$body.find(this.selector).map(function(){var e=s(this);var t=e.data("target")||e.attr("href");var i=/^#./.test(t)&&s(t);return i&&i.length&&i.is(":visible")&&[[i[n]().top+a,t]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){e.offsets.push(this[0]);e.targets.push(this[1])})};a.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset;var t=this.getScrollHeight();var i=this.options.offset+t-this.$scrollElement.height();var n=this.offsets;var a=this.targets;var s=this.activeTarget;var r;if(this.scrollHeight!=t){this.refresh()}if(e>=i){return s!=(r=a[a.length-1])&&this.activate(r)}if(s&&e<=n[0]){return s!=(r=a[0])&&this.activate(r)}for(r=n.length;r--;){s!=a[r]&&e>=n[r]&&(!n[r+1]||e<=n[r+1])&&this.activate(a[r])}};a.prototype.activate=function(e){this.activeTarget=e;s(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var t=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]';var i=s(t).parents("li").addClass("active");if(i.parent(".dropdown-menu").length){i=i.closest("li.dropdown").addClass("active")}i.trigger("activate.bs.scrollspy")};function t(n){return this.each(function(){var e=s(this);var t=e.data("bs.scrollspy");var i=typeof n=="object"&&n;if(!t)e.data("bs.scrollspy",t=new a(this,i));if(typeof n=="string")t[n]()})}var e=s.fn.scrollspy;s.fn.scrollspy=t;s.fn.scrollspy.Constructor=a;s.fn.scrollspy.noConflict=function(){s.fn.scrollspy=e;return this};s(window).on("load.bs.scrollspy.data-api",function(){s('[data-spy="scroll"]').each(function(){var e=s(this);t.call(e,e.data())})})}(jQuery);+function(r){"use strict";var n=function(e){this.element=r(e)};n.VERSION="3.2.0";n.prototype.show=function(){var e=this.element;var t=e.closest("ul:not(.dropdown-menu)");var i=e.data("target");if(!i){i=e.attr("href");i=i&&i.replace(/.*(?=#[^\s]*$)/,"")}if(e.parent("li").hasClass("active"))return;var n=t.find(".active:last a")[0];var a=r.Event("show.bs.tab",{relatedTarget:n});e.trigger(a);if(a.isDefaultPrevented())return;var s=r(i);this.activate(e.closest("li"),t);this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:n})})};n.prototype.activate=function(e,t,i){var n=t.find("> .active");var a=i&&r.support.transition&&n.hasClass("fade");function s(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");e.addClass("active");if(a){e[0].offsetWidth;e.addClass("in")}else{e.removeClass("fade")}if(e.parent(".dropdown-menu")){e.closest("li.dropdown").addClass("active")}i&&i()}a?n.one("bsTransitionEnd",s).emulateTransitionEnd(150):s();n.removeClass("in")};function t(i){return this.each(function(){var e=r(this);var t=e.data("bs.tab");if(!t)e.data("bs.tab",t=new n(this));if(typeof i=="string")t[i]()})}var e=r.fn.tab;r.fn.tab=t;r.fn.tab.Constructor=n;r.fn.tab.noConflict=function(){r.fn.tab=e;return this};r(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();t.call(r(this),"show")})}(jQuery);+function(d){"use strict";var u=function(e,t){this.options=d.extend({},u.DEFAULTS,t);this.$target=d(this.options.target).on("scroll.bs.affix.data-api",d.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",d.proxy(this.checkPositionWithEventLoop,this));this.$element=d(e);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()};u.VERSION="3.2.0";u.RESET="affix affix-top affix-bottom";u.DEFAULTS={offset:0,target:window};u.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(u.RESET).addClass("affix");var e=this.$target.scrollTop();var t=this.$element.offset();return this.pinnedOffset=t.top-e};u.prototype.checkPositionWithEventLoop=function(){setTimeout(d.proxy(this.checkPosition,this),1)};u.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var e=d(document).height();var t=this.$target.scrollTop();var i=this.$element.offset();var n=this.options.offset;var a=n.top;var s=n.bottom;if(typeof n!="object")s=a=n;if(typeof a=="function")a=n.top(this.$element);if(typeof s=="function")s=n.bottom(this.$element);var r=this.unpin!=null&&t+this.unpin<=i.top?false:s!=null&&i.top+this.$element.height()>=e-s?"bottom":a!=null&&t<=a?"top":false;if(this.affixed===r)return;if(this.unpin!=null)this.$element.css("top","");var o="affix"+(r?"-"+r:"");var l=d.Event(o+".bs.affix");this.$element.trigger(l);if(l.isDefaultPrevented())return;this.affixed=r;this.unpin=r=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(u.RESET).addClass(o).trigger(d.Event(o.replace("affix","affixed")));if(r=="bottom"){this.$element.offset({top:e-this.$element.height()-s})}};function i(n){return this.each(function(){var e=d(this);var t=e.data("bs.affix");var i=typeof n=="object"&&n;if(!t)e.data("bs.affix",t=new u(this,i));if(typeof n=="string")t[n]()})}var e=d.fn.affix;d.fn.affix=i;d.fn.affix.Constructor=u;d.fn.affix.noConflict=function(){d.fn.affix=e;return this};d(window).on("load",function(){d('[data-spy="affix"]').each(function(){var e=d(this);var t=e.data();t.offset=t.offset||{};if(t.offsetBottom)t.offset.bottom=t.offsetBottom;if(t.offsetTop)t.offset.top=t.offsetTop;i.call(e,t)})})}(jQuery);(function(s){this.giscloud=this.giscloud||{};this.giscloud.blja={};var o=function(e){if(e==null)return"null";if(e.$family)return e.$family();if(e.nodeName){if(e.nodeType==1)return"element";if(e.nodeType==3)return/\S/.test(e.nodeValue)?"textnode":"whitespace"}else if(typeof e.length=="number"){if(typeof e=="string")return"string";if("callee"in e)return"arguments";if("item"in e)return"collection"}return typeof e};giscloud.blja.Type=function(e,t){if(e){var i=e.toLowerCase();var n=function(e){return o(e)==i};giscloud.blja.Type["is"+e]=n;if(t!=null){t.prototype.$family=a(function(){return i})}}if(t==null)return null;t.__extend(this);t.$constructor=giscloud.blja.Type;t.prototype.$constructor=t;return t};var t=Object.prototype.toString;giscloud.blja.Type.isEnumerable=function(e){return e!=null&&typeof e.length=="number"&&t.call(e)!="[object Function]"};giscloud.blja.instanceOf=function(e,t){if(e==null)return false;var i=e.$constructor||e.constructor;while(i){if(i===t)return true;i=i.parent}return e instanceof t};var a=function(e){e.$hidden=true;return e};var e=function(e){e.$protected=true;return e};var i={};var r=function(e){var t=o(e.prototype);return i[t]||(i[t]=[])};var l=true;for(var n in{toString:1})l=null;if(l)l=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];var d=function(e,t){if(t&&t.$hidden)return this;var i=r(this);for(var n=0;n<i.length;n++){var a=i[n];if(o(a)=="type")d.call(a,e,t);else a.call(this,e,t)}var s=this.prototype[e];if(s==null||!s.$protected)this.prototype[e]=t;if(this[e]==null&&o(t)=="function")u.call(this,e,function(e){return t.apply(e,f.call(arguments,1))});return this};var u=function(e,t){if(t&&t.$hidden)return this;var i=this[e];if(i==null||!i.$protected)this[e]=t;return this};Function.prototype.__overloadSetter=function(a){var s=this;return function(e,t){if(e==null)return this;if(a||typeof e!="string"){for(var i in e)s.call(this,i,e[i]);if(l)for(var n=l.length;n--;){i=l[n];if(e.hasOwnProperty(i))s.call(this,i,e[i])}}else{s.call(this,e,t)}return this}};var c=function(s,r){return function(e,t,i){if(t==null)return this;if(r||typeof t!="string"){for(var n in t)s.call(this,n,t[n]);if(l)for(var a=l.length;a--;){n=l[a];if(t.hasOwnProperty(n))s.call(this,n,t[n])}}else{s.call(this,t,i)}return this}};Function.prototype.__extend=function(e,t){this[e]=t}.__overloadSetter();Function.prototype.__implement=function(e,t){this.prototype[e]=t}.__overloadSetter();giscloud.blja.Type.__implement({implement:d.__overloadSetter(),extend:u.__overloadSetter()});new giscloud.blja.Type("Type",giscloud.blja.Type);var h=function(e){switch(o(e)){case"array":return p(e);case"object":return b(e);default:return e}};var f=Array.prototype.slice;Array_from=function(e){if(e==null)return[];return giscloud.blja.Type.isEnumerable(e)&&typeof e!="string"?o(e)=="array"?e:f.call(e):[e]};var p=function(e){var t=e.length,i=new Array(t);while(t--)i[t]=h(this[t]);return i};var m=function(e,t,i){return e.indexOf(t,i)!=-1};var g=function(e,t){if(!m(e,t))e.push(t);return e};var _=function(e,t){e.push.apply(e,t);return e};var v=function(e,t,i){switch(o(i)){case"object":if(o(e[t])=="object")y(e[t],i);else e[t]=b(i);break;case"array":e[t]=p(i);break;default:e[t]=i}return e};var y=function(e,t,i){if(o(t)=="string")return v(e,t,i);for(var n=1,a=arguments.length;n<a;n++){var s=arguments[n];for(var r in s)v(e,r,s[r])}return e};var b=function(e){var t={};for(var i in e)t[i]=h(e[i]);return t};var w=function(e){for(var t=1,i=arguments.length;t<i;t++){var n=arguments[t]||{};for(var a in n)e[a]=n[a]}return e};giscloud.blja.Class=new giscloud.blja.Type("Class",function(e){if(giscloud.blja.instanceOf(e,Function))e={initialize:e};var t=function(){k(this);if(t.$prototyping)return this;this.$caller=null;var e=this.initialize?this.initialize.apply(this,arguments):this;this.$caller=this.caller=null;return e}.__extend(this).__implement(e);t.$constructor=giscloud.blja.Class;t.prototype.$constructor=t;t.prototype.parent=M;return t});var M=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var e=this.$caller.$name,t=this.$caller.$owner.parent,i=t?t.prototype[e]:null;if(!i)throw new Error('The method "'+e+'" has no parent.');return i.apply(this,arguments)};var k=function(e){for(var t in e){var i=e[t];switch(o(i)){case"object":var n=function(){};n.prototype=i;e[t]=k(new n);break;case"array":e[t]=p(i);break}}return e};var L=function(e,n,a){if(a.$origin)a=a.$origin;var s=function(){if(a.$protected&&this.$caller==null)throw new Error('The method "'+n+'" cannot be called.');var e=this.caller,t=this.$caller;this.caller=t;this.$caller=s;var i=a.apply(this,arguments);this.$caller=t;this.caller=e;return i}.__extend({$owner:e,$origin:a,$name:n});return s};var S=function(e,t,i){if(giscloud.blja.Class.Mutators.hasOwnProperty(e)){t=giscloud.blja.Class.Mutators[e].call(this,t);if(t==null)return this}if(o(t)=="function"){if(t.$hidden)return this;this.prototype[e]=i?t:L(this,e,t)}else{y(this.prototype,e,t)}return this};var T=function(e){e.$prototyping=true;var t=new e;delete e.$prototyping;return t};giscloud.blja.Class.__implement("__implement",S.__overloadSetter());giscloud.blja.Class.Mutators={Extends:function(e){this.parent=e;this.prototype=T(e)},Implements:function(e){var a=this;s.each(e,function(e,t){var i=new t;for(var n in i){S.call(a,n,i[n],true)}})}};giscloud.blja.Options=new giscloud.blja.Class({setOptions:function(e,t){if(t==undefined){if(this.options!=undefined)s.extend(this.options,e);else this.options=e}else{s.extend(e,t);this.options=e}return this}});var x=function(e){return e.replace(/^on([A-Z])/,function(e,t){return t.toLowerCase()})};giscloud.blja.Events=new giscloud.blja.Class({$events:{},addEvent:function(e,t,i){e=x(e);this.$events[e]=g(this.$events[e]||[],t);if(i)t.internal=true;return this},addEvents:function(e){for(var t in e)this.addEvent(t,e[t]);return this},fireEvent:function(e,i,t){e=x(e);var n=this.$events[e],a=this;if(!n)return this;i=Array_from(i);s.each(n,function(e,t){if(t){t.apply(a,i)}});return this},removeEvent:function(e,t){e=x(e);var i=this.$events[e];if(i&&!t.internal){var n=i.indexOf(t);if(n!=-1)delete i[n]}return this},removeEvents:function(e){var t;if(o(e)=="object"){for(t in e)this.removeEvent(t,e[t]);return this}if(e)e=x(e);for(t in this.$events){if(e&&e!=t)continue;var i=this.$events[t];for(var n=i.length;n--;)this.removeEvent(t,i[n])}return this}});Function.__implement({bind:function(e){var t=this,i=arguments.length>1?Array.prototype.slice.call(arguments,1):null;return function(){if(!i&&!arguments.length)return t.call(e);if(i&&arguments.length)return t.apply(e,i.concat(Array_from(arguments)));return t.apply(e,i||arguments)}},pass:function(e,t){var i=this;if(e!=null)e=Array_from(e);return function(){return i.apply(t,e||arguments)}},delay:function(e,t,i){return setTimeout(this.pass(i,t),e)},periodical:function(e,t,i){return setInterval(this.pass(i,t),e)}});window.RequestMootools={JSON:function(t){var e=this,i;this.init=function(){};this.get=function(e){i=s.getJSON(t.url,e).always(t.onComplete)};this.post=function(e){i=s.getJSON(t.url,e);if(t.onComplete)i.always(t.onComplete)};this.complete=function(e){if(i)i.always(e)};this.init();return this}};window.Picker={Date:function(e){var t=this;this.init=function(){};this.init();return this}};window.Cookie={read:function(e){return s.cookie(e)},write:function(e,t){return s.cookie(e,t)}};giscloud.blja.Element=function(e,t){var a=this;a.element=null;a.options={};this.init=function(){if(typeof e=="string"){a.element=s("<"+e+"/>");if(t){if(t.html)a.element.html(t.html);if(t.style)a.element.attr("style",t.style);if(t.id)a.element.attr("id",t.id);if(t.src)a.element.attr("src",t.src);if(t.title)a.element.attr("title",t.title);if(t.alt)a.element.attr("alt",t.alt);if(t["class"])a.element.addClass(t["class"]);if(t.styles){s.each(t.styles,function(e,t){a.element.css(e,t)})}}}else if(typeof e=="object"&&e.element){a.element=e.element}};this.getElement=function(e){var t=a.element.find(e);return t.length>0?new giscloud.blja.Element({element:t[0]}):null};this.getElements=function(e){var i=a.element.find(e);var n=[];s.each(i,function(e,t){n.push(new giscloud.blja.Element({element:i[0]}))});return n};this.getChildren=function(e){var i=a.element.children(e);var n=[];s.each(i,function(e,t){n.push(new giscloud.blja.Element({element:i[0]}))});return n};this.inject=function(e){if(giscloud.blja.instanceOf(e,giscloud.blja.Element)){a.element.appendTo(e.element)}else{a.element.appendTo(s(e))}};this.adopt=function(e){if(giscloud.blja.instanceOf(e,giscloud.blja.Element)){a.element.append(e.element)}else{a.element.append(s(e))}return this};this.data=function(e,t){if(t=="undefined")return a.element.data(e);else a.element.data(e,t)};this.appendChild=function(e){if(giscloud.blja.instanceOf(e,giscloud.blja.Element)){a.element.append(e.element)}else{a.element.append(s(e))}};this.setStyle=function(e,t){a.element.css(e,t)};this.getStyle=function(e){return a.element.css(e)};this.width=function(){return a.element.width()};this.height=function(){return a.element.height()};this.addClass=function(e){a.element.addClass(e)};this.removeClass=function(e){a.element.removeClass(e)};this.dispose=function(){a.element.remove();a.element=null};this.appendText=function(e){a.element.text(e)};this.hide=function(){a.element.hide()};this.show=function(){a.element.show()};this.empty=function(){a.element.empty()};this.addEvent=function(e,t){a.element.bind(e,t)};this.removeEvent=function(e,t){a.element.unbind(e,t)};this.red=function(e){var t=e;if(typeof e=="object"){(function(){this.set("html","")}).delay(e.time*1e3,this);t=e.msg}this.set("html",'<span class="red">'+t+"</span>")};this.green=function(e){var t=e;if(typeof e=="object"){(function(){this.set("html","")}).delay(e.time*1e3,this);t=e.msg}this.set("html",'<span class="green">'+t+"</span>")};this.set=function(e,t){if(e=="html")a.element.html(t)};this.e=function(e){return this.getElement(e)},this.overlay=function(e,t,i){var n=this.getElement(".element_overlay");var a=this.getElement(".elementloader");var s=this.getElement(".gc-overlay-text");if(s)s.dispose();if(!e){if(a)a.dispose();if(n)n.dispose();return}if(n)n.dispose();n=new Element("div");n.addClass("element_overlay");n.inject(this);var r=this.getComputedSize();var r={x:r.width,y:r.height};if(r.x<0)r.x=0;if(r.y<0)r.y=0;n.setStyles({width:r.x,height:r.y});if(t){if(a)a.dispose();var a=new Element("div");a.addClass("elementloader");a.setStyle("top",r.y/2-8);a.setStyle("left",r.x/2-8);a.inject(this)}else if(i){var o=new Element("div",{html:i});o.addClass("gc-overlay-text");o.inject(this);var l=o.getSize();o.setStyle("top",r.y/2-l.y/2-30);o.setStyle("left",r.x/2-l.x/2)}this.setStyle("position","relative")};this.showLoader=function(e,t){if(this.getElement(".loader"))return;var i=t&&t.style?t.style:"5px auto;";var n=new Element("div",{style:"width:100%; text-align:center;"});n.addClass("loader");n.set("html","<div style='"+i+';\'><div class="loading" style="margin:0 auto;width:16px;height:16px" alt=\''+(e?e:"Loading...")+"'></div></div>");this.appendChild(n,"top")},this.hideLoader=function(){var e=this.getElement(".loader");if(e)e.dispose()};this.visibility=function(e){if(e)this.setStyle("visibility","visible");else this.setStyle("visibility","hidden")};this.init();return this};s.fn.visibility=function(e){if(e)return s(this).css("visibility","visible");else return s(this).css("visibility","hidden")};s.fn.showLoader=function(){s(this).loader("show")};s.fn.hideLoader=function(){s(this).loader("hide")};s.objectSize=function(e){var t=0,i;for(i in e){if(e.hasOwnProperty(i))t++}return t};s.toInt=function(e){return parseInt(e.replace("px",""))};(function(c){c.fn.addBack=c.fn.addBack||c.fn.andSelf;c.fn.extend({actual:function(e,t){if(!this[e]){throw'$.actual => The jQuery method "'+e+'" you called does not exist'}var i={absolute:false,clone:false,includeMargin:false};var n=c.extend(i,t);var a=this.eq(0);var s,r;if(n.clone===true){s=function(){var e="position: absolute !important; top: -1000 !important; ";a=a.clone().attr("style",e).appendTo("body")};r=function(){a.remove()}}else{var o=[];var l="";var d;s=function(){d=a.parents().addBack().filter(":hidden");l+="visibility: hidden !important; display: block !important; ";if(n.absolute===true)l+="position: absolute !important; ";d.each(function(){var e=c(this);var t=e.attr("style");o.push(t);e.attr("style",t?t+";"+l:l)})};r=function(){d.each(function(e){var t=c(this);var i=o[e];if(i===undefined){t.removeAttr("style")}else{t.attr("style",i)}})}}s();var u=/(outer)/.test(e)?a[e](n.includeMargin):a[e]();r();return u}})})(s)})(window.jQuery);$.fn.serializeObject=function(){var e,t;e=this.serializeArray();t={};$.each(e,function(){var e;if(this.value!=null){e=this.value}else{e=""}if(t[this.name]!=null){if(!t[this.name].push){t[this.name]=[t[this.name]]}t[this.name].push(e)}else{t[this.name]=e}});return t};$.fn.selectRange=function(e,t){var i=document.getElementById($(this).attr("id"));if(!i)return;else if(i.setSelectionRange){i.focus();i.setSelectionRange(e,t)}else if(i.createTextRange){var n=i.createTextRange();n.collapse(true);n.moveEnd("character",t);n.moveStart("character",e);n.select()}else if(i.selectionStart){i.selectionStart=e;i.selectionEnd=t}};var omApplication=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],getOptions:function(){return{hideAuxMenu:true,auxMenuOpacity:0}},initialize:function(e,t){this.setOptions(this.getOptions(),t);this.path=null;this.liveSite=null;var i=$('<div id="notify-container"><div id="notify-default"><a class="ui-notify-close ui-notify-cross" href="#">x</a><h1>#{title}</h1><p>#{text}</p></div>');i.hide().appendTo($("body"));if($.fn.notify)i.notify({speed:300});this.queue={alert:function(e,t){if($.fn.notify)$("#notify-container").notify("create",{title:e,text:t})}}},showOverlay:function(e){formManager.showOverlay(e)},hideOverlay:function(e){formManager.hideOverlay(e)},loadModule:function(e,t,i){var n=new RequestMootools.HTML({url:t.url,update:$(e),onComplete:i,evalResponse:false,evalScripts:true}).get(t.data)},unloadModule:function(e){$(e).empty()},call:function(e,t){var i=new RequestMootools.JSON({url:e,onComplete:function(e){t(e)}}).send()},gaq:function(e,t,i,n){if(window._gaq)_gaq.push(["_trackEvent",e,t,i,n])},alert:function(e){alert(e)},showMessage:function(e){this.queue.alert("",e)},showConfirm:function(e){this.queue.alert("","<span class='roarmessage confirm' >"+e+"</span>")},showError:function(e){this.queue.alert("","<span class='roarmessage error'>Error: "+e+"</span>")},showLoader:function(e){if(e){giscloud.ui.alert.green().show(e)}else{giscloud.ui.alert.green().show(gclang.PleaseWait)}},hideLoader:function(e){giscloud.ui.alert.hide()},showLoaderWithOverlay:function(e){formManager.showOverlay();this.showLoader(e)},hide:function(e){var e=typeof e=="string"?$("#"+e):$(e);if(e.length)e.hide()},show:function(e){var e=typeof e=="string"?$("#"+e):$(e);if(e.length)e.show()},setSelectValue:function(e,t){e=typeof e=="string"?$("#"+e):$(e);if(!e||!e.length)return;e.find("option[value='"+t+"']").attr("selected","selected")},getFormValues:function(e){if(typeof e=="string"){e=$("#"+e+" input,#"+e+" select,#"+e+" textarea")}if(!e.length)return null;return e.serializeObject()},clearFormValues:function(e){if(typeof e=="string")e=$(e);if(!e)return null;var t={};e.getElements("input, select, textarea").each(function(e){if(!e.name||e.disabled||e.type=="radio")return;if(e.tagName.toLowerCase()=="input"||e.tagName.toLowerCase()=="textarea")e.value=""})},console:function(e){if(console&&console.log)console.log(e)},external:function(e,t,i,n){var a=false,s="GET";var r=function(e){if(i)i(e,n)};if(!a)om.showLoader();return $.ajax({url:e,type:s,cache:false,dataType:"json",data:t}).success(r).always(function(){if(!a)om.hideLoader()}).error(function(e,t,i){if(typeof r=="function")r();var n=$.parseJSON(e.responseText);if(n)om.showError(n.msg)})},kcall:function(e,t,i,n){var a=n&&n.method?n.method:"POST",s;e=fno.liveSite+e;if(t){s=t.__NOLOADER;delete t.__NOLOADER}if(e){var r=e.split("/");om.gaq(r[0],r[1],r[2])}if(!s)om.showLoader();return jQuery.ajax({url:e,type:a,cache:false,dataType:"json",data:t}).success(function(e){if(!s){om.hideLoader()}if(i){i(e,n)}}).error(function(e,t,i){if(this.callBack&&typeof this.callBack=="function")this.callBack(undefined,this.arg,e);if(!s)om.hideLoader();var n=$.parseJSON(e.responseText);if(n&&(!this.arg||!this.arg.dontShowErrorMsg))om.showError(n.msg)}.bind({callBack:i,arg:n}))},showRestResponse:function(e){if(e&&e.status!=204){var t=$.parseJSON(e.responseText);if(t)om.showError(t.msg)}},rest:function(e,t,i,n){try{var a=n&&n.noloader;var s=n&&n.method?n.method:"GET";var r=n&&n.sessid;var o=n&&n.dontShowErrorMsg;var l;if(!a)om.showLoader();om.gaq("rest",e);if(typeof t!=="object"||t===null){t={}}t._nocache=Math.round(Math.random()*(new Date).getTime());var t=s=="GET"?t:JSON.stringify(t);l=fno.liveSite+"rest/1/"+e;if(l.substr(l.length-5)!=".json"){l+=".json"}if(r){l+="?api_sessid="+r}if(!a)om.showLoader();return jQuery.ajax({url:l,type:s,cache:false,dataType:"json",contentType:"application/json",data:t}).success(function(e){if(!a){om.hideLoader()}if(i){i(e,n)}}).error(function(e,t,i){if(!a)om.hideLoader();if(o){return}var n=$.parseJSON(e.responseText);if(n&&n.nested&&n.nested.msg){om.showError(n.nested.msg)}else if(n){om.showError(n.msg)}})}catch(e){console.error(e)}}});(function(d){d.fn.overlay=function(e,t,i){var n=this.find(".element_overlay");var a=this.find(".elementloader");var s=this.find(".gc-overlay-text");if(s)s.remove();if(!e){if(a)a.remove();if(n)n.remove();return}if(n)n.remove();n=d("<div/>").addClass("element_overlay").appendTo(this);var r={width:this.outerWidth(true),height:this.outerHeight(true)};var r={x:r.width,y:r.height};n.css("width",r.x).css("height",r.y);if(t){if(a)a.remove();var a=d("<div/>").addClass("elementloader").css("top",r.y/2-8).css("left",r.x/2-8).appendTo(this)}if(i){var o=d("<div/>").html(i).addClass("gc-overlay-text").appendTo(this);var l={x:o.width(),y:o.height()};o.css("top",r.y/2-l.y/2-30).css("left",r.x/2-l.x/2)}this.css("position","relative")}})(jQuery);var ModalOverlay=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],getOptions:function(){return{element:null,onClickDispose:false,container:document.body,zIndex:null}},initialize:function(e){this.setOptions(this.getOptions(),e);this.global=false;if(this.options.element){this.element=this.options.element}else{this.element=$("overlay");this.global=true}if(this.global&&this.element)if(document.overlay)return document.overlay;var t="opacity:0.1; filter:alpha(opacity=10);";if(this.options.alpha)t="opacity:"+this.options.alpha+"; filter:alpha(opacity="+e.alpha*10+");";if(this.options.color)t+="background-color:"+this.options.color+";";if(this.options.zIndex)t+="z-index:"+this.options.zIndex+";";if(this.element.length===0)this.overlay=$("<div/>").attr("style",t);else this.overlay=$("<div/>").attr("id",this.element).attr("style",t);this.overlay.addClass("gc-overlay");if(this.global)document.overlay=this.overlay;this.overlay.css("height",$(document.body).prop("scrollHeight"));$(this.options.container).insertBefore(this.overlay,this.options.container.firstChild);if(this.options.onClickDispose){this.overlay.on("click",function(){this.close()})}$(window).on("resize",this.update.bind(this));return this.overlay},update:function(e){var t={},i={};if(this.overlay){t.x=$(window).width();t.y=$(window).height();i.y=$(document.body).prop("scrollHeight");this.overlay.css("height",t.y>i.y?t.y:i.y).css("width",t.x)}},close:function(){if(this.global)document.overlay=null;this.dispose()}});var omModule=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{url:"",method:"GET"},initialize:function(e){this.setOptions(e)},call:function(e,t,i,n){var a=this.options.url;var s=e.__NOLOADER;delete e.__NOLOADER;var r=function(e){if(!s)om.hideLoader();if(i)i(e,n);if(t)this.fireEvent(t,[e])};var o=r.bind(this);om.gaq(e.module,e.task);if(!s)om.showLoader(e.__LOADERMSG);$.ajax({dataType:"json",type:"POST",url:a,data:e,success:o})}});var omFormat=new giscloud.blja.Class({initialize:function(){},round:function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i},htmlencode:function(e){if(typeof e!="string")return e;return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")},bandwidth:function(e,t,i){if(e>=1099511627776){return this.round(e/1099511627776,i?t:0).toLocaleString()+" TB "+(i?"":this.bandwidth(e%1073741824))}else if(e>=1073741824){return this.round(e/1073741824,i?t:0).toLocaleString()+" GB "+(i?"":this.bandwidth(e%1073741824))}else if(e>=1048576){return this.round(e/1048576,i?t:0).toLocaleString()+" MB "+(i?"":this.bandwidth(e%1048576))}else if(e>=1024){return this.round(e/1024,i?t:0).toLocaleString()+" kB "+(i?"":this.bandwidth(e%1024))}return e+" bytes"},period:function(e,t){var i=parseInt(e/(24*3600));e-=i*24*3600;var n=parseInt(e/3600);e-=n*3600;var a=parseInt(e/60);e-=a*60;var s=parseInt(e);var r="";if(i>0&&(!t||t>=1)){r+=i+" d "}if(n>0&&(!t||t>=2))r+=n+" h ";if(a>0&&(!t||t>=3))r+=a+" min ";if(s>0&&(!t||t>=4||r==""))r+=s+" s ";return r},price:function(e,t,i){var n=1.1;var a=n.toLocaleString();var s=e.toLocaleString();var r=0;var o=s.length;for(r=o-1;r>=0;r--){if(s[r]==a[1])break}while(s.substr(r+1).length<2)s+="0";var l=s.substr(0,r+3);if(t){if(s.substr(r+1).length>6)s=s.substr(0,r+7);l+='<span style="color:#bbb">'+s.substr(r+3)+"</span>"}return i=="$"?"$"+l:l+" "+i}});var Format=new omFormat;function trim(e){if(!e||typeof e!=="string"){return e}return e.replace(/^\s*(.*?)\s*$/,"$1")}function get_sef(e){var t=new String(e);t=t.replace(/[^a-zA-Z 0-9]/gi,"");t=t.replace(/[ ]/gi,"-");t=t.replace(/[-]+/gi,"-");t=t.replace(/^(-)*/,"");t=t.replace(/(-)*$/gi,"");t=t.toLowerCase();return t}Array.prototype.unique=function(e){function t(e,t){return e-t}var i=e?t:function(){};this.sort(i);for(var n=1;n<this.length;n++){if(this[n-1]==this[n]){this.splice(n,1);n--}}return this};function array_unique(e){var t=[];var i=e.length;for(var n=0;n<i;n++){for(var a=n+1;a<i;a++){if(e[n]===e[a])a=++n}t.push(e[n])}return t}Array.prototype.contains=function(e,t){for(var i=0;i<this.length;i++){if(this[i]==e){if(t)this.splice(i,1);return true}}return false};Array.prototype.remove=function(e){for(var t=0;t<this.length;t++){if(this[t]==e){this.splice(t,1);t--}}};Array.prototype.erase=function(e){for(var t=this.length;t--;){if(this[t]===e)this.splice(t,1)}return this};Array.prototype.compare=function(e){if(this.length!=e.length)return false;for(var t=0;t<e.length;t++){if(this[t].compare){if(!this[t].compare(e[t]))return false}if(this[t]!==e[t])return false}return true};String.__implement({truncate:function(e,t,i){var n=function(e){return e!=undefined};var a=this.trim();if(a.length<1)return"";if(!n(e))var e=100;else e=parseInt(e);if(!n(t))var t=" ";else if(t==null)var t=false;if(!n(i))var i="...";if(a.length>e){var s=0;a=a.slice(0,e);if(t){if((s=a.lastIndexOf(t))!=-1){a=a.substring(0,s)}else{a=a.substring(0,e)}}a+=i}return a}});function urlencode(e){return escape(e).replace(/\+/g,"%2B").replace(/%20/g,"+").replace(/\*/g,"%2A").replace(/\//g,"%2F").replace(/@/g,"%40")}if(!window.console){window.console=console=new Object;console.log=console.info=console.warn=console.debug=console.error=function(e){}}var om=null;var $=giscloud.exposeJQuery();$(function(){om=new omApplication});var omFormManager=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],getOptions:function(){return{buttons:null,dragable:true}},initialize:function(e){this.setOptions(this.getOptions(),e);this.isflashvisible=true;this.openforms=[];this.formsWithOverylay=0;this.startzIndex=500500;$(document).bind("keydown","esc",this.onEscapeRelease.bind(this))},get:function(e){for(var t=0;t<this.openforms.length;t++){if(e==this.openforms[t].options.fid){return this.openforms[t]}}},onEscapeRelease:function(e){if(e.keyCode==27){var t=this.openforms[this.openforms.length-1];if(t&&t.state!="minimized"&&!t.options.noescape)this.close(t,{esc:true})}},showOverlay:function(e){if(this.formsWithOverylay==0){this.hideFlashContent();this.mol=document.modalOverlay=new ModalOverlay(e);if(e&&e.closeOverlayClick){var t=this;this.mol.click(function(){t.close(e.form)})}}this.formsWithOverylay++},hideOverlay:function(e){if(this.formsWithOverylay==1&&this.mol||e){this.formsWithOverylay=0;if(this.mol){this.mol.remove();delete this.mol}this.showFlashContent()}else if(this.formsWithOverylay>0){this.formsWithOverylay--}},hasOverlay:function(){return this.formsWithOverylay>0},showFlashContent:function(){if($("flashcontent")&&this.isflashvisible)$("flashcontent").visibility(true)},hideFlashContent:function(){},hideAll:function(){for(var e=0;e<this.openforms.length;e++){var t=this.openforms[e];if(t.state!="minimized")t.container.hide()}},alert:function(e,t,i){var n={footer:true,title:e,content:t};$.extend(n,i);return this.open(n)},show:function(e){var t=this.get(e);if(!t)return;if(!t.options.donthideall){this.hideAll()}t.show()},hide:function(e){this.close(e)},open:function(e,t){if(!e)return;if(!e.donthideall){this.hideAll()}if(e.bootstrap==undefined||e.bootstrap==null)e.bootstrap=true;var i={};if(e.fid)i.fid=e.fid;if(!i.fid&&e.url)i.url=e.url;giscloud.log.push("form_open",i);if(!e.fid){e.fid="fid_"+this.openforms.length}else{if(e.oneInstance)this.close(e.fid)}if(!t){if(e.wizard)t=new omWizardForm(e);else t=new omForm(e)}if(!e.savePosition&&t.container.width()>0){t.container.css("left",$(window).width()/2-t.container.width()/2)}if(e.height==="auto"&&t.container.height()>0){t.container.css("top",$(window).height()/2-t.container.height()/2)}if(e.overlay&&!e.bootstrap){this.showOverlay({closeOverlayClick:e.closeOverlayClick,form:t})}if((e.dragable==null||e.dragable==undefined)&&(e.draggable==null||e.draggable==undefined)){e.draggable=true;e.dragable=true}if(e.dragable)e.draggable=true;if(!e.donotregister){this.openforms.push(t)}if(e.bootstrap){}else{t.container.css("zIndex",this.startzIndex+this.openforms.length);t.container.data("form",t)}return t},fullpage:function(e){var t=jQuery,n=t("<div/>").addClass("gc-full-page-content"),i=t("<div/>").addClass("gc-full-page").append(n).appendTo(t("body")),a=new t.Deferred,s,r;e=e||{};s=e.id||giscloud.ui.id("full_page_");this.closeFullpage(s);i.attr("id",s);if(e.data){i.data("gc-data",e.data)}if(e.stayOnTop)i.addClass("gc-stay-on-top");if(e.opacity){i.css("opacity",e.opacity)}if(e["class"])i.addClass(e["class"]);if(e.closeButton){r=t("<button/>",{class:"gc-full-page-close-btn",title:gclang.Close}).html("&times;").click(function(){formManager.closeFullpage(s)}).appendTo(i)}n.loader("show");if(e.url){n.load(e.url,null,function(e,t,i){n.loader("hide");if(t==="success"){a.resolveWith(n,[e,t,i])}else{a.rejectWith(n,[e,t,i])}});return a.promise()}if(e.view){if(!giscloud||!giscloud.app||!giscloud.app.loadView){a.reject();throw"fullpage: no view handling method available."}return n.gcLoadView(e.view,e.data,e.gclang).always(function(){n.loader("hide")})}a.always(function(){n.loader("hide")});if(e.html){n.html(e.html)}return a.resolveWith(n).promise()},isFullpageOpen:function(e){return jQuery("#"+e).length>0},closeFullpage:function(e,t){var i=e?"#"+e:false,n=i?jQuery(i):jQuery(".gc-full-page"),a=n&&n.find(".gc-full-page-content");if(!i&&n.hasClass("gc-stay-on-top")){return}if(n&&n.length){if(a&&a.length){a.trigger("closing.fullpage",t)}n.remove()}},style:function(e,t){var i;switch(t){case"point":i="styleformpoint";break;case"line":i="styleformline";break;case"polygon":case"h3":i="styleformpolygon";break;case"raster":i="styleformraster";break;default:i="styleformpoint";break}styleform=this.open({fid:i,bootstrap:true,overlay:false,dragable:true,title:__("Style"),width:480,height:"auto",url:fno.liveSite+"layer/"+i,buttons:[{html:gclang.ok,class:"bluebutton",click:"gcstyleform.save();"},{html:gclang.back,click:"gcstyleform.close();"}]});styleform.fdata=e.data;styledata=e.data;icondiv=e.element;if(e.onClose)styleform.addEvent("close",e.onClose);giscloud.log.push("opened appearance window",{username:user.username,type:t,url:window.location.href});return styleform},reportForm:function(e){var t=e.type=="basic"?"basicform":"form";var i={fid:"reportform",overlay:true,shadow:true,title:gclang.Report,width:570,height:"auto",url:fno.liveSite+"reports/"+t,buttons:[{html:gclang.Close,click:"formManager.close('reportform');"}]};$.extend(i,e);this.formreport=formManager.open(i);return this.formreport},fileUpload:function(e){var t=e&&e.uploadDir?e.uploadDir:"/";giscloud.ui.upload.initialize().show({uploadDir:t});return giscloud.ui.upload.form},fileRemoteUpload:function(e){var t=formManager.open({overlay:false,bootstrap:true,draggable:true,fid:"remoteuploadform",width:600,height:"auto",title:"Web to Cloud Upload",url:fno.liveSite+"filemanager/form_remoteupload",buttons:[{click:"formManager.close('remoteuploadform');",html:gclang.close}]});t.fdata={currentDir:"",uploadDir:e.uploadDir};return t},wmsInfo:function(e){var t=[];if(e.select)t.push({html:gclang.Select,class:"bluebutton",click:"gcapp.wmsinfo.select()"});t.push({html:gclang.Close,click:"gcapp.wmsinfoform.close()"});gcapp.wmsinfoform=formManager.open({fid:"wmsinfoform",overlay:false,bootstrap:true,dragable:true,title:__("WMS Info Form"),fdata:e,width:600,height:"auto",url:fno.liveSite+"datasource/form_wms_info",buttons:t});return gcapp.wmsinfoform},listDir:function(e){var t=e,i={upload:true,selectmode:false,singlemode:true,selectdirectory:false,multipleSelection:false,extensions:gcFileExt.AAll};if(!$.isPlainObject(t)){$.extend(i,{dir:t})}else{$.extend(i,t)}return this.fileBrowser(i)},isSourceBrowserOpen:function(){for(var e=0;e<this.openforms.length;e++){if(this.openforms[e].options.sourceBrowser){return true}}return false},fileBrowser:function(e){var t=[{click:"formManager.close('filemanager');",html:gclang.close}];if(!e)e={};var i={};i.currentDir="";i.selectmode=e.selectmode;i.selectdirectory=e.selectdirectory;i.createmode=e.createmode;i.multipleSelection=false;if(e.upload)i.upload=e.upload;if(e.open_upload_form)i.open_upload_form=e.open_upload_form;var n=e.title?e.title:gclang.js.source_browser;if(e.extensions)i.extensions=e.extensions;if(e.postgis)i.postgis=e.postgis;if(e.postgisHideLocal)i.postgisHideLocal=e.postgisHideLocal;if(e.hideExternalConnections)i.hideExternalConnections=e.hideExternalConnections;if(e.hideNewTable)i.hidenewtable=e.hideNewTable;if(e.non_spatial)i.non_spatial=e.non_spatial;if(e.nofiles)i.nofiles=e.nofiles;if(e.wms)i.wms=e.wms;if(e.tms)i.tms=e.tms;if(e.mobile)i.mobile=e.mobile;if(e.arcmap)i.arcmap=e.arcmap;if(e.mapbox)i.mapbox=e.mapbox;if(e.datasources)i.datasources=e.datasources;if(e.tmsInclude)i.tmsInclude=e.tmsInclude;if(e.gcmap)i.gcmap=e.gcmap;if(e.skipform)i.skipform=e.skipform;if(e.foldersOnly)i.foldersonly=e.foldersOnly;i.toolbar=e.toolbar!=undefined?e.toolbar:true;i.singlemode=e.singlemode!=undefined?e.singlemode:false;if(e.multipleSelection&&!i.createmode)i.multipleSelection=e.multipleSelection;if(e.dir)i.dir=e.dir;if(e.absdir)i.absdir=e.absdir;if(e.no_file_browsing)i.no_file_browsing=e.no_file_browsing;i.randid=Math.round(Math.random()*1e6);if(e.selectmode){t=[{id:"gc-src-browser-select"+i.randid,click:"window.omnifilemanager"+i.randid+".onSelectFiles();",class:"bluebutton",html:gclang.select},{id:"gc-src-browser-cancel"+i.randid,click:"formManager.close('filemanager"+i.randid+"');",html:gclang.cancel}]}if(e.showimages)i.showimages=e.showimages;var a=false;var s=this.open({sourceBrowser:true,overlay:a,bootstrap:true,dragable:true,fid:"filemanager"+i.randid,width:"auto",height:"auto",phoneFullSc:true,title:n,url:fno.liveSite+"filemanager/form",data:i,buttons:t});s.container.addClass("filemanager");if(e.onTop){s.container.addClass("onTop")}return s},showWindow:function(e){if(!e)e={};var t=e.fid?e.fid:"__window"+Math.round(Math.random()*1e6);var i=e.buttons?e.buttons:[{click:"formManager.close('"+t+"');",html:gclang.close}];var n=this.open({bootstrap:e.bootstrap,overlay:e.overlay,dragable:true,fid:t,width:e.width||500,height:e.height||310,title:e.title||"",buttons:i});if(e.text){if(e.bootstrap){n.container.find(".modal-body").html("<p>"+e.text+"</p>")}else{n.form.html(e.text)}}return n},close:function(e,t,i){if(!e)return;var n;if(typeof e=="string"){n=null;for(var a=0;a<this.openforms.length;a++){if(e==this.openforms[a].options.fid){n=this.openforms[a];break}}}else n=e;if(!n){var s=this.openforms.length+" \n";for(var r=0;r<this.openforms.length;r++)s+=r+" "+this.openforms[r].options.fid;return}if(n.options.overlay)this.hideOverlay();giscloud.log.push("form_close",{fid:n.options.fid});n.fireEvent("close",t);if(!n.options.allowHide){if(n.options.bootstrap){n.container.remove();$("body").removeClass("modal-open");if(n.options.overlay||$(".modal-backdrop").length==2){$(".modal-backdrop").remove()}}else{n.container.remove()}this.openforms=$.grep(this.openforms,function(e,t){return e!=n});delete n}else{n.hide()}this.showNextVisible()},showNextVisible:function(){var e=0;while(e<this.openforms.length){e++;var t=this.openforms[this.openforms.length-e];if(t.state!="minimized"){t.container.show();t.showLoader(false);return}}},isOpen:function(e){var t=0;while(t<this.openforms.length){t++;var i=this.openforms[this.openforms.length-t];if(i.options.fid==e)return true}return false},closeAll:function(e){if(!this.openforms)return;var t;$.each(this.openforms,function(e,t){if(!t.options.stayopen)t.close()})},bringToFront:function(e){if(!e.options.donotregister){this.openforms.erase(e);this.openforms.push(e)}for(var t=0;t<this.openforms.length;t++){this.openforms[t].container.css("zIndex",this.startzIndex+t)}},sendToBack:function(e){if(!e.options.donotregister){this.openforms.erase(e);this.openforms.unshift(e)}for(var t=0;t<this.openforms.length;t++){this.openforms[t].container.css("zIndex",this.startzIndex+t)}}});var formManager=new omFormManager;var omForm=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{id:"form_container",onClickDispose:false,container:document.body,width:500,height:400,buttons:null,dragable:false,minimize:false,data:{nch:_nch}},fdata:{},initialize:function(e){this.setOptions(this.options,e);this.options.dragable=true;var t=this;if(e.bootstrap){this.container=giscloud.ui.modal(e);this.container.on("shown.bs.modal",function(){t.fireEvent("contentcomplete",{target:t})});this.container.on("hide.bs.modal",function(){formManager.close(t,t.fdata,true)});return this}this.loader=null;this.container=$("<div/>");this.options.rounded=true;this.container2=$("<div>").attr("style","bacground-color:gray");this.container2.addClass("formcont gc-app");this.container2.appendTo(this.container);this.container.addClass(this.options.id);if(this.options.rounded)this.container2.addClass("formrounded");this.container.owner=this;if(this.options.shadow)this.container.addClass("formshadow");if(this.options.rounded)this.container.addClass("formrounded");this.state="maximized";this.header=$("<div/>").attr("id","form_header").html("<div class='form_header_title' >"+this.options.title+"</div>");this.header.addClass("gc-theme-color");this.header.owner=this;this.header.css("width",this.options.width-12);this.header.appendTo(this.container2);if(this.options.rounded)this.header.addClass("formrounded_up");this.form=$("<div/>").attr("id","formmain");this.form.addClass("formcontent");this.form.appendTo(this.container2);if(this.options.rounded&&!this.options.buttons)this.form.addClass("formrounded_down");this.createFooter(e.footerForce);if(this.options.dragable){this.header.css("cursor","move")}this.header.mousedown(this.bringToFront.bind(this));if(this.options.buttons){for(var i=0;i<this.options.buttons.length;i++){var n=this.options.buttons[i];if(!n.onclick)n.onclick="return false;";this.addButton(n)}}if(!this.options.noclosebutton){this.closebtcont=$("<div>").attr("id","form_closebt");this.closebtcont.click(this.close.bind(this));this.closebtcont.appendTo(this.container2)}if(this.options.minimize){this.minusbtcont=$("<div>").attr("id","form_minimizebt").addClass("gc-icon-minimize");this.minusbtcont.click(this.toggleMinimizeToHeader.bind(this));this.minusbtcont.appendTo(this.container2)}this.resize(this.options.width,this.options.height);this.container.appendTo(document.body);if(this.options.url)this.load(this.options.url);if(this.options.html){this.form.html(this.options.html)}document.modalForm=this;if(e.onClose){this.addEvent("close",e.onClose)}},scrollTo:function(e,t){if(!this.scrollFx)this.scrollFx=new Fx.Scroll(this.form,{wheelStops:true});if(IsNumeric(e)&&IsNumeric(t))this.scrollFx.set(e,t);if(e=="top")this.scrollFx.toTop();else if(e=="bottom")this.scrollFx.toBottom()},setTitle:function(e){if(this.options.bootstrap)this.container.find(".modal-header h3").html(this.options.title=e);else this.header.html(this.options.title=e)},addButton:function(aobj,where){if(!this.footer)return;aobj.href="javascript:;";this.save=$("<a/>");var that=this;$.each(aobj,function(e,t){if(e=="html")that.save.html(t);else that.save.attr(e,t)});if(aobj.click){function abind(ao){if(typeof ao.click==="string"){eval(ao.click)}else if(typeof ao.click==="function"){ao.click()}}this.save.click(abind.bind(this,aobj))}this.save.addClass("button");if(where=="top")this.save.prependTo(this.footer);else this.save.appendTo(this.footer)},createFooter:function(e){this.footer=null;if(!this.options.buttons&&!e)return;this.footer=$("<div/>");this.footer.addClass("form_footer");this.footer.appendTo(this.container2)},show:function(){this.container.show();this.state="maximized";return this},hide:function(){this.container.hide();this.state="minimized";return this},enable:function(){if(this.options.bootstrap){this.container.find(".modal-body").overlay(0);this.container.find(".modal-footer").show();return}if(this.overlay){this.overlay.hide();this.showLoader(false,this.overlay)}},disable:function(e){if(this.options.bootstrap){this.container.find(".modal-body").overlay(1,e);this.container.find(".modal-footer").hide()}else{if(!this.overlay){this.overlay=$("<div/>");this.overlay.addClass("overlay");this.overlay.css("width",this.options.width).css("height",this.options.height-33).css("top",33);this.overlay.appendTo(this.container)}else{this.overlay.show()}if(e)this.showLoader(true,this.overlay)}},showLoader:function(e,t){t=t?t:this.container;if(!t||!t.getElement)return;var i=t.getElement(".form_loader");if(e){if(!i){i=$("<div/>");i.addClass("form_loader");i.appendTo(t)}var n=t.getSize();i.css("left",n.x/2-8);i.css("top",n.y/2-40)}else{if(i)i.remove();i=null}},resize:function(e,t,i){this.options.width=e;this.options.height=t;this.container.css("width",e).css("height",t);this.header.css("width",e-12);this.update(e,t);if(i&&i.url)this.resizeComplete(i.url)},update:function(e,t){var i,n;if(e&&t){e=e;t=t}else{e=this.container.width();t=this.container.height()}var a=this.state=="minimized"?7:15;var s=2;this.form.css("width",e-a*2-s);this.header.css("width",e-12);var r=(this.header&&(this.state=="maximized"||this.state=="minimizedtoheader")?12:0)+(this.footer&&(this.state=="maximized"||this.state=="minimizedtoheader")?55:24);this.form.css("height",t-a*2-r);if(this.footer)this.footer.css("width",e-3);this.move()},move:function(){var e=$(window).height(),t,i;if(this.state=="minimizedtoheader"){return}else if(this.state=="minimized"){t=10;i=e-this.options.height-20}else{t=$(window).width()/2-$.toInt(this.container.css("width"))/2;i=e/2-$.toInt(this.container.css("height"))/2-100;if(i<10)i=10}this.container.css("left",t);this.container.css("top",i)},load:function(e,t){if(!e)return;if(t&&t.width&&t.height){this.form.hide();if(this.footer)this.footer.hide();this.resize(t.width,t.height,e);return}this.showLoader(true);if(this.footer)this.footer.hide();this.form.hide();if($.browser.msie==true){this.options.data["dummyparameter"]=Date.now()}this.form.load(e,this.options.data,this.onLoadComplete.bind(this))},refresh:function(e){this.load(this.options.url)},onLoadComplete:function(e,t,i,n){this.showLoader(false);this.form.show();if(this.footer)this.footer.show();this.fireEvent("contentcomplete",{target:this})},resizeComplete:function(e){if(e)this.load(e,null)},minimize:function(){this.state="minimized";this.header.hide();if(this.footer)this.footer.hide();this.closebtcont.hide();var e=this.form.getElement(".omf_form_maximize");var t=this.form.getElement(".omf_form_minimize");if(e)e.hide();if(t)t.show();this.safeWidth=this.options.width;this.safeHeight=this.options.height;this.form.css("top",0);this.form.css("padding","7px");this.resize(170,30);this.move();if(this.options.overlay)formManager.hideOverlay();formManager.showNextVisible()},maximize:function(){if(this.state=="minimized"){formManager.hideAll();this.container.show();this.state="maximized";this.header.show();if(this.footer)this.footer.show();this.closebtcont.show();var e=this.form.getElement(".omf_form_maximize");var t=this.form.getElement(".omf_form_minimize");if(e)e.show();if(t)t.hide();this.form.css("padding","15px");this.resize(this.safeWidth,this.safeHeight)}else if(this.state=="minimizedtoheader"){if(this.options.bootstrap){this.container.removeClass("gc-minimized")}else{this.form.show();if(this.footer)this.footer.show();this.resize(this.safeWidth,this.safeHeight);this.state="maximized"}}if(this.options.overlay){formManager.showOverlay({closeOverlayClick:this.options.closeOverlayClick,form:this})}this.fireEvent("maximize",{target:this})},toggleMinimizeToHeader:function(e){if(this.state=="minimizedtoheader"){this.maximize()}else{this.minimizeToHeader()}},minimizeToHeader:function(){this.state="minimizedtoheader";if(this.options.bootstrap){this.container.addClass("gc-minimized")}else{this.safeWidth=this.options.width;this.safeHeight=this.options.height;this.form.hide();if(this.footer)this.footer.hide();var e=37;this.container.css("height",e);if(this.options.overlay)formManager.hideOverlay()}this.fireEvent("minimize",{target:this,headeronly:true})},close:function(e){formManager.close(this,this.fdata,e)},bringToFront:function(){formManager.bringToFront(this)},sendToBack:function(){formManager.sendToBack(this)}});var omWizardForm=new giscloud.blja.Class({Extends:omForm,initialize:function(e){e.footerForce=true;this.parent(e);this.footer.css("margin-left","6px");this.options.currentStep=1;this.leftbtcont=$("<div/>");this.leftbt=$("<img/>").attr("src",fno.liveSite+"assets/omf/images/left.gif").attr("id","form_leftbt");this.leftbtcont.click(this.gotoPrevious.bind(this));this.leftbt.appendTo(this.leftbtcont);this.leftbtcont.appendTo(this.footer);this.leftbt.css("visibility","hidden");this.rightbtcont=$("<div/>");this.rightbt=$("<img/>").attr("src",fno.liveSite+"assets/omf/images/right.gif").attr("id","form_rightbt").attr("title","Next step");this.rightbtcont.click(this.gotoNext.bind(this));this.rightbt.appendTo(this.rightbtcont);this.rightbtcont.appendTo(this.footer);if(this.h1)this.h1.css("margin-left",40);this.status=$("<div/>").attr("id","form_status");this.status.appendTo(this.footer);formManager.open(this.options,this)},updateButtons:function(){var e=this.options.currentStep;if(e>1)this.leftbt.css("visibility","visible");else this.leftbt.css("visibility","hidden");if(e>=this.options.steps)this.rightbt.set("title","Finish");else this.rightbt.set("title","Next step");this.status.set("text","Step "+e+" of "+this.options.steps)},gotoStep:function(step){if(eval(this.options.stepFunction)(step)){this.options.currentStep=step;this.updateButtons()}},onLoadComplete:function(e,t,i,n){this.showLoader(false);this.footer.show();this.form.show()},gotoNext:function(step){if(this.options.currentStep<=this.options.steps){if(eval(this.options.stepFunction)(this.options.currentStep+1)){this.options.currentStep++;this.updateButtons()}}},gotoPrevious:function(step){if(this.options.currentStep>0){if(eval(this.options.stepFunction)(this.options.currentStep-1)){this.options.currentStep--;this.updateButtons()}}}});function dismissIEWarning(){$.cookie("gc_old_ie_warning_dismissed","yes")}function showOldIEWarning(){if(jQuery.browser.msie&&jQuery.inArray(jQuery.browser.version,["7.0","8.0","9.0"])>-1){if($.cookie("gc_old_ie_warning_dismissed")!="yes"){jQuery("<div/>").addClass("top-message alert alert-danger").html("<button type='button' class='close' onclick='dismissIEWarning();' data-dismiss='alert'>&times;</button> You are using an old version of Internet Explorer and some features may not work correctly. Using an outdated browser makes your computer unsafe and slow. Upgrade to a <a href='http://www.google.com/chrome' target='_blank' >modern browser.").prependTo("body")}}}var omniCombo=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{toggle:false,hover:false,side:"left",shadow:false,changetitle:true,iframe:false,disableMenu:false,usejQueryPositioning:false,onLoseFocusHide:false},initialize:function(e,t){this.setOptions(t);this.container=typeof e=="string"?$("#"+e):e;if(this.options.usejQueryPositioning){if(this.container.attr("id")){this.container_id=this.container.attr("id")}else{this.container.attr("id","omnicombo_id"+Math.round(Math.random()*1e6));this.container_id=this.container.attr("id")}}if(!this.container.length)return;if(this.container.hasClass("toggle")){this.options.toggle=true}this.box=this.container.find("div.combolabel");this.arrow=this.box.find(".arrow");this.popup=this.container.find("div.popup");this.popup.css("top",this.box.height()+6);if(this.options.side=="right"){this.popup.css("left",-(this.popup.width()-this.box.width())-17);this.popup.addClass("right")}this.popup.hide();this.isopen=false;this.globalevent=false;this.lastValue=null;var i=this.container.find(".combolabel");if(this.options.hover){this.container.mouseenter(this.open.bind(this));this.container.mouseleave(this.globalCheck.bind(this))}else{this.container.click(this.onclick.bind(this));this.container.dblclick(this.ondblclick.bind(this))}this.box.mouseenter(this.onLabelEnter.bind(this));this.box.mouseleave(this.onLabelLeave.bind(this));this.popup.mouseenter(this.onPopupEnter.bind(this));this.popup.mouseleave(this.onPopupLeave.bind(this));var n=this;if(!this.options.disableMenu){$.each(this.container.find("div.popup ul li[class!=separator]"),function(t,e){e=$(e);e.mouseenter(n.onMenuEnter.bind(n));e.mouseleave(n.onMenuLeave.bind(n));e.click(function(e){n.onMenuClick(e,t)})})}if(this.options.onLoseFocusHide){this.popup.attr("tabindex","0");this.popup.on("focusout",this.close.bind(this));this.popup.css({outline:"none"})}},onLabelEnter:function(e){var t=$(e.target);t=$(t).hasClass("combolabel")?t:$(t).parent();$(t).addClass("hover")},onLabelLeave:function(e){var t=$(e.target);t=$(t).hasClass("combolabel")?t:$(t).parent();$(t).removeClass("hover");if(this.options.hover)this.globalCheck.delay(50,this)},getParent:function(e,t){e=$(e);while(e.length&&!e.hasClass(t)){e=e.parent()}return e},onPopupEnter:function(e){var t=this.getParent(e.target,"popup");t.addClass("hover")},onPopupLeave:function(e){var t=$(e.target);popup=t.hasClass("popup")?t:t.parents(".popup");if($.inArray(["form","input","textarea"],t.prop("nodeName"))>-1)return;this.popup.removeClass("hover");if(this.options.hover)this.globalCheck.delay(50,this)},onMenuEnter:function(e){var t=$(e.target);t=t.prop("nodeName")!="li"?t.parents("li"):t},onMenuLeave:function(e){var t=$(e.target);t=t.prop("nodeName")!="li"?t.parents("li"):t},onMenuClick:function(e,t){var i=$(e.target);i=i.prop("nodeName")!="li"?i.parent():i;this.lastValue=this.getValue();if(this.options.changetitle)this.setTitle(i.html());this.close();this.fireEvent("change",{target:this,element:i,value:this.getValue(),index:t});e.stopPropagation()},getValue:function(){var e=this.box.find("span").text();if(e){return e.toLowerCase()}},setValue:function(e){if(!e)return;var t=this.container.find("div.popup ul li[class!=separator]");for(var i=0;i<t.length;i++){var n=$(t[i]).find("a").html();if(n.toLowerCase()==e){this.setTitle(n)}}},setSelectedIndex:function(e){var t=this.container.find("div.popup ul li[class!=separator]");if(!t.length||e<0||e>=t.length)return;var i=t[e];this.box.find("span").html(i.get("html"))},globalCheck:function(e){if(!this.popup.hasClass("hover")&&!this.box.hasClass("hover")){this.close()}},setGlobalCheck:function(){(function(){if(!this.globalevent){this.destroyBind=this.globalCheck.bind(this);$(document).bind("click",this.destroyBind);this.globalevent=true}}).delay(100,this)},removeGlobalCheck:function(){this.globalevent=false;if(this.destroyBind)$(document).unbind("click",this.destroyBind)},onclick:function(e){var t=$(e.target);if(t.onclick)return;this.toggle(false)},ondblclick:function(){this.toggle(true)},open:function(){this.popup.show().focus();this.box.addClass("expanded");if(this.options.usejQueryPositioning){var e=jQuery("#"+this.container_id);var t=e.find(".combolabel");var i={my:"left top",at:"left bottom",collision:"none",offset:"0 -2",within:e};e.find("div.popup").position(jQuery.extend({of:e},i))}if(this.options.shadow){this.box.addClass("shadow");this.popup.addClass("shadow")}if(!this.options.toggle){this.setGlobalCheck()}if(!this.isopen)this.fireEvent("open",{target:this});this.isopen=true},close:function(){this.popup.hide();this.box.removeClass("expanded");if(this.options.shadow){this.box.removeClass("shadow");this.popup.removeClass("shadow")}this.removeGlobalCheck();this.isopen=false},toggle:function(e){if(e&&!window.ie){return}if(this.isopen){this.close()}else{this.open()}},setTitle:function(e){var t=this.box.find("span");if(e.length>0)t.html(e);else t.html("&nbsp;")}});$=$||window.jQuery||giscloud.exposeJQuery();(function(){this.omniGrid=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{width:400,height:200,bootstrap:false,defaultColumnWidth:100,autoFitLastColumn:true,showNoData:false,alternaterows:true,showHeader:true,sortHeader:false,resizeColumns:true,noredraw:false,smartRefresh:false,selectable:true,serverSort:true,sortOn:null,sortBy:"ASC",filterHide:true,filterHideCls:"hide",filterSelectedCls:"filter",filterInput:false,filterServer:false,query:null,query_on:null,search:false,bottomHtml:"",multipleSelection:true,editable:false,editondblclick:false,editToolbarContainer:null,crudRowButtons:null,outerBorder:true,accordion:false,accordionRenderer:null,autoSectionToggle:true,showtoggleicon:true,openAccordionOnDblClick:false,url:null,method:"get",rest:false,columnHeaderDropdown:false,pagination:false,smartPagination:false,page:1,perPageOptions:[10,20,50,100,200],perPage:10,disableLoader:false,dataProvider:null,datatables:false},initialize:function(e,t){if($("#"+e).length)this.domReady(e,t);else{var i=this;$(function(){i.domReady(e,t)})}},domReady:function(e,t){this.setOptions(this.options,t);this.container=$("#"+e);if(!this.container.length)return;this.container.empty();if(this.container.hasClass("table-mode"))this.options.height="auto";if(this.options.height=="auto")this.container.addClass("table-mode");if(this.options.outerBorder)this.options.outerBorder=2;this.draw();this.reset();this.loadData()},initRows:function(e){this.refreshDelayID=null;this.dragging=false;if(!e)this.selected=new Array;if(this.options.accordion)this.elements=this.ulBody.find("li:nth-child(2n+1)");else this.elements=this.ulBody.find("li");this.filtered=false;this.lastsection=null;if(this.options.alternaterows)this.altRow();$.each(this.elements,function(e,t){t=$(t);if(t.doubletap)t.doubletap(this.onRowDblClick.bind(this));t.click(this.onRowClick.bind(this));t.dblclick(this.onRowDblClick.bind(this));t.mouseover(this.onRowMouseOver.bind(this));t.mouseout(this.onRowMouseOut.bind(this))}.bind(this))},reset:function(){var e=this.options.noredraw;if(this.options.noredraw){this.refreshData();this.options.noredraw=false}else this.renderData();this.initRows(e);$.each(this.container.find(".th"),function(a,s){s=$(s);var r=s.data("dataType");if(r){s.getdate=function(e){function t(e){e=+e;if(e<50){e+=2e3}else if(e<100){e+=1900}return e}var i;if(e.length>12){strtime=e.substring(e.lastIndexOf(" ")+1);strtime=strtime.substring(0,2)+strtime.substr(-2)}else{strtime="0000"}if(i=e.match(/(\d{2,4})-(\d{1,2})-(\d{1,2})/)){return t(i[1])*1e4+i[2]*100+ +i[3]+strtime}if(i=e.match(/(\d{1,2})[\/-](\d{1,2})[\/-](\d{2,4})/)){return t(i[3])*1e4+i[2]*100+ +i[1]+strtime}return 99999999e4};s.findData=function(e){var t=e.getFirst();if(t){return s.findData(t)}else{return e.innerHTML.trim()}};s.compare=function(e,t){var i=e.getChildren()[a].innerHTML.trim();var n=t.getChildren()[a].innerHTML.trim();if(r=="number"){i=parseFloat(i);n=parseFloat(n);if(s.sortBy=="ASC"){return i-n}else{return n-i}}else if(r=="string"){i=i.toUpperCase();n=n.toUpperCase();if(i==n){return 0}if(s.sortBy=="ASC"){if(i<n){return-1}}else{if(i>n){return-1}}return 1}else if(r=="date"){i=parseFloat(s.getdate(i));n=parseFloat(s.getdate(n));if(s.sortBy=="ASC"){return i-n}else{return n-i}}else if(r=="currency"){i=parseFloat(i.substr(1).replace(",",""));n=parseFloat(n.substr(1).replace(",",""));if(s.sortBy=="ASC"){return i-n}else{return n-i}}}}},this)},edit:function(e){var t={},i;if(!this.options.editable)return;if(e.row>=0){i=e.row}else{var n=this.getSelectedIndices();if(!n||n.length==0)return;i=n[0]}this.finishEditing();var a=$(this.elements[i]);var s=e.columnIndex?e.columnIndex:0;var r;if(e.dataIndex){for(s;s<$.objectSize(this.options.columnModel);s++){r=this.options.columnModel[s];if(r.hidden)continue;if(r.dataIndex==e.dataIndex)break}}if(s==$.objectSize(this.options.columnModel))return;r=this.options.columnModel[s];if(!r.editable)return;var o=$(a.find("div.td")[s]);var l=a.data("newrow");var d,u;d=this.options.data[i];u=d[r.dataIndex];t={preventEdit:function(){this.doNotEdit=true},colmod:r,value:u,data:this.options.data[i]};this.fireEvent("beforeedit",t);if(t.doNotEdit)return;var c=o.width()-5;var h=15;o.html("");var f=this;var p=$("<input/>").css("width",c).css("height",h*1.5).attr("maxlength",254).val(u).addClass("inline").on("keyup",f.finishEditing.bind(f)).appendTo(o).focus();if(window.navigator.userAgent.indexOf("MSIE ")>0){p.keypress(function(e){var t=e.which;if(t===13){f.finishEditing(e)}})}else{p.on("blur",f.finishEditing.bind(f))}this.inlineEditSafe={row:i,columnModel:r,td:o,input:p,oldvalue:u,newrow:l};this.inlineeditmode=true;return this.inlineEditSafe},finishEditing:function(e){if(this.inlineEditSafe==null)return;if(!this.inlineeditmode)return;if(e&&e.type=="keyup"&&e.keyCode!=13&&e.keyCode!=27)return;this.inlineeditmode=false;var t=this.inlineEditSafe.row;var i=this.options.data[t];var n=this.inlineEditSafe.columnModel;var a=this.inlineEditSafe.td;if(window.navigator.userAgent.indexOf("MSIE ")>0&&e&&e.type==="keypress"){e.type="keyup"}i[n.dataIndex]=e&&(e.type=="keyup"&&e.keyCode==13||!e.keyCode)?this.inlineEditSafe.input[0].value:this.inlineEditSafe.oldvalue;if((n.type==="date"||n.type==="time"||n.type==="datetime")&&window.formatDateTime(this.inlineEditSafe.input[0].value,n.type)==="Only in original format"){i[n.dataIndex]=this.inlineEditSafe.oldvalue==="Only in original format"?"":this.inlineEditSafe.oldvalue}a[0].innerHTML=n.labelFunction?n.labelFunction(i,t,n):i[n.dataIndex];if(a[0].innerHTML.length==0)a[0].innerHTML="&nbsp;";if(e&&(e.type=="keyup"&&e.keyCode==13||!e.keyCode)&&this.inlineEditSafe.oldvalue!=a[0].innerHTML){this.inlineEditSafe.target=this;this.fireEvent("editcomplete",this.inlineEditSafe)}this.inlineEditSafe=null},newRowInsertClick:function(e){if(!this.newrowobj)return;this.finishEditing();if(this.options.editToolbarContainer){var t=$(this.options.editToolbarContainer);t.empty()}var i=this.newrowobj.rowelement;var n=this.newrowobj.row;var a=this.options.data[n];this.fireEvent("insertrow",{target:this,data:a,row:n,rowelement:i});this.newrowobj=null},toggle:function(e){if(e.css("display")=="block"){e.css("display","none")}else{e.css("display","block")}},getSection:function(e){return this.ulBody.find(".section-"+e)},getLiParent:function(e){e=$(e);while(e.length&&!e.hasClass("td")){e=e.parent()}if(e.length)return e.parent()},onRowMouseOver:function(e){var t=this.getLiParent(e.target);if(!t||!t.length)return;if(!this.dragging)t.addClass("over");this.fireEvent("mouseover",{target:this,row:t.data("row"),element:t})},onRowMouseOut:function(e){var t=this.getLiParent(e.target);if(!t)return;if(!this.dragging)t.removeClass("over");this.fireEvent("mouseout",{target:this,row:t.data("row"),element:t})},onRowClick:function(e,t){var i=$(this.getLiParent(e.target));if(!i.length)return;if(this.options.selectable){var n=i.data("row");var a=this.selected?this.selected.length:0;var s=false;if(!(e.ctrlKey||e.metaKey)&&!e.shiftKey||!this.options.multipleSelection){$.each(this.elements,function(e,t){$(t).removeClass("selected")});this.selected=new Array}if(e.ctrlKey||e.metaKey){for(var r=0;r<a;r++){if(n==this.selected[r]){$(this.elements[n]).removeClass("selected");this.selected.splice(r,1);s=true}}}if(e.shiftKey&&this.options.multipleSelection){var o=0;if(this.selected.length>0)o=this.selected[a-1];var l=n;startindex=Math.min(o,l);l=Math.max(o,l);for(var r=startindex;r<=l;r++){if(this.isHidden(r))continue;$(this.elements[r]).addClass("selected");this.selected.push(Number(r))}}if(!s){if(!this.isHidden(i.data("row"))){i.addClass("selected");this.selected.push(Number(i.data("row")))}}this.unique(this.selected,true)}if(this.options.accordion&&!this.options.openAccordionOnDblClick){this.accordianOpen(i)}if(!t){var d=i.data("row"),u=this.getDataByRow(d);this.fireEvent("click",{indices:this.selected,target:this,row:d,rowdata:u,element:i})}},toggleIconClick:function(e){e.stopPropagation();var t=this.getLiParent(e.target);this.accordianOpen(t)},accordianOpen:function(e){var t=e.data("row");var i=this.getSection(t);if(this.options.autoSectionToggle){if(this.lastsection)if(this.lastsection!=i){this.lastsection.css("display","none");this.lastsection.prev().find(".toggleicon").css("background-position","0 0")}}this.toggle(i);this.fireEvent("sectiontoggle",{section:i,row:t,element:e});if(this.options.showtoggleicon){e.find(".toggleicon").css("background-position",i.css("display")=="block"?"-16px 0":"0 0")}this.lastsection=i},onRowDblClick:function(e){var t=this.getLiParent(e.target);if(!t)return;var i=e.target;if(this.options.editable&&this.options.editondblclick&&i.hasClass("td")){var n=t.getChildren();for(var a=0;a<n.length;a++){if(n[a]==i)break}var s=this.edit({columnIndex:a});if(s)s.input.selectRange(0,s.input.value.length)}if(this.options.accordion&&this.options.openAccordionOnDblClick){this.accordianOpen(t)}var r=t.data("row"),o=this.getDataByRow(r);this.fireEvent("dblclick",{row:r,rowdata:o,target:this,element:t})},onLoadData:function(e){this.__loading=false;if(!e){this.removeAll();this.hideLoader()}else{this.setData(e)}this.fireEvent("loaddata",{target:this,data:e,pkey:e?e.pkey:null});if(this.ulscroll){this.bDiv.scrollLeft(this.ulscroll.x);this.bDiv.scrollTop(this.ulscroll.y)}},unique:function(e,t){function i(e,t){return e-t}var n=t?i:function(){};e.sort(n);for(var a=1;a<e.length;a++){if(e[a-1]==e[a]){e.splice(a,1);a--}}return e},loadData:function(e){if(!this.options.url&&!this.options.dataProvider)return;var i={};if(this.options.pagination)i={page:this.options.page,perpage:this.options.perPage};if(this.options.serverSort){if(this.options.rest){if(this.options.sortOn)i.order_by=this.options.sortOn+":"+this.options.sortBy}else{i.sorton=this.options.sortOn;i.sortby=this.options.sortBy}}if($.browser.msie){i.dummyparam=Date.now()}if(this.filterByAppTypeList&&this.filterByAppTypeList.length>0){this.filterByAppTypeList.forEach(function(e,t){i["filter[licence_app_instance][IN]["+t+"]"]=e})}if(this.options.filterInput){var t=this.container.find("input.cfilter");if(t&&t.length){i.filter=t.value}}if(this.options.filterServer&&this.options.rest){if(this.options.search){i["filter[search][ILIKE]"]="*"+(this.options.query||"")+"*"}else{i.query=this.options.query;i.query_on=this.options.query_on}}if(!this.options.disableLoader)this.showLoader();if(this.options.dataProvider){this.options.dataProvider.loadData(i)}else{var e=e!=null?e:this.options.url;var n={target:this,data:i,url:e};this.fireEvent("beforerequest",n);var a="";if(this.options.method=="get"){a=$.param(n.data)}var s=null;if(this.options.smartRefresh&&typeof this.md5=="function")var s=this.md5(n.url+"&"+a);if(n.url.indexOf("?")>0){n.url+="&"+a}else{n.url+="?"+a}if(this.options.smartRefresh){if(this.hashreq==s){this.ulscroll={x:this.bDiv.scrollLeft(),y:this.bDiv.scrollTop()}}else{this.ulscroll=null;this.hashreq=s}}this.__loading=true;var r=new $.Deferred,o=this;$.ajax({dataType:"json",type:this.options.method,url:n.url,data:n.data,success:this.onLoadData.bind(this)}).done(function(e){r.resolve(e)}).fail(function(e){o.removeAll();o.hideLoader();var t="Error loading data";if(e.responseText){var i=JSON.parse(e.responseText);if(i&&i.msg){t+=": "+i.msg;if(i.nested&&i.nested.msg){t+=" "+i.nested.msg}}}giscloud.ui.alert.color("red").show(t,4e3);r.reject()});return r.promise()}},refresh:function(e){this.options.noredraw=e;return this.loadData()},setData:function(e,t){var i;if(!e)return;this.options.data=e.data;if(e.meta){this.options.data.meta=e.meta}if(t){if(this.options.columnModel!==t){this.options.columnModel=t;this.draw()}i=t}else{i=this.options.columnModel}this.fireEvent("beforerender",{target:this,data:e,cmu:i});if(i==null&&this.options.columnModel!=null){i=this.options.columnModel}else{this.options.columnModel=i}if(this.options.crudRowButtons){}if(!this.options.columnModel){this.setAutoColumnModel();i=this.options.columnModel}else{this.draw()}if(this.options.pagination){this.options.page=e.page*1;this.options.total=e.total;this.options.maxpage=Math.ceil(this.options.total/this.options.perPage);this.container.find("div.pDiv input").val(e.page);var n=e.page*this.options.perPage>e.total?e.total:e.page*this.options.perPage;this.container.find("div.pDiv .pPageStat").html((e.page-1)*this.options.perPage+1+".."+n+" / "+e.total);this.pDiv2.find(".pcontrol span").html(this.options.maxpage);var a=this.container.find("div.pDiv");if(a.length&&this.options.smartPagination&&e.page==1&&this.options.maxpage==1){a.hide()}else a.show()}this.reset();this.fireEvent("setdata",{target:this,data:e,cmu:i});this.hideLoader()},getData:function(){return this.options.data},getDataByRow:function(e){if(e>=0&&e<this.options.data.length)return this.options.data[e]},setDataByRow:function(e,t){if(e>=0&&e<this.options.data.length){var i=this.filtered;this.options.data[e]=t;this.reset();if(i)this.filter(this.options.filter_key)}},setDataByRowAndColumn:function(e,t,i){if(e>=0&&e<this.options.data.length&&t){var n=this.options.data[e],a=this.filtered;n[t]=i;this.reset();if(a)this.filter(this.options.filter_key)}},setScroll:function(e,t){this.bDiv.scrollLeft(e);this.bDiv.scrollTop(t)},addRow:function(e,t){if(t>=0){if(!this.options.data)this.options.data=[];this.options.data.splice(t,0,e);this.reset()}},deleteRow:function(e){if(e>=0&&e<this.options.data.length){this.options.data.splice(e,1);this.reset()}},isHidden:function(e){return $(this.elements[e]).hasClass(this.options.filterHideCls)},hideWhiteOverflow:function(e){if(this.container.find(".gBlock").length)this.container.find(".gBlock").remove();var t=this.container.find("div.pDiv .pReload");if(t.length)t.removeClass("loading")},overlayText:function(e){if(this.text_overlay&&this.text_overlay.length){this.text_overlay.remove();if(e=="hide")return}this.text_overlay=$("<div>");this.text_overlay.html(e);this.container.append(this.text_overlay);var t=this.text_overlay;var i=this.container;var n=i.width()/2-t.width()/2;this.text_overlay.addClass("omnigrid-text-overlay")},showWhiteOverflow:function(e){var t=this.container.find(".gBlock");if(t.length)this.container.find(".gBlock").remove();var i=$("<div/>").attr("style","top: 0px; left: 0px; background: white none repeat scroll 0% 0%;  -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; position: absolute; z-index: 999; opacity: 0.5; filter: alpha(opacity=50");var n=this.container.find(".bDiv");var a=1;a+=this.container.find(".tDiv")?this.container.find(".tDiv").height():0;a+=this.container.find(".hDiv")?this.container.find(".hDiv").height():0;i.css("width",this.width).css("height",this.height).css("top",0);i.addClass("gBlock");this.container.append(i);var s=this.container.find("div.pDiv .pReload");if(s&&s.length)s.addClass("loading")},showLoader:function(){if(this.loader)return;if(this.text_overlay&&this.text_overlay.length){this.text_overlay.remove()}this.showWhiteOverflow();this.loader=$("<div/>");this.loader.addClass("elementloader");this.loader.appendTo(this.container);var e=this.container;this.loader.css("top",e.height()/2-16).css("left",e.width()/2)},hideLoader:function(){if(!this.loader)return;this.hideWhiteOverflow();this.loader.remove();this.loader=null},selectAll:function(){var i=this;this.unselectAll();$.each(this.elements,function(e,t){t=$(t);if(i.isHidden(e))return;i.selected.push(t.data("row"));t.addClass("selected")})},unselectAll:function(){$.each(this.elements,function(e,t){$(t).removeClass("selected")});this.selected=[]},getSelectedIndices:function(){return this.selected},setSelectedIndices:function(e,t){this.selected=e;if(!e)return;for(var i=0;i<e.length;i++){var n=$(this.elements[e[i]]);this.onRowClick({target:n.first(),control:false},t)}},onMouseOver:function(e){e.columnModel.onMouseOver(e.element,e.data)},removeHeader:function(){var e=this.container.find(".hDiv");if(e.length)e.empty();this.options.columnModel=null},removeAll:function(e){if(this.ulBody&&this.ulBody.length){this.ulBody.empty();this.ulBody.css("width","auto");if(this.options.showNoData)this.overlayText(__("No layer selected")+".")}this.selected=new Array;if(e){var t=this.container.find(".hDivBox");if(t.length){t.empty();t.css("width","auto")}}},setColumnModel:function(e){if(!e)return;this.options.columnModel=e;this.draw()},setColumnProperty:function(e,t,i){var n=this.options.columnModel;if(!n||!e||!t)return;e=e.toLowerCase();for(var a=0;a<n.length;a++){if(n[a].dataIndex&&(n[a].dataIndex.toLowerCase()==e||e.indexOf("*")>-1&&n[a].dataIndex.toLowerCase().indexOf(e.replace("*",""))>-1)){n[a][t]=i;return}}},setColumnFilterClass:function(e,t){var i=this.options.columnModel;if(!i||!e)return;var n=this.container.find(".hDiv .th"),a,s;for(var r=0;r<n.length;r++){a=$(n[r]);c=a.data("column");if(this.options.columnModel[c].dataIndex==e){this.options.columnModel[c].filtered=t;if(t)a.addClass("column-filtered");else a.removeClass("column-filtered");return}}},removeColumnFilterClass:function(){var e;if(!this.options.columnModel)return;for(e=0;e<$.objectSize(this.options.columnModel);e++){this.options.columnModel[e].filtered=false}this.container.find(".hDiv .th").removeClass("column-filtered");this.closeDropDown()},setAutoColumnModel:function(){if(!this.options.data)return;var e=this.options.data.length;if(!(e>0))return;this.options.columnModel=[];var t=Object.keys(this.options.data[0]).length,i=0,n;for(var a in this.options.data[0]){i++;n=typeof this.options.data[0][a]=="number"?"number":"string";this.options.columnModel.push({header:a,dataIndex:a,dataType:n,editable:true,width:this.options.defaultColumnWidth})}this.fireEvent("autocolummodel",{target:this,columnModel:this.options.columnModel});this.draw()},setSize:function(e,t){this.options.width=e?e:this.options.width;this.options.height=t?t:this.options.height;this.calculatesSize();if(this.options.width>0)this.container.css("width",this.options.width);if(this.options.buttons&&this.width>0)this.container.find(".tDiv").css("width",this.width);var i=this.container.find(".hDiv");if(this.options.showHeader&&i.length&&this.width>0)i.css("width",this.width);if(this.width>0)this.bDiv.css("width",this.width);if(this.options.pagination&&this.container.find("div.pDiv").length&&this.width>0){this.container.find("div.pDiv").css("width",this.width)}this.bDiv.css("height",null);this.bDiv.css("height",this.getBodyHeight());if(this.height>0)this.container.css("height",this.height);var n=this.container.find(".gBlock");if(n.length)n.css("width",this.width>0?this.width:0).css("height",this.bDiv.height())},onBodyScroll:function(){var e=this.container.find(".hDivBox"),t=this.container.find(".bDiv");var i=t.scrollLeft();e.css("left",-i);this.rePosDrag();this.closeDropDown()},onBodyClick:function(){},onBodyMouseOver:function(){},onBodyMouseOut:function(){},rePosDrag:function(){if(!this.options.resizeColumns||!this.options.columnModel)return;var e=0;var t=this.container.find(".cDrag div");var i=this.container.find("div.bDiv").scrollLeft();for(var n=0;n<$.objectSize(this.options.columnModel);n++){var a=this.options.columnModel[n];var s=$(t[n]);if(!a.hidden)e+=a.width+1;s.css("left",e-2-i)}},onColumnDragComplete:function(e,t){this.dragging=false;var i=$(e.currentTarget).data("column");this.setColumnWidth(i)},setColumnWidth:function(a,e){var s;if(!e){var t=this.container.find("div.cDrag"),i=t.find("div")[a],n=this.container.find("div.bDiv").scrollLeft()}this.sumWidth=0;for(var r=0;r<$.objectSize(this.options.columnModel);r++){var o=this.options.columnModel[r];if(r==a){s=e?e:$(i).position().left+n-this.sumWidth-($.browser.msie?-1:1)}else if(!o.hidden)this.sumWidth+=o.width}if(s<30)s=30;this.options.columnModel[a].width=s;this.sumWidth+=s;this.ulBody.css("width",this.sumWidth+this.visibleColumns);var l=this.container.find("div.hDivBox");l.css("width",this.sumWidth+this.visibleColumns*2);var d=l.find("div.th");var u=$(d[a]);u.css("width",s-6);var c=this.visibleColumns;var h=this.ulBody.find("li.tr");var f=h.length>0?$(h[0]).find(".td"):null;var p=f?$.toInt(f.css("padding-left"))+$.toInt(f.css("padding-right")):0;var m=this;$.each(h,function(e,t){t=$(t);t.css("width",m.sumWidth+(p+2)*c);if(!t.hasClass("section")){var i=t.find("div.td");var n=i[a];$(n).css("width",s-6)}});this.rePosDrag()},onColumnDragStart:function(e,t){this.dragging=true;var i=$(e.currentTarget).data("column");this.setColumnWidth(i)},onColumnDragging:function(e,t){$(e.currentTarget).css("top",1);var i=$(e.currentTarget).data("column");this.setColumnWidth(i)},overDragColumn:function(e){$(e.target).addClass("dragging")},outDragColumn:function(e){$(e.target).removeClass("dragging")},clickHeaderColumn:function(e){if(this.dragging)return;var t=$(e.target);if(!t.hasClass("th"))return;var i=t.data("column");var n=this.options.columnModel?this.options.columnModel[i]:null;if(n){$(e.target).removeClass(n.sort);n.sort=n.sort=="ASC"?"DESC":"ASC";$(e.target).addClass(n.sort)}if(n&&!n.sortDisabled)this.sort(i,n.sort)},overHeaderColumn:function(e){if(this.dragging)return;var t=$(e.target);if(!t.hasClass("th")){t=t.parents(".th")}var i=t.data("column");var n=this.options.columnModel?this.options.columnModel[i]:null;if(n&&!n.sortDisabled)t.addClass(n.sort)},outHeaderColumn:function(e){if(this.dragging)return;var t=$(e.target);if(!t.hasClass("th")){t=t.parents(".th")}var i=t.data("column");var n=this.options.columnModel?this.options.columnModel[i]:null;if(n&&!n.sortDisabled)t.removeClass(n.sort)},clickHeaderDropDown:function(e){if(this.dragging)return;var t=$(e.target);if(!t.hasClass("th")){t=t.parents(".th")}var i=t.data("column");var n=this.options.columnModel?this.options.columnModel[i]:null;var a=this.ddcont.data("colindex");this.ddcont.data("colindex",i);if(a!=i||this.ddcont.filter(":visible").length===0){this.ddcont.show();this.fireEvent("dropdown-show",{target:this,dropdown:this.ddcont,columnModel:n,columnIndex:i})}else{this.ddcont.hide();this.fireEvent("dropdown-hide",{target:this,dropdown:this.ddcont,columnModel:n,columnIndex:i})}this.positionDropDown(e)},positionDropDown:function(e){if(this.ddcont.length===0){return}var t=e&&e.currentTarget.offsetParent.textContent?e.currentTarget.offsetParent.textContent:"null";if(t!=="null"){var i=[],n=$(window).height();this.options.data.forEach(function(e){i.push(e[t])});i=$.grep(i,function(e,t){return $.inArray(e,i)===t});var a=i.length*25+25,s=$(e.target).offset().top+5;if(a===50)a=200;if(n>=a+s)$(".gc-dropdown-list").height(a);else $(".gc-dropdown-list").height(n-s-48);$(".gc-dropdown-list").css("max-height","200px")}if(e&&e.target){var r=$(e.target).offset();this.ddcont.offset({left:r.left,top:r.top+5})}else{var r=this.ddcont.offset();var o=this.ddcont.offset();var l=this.container.height();var d=r.top+10;if($(window).width()<r.left+$(".gc-dropdown-list").width())r.left=r.left-$(".gc-dropdown-list").width()-7;if(o.top+r.height>$(window).height())d=d-r.height-20;this.ddcont.offset({top:d,left:r.left})}},closeDropDown:function(){if(!this.options.columnHeaderDropdown||!this.ddcont)return;this.ddcont.hide()},getBodyHeight:function(){var e=this.options.showHeader?24:0;var t=this.options.buttons?this.container.find(".tDiv").height():0;var i=this.options.pagination?26:0;var n=this.container.height();if(!(n>=0))throw Error("Invalid container height");var a=n-e-t-i;return a>2?a:0},refreshHeight:function(e,t,i){if(this.bDiv){if(e){var n=t?t.getSize().y:this.container.parent().height();if(i>0)n-=i;this.setSize(this.width,n)}this.bDiv.css("height",null);this.bDiv.css("height",this.getBodyHeight())}},refreshData:function(){if(this.options.data&&this.options.data.length){var e=$.objectSize(this.options.columnModel);var t=this.options.data.length;for(var i=0;i<t;i++){var n=this.options.data[i];var a=this.elements[i];var s=-1;for(var r=0;r<e;r++){var o=this.options.columnModel[r];if(o.hidden)continue;var l=$(a).find(".td")[r];s=!o.hidden&&s==-1?r:s;var d="";if(s==r&&this.options.accordion&&this.options.showtoggleicon){d="<div class='toggleicon'></div>"}this.setColumnValue(l,a,o,n,i,r,{toggleicon:d,firstvisible:s})}}}},setRowsSelection:function(s){var r=this;if(!$.isArray(s))s=[];$.each(r.elements,function(e,t){var i=$(t).data("row");var n=i!=null&&r.options.data&&r.options.data[i];var a=$(t).find("input");if(a&&n){a.prop("checked",$.inArray(n.__id,s)!=-1)}else{console.warn("setRowsSelection warn",i)}});this.setCheckboxStates()},selectAllRows:function(e){var a=this,s=$(e.currentTarget).prop("checked"),r=[];$.each(this.elements,function(e,t){var i=$(t).data("row");var n=a.options.data[i];r.push(n);$(t).find("input").prop("checked",s)});this.fireEvent("rowsselect",{rowsdata:r,checked:s})},setCheckboxStates:function(){var i=true;$.each(this.elements,function(e,t){if(!$(t).find("input").prop("checked")){i=false;return false}});if(this.allRowsSelectionCheckbox){this.allRowsSelectionCheckbox.prop("checked",i)}},setColumnValue:function(e,t,a,s,r,o,i){if(a.dataType=="checkbox"){var l=this,n=$("<input type='checkbox' />").addClass("row-select-chk");e.append(n);n.click(function(e){e.stopPropagation();l.setCheckboxStates();l.fireEvent("rowselect",{checked:n.prop("checked"),rowdata:s,row:r,lirow:t,checkbox:n,originalEvent:e})});var d=s[a.dataIndex];if(d==1||d=="t"){n.prop("checked",true)}}else if(a.type=="image"){}else if(a.type=="custom"){}else if(a.dataType=="crud_buttons"){var u=$("<div/>").addClass("row-crud-buttons").appendTo(e);var c="<div class='row-crud-buttons' >";var l=this;$.each(this.options.crudRowButtons,function(e,t){var i={data:t,columnModel:a,rowdata:s,row:r,column:o,skip:false};l.fireEvent("crudbutton_before_render",i);if(!i.skip){var n=$("<a/>").attr("href","javascript:;").html(t.label).attr("title",t.title);n.addClass(t["class"]);n.addClass("row-crud-button");n.appendTo(u);n.click(function(e){if(e.currentTarget.className.search("linkbutton")>=0&&window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}l.fireEvent("crudbuttonclick",{data:t,columnModel:a,rowdata:s,row:r,column:o})})}else{if(e==l.options.crudRowButtons.length-1&&!u.html().length){u.html("&nbsp;")}}})}else if(a.labelFunction!=null){var h="";if(i&&i.toggleicon)h+=i.toggleicon;html=h+a.labelFunction(s,r,a);$(e).html(html!=""?html:"&nbsp;");if(i&&i.firstvisible==o&&this.options.accordion&&this.options.showtoggleicon){$(e).find(".toggleicon").click(this.toggleIconClick.bind(this))}}else if(a.dataType=="timestamp"){var f=s[a.dataIndex],p=a.format?a.format:"L";e.innerHTML=f&&!isNaN(f)?moment.unix(f).format(p):""}else{var m=new String(s[a.dataIndex]);if(m==null||m=="null"||m=="undefined"||m=="")m="&nbsp;";var g=m.replace(/^\s+|\s+$/g,"");if(g.length==0)m="&nbsp;";$(e).html("");if(i&&i.toggleicon)$(e).html($(e).html()+i.toggleicon);$(e).html($(e).html()+m);if(i.firstvisible==o&&this.options.accordion&&this.options.showtoggleicon){$(e).find(".toggleicon").click(this.toggleIconClick.bind(this))}}},isInsertMode:function(){return this.newrowobj?true:false},addNewRow:function(){if(!this.options.columnModel){return}if(this.newrowobj){this.options.data.splice(this.newrowobj.rowelement.data["row"],1);this.newrowobj.rowelement.remove()}if(this.options.editToolbarContainer){var e=$(this.options.editToolbarContainer);e.empty();var t=new giscloud.blja.Element("a",{href:"javascript:;",html:"OK"});t.addClass("linkbutton");t.inject(e);t.addEvent("click",this.newRowInsertClick.bind(this))}var i=$.objectSize(this.options.columnModel),n;var a={};for(n=0;n<i;n++){var s=this.options.columnModel[n];a[s.dataIndex]=""}var r;if(this.options.data){r=this.options.data.push(a)-1}else{this.options.data=[a];r=0}this.newrowobj=this.renderRow(a,r,i);this.newrowobj.rowelement.data("newrow",true);this.newrowobj.rowelement.addClass("newrow");this.bDiv.css("height",this.getBodyHeight());this.initRows()},renderRow:function(e,t,i){var n=$("<li/>");n.css("width",this.sumWidth+2*this.visibleColumns);n.data("row",t);n.addClass("tr");this.ulBody.append(n);var a={target:this,rowelement:n,rowdata:e,row:t};this.fireEvent("rowrender",a);if(this.options.tooltip){this.options.tooltip.attach(tr)}var s=-1;for(var r=0;r<i;r++){var o=this.options.columnModel[r];var l=$("<div>");l.data("column_model",o);l.addClass("td");l.css("width",o.width-6);n.append(l);s=!o.hidden&&s==-1?r:s;var d="";if(s==r&&this.options.accordion&&this.options.showtoggleicon){d="<div class='toggleicon'></div>"}if(o.hidden)l.css("display","none");if(o.onMouseOver){l.onmouseover=this.onMouseOver.bind(this,{element:l,columnModel:o,data:e})}if(o.title)l.title=e[o.title];this.setColumnValue(l,n,o,e,t,r,{toggleicon:d,firstvisible:s})}if(this.options.accordion){var u=$("<li/>");u.addClass("section");u.addClass("section-"+t);u.css("width",this.sumWidth+2*this.visibleColumns);this.ulBody.append(u);if(this.options.accordionRenderer)this.options.accordionRenderer({parent:u,row:t,grid:this,rowdata:e})}return a},renderData:function(){this.ulBody.empty();this.inlineEditSafe=null;if(this.options.data&&this.options.data.length){var e=$.objectSize(this.options.columnModel);var t=this.options.data.length;for(var i=0;i<t;i++){var n=this.options.data[i];this.renderRow(n,i,e)}}if(this.options.height!="auto")this.bDiv.css("height",this.getBodyHeight())},calculatesSize:function(){this.width=this.options.width.toString().indexOf("%")>0?this.options.width:this.options.width-this.options.outerBorder;this.height=this.options.height.toString().indexOf("%")>0?this.options.height:this.options.height-this.options.outerBorder},pagination:function(e){var t=this.container.find("div.pDiv");this.options.pagination=e;if(!e&&t.length)t.remove();this.reset()},draw:function(){if(this.options.noredraw)return;this.removeAll();var e=this.container.find("div.pDiv"),t=this.container.find(".hDiv"),i=this.container.find(".cDrag"),e=this.container.find("div.pDiv");this.bDiv=this.container.find(".bDiv");if(t.length)t.empty();if(i.length)i.empty();if(this.bDiv.length)this.bDiv.empty();if(this.text_overlay&&this.text_overlay.length){this.text_overlay.remove()}this.calculatesSize();var n=this.options.columnModel?$.objectSize(this.options.columnModel):0;if(this.width)this.container.css("width",this.width);this.container.addClass("omnigrid");var a=this.container.find(".tDiv");if(this.options.buttons&&!a.length){a=$("<div/>");a.addClass("tDiv");a.css("width",this.width);a.css("height",25);this.container.append(a);var s=this.options.buttons;for(var r=0;r<s.length;r++){var o=$("<div/>");a.append(o);if(s[r].separator){o.addClass("btnseparator");continue}o.addClass("fbutton");var l=$("<div/>");if(s[r].onclick)l.click(s[r].onclick.bind(this));l.mouseover(function(){l.addClass("fbOver")});l.mouseout(function(){l.removeClass("fbOver")});o.append(l);var d=$("<span/>").attr("title",s[r].title);d.addClass(s[r].bclass);d.html(s[r].name);l.append(d)}}var u=this.width.toString().indexOf("%")>0?"100%":this.width;if(!t.length){t=$("<div/>");t.addClass("hDiv");this.container.append(t)}t.css("width",u);var c=$("<div/>");c.addClass("hDivBox");t.append(c);this.allRowsSelectionCheckbox=null;this.sumWidth=0;this.visibleColumns=0;for(var h=0;h<n;h++){var f=this.options.columnModel[h];if(f.selectionColumn){f.width=30;f.sortDisabled=true;f.noDropDown=true}var p=$("<div/>");if(f.width==null)this.options.columnModel[h].width=this.options.defaultColumnWidth;if(!f.sort)f.sort="ASC";if(this.options.sortHeader&&!f.sortDisabled){p.click(this.clickHeaderColumn.bind(this));p.mouseout(this.outHeaderColumn.bind(this));p.mouseover(this.overHeaderColumn.bind(this))}p.data("column",h);p.data("dataType",f.dataType);p.addClass("th");if(f.filtered)p.addClass("column-filtered");p.css("width",f.width-($.browser.msie?6:6));c.append(p);if(f.hidden)p.css("display","none");else{this.sumWidth+=f.width;this.visibleColumns++}var m=f.header;if(m){p.text(m);p.attr("title",m);var g=f.filterCheckbox;if(g){var _=this.filterByAppTypeList&&this.filterByAppTypeList.indexOf(f.instanceId.toString())>=0;p.append("<input type='checkbox' value='"+f.instanceId+"' "+(_?"checked='checked'":"")+"' class='header-checkbox'></input>")}}else if(f.selectionColumn){this.allRowsSelectionCheckbox=$('<input type="checkbox" />').addClass("row-select-chk");this.allRowsSelectionCheckbox.click(this.selectAllRows.bind(this));p.append(this.allRowsSelectionCheckbox)}else{p.html("&nbsp;")}if(this.options.columnHeaderDropdown&&!f.noDropDown){var v=$("<div/>");v.addClass("th-dropdown");v.appendTo(p);v.click(this.clickHeaderDropDown.bind(this))}}c.css("width",this.sumWidth+this.visibleColumns*2);if(!this.options.showHeader)t.css("display","none");else{}if(this.options.height!="auto")this.container.css("height",this.height);var y=this.getBodyHeight();if(this.options.resizeColumns){if(!i.length){i=$("<div/>");i.addClass("cDrag");this.container.append(i)}var b=this.options.buttons?a.height():0;i.css("top",b);var w=0;var M=[];for(var h=0;h<n;h++){var f=this.options.columnModel[h];var k=$("<div/>");var L=this.options.showHeader?24:0;if(!f.hidden)w+=f.width+1;k.css("top",1).css("left",w-2).css("height",L).css("display","block");k.data("column",h);i.append(k);k.mouseout(this.outDragColumn.bind(this));k.mouseover(this.overDragColumn.bind(this));var S=k.draggable();k.on("drag",$.proxy(this.onColumnDragging,this));if(f.hidden)k.css("display","none")}}if(!this.bDiv.length){this.bDiv=$("<div/>");this.bDiv.addClass("bDiv");this.container.append(this.bDiv)}this.bDiv.css("width",u);this.onBodyScrollBind=this.onBodyScroll.bind(this);this.bDiv.scroll(this.onBodyScrollBind);this.ulBody=$("<ul/>");this.ulBody.css("width",this.sumWidth+this.visibleColumns*($.browser.msie?1:1));this.bDiv.append(this.ulBody);if(this.options.pagination&&!e.length){e=$("<div/>");e.addClass("pDiv");e.css("width",this.width);e.css("height",25);this.container.append(e);this.pDiv2=$("<div/>");this.pDiv2.addClass("pDiv2");e.append(this.pDiv2);var T='<div class="pGroup"><select class="rp" name="rp">';var x;var D=false,x;for(x in this.options.perPageOptions){x=this.options.perPageOptions[x];if(isNaN(x))continue;if(x!=this.options.perPage){T+='<option value="'+x+'">'+x+"</option>"}else{D=true;T+='<option selected="selected" value="'+x+'">'+x+"</option>"}}T+="</select></div>";T+='<div class="btnseparator"></div><div class="pGroup"><div class="pFirst pButton"></div><div class="pPrev pButton"></div></div>';T+='<div class="btnseparator"></div><div class="pGroup"><span class="pcontrol"><input class="cpage" type="text" value="1" size="4" style="text-align:center"/> / <span></span></span></div>';T+='<div class="btnseparator"></div><div class="pGroup"><div class="pNext pButton"></div><div class="pLast pButton"></div></div>';T+='<div class="btnseparator"></div><div class="pGroup"><div class="pReload pButton"></div></div>';T+='<div class="btnseparator"></div><div class="pGroup"><span class="pPageStat"></div>';if(this.options.filterInput)T+='<div class="btnseparator"></div><div class="pGroup"><span class="pcontrol"><input class="cfilter" type="text" value="" style="" /><span></div>';T+=this.options.bottomHtml;this.pDiv2.html(T);var C=this.pDiv2.find(".rp");if(!D&&C.length&&C.data("perpage")){this.options.perPage=C.data("perpage");C.options[0].selected=true}this.pDiv2.find(".pFirst").click(this.firstPage.bind(this));this.pDiv2.find(".pPrev").click(this.prevPage.bind(this));this.pDiv2.find(".pNext").click(this.nextPage.bind(this));this.pDiv2.find(".pLast").click(this.lastPage.bind(this));this.pDiv2.find(".pReload").click(this.refreshClick.bind(this));this.pDiv2.find(".rp").change(this.perPageChange.bind(this));this.pDiv2.find("input.cpage").keyup(this.pageChange.bind(this));if(this.options.filterInput)this.pDiv2.find("input.cfilter").change(this.firstPage.bind(this))}if(this.options.autoFitLastColumn){var I=-1,E=0,O,Y,A=this.container.width();for(var h=0;h<n;h++){var f=this.options.columnModel[h];if(!f.hidden){I=h;O=f.width?f.width:this.options.defaultColumnWidth;E+=O}}Y=A-E+O-30;if(I>=0&&Y>0)this.setColumnWidth(I,Y)}this.ddcont=$(document.body).find(".gc-omnigrid-dropdown");if(this.options.columnHeaderDropdown&&this.ddcont.length===0){this.ddcont=$("<div/>");this.ddcont.addClass("gc-app gc-omnigrid-dropdown");this.ddcont.appendTo(document.body);var P=this;$(document).click(function(e){var t=$(e.target);var i=t.parents(".gc-omnigrid-dropdown");var n=P.ddcont;if(t&&n&&!t.hasClass("th-dropdown")&&!n.is(t)&&!$.contains(n.get(0),t.get(0))){P.closeDropDown()}})}$(".omnigrid .header-checkbox").click(this.filterByAppType.bind(this))},refreshClick:function(e){this.refresh()},firstPage:function(){this.options.page=1;this.refresh()},prevPage:function(){if(this.options.page>1){this.options.page--;this.refresh()}},nextPage:function(){if(this.options.page+1>this.options.maxpage)return;this.options.page++;this.refresh()},lastPage:function(){this.options.page=this.options.maxpage;this.refresh()},perPageChange:function(){this.options.page=1;this.options.perPage=this.container.find(".rp").val();this.refresh()},pageChange:function(){var e=this.container.find("div.pDiv2 input").val();if(e>0&&e<=this.options.maxpage){if(this.refreshDelayID)clearInterval(this.refreshDelayID);this.options.page=e;this.refreshDelayID=this.refresh.delay(1e3,this)}},gotoPage:function(e){if(e>0&&e<=this.options.maxpage){this.options.page=e;this.refresh()}},setPerPage:function(e){if(e>0){this.options.perPage=e;this.refresh()}},sort:function(e,t){if(e<0||e>=$.objectSize(this.options.columnModel))return;if(this.options.onStart){this.fireEvent("onStart")}var i=this.container.find(".th");var n=i[e];n.sortBy=t.toUpperCase();if(this.options.serverSort){this.options.sortOn=this.options.columnModel[e].dataIndex;this.options.sortBy=n.sortBy;this.refresh()}else{this.elements.sort(n.compare);this.elements.appendTo(this.ulBody);this.selected=new Array;this.elements.each(function(e,t){e=$(e);if(e.hasClass("selected")){this.selected.push(e.data("row"))}},this);if(this.filtered){this.filteredAltRow()}else{this.altRow()}}},altRow:function(){this.elements.each(function(e,t){e=$(e);if(t%2){e.removeClass("erow")}else{e.addClass("erow")}})},filteredAltRow:function(){$.each(this.ulBody.find("."+this.options.filterSelectedCls),function(e,t){t=$(t);if(e%2){t.removeClass("erow")}else{t.addClass("erow")}})},filter:function(e){var t=0;var i="";if(!e){e=""}if(!(e.length>0))this.clearFilter();if(this.options.filterServer){this.options.query=e;var n=this.container.find("input.cfilter");if(n&&n.length)n.val(e);if(this.__filter_intid)clearInterval(this.__filter_intid);this.__filter_intid=function(){this.__filter_intid=null;this.refresh()}.delay(500,this);return}this.options.filter_key=i=e;if(i){for(var a=0;a<this.options.data.length;a++){var s=this.options.data[a];var r=this.options.columnModel.filter(function(e){return e.filterable});var o=r.length>0?r:this.options.columnModel;for(var l=0;l<$.objectSize(o);l++){var d=o[l];if(d.type=="checkbox"){continue}var u=$(this.elements[a]);if(this.options.filterHide){u.removeClass("erow")}var c=d.dataIndex?s[d.dataIndex]:null;c=c?c:d.labelFunction?d.labelFunction(s,a,d):null;if(typeof c==="number"){c=c.toString()}if(typeof c!=="string"){continue}if(c&&c.toLowerCase().indexOf(i.toLowerCase())>-1){u.addClass(this.options.filterSelectedCls);if(this.options.accordion)u.getNext(".section").addClass(this.options.filterSelectedCls);if(this.options.filterHide){u.removeClass(this.options.filterHideCls);if(this.options.accordion)u.getNext(".section").removeClass(this.options.filterHideCls)}break}else{u.removeClass(this.options.filterSelectedCls);if(this.options.accordion)u.getNext(".section").removeClass(this.options.filterSelectedCls);if(this.options.filterHide){u.addClass(this.options.filterHideCls);if(this.options.accordion)u.getNext(".section").addClass(this.options.filterHideCls)}}}}if(this.options.filterHide){this.filteredAltRow();this.filtered=true}}},filterByAppType:function(e){var t=e.currentTarget;var i=t.value;if(!this.filterByAppTypeList){this.filterByAppTypeList=[]}if(t.checked&&this.filterByAppTypeList.indexOf(i)<0){this.filterByAppTypeList.push(i)}if(!t.checked&&this.filterByAppTypeList.indexOf(i)>=0){this.filterByAppTypeList=this.filterByAppTypeList.filter(function(e){return e!==i})}this.loadData()},clearFilter:function(){var i=this;$.each(this.elements,function(e,t){t=$(t);t.removeClass(i.options.filterSelectedCls);if(i.options.filterHide){t.removeClass(i.options.filterHideCls)}});if(this.options.filterHide){this.altRow();this.filtered=false}}})})();var OmniTabs=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{enableOnClick:false},initialize:function(e,t){this.setOptions(this.options,t);this.container=$("#"+e);this.omnitabsheader=this.container.find("ul.omnitabs-header").children("li");this.omnitabs=this.container.find("div.omnitabs-container").children(".omnitab");var i=0;var n=this;$.each(this.omnitabsheader,function(e,t){t=$(t);t.mouseover(function(){n.tabOver(e,t)});t.mouseout(function(){n.tabOut(e,t)});t.click(function(){n.showTab(e,t)});if(t.hasClass("selected"))i=e});this.showTab(i);this.currentTab=this.lastTab=i},tabOver:function(e,t){this.fireEvent("tabover",{target:this,element:t})},tabOut:function(e,t){this.fireEvent("tabout",{target:this,element:t})},enable:function(){this.container.removeClass("disabled")},disable:function(){this.container.addClass("disabled")},enableTab:function(e){if(e<0||e>=this.omnitabs.length)return;var t=$(this.omnitabs[e]);if(!t.length)return false;var i=t.find(".tabdisabled");if(i.length)i.remove()},disableTab:function(e,t){if(e<0||e>=this.omnitabs.length)return;var n=$(this.omnitabs[e]),a=this,s,i,r;if(!n.length)return false;s=n.find(".tabdisabled");if(!s.length){s=$("<div/>").addClass("tabdisabled");s.addClass("taboverlay");s.appendTo(n)}var o=a.container.find("div.omnitabs-container");if(o.length){var l=o.position();var d=o.offset();s.css("left",l.left||d.left).css("top",l.top||d.top).css("width",n.actual("width")).css("height",n.actual("height")+14)}else{$(window).load(function(){var e=a.container.find("div.omnitabs-container"),t=e.position(),i=e.offset();s.css("left",t.left||i.left).css("top",t.top||i.top).css("width",n.actual("width")).css("height",n.actual("height")+14)})}if(t){i=n.find(".taboverlaytext");if(i.length){i.html(t)}else{r=$("<div/>").addClass("taboverlaytext").html(t);r.appendTo(s)}}},disableTab2:function(e,t){if(e<0||e>=this.omnitabs.length)return;var i=$(this.omnitabs[e]);if(!i.length)return false;var n=i.find(".tabdisabled");if(!n.length){var n=$("<div/>").addClass("tabdisabled");n.addClass("taboverlay");n.appendTo(i)}n.css("right",0).css("bottom",0);if(t){var a=i.find(".taboverlaytext");if(a.length){a.html(t)}else{var s=$("<div/>").addClass("taboverlaytext").html(t);s.appendTo(n)}}},isDisabled:function(){return this.container.hasClass("disabled")},hideTab:function(e){var t=$(this.omnitabsheader[e]);t.hide();t.removeClass("activetab");$(this.omnitabs[e]).hide()},showTab:function(e,t){if($(t).hasClass("ribbon-slider-bt")){return}this.fireEvent("tabclick",{target:this,element:t});if(!this.options.enableOnClick&&this.isDisabled())return;if(this.currentTab==e||e<0||e>=this.omnitabs.length)return;if(this.currentTab>=0){$(this.omnitabsheader[this.currentTab]).removeClass("activetab");$(this.omnitabs[this.currentTab]).hide()}$(this.omnitabsheader[e]).addClass("activetab");$(this.omnitabs[e]).show();this.lastTab=this.currentTab;this.currentTab=e;this.fireEvent("change",{tab:e,element:t})},showLastTab:function(){this.showTab(this.lastTab)}});var omRanges=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{input1Validation:{},inputButton:false,headerFunction:null,renderFunction:null,serializeFunction:null,deserializeFunction:null,sortable:false,selectable:false,addButton:true,deleteButton:true},data:[],initialize:function(e,t){this.setOptions(t);e=typeof e=="string"?"#"+e:e;this.container=$(e);this.container.addClass("omranges");this.lastSelectedItemID=null;this.reset();this.addRange({})},reset:function(e){if(this.options.headerFunction)this.options.headerFunction(this.container,this.options);this.valia=[];this.ul=$("<ul/>");this.messspan=$("<span/>");this.messspan.addClass("vl_message");this.ul.appendTo(this.container);this.messspan.appendTo(this.container);if(this.options.sortable){this.ul.sortable({helper:"clone"}).on("sortstop",this.onSortComplete.bind(this))}},onSortComplete:function(e){this.fireEvent("orderchange")},addRange:function(e,t,i){var n=$("<li/>"),a=this;var s=this.ul.find("li").length;if(this.options.renderFunction){this.options.renderFunction(n,e,this)}else{this.input1=$("<input/>").attr("type","text");this.input1.addClass("firstinput");if(this.options.input1Validation){var r=new LiveValidation(this.input1[0],{onInvalid:this.onInvalid.bind(this),onValid:this.onValid.bind(this)});for(var o=0;o<this.options.input1Validation.length;o++){if(!(s==0&&this.options.input1Validation[o].options.notFirst))r.add(this.options.input1Validation[o].func,this.options.input1Validation[o].options)}this.valia.push(r)}this.input2=$("<input/>").attr("type","text");this.input2.addClass("secondinput");if(this.options.input2Validation){var l=new LiveValidation(this.input2[0],{onInvalid:this.onInvalid.bind(this),onValid:this.onValid.bind(this)});for(var o=0;o<this.options.input2Validation.length;o++){if(!(s==0&&this.options.input1Validation[o].options.notFirst))l.add(this.options.input2Validation[o].func,this.options.input2Validation[o].options)}this.valia.push(l)}if(this.options.inputButton){this.inputval=$("<a/>").attr("href","javascript:;").attr("text","Change").attr("style","margin-right:10px;");this.inputval.click(function(){a.changeRange(n)})}else{this.inputval=$("<input/>").attr("type","text");this.inputval.addClass("valinput");if(this.options.input3Validation){var d=new LiveValidation(this.inputval[0],{onInvalid:this.onInvalid.bind(this),onValid:this.onValid.bind(this)});for(var o=0;o<this.options.input3Validation.length;o++){if(!(s==0&&this.options.input1Validation[o].options.notFirst))d.add(this.options.input3Validation[o].func,this.options.input3Validation[o].options)}this.valia.push(d)}}if(e){if(e.value1)this.input1.val(e.value1);if(e.value2)this.input2.val(e.value2);if(e.value3&&!this.options.inputButton)this.inputval.val(e.value3)}this.input1.appendTo(n);this.input2.appendTo(n);this.inputval.appendTo(n)}if(this.options.deleteButton&&(i&&!i.nodelete||!i)){var u=$("<div/>").attr("title",__("Delete"));u.addClass("deleteBt fa fa-times");u.click(function(){a.deleteRange(n)});u.appendTo(n)}if(this.options.addButton){var c=$("<div/>").attr("title",__("Add new"));c.addClass("addBt gc-icon-green-plus");c.click(function(){a.newRangeClick(n)});c.appendTo(n)}if(t){var h=this.getIndexByLi(t);if(h>=0){t.after(n)}}else{n.appendTo(this.ul)}n.data("data",e);if(this.options.sortable){}if(this.options.selectable){n.click(this.liClick.bind(this));n.css("cursor","pointer")}return n},setSelection:function(e){if(this.lastSelectedItemID)this.lastSelectedItemID.removeClass("selected");e.addClass("selected");this.lastSelectedItemID=e;this.fireEvent("itemclick",e)},liClick:function(e){if(e.target.get("tag")=="li"){this.setSelection(e.target)}},newRangeClick:function(e){var t=this.addRange({},e);this.fireEvent("newrange",t)},addRanges:function(e){for(var t=0;t<e.length;t++){this.addRange(e[t])}},changeRange:function(e){},deleteRange:function(e){var t=this.ul.find("li");if(t.length>1){var i=this.getIndexByLi(e);if(i>=0){var n=e.children();for(var a=0;a<n.length;a++){for(var s=0;s<this.valia.length;s++){if(this.valia[s].element==n[a])this.valia.splice(s,1)}}this.fireEvent("deleterange",{li:e,data:e.data("data"),target:this,last:false});e.remove()}}else if(t.length==1){this.fireEvent("deleterange",{li:e,data:e.data("data"),target:this,last:true})}},getLiParent:function(e){e=$(e);while(e&&e.prop("tagName").toLowerCase()!="li"){e=e.parent()}if(e)return e},getIndexByLi:function(e){var e=this.getLiParent(e);var t=this.ul.find("li");for(var i=0;i<t.length;i++){if($(t[i]).is(e)){return i}}return-1},setData:function(e,t){var i=this.getElement(e);if(i.length)i.data("data",t)},getData:function(e){var t=this.getElement(e);if(t.length)return t.data("data")},count:function(){return this.ul.find("li").length},getElement:function(e){var t=this.ul.find("li");if(e<0||e>=t.length)return null;return $(t[e])},serialize:function(){if(!this.options.serializeFunction)return;this.elements=this.ul.find("li");var i=[];$.each(this.elements,function(e,t){i.push(this.options.serializeFunction($(t),e))}.bind(this));return JSON.stringify(i)},deserialize:function(e){if(!e)return;this.removeAll();if(typeof e=="string")var t=$.parseJSON(e);else var t=e;if(!t)return;for(var i=0;i<t.length;i++){if(this.options.deserializeFunction)this.addRange(this.options.deserializeFunction(t[i]));else this.addRange(t[i])}},removeAll:function(){this.ul.empty();this.valia=[];this.messspan.html("")},onInvalid:function(e,t){if(e)e.addFieldClass();this.messspan.text(t)},onValid:function(e,t){if(e)e.addFieldClass();this.messspan.text("")},validate:function(){return LiveValidation.massValidate(this.valia)}});var omniList=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],getOptions:function(){return{multipleSelection:true,link:false,toggle:false,hover:true}},initialize:function(e){this.setOptions(this.getOptions(),e);this.data=null;this.container=null},populate:function(e,t){this.container=typeof e=="string"?$("#"+e):e;if(!this.container.length||this.container.prop("tagName").toLowerCase()!="select"||!t.data)return;if(!t.dontempty)this.container.empty();for(var i=0;i<t.data.length;i++){var n=t.field?t.data[i][t.field]:t.data[i];var a=t.fieldValue?t.data[i][t.fieldValue]:n;var s=false;for(var r=0;r<this.container[0].options.length;r++){if(this.container[0].options[r].value==n||t.filter&&t.filter.contains(n)){s=true;break}}if(!s||t.allowDuplicates){var o=$("<option/>");o.attr({value:a}).text(n);this.container.append(o);if(t.store)o.data("data",t.data[i])}}},clear:function(){this.data=null;if(this.container)this.container.empty()},embed:function(e,t){this.setOptions(this.getOptions(),t);this.container=typeof e=="string"?$("#"+e):e;if(!t.data)return;this.data=this.data&&t.dontempty?this.data.concat(t.data):t.data;this.container.empty();this.ul=$("<ul/>");this.ul.addClass("omnilist");this.ul.appendTo(this.container);for(var i=0;i<this.data.length;i++){var n=this.data[i];var a=$("<li/>");if(t.altering)a.addClass(i%2==0?"altrow":"");if(t.store)a.data(t.store,n[t.store]);if(t.link){var s=$("<a/>");s.addClass("gc-label")}var r=t.labelFunction?t.labelFunction(n,i):n[t.label];if(t.link){s.html(r)}else if(t.toggle){var s=$("<a/>").html(r);s.addClass("gc-label");var o=$("<div/>");o.addClass("checkbox");a.html("<div class='checkbox'></div><span class='gc-label'>"+r+"</span>")}else{a.html(r)}if(t.link&&t.onclick)s.on("click",t.onclick);if(t.link&&t.ondblclick)s.on("dblclick",t.ondblclick);if(t.link&&t.selection)s.on("click",this.onItemClick.bind(this));if(t.link)s.appendTo(a);if(t.hover){a.on("mouseover",this.onItemMouseOver.bind(this));a.on("mouseout",this.onItemMouseOut.bind(this))}if(t.toggle){a.on("click",this.onItemClick.bind(this))}a.data("index",i);a.appendTo(this.ul)}},selectByRow:function(e){this.ul.getChildren("li:nth-child("+e+")").each(function(e,t){e.addClass("selected");var i=e.getElement("div.checkbox");if(i)i.addClass("checked")})},selectAll:function(e){this.ul.getChildren().each(function(e,t){e.addClass("selected");var i=e.getElement("div.checkbox");if(i)i.addClass("checked")})},unselectAll:function(e){this.ul.getChildren().each(function(e,t){e.removeClass("selected");var i=e.getElement("div.checkbox");if(i)i.removeClass("checked")})},serialize:function(e){if(!e)return;var t=[];var i;var n=this.ul.find("li.selected");for(var a=0;a<n.length;a++){var s=this.options.data[$(n[a]).index()];i=null;i=e(s);t.push(i)}return t.join()},addItem:function(e){var t=$("<li/>");t.addClass("");var i=$("<a/>").html(e.name);i.addClass("gc-label");i.appendTo(t);t.appentTo(this.ul)},getLiByID:function(e){var t=this.ul.find("li");for(var i=0;i<t.length;i++){var n=$(t[i]);if(e==n.data("id"))return n}return null},getLiParent:function(e){var t=$(e);while(t&&t.prop("tagName").toLowerCase()!="li"){t=t.parent()}return t},onItemMouseOver:function(e){var t=this.getLiParent(e.target);t.addClass("hover")},onItemMouseOut:function(e){var t=this.getLiParent(e.target);t.removeClass("hover")},onItemClick:function(e){var t=this.getLiParent(e.target),i=t.data("index");if(!this.options.multipleSelection){t.parent().children().removeClass("selected")}if(this.options.toggle){var n=t.find("div.checkbox");if(t.hasClass("selected")){t.removeClass("selected");if(n)n.removeClass("checked")}else{t.addClass("selected");if(n)n.addClass("checked")}}else if(this.options.link&&this.options.selection){t.addClass("selected")}this.fireEvent("itemclick",{li:t,index:i})},onItemDblClick:function(e){if(e.target.id){var t={};t.grp=this.getLiParent(e.target).data("grp");t.id=e.target.id.substring(6);this.fireEvent("itemdblclick",t)}}});omnilist=new omniList;var omniEdit=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{},initialize:function(e,t){this.setOptions(this.options,t);e=typeof e=="string"?"#"+e:e;this.container=$(e);if(!this.container.length)return;this.input=$("<input/>").attr("maxlength",254);this.input.hide();this.input.addClass("inline");this.input.keyup(this.finishEditing.bind(this));this.input.blur(this.finishEditing.bind(this));this.text=$("<div/>");this.text.addClass("omniedit");this.container.empty();this.input.appendTo(this.container);this.text.appendTo(this.container);this.set(this.container.html());this.gotoEditBind=this.gotoEdit.bind(this);this.text.click(this.gotoEditBind)},gotoEdit:function(e){if(this.inlineeditmode)return;var t=this.text.text();var i=this.container.width();var n=i>30?i:30;var a=20;this.input.css("width",n).css("height",a);this.text.hide();this.input.val(t);this.input.show();this.input.focus();this.input.selectRange(0,t.length);this.inlineEditSafe={input:this.input,oldvalue:t};this.inlineeditmode=true},finishEditing:function(e){if(!this.inlineeditmode)return;if(e&&e.type=="keyup"&&e.keyCode!=13&&e.keyCode!=27)return;var t=e&&e.type=="keyup"&&e.keyCode==13?this.inlineEditSafe.input.val():this.inlineEditSafe.oldvalue;this.set(this.options.labelFunction?this.options.labelFunction(t):t);this.input.hide();this.text.show();if(e&&e.type=="keyup"&&e.keyCode==13&&this.inlineEditSafe.oldvalue!=this.container.html()){this.inlineEditSafe.newvalue=t;this.inlineEditSafe.target=this;this.fireEvent("editcomplete",this.inlineEditSafe)}this.inlineeditmode=false},isEdit:function(){return this.inlineeditmode},set:function(e){if(!this.text||!this.text.length)return;if(e&&e.length==0)e="&nbsp;";this.text.html(e)}});var omniInput=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{blurColor:"#BBBBBB",focusColor:"black",borderFocusColor:"#BBBBBB",borderOverColor:"#CCCCCC",borderOutColor:"#DDDDDD",forceInit:false,text:"",delayedChange:false,minimumLength:3,keyDelay:1e3},initialize:function(e,t){this.setOptions(this.options,t);var i=this;e=typeof e=="object"?e:$("#"+e);this.target=new giscloud.blja.Element({element:e});if(!this.target)return;this.target.addEvent("focus",this.clear.bind(this));this.target.addEvent("blur",function(){i.restore()});this.target.addEvent("mouseover",this.mouseOver.bind(this));this.target.addEvent("mouseout",this.mouseOut.bind(this));if(this.options.delayedChange){this.bindDelayFunc=this.fireEvent.bind(this,"delaychange",[{target:this.target,parent:this}]);this.target.addEvent("keyup",this.delayedchange.bind(this))}this.restore(this.options.forceInit)},delayedchange:function(e){if(this.delayFuncID)clearInterval(this.delayFuncID);var t=this.target.element.val();if(t.length>=this.options.minimumLength){this.delayFuncID=this.bindDelayFunc.delay(this.options.keyDelay,this)}},getValue:function(){return this.target.element.val()==this.options.text?"":this.target.element.val()},mouseOver:function(e){this.target.element.css("border-color",this.options.borderOverColor)},mouseOut:function(e){this.target.element.css("border-color",this.options.borderOutColor)},focus:function(e){this.clear();try{if(!e)this.fireEvent("focus",{parent:this,target:el});this.target.focus()}catch(e){}},clear:function(){var e=this.target.element;if(e.val()==this.options.text){e.val("");e.css("color",this.options.focusColor);this.fireEvent("clear",{parent:this,target:e})}this.target.element.css("border-color",this.options.borderFocusColor)},restore:function(e){var t=this.target;if(t.value==""||e){t.value=this.options.text;t.css("color",this.options.blurColor);this.target.element.blur();this.fireEvent("restore",{parent:this,target:t})}}});(function(){var a=null,p,v="",s="",c=[],n=-1,i=false,r=null,e=null,m=null,g=null,_=null,y,b,w;var M=[{title:gclang.fileman.filename,data:"name",width:"280px",editable:true,render:function(e,t,i){var n,a="";if(i.isSystem){if(i.mapDelete){a=__("The map or data collection project this folder was linked to has been deleted. Media files you collected within the deleted map or project are saved in this folder.")}else if(i.layerDelete){a=__("The layer this folder was linked to has been deleted. Media files you collected within the deleted layer are saved in this folder.")}n="<div title='"+a+"'>"+"<span class='pdRight10'><i class='fa fa-folder-o system-folder'></i><i class='fa fa-cog system-folder-child'></i></span>"+(i&&i.mappedName||e)+"</div>"}else if(i.type&&i.type.toUpperCase()==="DIRECTORY"){n="<i class='fa fa-folder-open pdRight5'></i>"+giscloud.xssSafe(e)}else if(i.type&&i.type.toUpperCase()==="FILE"){n="<i class='fa fa-file-text-o pdRight5'></i>"+giscloud.xssSafe(e)}else if(i.type===undefined&&i.name===".."){n="<i class='fa fa-folder-open-o pdRight5'></i>"+giscloud.xssSafe(e)}else{n="<i class='fa fa-file-text-o pdRight5'></i>"+giscloud.xssSafe(e)}return n}},{title:gclang.fileman.filesize,data:"size",width:120,sDefaultContent:""},{title:gclang.fileman.created,data:"created",width:100,class:"hidden-xs"},{title:gclang.fileman.type,data:"tip",width:80,class:"hidden-xs"},{data:"type",class:"hidden",sDefaultContent:""},{title:gclang.fileman.extension,data:"extension",sDefaultContent:"",class:"hidden"}];var k=[{title:gclang.dbman.table,data:"name",width:150,sDefaultContent:"",render:function(e){return giscloud.xssSafe(e)}},{title:gclang.dbman.schema,data:"schemaname",width:120,sDefaultContent:""},{title:gclang.general.owner,data:"username",dataType:"string",class:"hidden-xs",width:80,sDefaultContent:""},{title:"EPSG",data:"epsg",width:30,sDefaultContent:""},{title:"Type",data:"geometry",class:"hidden-xs",width:90,sDefaultContent:"",render:function(e,t,i){if(i.options&&i.options.length&&i.options.filter(e=>e.option_name==="H3").length){return"H3"}return"<span style='text-transform:capitalize;' >"+i.geometry?giscloud.xssSafe(i.geometry):""+"</span>"}},{title:gclang.dbman.count,data:"reccount",class:"hidden-xs",sDefaultContent:"",width:120}];var L=[{title:gclang.dbman.table,data:"name",sDefaultContent:"",width:350,render:function(e){return giscloud.xssSafe(e)}},{title:"EPSG",data:"srid",sDefaultContent:"",class:"hidden",width:80}];var S=[{title:"Tile Server",data:"tileserver",width:"100%",render:function(e){return giscloud.xssSafe(e)}},{data:"code",class:"hidden"}];var T=[{title:"Map",data:"name",sDefaultContent:"",width:180,render:function(e){return giscloud.xssSafe(e)}},{data:"id",sDefaultContent:"",class:"hidden"},{title:gclang.Accessed,data:"accessed",class:"hidden-xs",sDefaultContent:"",render:function(e,t,i){return i.accessed?jQuery.datepicker.formatDate("dd/mm/yy",new Date(i.accessed*1e3)):""},width:80},{title:gclang.Modified,data:"modified",class:"hidden-xs",sDefaultContent:"",render:function(e,t,i){return i.modified?jQuery.datepicker.formatDate("dd/mm/yy",new Date(i.modified*800)):""},width:80},{title:gclang.Created,data:"created",class:"hidden-xs",sDefaultContent:"",render:function(e,t,i){return i.created?jQuery.datepicker.formatDate("dd/mm/yy",new Date(i.created*800)):""},width:80},{title:gclang.Owner,data:"owner",class:"hidden-xs",sDefaultContent:"",render:function(e,t,i){return i.owner==user.id?"Me":i.share=="t"?"Public":"Other"},width:70}];var x=[{title:gclang.Name,data:"name",sDefaultContent:"",width:"300px",render:function(e){return giscloud.xssSafe(e)}},{title:gclang.Type,data:"type",class:"hidden-xs",sDefaultContent:"",width:"50px",render:function(e,t,i){switch(i.type*1){case 10:return"Table";case 40:return"WMS";case 50:return"TMS";case 70:return"WFS";case 80:return"WMTS"}return""}},{title:gclang.Owner,data:"owner_username",class:"hidden-xs",sDefaultContent:"",width:"60px",render:function(e,t,i){return i.owner_username==user.username?"You":i.owner_username}},{title:"EPSG",data:"epsg",width:"50px",sDefaultContent:""},{title:"ID",data:"id",sDefaultContent:"",class:"hidden"}];var t=new giscloud.blja.Class({Extends:omModule,pc:null,options:{url:fno.liveSite+"modules_gc/filemanager/cfilemanager.php",module:"filemanager",startupdir:null,multipleSelection:true,upload:true,selectmode:false,selectdirectory:false},initialize:function(e,t){var i=this,n,a,s,r,o,l,d,u,c,h,f;giscloud.maps.list({expand:"options"}).done(function(e){this.options.maps=e}.bind(this)).fail(function(e){console.log(e)}.bind(this));giscloud.layers.list({expand:"options"}).done(function(e){this.options.layers=e}.bind(this)).fail(function(e){console.log(e)}.bind(this));this.input_options=t;this.setOptions(this.options,e);this.sm_file_operation=null;this.GetCapabilitiesData=null;this.pc="#filemanager"+this.options.randid;this.options.mapOrLayerSystemFolders=[];a={module:"filemanager",task:"listdir"};if(this.input_options.foldersonly){a.onlydir=true}n=formManager.get("filemanager"+this.options.randid);s=n&&n.options&&n.options.data?n.options.data.extensions:null;if(s&&s.length){a.filter=s[0].ext}if(!p){y="file";r=$.cookie("gc_sourcebrowser_lastdir");if(this.options.startupdir!=null){a.path=this.options.startupdir}else if(r!=null)a.path=r;else if(y=="file"&&!g&&!_&&!m){a.path="/"}}if($(window).width()>480){f=350;if($(window).height()<700){f=$(window).height()-f+50}}o={url:this.options.url,columns:M,ajaxData:a,serverSide:false,paging:false,ordering:false,resizeColumns:true,searching:true,unSelect:true,height:f,rowSelectable:true,rowSelectableOpts:{singleRowSelect:!this.options.multipleSelection}};this.fm_table=new giscloud.ui.Datagrid("#filetable"+this.options.randid,o);this.fm_table.on("row-select."+this.fm_table.eventNamespace,this.fileTableClick.bind(this));this.fm_table.on("data-loaded."+this.fm_table.eventNamespace,this.onListDir.bind(this));this.fm_table.on("row-dblclick."+this.fm_table.eventNamespace,this.fileTableDblClick.bind(this));this.fm_table.on("column-data-edit-done."+this.fm_table.eventNamespace,this.fileTableEditChange.bind(this));this.fm_table.on("error-loading-data."+this.fm_table.eventNamespace,this.reloadRoot.bind(this));tableOptDb={columns:k,serverSide:false,paging:false,ordering:false,searching:true,processing:true,resizeColumns:true,unSelect:true,height:f,rowSelectable:true,rowSelectableOpts:{singleRowSelect:!this.options.multipleSelection}};this.db_table=new giscloud.ui.Datagrid("#db-table"+this.options.randid,tableOptDb);this.db_table.on("row-select."+this.db_table.eventNamespace,this.fileTableClick.bind(this));this.db_table.on("row-dblclick."+this.db_table.eventNamespace,this.fileTableDblClick.bind(this));d={columns:L,serverSide:false,url:"/rest/1/tables.json",ajaxType:"GET",paging:false,ordering:false,processing:true,resizeColumns:true,unSelect:true,searching:true,height:f,rowSelectable:true,rowSelectableOpts:{singleRowSelect:!this.options.multipleSelection}};this.pg_table=new giscloud.ui.Datagrid("#pg-table"+this.options.randid,d);this.pg_table.on("row-select."+this.pg_table.eventNamespace,this.fileTableClick.bind(this));this.pg_table.on("row-dblclick."+this.pg_table.eventNamespace,this.fileTableDblClick.bind(this));l={columns:x,url:"/rest/1/datasources.json",ajaxData:{type:70},perPage:10,ajaxType:"GET",serverSide:true,paging:true,processing:true,unSelect:true,resizeColumns:true,ordering:false,searching:false,height:f+60,rowSelectable:true,rowSelectableOpts:{singleRowSelect:!this.options.multipleSelection}};this.ds_table=new giscloud.ui.Datagrid("#ds-table"+this.options.randid,l);this.ds_table.on("row-select."+this.ds_table.eventNamespace,this.fileTableClick.bind(this));this.ds_table.on("row-dblclick."+this.ds_table.eventNamespace,this.fileTableDblClick.bind(this));c={columns:S,serverSide:false,paging:false,ordering:false,searching:true,unSelect:true,height:f,rowSelectable:true,rowSelectableOpts:{singleRowSelect:!this.options.multipleSelection}};this.tms_table=new giscloud.ui.Datagrid("#tms-table"+this.options.randid,c);this.tms_table.on("row-select."+this.tms_table.eventNamespace,this.fileTableClick.bind(this));this.tms_table.on("row-dblclick."+this.tms_table.eventNamespace,this.fileTableDblClick.bind(this));h={columns:T,ajaxData:{type:"private,shared"},url:"/rest/1/maps.json",orginalOrderBy:"created:desc",perPage:10,ajaxType:"GET",serverSide:true,paging:true,unSelect:true,resizeColumns:true,ordering:false,searching:false,height:f?f+100:null,skipInitAjaxCall:true,rowSelectable:true,rowSelectableOpts:{singleRowSelect:!this.options.multipleSelection}};this.gcmap_table=new giscloud.ui.Datagrid("#gcmap-table"+this.options.randid,h);this.gcmap_table.on("row-select."+this.gcmap_table.eventNamespace,this.fileTableClick.bind(this));this.gcmap_table.on("row-dblclick."+this.gcmap_table.eventNamespace,this.fileTableDblClick.bind(this));this.select_bt=$(this.pc+" .gc-src-browser-select");this.cancel_bt=$(this.pc+" .gc-src-browser-cancel");if($("#fm_pg_tablename"+this.options.randid).length){this.tableNameVal=new LiveValidation("fm_pg_tablename"+this.options.randid);this.tableNameVal.add(Validate.Format,{pattern:/^(([_a-zA-Z])([_a-zA-Z0-9])*)$/i});this.tableNameVal.add(Validate.Presence);this.tableNameVal.add(Validate.Length,{minimum:1,maximum:30})}this.registerMenuEvent();if(!e.nofiles){this.insertType({text:gclang.fileman.filesystem,active:true,data:{files:true}});$(this.pc+" .fm_checkallbt").on("click",this.onCheckAllClick.bind(this));$(this.pc+" .fm_newfolderbt").on("click",this.onNewFolderClick.bind(this));$(this.pc+" .fm_newfilebt").on("click",this.onNewFileClick.bind(this));$(this.pc+" .fm_edittextfilebt").on("click",this.onEditTextFileClick.bind(this));$(this.pc+" .fm_copytobt").on("click",this.onCopyToClick.bind(this));$(this.pc+" .fm_movebt").on("click",this.onMoveClick.bind(this));$(this.pc+" .fm_duplicatebt").on("click",this.onDuplicateClick.bind(this));$(this.pc+" .fm_delfilesbt").on("click",this.deleteFiles.bind(this));$(this.pc+" .fm_editfolderbt").on("click",this.onEditFolderClick.bind(this));$(this.pc+" .fm_edit_structure_bt").on("click",this.onEditStructureClick.bind(this));$(this.pc+" .fm_downloadbt").on("click",this.onDownloadClick.bind(this));$(this.pc+" .fm_unzipbt").on("click",this.onUnzipClick.bind(this));$(this.pc+" .fm_refreshdirectorybt").on("click",this.refreshFiles.bind(this));$(this.pc+" .fm_filterinput").on("keyup",this.onExtFilterChange.bind(this));$(this.pc+" .fm_filterinput").on("focus",this.clearFilter.bind(this));$(this.pc+" .fm_filterinput").on("blur",this.restoreFilter.bind(this));if(s)omnilist.populate($(this.pc+" .sourcebrowser_filetype"),{data:s,field:"label",fieldValue:"ext"});$(this.pc+" .sourcebrowser_filetype").on("change",this.changeFileType.bind(this));if(this.options.upload){$(this.pc+" .fm_uploadbt").on("click",this.showUploadForm.bind(this));if(fno.remote_download)$(this.pc+" .fm_remotebt").on("click",this.showUploadRemoteForm.bind(this));if(fno.geocommons)$(this.pc+" .fm_geocommbt").on("click",this.showGeocommonsForm.bind(this))}}},reloadRoot:function(){this.fm_table.refreshData({module:"filemanager",task:"listdir",path:"/"});if($.cookie("gc_sourcebrowser_lastdir")){$.cookie("gc_sourcebrowser_lastdir","")}},selectNode:function(e,t){var i=e.nodes;for(var n=0;n<i.length;n++){if(i[n].nodes.length>0)if(this.selectNode(i[n],t))return true;if(i[n].data.path==t){a=i[n];this.fileTreeObj.select(i[n]);return true}}return false},getConnID:function(){return parseInt($(this.pc+" .sf_pgdb_connmenu .dbf_conn_sl").val())},getShortUserPath:function(e){if(!e)return null;return e.substr(e.indexOf("resources/")+42)},getRelativeDir:function(){return this.getShortUserPath(v)},el:function(e){return $(this.pc+" ."+e)},showLoader:function(e){},hideLoader:function(e){},hide:function(e){return $(this.pc+" ."+e).hide()},show:function(e){return $(this.pc+" ."+e).show()},getData:function(){var e=[];switch(y){case"file":e=this.fm_table.getSelected().data;break;case"postgis":e=this.db_table.getSelected().data;if(e.length===0){e=this.pg_table.getSelected().data}break;case"gcmap":e=this.gcmap_table.getSelected().data;break;case"datasources":e=this.ds_table.getSelected().data;break;case"tile":e=this.tms_table.getSelected().data;break}return e},onSelectFiles:function(){var n=[];var e=this.getData();var a={};var s=this;a.type=y;if(!this.input_options.createmode){if(e.length==0&&y!="mapbox"&&(w&&w.options.sm_file_operation&&w.options.sm_file_operation!=="mv")){giscloud.ui.alert.color("red").show(__("Please select a source"),4e3);return}if(y==="mapbox"){this.showLoader();var t=window.setTimeout(function(){this.hideLoader();giscloud.ui.alert.color("red").show(__("Invalid data! Please try again"),4e3)},4e3);$.ajax({url:this.el("mapbox_source_url").val(),dataType:"jsonp",jsonpCallback:"grid",error:function(){window.clearTimeout(t);this.hideLoader();giscloud.ui.alert.color("red").show(__("Invalid data! Please try again"),4e3)},success:function(e){window.clearTimeout(t);this.hideLoader();if(!e.tiles||!e.tilejson){giscloud.ui.alert.color("red").show(__("Invalid data! Please try again"),4e3);return}if(e.grids)e.grids=null;e.attribution="MapBox "+e.attribution;e.type="tile";e.src="tilejson";formManager.close("filemanager"+this.options.randid,{files:[e],type:y,skipform:_})}});return}}if(this.input_options.createmode){switch(y){case"file":a.name=this.el("sourcebrowser_filename").val();if(!(a.name.length>0)){giscloud.ui.alert.color("red").show(__("Please write down the filename"),4e3);return}var i=this.el("sourcebrowser_filetype").val();a.filetype=i;if(!(a.name.indexOf(".")>0)){var r=i.indexOf(",");if(r>0){i=i.substring(0,r)}a.name=i?a.name+"."+i:a.name;a.filetype=i}var o=v.indexOf("resources/");a.path=o>0?v.substr(o+9)+"/"+a.name:"/"+a.name;break;case"postgis":if(!LiveValidation.massValidate([this.tableNameVal])){return}a.name=$("#fm_pg_tablename"+this.options.randid).val();a.connid=this.getConnID();if(!a.schemaname)a.schemaname="usrsch"+user.id;break}n.push(a)}else{var l,d,u,c;if(y=="file"){l=this.el("sourcebrowser_filename").val();l=l?l.split(","):l}if(e.length>0){for(var h=0;h<e.length;h++){var a=e[h];if(a.type&&!a.datasource_type)a.datasource_type=a.type;a.type=y;if(a.type&&a.type.toUpperCase()=="DIRECTORY"&&!this.options.selectdirectory){giscloud.ui.alert.color("red").show(__("You can not select directory as data source"),4e3);return}switch(y){case"file":if(a.name=="..")continue;a.name=l[h].trim();var o=v.indexOf("resources/");a.path=o>0?v.substr(o+9)+"/"+a.name:"/"+a.name;a.relpath=this.getShortUserPath("resources"+a.path);break;case"postgis":a.connid=this.getConnID();if(!a.schemaname)a.schemaname="usrsch"+user.id;break;case"wms":a.style=b?b:"default";a.srs=this.el("sf_proj").val();if(!a.srs){giscloud.ui.alert.color("red").show(__("Can not determine WMS projection"),4e3);return}a.epsg=a.srs.substr(a.srs.lastIndexOf(":")+1)*1;a.url=this.GetCapabilitiesData.getmapurl;a.bound=giscloud.wms.getWMSBound(a.srs,a,this.GetCapabilitiesData);if(a.bound&&a.bound.tile0)a.tile0=a.bound.tile0;break;case"tile":break;case"gcmap":var f=new $.Deferred;giscloud.layers.byMapId(parseInt(a.id)).done(function(e){var i=0;$.each(e,function(e,t){if(t.type==="giscloud"){f.reject();i=1;return false}});if(i===0){f.resolve()}});return f.done(function(e){n.push(a);if(y=="file")Cookie.write("gc_sourcebrowser_lastdir",v);var t=s.el("fm_skipform_cb");var i=t.length&&t.is(":checked")?true:false;formManager.close("filemanager"+s.options.randid,{files:n,type:y,skipform:i});return true}).fail(function(e){giscloud.ui.redAlert(gclang.You_are_not_allowed_to_add_this_map_this_map_already_has_a_map,3e3);return false});break}n.push(a)}}else if(w&&w.options.sm_file_operation&&w.options.sm_file_operation=="mv"){a.type=y;a.name="";var o=v.indexOf("resources/");n.push(a)}else if(e.length===0&&l.length===1){a.type=y;a.name=l[0];var o=v.indexOf("resources/");a.path=o>0?v.substr(o+9)+"/"+a.name:"/"+a.name;n.push(a)}}if(y=="file"){var p=this.input_options.foldersonly;var m=n.filter(function(e){return p?e.datasource_type==="directory":e.datasource_type!=="directory"});if(m.length===0){giscloud.ui.alert.red().show("Please select file(s)",2e3);return}}if(y=="file")Cookie.write("gc_sourcebrowser_lastdir",v);var g=this.el("fm_skipform_cb");var _=g.length&&g.is(":checked")?true:false;formManager.close("filemanager"+this.options.randid,{files:n,type:y,skipform:_})},changeFileType:function(e){formManager.get("filemanager"+this.options.randid).options.data.extensions=e.target.value;this.refreshFiles()},onListDir:function(e,t){this.populateTree(t)},populateTree:function(e){var t;var i=false;this.onLoadFiles(e)},renameMapsAndLayers:function(i){var n=this.options,a,s,r,o,e=i.data,l;e.forEach(function(t,e){a=t.name.match(/^map_\d+$/);r=t.name.match(/^layer_\d+$/);l=this.getRelativeDir()+"/"+t.name;if(t.isSystem&&i.dir.match("Collected Media")&&(a||r)&&!this.options.mapOrLayerSystemFolders.includes(l)){this.options.mapOrLayerSystemFolders.push(l);if(a){s=n.maps&&n.maps.filter(function(e){return e.id===parseInt(t.name.split("_")[1])})[0];if(s){i.data[e].mapId=s&&s.id;i.data[e].mappedName=i.data[e].mappedName||s&&s.name}else{i.data[e].mapDelete=true}}else{o=n.layers&&n.layers.filter(function(e){return e.id===t.name.split("_")[1]})[0];if(o){i.data[e].layerId=o&&o.id;i.data[e].mappedName=i.data[e].mappedName||o&&o.name}else{i.data[e].layerDelete=true}}}}.bind(this));this.fm_table.setData(i.data)},onLoadFiles:function(e){var t=e.data,i;v=t.dir;i=this.getRelativeDir()||"/";if(giscloud.ui.upload&&giscloud.ui.upload.initialized){giscloud.ui.upload.options.uploadDir=i;formManager.get("uploadform").options.data.uploadDir=i;giscloud.ui.upload.path(i)}this.renameMapsAndLayers.call(this,t);if(this.input_options.foldersonly&&t.data&&t.data.length){t.data=$.grep(t.data,function(e,t){return e.type=="directory"||e.name==".."})}this.el("currentdirmsg").val(this.getShortUserPath(t.dir));n=-1},listDir:function(e,t){if(this.options.no_file_browsing&&e!=this.options.startupdir){return}y="file";var i={};if(e&&e.length>0)i.path=e;if(t)i.onlydir=true;var n=$(this.pc+" .fm_filterinput").val();var a=$(this.pc+" .sourcebrowser_filetype").val();if(a)i.filter=a;i.module="filemanager";i.task="listdir";this.fm_table.refreshData(i)},refreshFiles:function(){r=null;i=true;var e={};var t=$(this.pc+" .sourcebrowser_filetype").val();e.filter=t;e.module="filemanager";e.task="listdir";this.el("sourcebrowser_filename").val("");this.fm_table.refreshData(e)},fileTableDblClick:function(e,t){var t=t.data;if(y=="file"&&t.type&&t.type.toUpperCase()==="DIRECTORY"||y=="file"&&t.name===".."){var i=t.path!=null?t.path:v+"/"+t.name;this.listDir(i,false);return}if(this.options.selectmode){if(y=="file"){if(t.tip!==undefined)this.onSelectFiles()}else{this.onSelectFiles()}}},fileTableClick:function(e,t){var i=t.allSelectedData;var n=[];for(var a=0;a<i.length;a++){n.push(i[a].name)}switch(y){case"file":$(this.pc+" .sourcebrowser_filename").val(n.join(", "));break;case"postgis":if($("#fm_pg_tablename"+this.options.randid).length>0){$("#fm_pg_tablename"+this.options.randid).val(n.join(", "))}break;case"wms":omnilist.populate($(this.pc+" .sf_proj"),{data:seldata.srs,dontempty:true});break}},onCheckAllClick:function(){this.fm_table.selectAll();var e=this.fm_table.getSelected().data,t=this.fm_table.dataTableObj.find("tbody tr.selected"),i=0,n,a,s=[];for(a in e){if(e[a].name==".."){delete this.fm_table.getSelected().data[a]}else{s.push(e[a].name)}}if(t[i]){n=$(t[i]).find("td");if(n[0]&&$(n[0]).text()==".."){$(t[i]).removeClass("selected")}}$(this.pc+" .sourcebrowser_filename").val(s.join(", "))},onDownloadClick:function(e){var t=new Array,i,n,a=this.fm_table.getSelected().data;for(i=0;i<a.length;i++){if(a[i].type&&a[i].type.toLowerCase()=="directory"){giscloud.ui.alert.color("red").show(__("Folder download is not supported yet"),4e3);return}n=a[i].name;if(n!=="..")t.push(n)}if(t.length==0){giscloud.ui.alert.color("red").show(__("Please select files first"),4e3);return}var s=this.getRelativeDir();s=s?s:"/";if(t.length>50){giscloud.ui.alert.color("red").show(__("You can not download more than 50 files at once"),4e3);return}if(t.length>10&&!confirm("You are about to download "+t.length+" files. Do you want to continue?")){return}for(i=0;i<t.length;i++){giscloud.files.byPath(s+"/"+t[i]).done(function(e){if(e&&e.id){var t="/rest/1/files/"+e.id+".download";$.fileDownload(t).fail(function(){giscloud.ui.alert.red().show(gclang.errorMsgwithMail,1e4)})}}).fail(function(){giscloud.ui.alert.red().show(gclang.errorMsgwithMail,1e4)})}},onUnzipClick:function(e){var t=new Array,i,n,a=this.fm_table.getSelected().data;for(i=0;i<a.length;i++){n=a[i].name;if(n!=="..")t.push(n)}if(t.length==0){giscloud.ui.alert.color("red").show(__("Please select files first"),4e3);return}var s=this.getRelativeDir();s=s?s:"/";for(i=0;i<t.length;i++){var r="storage/fs"+s+"/"+t[i]+"/unzip";om.rest(r,null,this.onUnzipComplete.bind(this))}},onUnzipComplete:function(e){if(gcapp.check_subscription)gcapp.check_subscription();this.refreshFiles()},onEditStructureClick:function(e){var t=this.fm_table.getSelected().data;if(t.length!==1){om.showMessage("Please select one item.");return}if(t[0].name===".."){om.showMessage('Cannot edit ".."');return}if(t[0].type==="directory"){om.showMessage("Please select a file");return}if(!t||t.length==0){giscloud.ui.alert.color("red").show(__("Please select vector file first"),4e3);return}openEditStructureForm(t.name,this.getRelativeDir().substr(1)+"/"+t[0].name)},onEditFolderClick:function(e){var t=this.fm_table.getSelected(0),i=t.data,n=this.fm_table.getSelected().data,a=this.getRelativeDir(),s=this.options.mapOrLayerSystemFolders,r="map",o,l=[],d,u,c,h;if(!i||i.length==0){giscloud.ui.alert.color("red").show(gclang.fileman.rename_noselection_alert,4e3);return}if(n.length!==1){om.showMessage("Please select one item.");return}if(n[0].name===".."){om.showMessage('Cannot rename ".."');return}for(o=0;o<n.length;o++){u=n[o];c=u.rights;if(c&&!c.canMove){if(c.canCreate||c.canDelete){d=true}u.isSystem&&l.push(u)}}if(l.length>0){if(d){if(u.name&&u.name.match(/^map_\d+$/)){if(u.mappedName&&u.mappedName.startsWith("MDC:")){r="project"}giscloud.ui.confirm("<span style='white-space:initial;'>"+__("This folder is linked to your '"+u.mappedName+"' "+r+", to rename it, go to '"+u.mappedName+"' "+r+" and rename the "+r+".")+"</span>",{yes_title:__("Got it"),hide_no:true});return}giscloud.ui.alert.color("red").show(__("This is a system folder and as such, it cannot be renamed."),4e3)}giscloud.ui.alert.color("red").show(__("This is a system folder. As such it cannot be deleted, renamed or moved."),4e3);return}h=s.includes(a);if(h){giscloud.ui.confirm("<span style='white-space:initial;'>"+__("If this media file is linked to a specific feature on a map, renaming this media file will sever the link. As a result, you will no longer be able to access this media through feature attributes. Continue?")+"</span>",{yes_title:__("Rename"),no_title:__("Cancel")}).yes(function(){this.continueWithEditFolderClick(t)}.bind(this));return}this.continueWithEditFolderClick(t)},continueWithEditFolderClick:function(e){var t=this.fm_table.editInline(e.jqEls,true);var i=t.find("input").val();if(i==".."||i=="/"){this.fm_table.finishEditInline();return}var n=i.indexOf(".");if(n==-1)n=i.length;if(n>0){var a=t.find("input").get(0);if(typeof a.selectionStart!==undefined){a.selectionStart=0;a.selectionEnd=n}else if(document.selection&&document.selection.createRange){a.select();var s=document.selection.createRange();s.collapse(true);s.moveEnd("character",n);s.moveStart("character",0);s.select()}}t.find("input").focus()},onEditTextFileClick:function(e){var t=this.fm_table.getSelected(),i,n=[],a,s=this.getRelativeDir(),r=this;s=s?s:"/";if(!t||t.data.length==0){giscloud.ui.alert.color("red").show(gclang.fileman.select_items_first,4e3);return}if(t.data.length>10){giscloud.ui.alert.color("red").show(__("You can not open more than 10 files at once"),4e3);return}for(a=0;a<t.data.length;a++){var i=t.data[a];if(i.type&&i.type.toUpperCase()==="DIRECTORY"||i.name===".."){om.showMessage("Please select a file.");return}i.path=s;i.relpath=s+"/"+i.name;i.filename=i.name;n.push(i)}giscloud.ui.fullScreen({url:"/filemanager/editor",class:"no-padding above-window",id:"file_editor",data:n}).done(function(){$("body").find(this.pc+" .file_editor .gc-full-page-content").on("closing.fullpage",function(){r.refreshFiles()})})},getValidationExp:function(){return/[\0\/\\]/},getMsg:function(e){var t=gclang.errorMsgwithMail;if(e.tip.trim().toUpperCase()==="FILE"){t=gclang.fileExist}else if(e.tip.trim().toUpperCase()==="DIRECTORY"){t=gclang.folderExist}return t},onNewFileClick:function(e){var t=null,i=this.getRelativeDir(),n;if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}if(t=prompt(gclang.promptEnterValidFileName)){giscloud.ui.alert.red().hide();if(this.fm_table.searchData(t).length>0){giscloud.ui.alert.red(this.getMsg(this.fm_table.searchData(t)[0]),5e3).show();return}if(t===undefined||t===""){giscloud.ui.alert.red(gclang.fileNameReq,5e3).show();return}if(this.getValidationExp().test(t)){giscloud.ui.alert.red(gclang.invalidFileName,5e3).show();return}i=i?i:"";giscloud.storage.fs.create(i,{filename:t}).done($.proxy(function(e){giscloud.ui.alert.green(gclang.fileCreated,5e3).show();this.refreshFiles()},this)).fail(function(){giscloud.ui.alert.red(gclang.errorMsgwithMail,5e3).show()})}},onNewFolderClick:function(e){var t=null,i,n,a,s=[];if(t=prompt(gclang.promptEnterValidFolderName)){giscloud.ui.alert.red().hide();i=this.fm_table.searchData(t);if(i.length>0){for(a=0;a<i.length;a++){i[a].isSystem&&s.push(i[a])}if(s.length>0){giscloud.ui.alert.color("red").show(__("Folder named '")+t+__("' already exists in File Manager as a system folder. Please choose a different name."),4e3);return}else{giscloud.ui.alert.red(this.getMsg(this.fm_table.searchData(t)[0]),5e3).show();return}}if(t===undefined||t===""){giscloud.ui.alert.red(gclang.FolderNameReq,5e3).show();return}if(this.getValidationExp().test(t)){giscloud.ui.alert.red(gclang.invalidFolderName,5e3).show();return}n={module:this.options.module,task:"mkdir",path:v,newname:t};this.call(n,"createfolder",this.onCreateFolderComplete.bind(this))}},onCreateFolderComplete:function(e){if(e.result=="yes"){om.showConfirm(e.msg);i=true;this.fm_table.refreshData()}else{giscloud.ui.alert.color("red").show(e.msg,4e3)}},deleteFiles:function(e){var t=new Array;var i=this.fm_table.getSelected().data,n=this.getRelativeDir(),a=[],s=[],r;for(var o=0;o<i.length;o++){var l=i[o],d=l.rights,u=l.name,c=l.name.indexOf("map_")===0||l.name.indexOf("layer_")===0;if(d&&!d.canDelete){if(d.canCreate||d.canMove){r=true}l.isSystem&&a.push(l)}if(!d||d.canDelete){l.isSystem&&c&&s.push(l)}if(u!=="..")t.push(u)}if(t.length==0){giscloud.ui.alert.color("red").show(gclang.fileman.select_files_before_delete,4e3);return}if(confirm(gclang.fileman.delete_confirm_1+" "+t.length+" "+gclang.fileman.delete_confirm_2)){var h={module:this.options.module,task:"deletefiles",files:JSON.stringify(t),path:v},f=this.options.mapOrLayerSystemFolders.includes(n);if(a.length>0){if(r){giscloud.ui.alert.color("red").show(__("This is a system folder and as such, it cannot be deleted."),4e3)}else{giscloud.ui.alert.color("red").show(__("This is a system folder. As such it cannot be deleted, renamed or moved."),4e3)}return}else if(s.length>0){giscloud.ui.confirm("<span style='white-space:initial;'>"+__("If media files in this folder are linked to features on a map, deleting this folder will sever the link. As a result, you will no longer be able to access media from this folder through feature attributes or in File Manager. Continue?")+"</span>",{yes_title:__("Delete"),no_title:__("Cancel")}).yes(function(){this.call(h,"deletefiles",this.onDeleteFilesComplete.bind(this,h))}.bind(this));return}else if(f){giscloud.ui.confirm("<span style='white-space:initial;'>"+__("If this media file is linked to a specific feature on a map, deleting this media file will sever the link. As a result, you will no longer be able to access this media through feature attributes and in File Manager. Continue?")+"</span>",{yes_title:__("Delete"),no_title:__("Cancel")}).yes(function(){this.call(h,"deletefiles",this.onDeleteFilesComplete.bind(this,h))}.bind(this));return}this.call(h,"deletefiles",this.onDeleteFilesComplete.bind(this,h))}},onDeleteFilesComplete:function(e,t){if(t.result=="no"){giscloud.ui.alert.color("red").show(t.msg,4e3)}else{om.showConfirm(t.msg);giscloud.log.push("remove_file_from_storage",{username:user.username,files:e.files,path:e.path})}if(gcapp.check_subscription)gcapp.check_subscription();i=true;this.listDir(v)},sf_onRenameComplete:function(e){if(!e)return;if(e.result=="yes"){if(gcapp.check_subscription)gcapp.check_subscription();om.showConfirm(e.msg)}else{giscloud.ui.alert.color("red").show(e.msg,4e3)}this.refreshFiles()},fileTableEditChange:function(e,t){var i=t.newValue,n,a;giscloud.ui.alert.red().hide();if(i===undefined||i===""||this.fm_table.searchData(i).length>0){if(i===undefined||i===""){a=t.rowData.tip.trim().toUpperCase()==="FILE"?gclang.fileNameReq:gclang.FolderNameReq}else{a=this.getMsg(this.fm_table.searchData(i)[0])}giscloud.ui.alert.red(a,5e3).show();return false}if(this.getValidationExp().test(i)){giscloud.ui.alert.red(gclang.invalidFileName,5e3).show();return false}if(t.orgValue===i){this.refreshFiles();return false}n={module:this.options.module,task:"rename",source:v+"/"+t.orgValue,newname:i};giscloud.log.push("rename_file_in_file_manager",{username:user.username,source:n.source,newname:n.newname});this.call(n,"rename",this.sf_onRenameComplete.bind(this))},sm_onDuplicateComplete:function(e){if(!e)return;if(e.result=="yes"){if(gcapp.check_subscription)gcapp.check_subscription();om.showConfirm(e.msg);this.refreshFiles()}else{giscloud.ui.alert.color("red").show(e.msg,4e3)}},onDuplicateClick:function(e){var t=this.fm_table.getSelected(),i=[],n;if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}if(!t||t.data.length==0){giscloud.ui.alert.color("red").show(gclang.fileman.select_items_first,4e3);return}t=t.data;for(var a=0;a<t.length;a++){if(t[a].name!==".."){n=v+"/"+t[a].name;i.push(n)}else{om.showMessage('Cannot duplicate ".."')}}if(i.length>0){t={module:this.options.module,task:"duplicate",files:JSON.stringify(i)};this.call(t,"duplicate",this.sm_onDuplicateComplete.bind(this))}},onCopyToClick:function(e){this.sm_file_operation="cp";this.sm_onFileOperation(e)},onMoveClick:function(e){this.sm_file_operation="mv";this.sm_onFileOperation(e)},sm_onMoveComplete:function(e){if(!e)return;c=[];if(e.result=="yes"){if(gcapp.check_subscription)gcapp.check_subscription();om.showConfirm(e.msg);this.refreshFiles()}else{giscloud.ui.alert.color("red").show(e.msg,4e3)}},sm_onMoveFolderTreeClose:function(e){if(e&&e.files&&e.files.length>0){var t=[];for(var i=0;i<c.length;i++){t.push(c[i].path)}for(var i=0;i<e.files.length;i++){var n=v+"/"+e.files[i].name||"";if(n.slice(-1)!=="/"&&e.files[i].datasource_type==="directory"){n=n+"/"}var a={module:this.options.module,task:"copy",files:JSON.stringify(t),destination:n,operation:this.sm_file_operation};this.call(a,"copy",this.sm_onMoveComplete.bind(this))}}v=s;this.listDir(v,false)},sm_onFileOperation:function(e){var t=this.fm_table.getSelected(),i=this.getRelativeDir(),n=this.options.mapOrLayerSystemFolders,a,s=[],r,o,l,d;if(!t||t.data.length===0){giscloud.ui.alert.color("red").show(gclang.fileman.select_items_first,4e3);return}t=t.data;c=[];for(var u=0;u<t.length;u++){o=t[u];l=o.rights;a=$.extend({},o);if(l&&!l.canMove){if(l.canCreate||l.canDelete){r=true}o.isSystem&&s.push(o)}if(a.name!==".."){$.extend(a,{path:v+"/"+a.name});c.push(a)}else{om.showMessage('Cannot move ".."')}}if(c.length==0){return}d=n.includes(i);if(s.length>0){if(r){giscloud.ui.alert.color("red").show(__("This is a system folder and as such, it cannot be moved."),4e3)}else{giscloud.ui.alert.color("red").show(__("This is a system folder. As such it cannot be deleted, renamed or moved."),4e3)}return}else if(d){giscloud.ui.confirm("<span style='white-space:initial;'>"+__("If this media file is linked to a specific feature on a map, moving this media file will sever the link. As a result, you will no longer be able to access this media through feature attributes. Continue to move?")+"</span>",{yes_title:__("Move"),no_title:__("Cancel")}).yes(function(){this.sm_continueWithFileOperation()}.bind(this));return}this.sm_continueWithFileOperation()},sm_continueWithFileOperation:function(){w=formManager.fileBrowser({singlemode:true,selectmode:true,foldersOnly:true,title:gclang.fileman.browse_for_folder,toolbar:false,selectdirectory:true});w.setOptions({sm_file_operation:"mv"});s=v;w.addEvent("close",this.sm_onMoveFolderTreeClose.bind(this))},onExtFilterChange:function(e){if(y==="file"){this.fm_table.filterView($(e.target).val())}else if(y==="postgis"){this.db_table.filterView($(e.target).val())}},clearFilter:function(e){var t=$(e.target);if(t.val()=="filter..."){t.val("")}},restoreFilter:function(e){var t=$(e.target);if(t.val()==""){t.val("filter...")}},showUploadForm:function(){if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}this.uploadform=formManager.fileUpload({uploadDir:$(this.pc+" .currentdirmsg").val()});this.uploadform.addEvent("close",this.onUploadFormClose.bind(this))},showUploadRemoteForm:function(){this.uploadform=formManager.fileRemoteUpload({uploadDir:$(this.pc+" .currentdirmsg").val()});this.uploadform.addEvent("close",this.onUploadFormClose.bind(this))},showGeocommonsForm:function(){},onUploadFormClose:function(){if(formManager.isOpen("filemanager"+this.options.randid)){if(gcapp.check_subscription)gcapp.check_subscription();this.refreshFiles()}}});window.omniDataSourceBrowser=new giscloud.blja.Class({Extends:t,options:{url:fno.liveSite+"modules_gc/filemanager/cfilemanager.php",module:"filemanager",startupdir:null,multipleSelection:true,upload:true,selectmode:false},initialize:function(e,t){var i=this;this.parent(e,t);if(this.input_options.postgis){this.dbmf_module2=new gcPostGISConnectionsForm({id:this.pc+" .sf_pgdb_connmenu",hideLocal:this.input_options.postgisHideLocal});this.dbmf_module2.addEvent("loadtables",this.onLoadPostGISLayers_fm.bind(this));this.dbmf_module2.addEvent("changeconnection",function(e){if(e.connid==-1){i.loadPostGISLayers_fm();e.preventDefault=true}});if($(this.pc+" .fm_pg_non_spatial").length)$(this.pc+" .fm_pg_non_spatial").on("change",this.loadPostGISLayers_fm.bind(this));m=this.insertType({text:__("Database"),data:{postgis:true,populate:true}});$(this.pc+" .fm_pg_filter").on("keyup",this.onExtFilterChange.bind(this));$(this.pc+" .fm_pg_filter").on("focus",this.clearFilter.bind(this));$(this.pc+" .fm_pg_filter").on("blur",this.restoreFilter.bind(this));if(this.options.nofiles){this.sf_showPostGIS()}}if(this.input_options.wms){this.insertType({text:"Web Feature Service",data:{datasources:true,type:70}});this.insertType({text:"Web Map Service",data:{datasources:true,type:40}});this.insertType({text:"Web Map Tile Service",data:{datasources:true,type:80}})}if(this.input_options.tms){_=this.insertType({text:"Tile Map Service",data:{tile:true,populate:true}})}if(this.input_options.mobile){_=this.insertType({text:"Mobile Data Collection",data:{mobile:true,populate:true}})}if(this.input_options.gcmap){gcmapRoot=this.insertType({text:"GIS Cloud Maps",data:{gcmap:true,populate:true}})}if(this.input_options.arcmap){this.insertType({text:"Esri ArcMap",data:{arcMap:true}})}if(this.input_options.datasources){this.insertType({text:__("Datasources"),data:{datasources:true}})}if(this.input_options.open_upload_form){this.showUploadForm()}this.hideMenuIf();this.setActiveItemIf()},hideMenuIf:function(){var e=$(this.pc+" #source_type_menu-xs"),t;if(e.find("li").length===1&&e.find("li").hasClass("active")){e.hide();$(this.pc).find(".filetreecont .st-menu").hide();switch(y){case"file":t=setInterval($.proxy(function(){if($(this.pc+" .filetablecont").is(":visible")&&this.fm_table.dataTable.data().length>0){this.fm_table.width($(this.pc+" .filetablecont").width()-20);clearTimeout(t);t=null}},this),10)}}},setActiveItemIf:function(){var e=$(this.pc).find(".filetreecont ul.source_type_menu");if(e.find("li.active").length===0){e.find("li:first-child a").trigger("click")}},registerMenuEvent:function(){var t=$(this.pc+" .filetreecont .source_type_menu"),i=this,n;t.on("click","li",function(e){n=$(e.target).parents("li");n.parents(".source_type_menu").find("li.active").removeClass("active");n.parents(".source_type_menu").find("i.fa").addClass("hidden");n.addClass("active").find("i.fa").removeClass("hidden");$(".navbar-toggle.st-menu").click();if(t.is(":visible")){i.sourceTypeClick(e)}})},insertType:function(e){var t=$(this.pc+" .filetreecont .source_type_menu"),i=$("<li/>"),n=e.text.replace(/\s/g,""),a=$("<i/>",{class:"fa fa-chevron-right hidden hidden-xs pull-right"}),s;if(!t.length)return;s=$("<a/>").html(e.text).data("data",e.data).appendTo(i);s.append(a);i.addClass(n);t.append(i);if(e.active){t.find("li."+n+" a").trigger("click")}},getSourceType:function(){return y},sourceTypeClick:function(e){var t=$(e.target).data("data");if(this.select_bt)this.select_bt.show();if(this.cancel_bt)this.cancel_bt.html("Cancel");if(t.files){this.sf_showFileSystem()}else if(t.postgis){this.sf_showPostGIS()}else if(t.tile){this.sf_showTileServices()}else if(t.gcmap){this.sf_showGCMap()}else if(t.mobile){this.showMobileType()}else if(t.arcMap){this.showArcMapPluginPanel()}else if(t.mapBox){this.showMapBoxPluginPanel()}else if(t.datasources){this.showDatasourcesPanel(t.type)}if(t.path){om.show("filetable"+this.options.randid)}giscloud.log.push("source_browser_view_type",{mid:currentMapID,source_type:y})},loadGISCloudMaps:function(){n=-1;$(this.pc+" .currentdirmsg").val("");$(this.pc+" .bottomfilemenu").hide();$(this.pc+" .wms_source_form").hide();$(this.pc+" .pg_source_form").hide();$(this.pc+" .gcmap_source_form").show();$(this.pc+" .mobile_source_form").hide();$(this.pc).find(".table-wrapper").hide();this.gcmap_table.container.parents(".table-wrapper").show();this.gcmap_table.refreshData()},showMobileType:function(e){y="mobile";$(this.pc+" .currentdirmsg").hide();$(this.pc+" .sf_file_toolbar").hide();$(this.pc+" .bottomfilemenu").hide();$(this.pc+" .wms_source_form").hide();$(this.pc+" .pg_source_form").hide();$(this.pc+" .gcmap_source_form").hide();$(this.pc+" .mobile_source_form").show();$(this.pc+" .sf_wms_url").hide();$(this.pc+" .sf_pgdb_connmenu").hide();$(this.pc+" .filetable").hide();$(this.pc+" .arcmap_plugin_form").hide();$(this.pc+" .mapbox_plugin_form").hide();$(this.pc+" .datasources_form").hide();$(this.pc).find(".table-wrapper").hide()},showArcMapPluginPanel:function(){y="arcmap";$("#currentdirmsg").hide();$(".sf_file_toolbar").hide();$(".currentdirmsg").hide();$(this.pc+" .bottomfilemenu").hide();$(this.pc+" .wms_source_form").hide();$(this.pc+" .pg_source_form").hide();$(this.pc+" .gcmap_source_form").hide();$(this.pc+" .mobile_source_form").hide();$(this.pc+" .sf_wms_url").hide();$(this.pc+" .sf_pgdb_connmenu").hide();$(this.pc+" .filetable").hide();$(this.pc+" .mapbox_plugin_form").hide();$(this.pc+" .datasources_form").hide();$(this.pc+" .arcmap_plugin_form").show();$(this.pc).find(".table-wrapper").hide()},showMapBoxPluginPanel:function(){y="mapbox";$("#currentdirmsg").hide();$(".sf_file_toolbar").hide();$(".currentdirmsg").hide();$(this.pc+" .bottomfilemenu").hide();$(this.pc+" .wms_source_form").hide();$(this.pc+" .pg_source_form").hide();$(this.pc+" .gcmap_source_form").hide();$(this.pc+" .mobile_source_form").hide();$(this.pc+" .sf_wms_url").hide();$(this.pc+" .sf_pgdb_connmenu").hide();$(this.pc+" .filetable").hide();$(this.pc+" .arcmap_plugin_form").hide();$(this.pc+" .datasources_form").hide();$(this.pc+" .mapbox_plugin_form").show();$(this.pc).find(".table-wrapper").hide()},showDatasourcesPanel:function(e){if(!e){e="10,40,70,80";$(this.pc+" .omf_datasources_tools").hide();this.ds_table.container.parents(".table-wrapper").addClass("all-datasource")}else{this.ds_table.container.parents(".table-wrapper").removeClass("all-datasource");$(this.pc+" .datasources_form").show();$(this.pc+" .omf_datasources_tools").show()}y="datasources";$(this.pc+" .currentdirmsg").hide();$(this.pc+" .sf_file_toolbar").hide();$(this.pc+" .bottomfilemenu").hide();$(this.pc+" .wms_source_form").hide();$(this.pc+" .pg_source_form").hide();$(this.pc+" .gcmap_source_form").hide();$(this.pc+" .mobile_source_form").hide();$(this.pc+" .sf_wms_url").hide();$(this.pc+" .sf_pgdb_connmenu").hide();$(this.pc+" .filetable").hide();$(this.pc+" .arcmap_plugin_form").hide();$(this.pc+" .mapbox_plugin_form").hide();$(this.pc+" .filetable").show();this.hide("pgis-filter-wrp");this.ds_table.refreshData({type:e});$(this.pc).find(".table-wrapper").hide();this.ds_table.container.parents(".table-wrapper").show()},beforeDataGridRender:function(e){switch(y){case"gcmap":var t=e.data.data;for(var i=0;i<t.length;i++){var n=t[i];if(n.id==currentMapID){t.splice(i,1)}}break;default:}},deleteDatasource:function(){var e=this.getData(),t=this;if(e.length>0){if(confirm(gclang.fileman.delete_confirm_1)){if(confirm("All layers connected to this datasource will be deleted too. Do you still want to proceed?")){giscloud.datasources.remove(e[0].id).done($.proxy(function(){this.ds_table.refresh()},this))}}}},openDatasourceForm:function(e){var t=null;if(e){var t=this.ds_table.getSelected().data;if(t.length>0){datasource_id=t[0].id}else{giscloud.ui.alert.color("red").show("Please return from the list",4e3);return}}else{datasource_id=0}gcapp.datasourceManager=this;var i,n,a;var t=$(this.pc+" .filetreecont li.active a").data("data");if(t.type==70){i="wfsform";n="WFS Datasource Form";a="form_wfs"}else if(t.type==80){i="wmtsform";n="WMTS Datasource Form";a="form_wmts"}else if(t.type==40){i="wmsform";n="WMS Datasource Form";a="form_wms"}this[i]=formManager.open({fid:i,overlay:false,bootstrap:true,dragable:true,title:n,fdata:{dsid:datasource_id},width:600,height:"auto",url:fno.liveSite+"datasource/"+a,buttons:[{html:gclang.Save,class:"bluebutton",click:"gcapp."+i+".save()"},{html:gclang.Close,click:"gcapp.datasourceManager."+i+".close()"}]});var s=this;this[i].addEvent("close",function(){s.ds_table.refreshData()})},onLoadPostGISLayers_fm:function(e){this.db_table.setData(e);this.db_table.processing("hide");var t=this.getConnID();if(t!=-1){this.db_table.dataTable.column(1).visible(true)}else{this.db_table.dataTable.column(1).visible(false)}},loadPostGISLayers_fm:function(){n=-1;this.el("currentdirmsg").val("");this.hide("bottomfilemenu");this.hide("wms_source_form");this.show("pg_source_form");this.hide("gcmap_source_form");this.hide("mobile_source_form");this.hide("arcmap_plugin_form");this.hide("mapbox_plugin_form");this.hide("datasources_form");this.dbmf_module2.defer.done($.proxy(function(){var e=this.getConnID(),t=this.dbmf_module2.loadedConnections[e],i=this.el("fm_pg_non_spatial:checked");if(i.length&&e==-1){$(this.pc).find(".table-wrapper").hide();this.pg_table.container.parents(".table-wrapper").show();this.pg_table.refreshData({only_non_spatial:i.is(":checked")})}else{$(this.pc).find(".table-wrapper").hide();this.db_table.container.parents(".table-wrapper").show();giscloud.tables.list({order_by:"name",expand:"count,options",only_spatial:true}).then(gcapp.restTablesToLegacyTables(t)).done(this.onLoadPostGISLayers_fm.bind(this))}},this))},loadWMS_fm:function(){n=-1;this.el("currentdirmsg").val("");this.hide("bottomfilemenu");this.show("wms_source_form");this.hide("pg_source_form");this.hide("gcmap_source_form");this.hide("mobile_source_form");this.hide("arcmap_plugin_form");this.hide("mapbox_plugin_form");this.hide("datasources_form")},sf_showPostGIS:function(){this.hide("currentdirmsg");this.hide("sf_file_toolbar");this.hide("sf_wms_url");this.show("filetable");this.hide("arcmap_plugin_form");this.hide("mapbox_plugin_form");this.hide("gcmap_source_form");this.hide("mobile_source_form");this.hide("datasources_form");this.input_options.hideExternalConnections||this.show("sf_pgdb_connmenu");this.hide("fs-filter-wrp");this.show("pgis-filter-wrp");$(this.pc).find(".table-wrapper").hide();this.db_table.processing("show");this.db_table.container.parents(".table-wrapper").show();y="postgis";this.loadPostGISLayers_fm()},sf_showWMS:function(){this.hide("currentdirmsg");this.hide("sf_file_toolbar");this.show("sf_wms_url");this.show("filetable");this.hide("mapbox_plugin_form");this.hide("datasources_form");this.hide("arcmap_plugin_form");this.hide("sf_pgdb_connmenu");this.hide("pgis-filter-wrp");y="wms";this.loadWMS_fm()},loadGCMap_fm:function(){this.loadGISCloudMaps()},sf_showGCMap:function(){this.hide("currentdirmsg");this.hide("sf_wms_url");this.hide("sf_file_toolbar");this.hide("sf_pgdb_connmenu");this.show("filetable");this.hide("arcmap_plugin_form");this.hide("mapbox_plugin_form");this.hide("datasources_form");this.hide("mobile_source_form");this.hide("pgis-filter-wrp");y="gcmap";this.loadGCMap_fm()},sf_showFileSystem:function(){this.el("currentdirmsg").show();this.el("currentdirmsg").css("display","inline");this.el("sf_file_toolbar").show();$(this.pc+" .pg_source_form").hide();$(this.pc+" .datasources_form").hide();$(this.pc+" .bottomfilemenu").show();this.hide("sf_wms_url");this.hide("sf_pgdb_connmenu");$(this.pc+" .filetable").show();this.show("fs-filter-wrp");this.hide("pgis-filter-wrp");$(this.pc).find(".table-wrapper").hide();this.fm_table.container.parents(".table-wrapper").show();this.hide("mapbox_plugin_form");this.hide("arcmap_plugin_form");this.hide("mobile_source_form");y="file";this.listDir("/")},sf_showTileServices:function(){this.hide("currentdirmsg");this.hide("sf_file_toolbar");this.hide("sf_wms_url");this.hide("sf_pgdb_connmenu");this.show("filetable");this.hide("arcmap_plugin_form");this.hide("mapbox_plugin_form");this.hide("datasources_form");this.hide("mobile_source_form");this.hide("pgis-filter-wrp");y="tile";var a=[];if(this.input_options.tiledServers){if(this.input_options.tmsInclude.length==0||$.inArray("osm",this.input_options.tmsInclude)>=0){a.push({code:"osm",tileserver:"OpenStreetMap",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}});if((!fno||!fno.hasOwnProperty("showMapBoxInSourceBrowser")||fno.showMapBoxInSourceBrowser)&&(window.user&&window.user.active_subscription&&parseInt(window.user.active_subscription.type)===25&&(!window.user.options||parseInt(window.user.options.MAPBOX_BASEMAP)!==0))){a.push({code:"mapbox.streets",tileserver:"Mapbox Streets",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}});a.push({code:"mapbox.light",tileserver:"Mapbox Light",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}});a.push({code:"mapbox.dark",tileserver:"Mapbox Dark",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}});a.push({code:"mapbox.satellite",tileserver:"Mapbox Satellite",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}});a.push({code:"mapbox.satellite-streets",tileserver:"Mapbox Satellite Streets",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}})}if(window.user&&window.user.options&&parseInt(window.user.options.HERE_BASEMAP)===1){a.push({code:"here.satellite",tileserver:"HERE Satellite",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}});a.push({code:"here.streets",tileserver:"HERE Streets",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}})}}if(this.input_options.tmsInclude.length==0||$.inArray("bing",this.input_options.tmsInclude)>=0){a.push({code:"bing",tileserver:"Bing Maps",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}})}if(this.input_options.tmsInclude.length==0||$.inArray("bing",this.input_options.tmsInclude)>=0){a.push({code:"bing_sat",tileserver:"Bing Maps Satellite",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}})}if(this.input_options.tmsInclude.length==0||$.inArray("bing",this.input_options.tmsInclude)>=0){a.push({code:"bing_hyb",tileserver:"Bing Maps Hybrid",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}})}if(this.input_options.tmsInclude.length==0||$.inArray("maps_for_free_relief",this.input_options.tmsInclude)>=0){a.push({code:"maps_for_free_relief",tileserver:"Maps-For-Free Relief",epsg:900913,bound:{xmin:-20037508.342789244,xmax:20037508.342789244,ymin:-20037508.342789244,ymax:20037508.342789244}})}}var t=this;giscloud.datasources.list({type:50}).done(function(e){var e=e.data.reverse();$.each(e,function(e,t){if(t.type*1!=50)return;var i={xmin:t.x_min,ymin:t.y_min,xmax:t.x_max,ymax:t.y_max};var n=$.parseJSON(t.params);a.unshift({code:t.name,tileserver:t.name,epsg:t.epsg,bound:i,datasource_id:t.id})});t.tms_table.setData(a)});giscloud.datasources.list({type:55}).done(function(e){var e=e.data.reverse();$.each(e,function(e,t){if(t.type*1!=55)return;var i={xmin:t.x_min,ymin:t.y_min,xmax:t.x_max,ymax:t.y_max};var n=$.parseJSON(t.params);a.unshift({code:t.name,tileserver:t.name,epsg:t.epsg,bound:i,datasource_id:t.id})});t.tms_table.setData(a)});n=-1;this.el("currentdirmsg").val("");this.hide("bottomfilemenu");this.hide("wms_source_form");this.hide("pg_source_form");this.hide("gcmap_source_form");$(this.pc).find(".table-wrapper").hide();this.tms_table.container.parents(".table-wrapper").show();this.tms_table.resetColumnSize()}})})();var omniRibbon=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{animated:false,minimized:false},initialize:function(e,t){this.setOptions(this.options,t);this.container=$("#"+e);this.tabs=new OmniTabs(e,{enableOnClick:true});this.tabs.addEvent("change",this.changeTab.bind(this));this.tabs.addEvent("tabclick",this.tabClick.bind(this));this.tabs.addEvent("tabover",function(e){$(e.element).addClass("gc-theme-color-hover")});this.tabs.addEvent("tabout",function(e){$(e.element).removeClass("gc-theme-color-hover")});this.tabscontainer=this.container.find(".omnitabs-container");this.sliderbt=this.container.find(".ribbon-slider-bt");if(this.sliderbt.length)this.sliderbt.on("click",$.proxy(this.toggle,this));if(this.options.minimized)this.minimize();$.each(this.container.find(".omnicombo"),function(e,t){new omniCombo($(t),{changetitle:false,hover:false,usejQueryPositioning:true})});this.full_page_container=$(".gc-omnitab-full-page")},changeTab:function(e){this.fireEvent("change",{target:this,tab:e.tab,element:e.element})},tabClick:function(e){if((this.isDisabled()||this.isMinimized)&&e.element!=this.sliderbt)this.toggle()},toggle:function(){if(this.isMinimized){this.maximize();this.enable()}else{this.minimize();this.disable()}this.fireEvent("toggle",this.isMinimized)},enable:function(){this.container.removeClass("disabled");this.tabs.enable()},disable:function(){this.container.addClass("disabled");this.tabs.disable()},isDisabled:function(){return this.container.hasClass("disabled")},minimize:function(){this.tabscontainer.hide();this.desktopRedraw();gcapp.resize();this.fireEvent("minimize");this.isMinimized=true;if(this.full_page_container&&this.full_page_container.length)this.full_page_container.css("top","46px")},maximize:function(){this.tabscontainer.show();this.desktopRedraw();gcapp.resize();this.fireEvent("maximize");this.isMinimized=false;if(this.full_page_container&&this.full_page_container.length)this.full_page_container.css("top","132px")},desktopRedraw:function(){if(this.options.animated&&--this.numfuncall<=0)clearInterval(this.perID)},getWidth:function(){return this.tabscontainer.width()},getHeight:function(){return this.tabscontainer.height()},showFullpage:function(e){if(!this.full_page_container||!this.full_page_container.length)return;var t=this.full_page_container.find(".gc-omnitab-full-page-content");t.empty();if(e){t.showLoader();t.load(e)}this.full_page_container.show();return t},hideFullpage:function(){if(!this.full_page_container||!this.full_page_container.length)return;this.full_page_container.hide()}});var omniRibbonButton=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],options:{className:"omniRibbonButton",size:32,toggle:false},initialize:function(e,t){this.setOptions(this.options,t);this.container=$("#"+e);if(!this.container.length)return;this.icon=this.container.find(".gc-ribbon-"+this.options.size);this.container.click(this.onClick.bind(this))},onClick:function(){if(this.options.toggle){this.toggle()}if(!this.isDisabled())this.fireEvent("click",{target:this})},enable:function(){if(!this.container.length)return;this.container.removeClass("disabled");this.setBackgroundPosition(-this.options.size);this.fireEvent("enabled",{target:this,enabled:true})},disable:function(){if(!this.container.length)return;this.container.addClass("disabled");this.setBackgroundPosition(0);this.fireEvent("enabled",{target:this,enabled:false});this.off(true)},isDisabled:function(){return this.container.length&&this.container.hasClass("disabled")},isOn:function(e){return this.container.length&&this.container.hasClass("toggle")},on:function(e){if(!this.container.length)return;this.container.addClass("toggle");if(!e&&!this.isDisabled())this.fireEvent("toggle",{target:this,toggle:true})},off:function(e){if(!this.container.length)return;this.container.removeClass("toggle");if(!e&&!this.isDisabled())this.fireEvent("toggle",{target:this,toggle:false})},toggle:function(){if(this.isDisabled())return;var e=this.container.hasClass("toggle");if(e)this.off();else this.on()},setBackgroundPosition:function(e){var t=this.icon;if(!t)return;if(Browser.Engine.trident){t.style.backgroundPositionX=e+"px"}else{var i=$(t).css("background-position").split(" ");t.style.backgroundPosition=e+"px "+i[1]}}});var GISCLOUD=new giscloud.blja.Class({});GISCLOUD.Color=new giscloud.blja.Class({Implements:[giscloud.blja.Options],options:{},initialize:function(e){this.setOptions(this.options,e)},RGB2Color:function(e,t,i){return(e&255)*65536|(t&255)*256|i&255},hsv2rgb:function(e,t,i){var n,a,s;var r=new Array;if(t==0){r["red"]=r["green"]=r["blue"]=Math.round(i*255)}else{var o=e*6;if(o==6)o=0;var l=Math.floor(o);var d=i*(1-t);var u=i*(1-t*(o-l));var c=i*(1-t*(1-(o-l)));if(l==0){var_r=i;var_g=c;var_b=d}else if(l==1){var_r=u;var_g=i;var_b=d}else if(l==2){var_r=d;var_g=i;var_b=c}else if(l==3){var_r=d;var_g=u;var_b=i}else if(l==4){var_r=c;var_g=d;var_b=i}else{var_r=i;var_g=d;var_b=u}r["red"]=Math.round(var_r*255);r["green"]=Math.round(var_g*255);r["blue"]=Math.round(var_b*255)}return r}});GISCLOUD.FileFormats=new new giscloud.blja.Class({Implements:[giscloud.blja.Options],options:{},initialize:function(e){this.setOptions(this.options,e);this.fileformats_by_ext=new Array;this.fileformats_by_ext["wav"]=this.fileformats_by_ext["mp3"]="fa-file-audio-o";this.fileformats_by_ext["doc"]=this.fileformats_by_ext["docx"]="ui-word";this.fileformats_by_ext["xls"]=this.fileformats_by_ext["xlsx"]="ui-excel";this.fileformats_by_ext["pdf"]="fa-file-pdf-o";this.fileformats_by_ext["ogv"]=this.fileformats_by_ext["3gp"]=this.fileformats_by_ext["wmv"]=this.fileformats_by_ext["webm"]=this.fileformats_by_ext["mp4"]=this.fileformats_by_ext["flv"]=this.fileformats_by_ext["avi"]=this.fileformats_by_ext["mov"]=this.fileformats_by_ext["mpg"]="fa-file-video-o";this.fileformats_by_ext["jpg"]=this.fileformats_by_ext["jpeg"]=this.fileformats_by_ext["png"]=this.fileformats_by_ext["gif"]="picture"},printfAndBBCode:function(t,e,i){if(i.render){var n;try{n=$.tmpl(i.render,e).text();return XBBCODE.process({text:n,removeMisalignedTags:false,addInLineBreaks:false})}catch(e){console.log("err ",e);return{html:t,error:true}}}else return{html:t,error:false}},formatFileForRecord:function(e,d,u,c){var h,f,t,p,m="",g=[],_=[],v=this,y,b,w,i,M,k=[];var L="lightbox"+Math.round(Math.random()*1e6),S=[],T;if(c.json){if(e.indexOf("___json")>-1){e=e.substr(7)}i=JSON.parse(e);i=$.isArray(i)?i:[i]}else{i=e.split(",")}$.each(i,function(e,t){if(c.json){f=t.isDir?"directory":"json";h=p=giscloud.xssSafe(t.title);w=t.ext}else{if(c&&c.directory){f="directory"}else{f=t.match(/^http(s?):\/\//g);if(f){f=f[0]}}h=f=="directory"?t.substr(12):t.substr(f?f.length:0);p=giscloud.xssSafe(h.substr(h.lastIndexOf("/")+1));w=h.substr(h.lastIndexOf(".")+1).toLowerCase()}if(p===""&&(f==="http://"||f==="https://")&&h){p=h.replace("/","")}if(f=="directory")m=f;else if(v.fileformats_by_ext[w])m=v.fileformats_by_ext[w];else m="ui-doc";if(c&&c.json){if(c.featureId>=0){b=fno.liveSite+"rest/1/layers/"+d+"/features/"+c.featureId+"/"+t.field+"/resources/"+t.rid}else{b=fno.liveSite+"rest/1/layers/"+t.lid+"/features/"+t.fid+"/"+t.field+"/resources/"+t.rid}y=b}else if(d&&u){var i=c.featureId||c.featureId===0?c.featureId:c.featureData.__id,n=c.featureData&&c.dataIndex?c.featureData[c.dataIndex]?c.featureData[c.dataIndex]:null:null;if(n&&n.indexOf&&n.indexOf(t)>-1&&n.match(/\b^file:\/\/uploads\/.*\.(?:jpe?g|png|mp[34])$\b/gi)||t.match(/\b^file:\/\/uploads\/.*\.(?:jpe?g|png|mp[34])$\b/gi)){h=h.replace("uploads/","")}if(h.substr(0,7)==="file://"){h=h.substr(7)}b=fno.liveSite+"rest/1/layers/"+d+"/features/"+i+"/"+c.dataIndex+"/"+h;y=b}else{b=t;y=t}g.push(y);_.push(p);if(c&&c.thumb&&m=="picture"){T="<img src='"+y+"?size=thumb' style='max-width: 95%; max-height: 50px' />";k.push(T)}else{var a=m;if(m=="picture")a="fa-file-image-o";else if(m=="ui-doc")a="fa-link";else if(m=="directory")a="fa-folder";T='<i class="fa '+a+'"></i>'+p}if(m=="directory"){var n=t.pathname;y="javascript:;";if(!t.pathname&&typeof t==="string"&&t.indexOf("directory:/")===0){n=t.replace("directory:/","")}M="formManager.listDir('"+gcApp.utils.escapeHtml(n,"/",true)+"');";S.push('<a href="'+y+'" onclick="'+M+'"  >'+T+"</a>")}else{var s=y.indexOf("www.dropbox.com")>0;if(s)S.push('<a href="'+y+'" target="_blank" >'+T+"</a>");else{var r=' data-lightbox-type="iframe" data-lightbox-gallery="'+L+'" ',o;if(t.panorama)y+=".html";if($.browser.msie&&$.inArray($.browser.version,["8.0","9.0"])>-1){o='<a href="'+y+'" target="_blank"  >'+T+"</a>"}else{o='<a href="'+y+'" '+r+' onclick="return false;"  >'+T+"</a>"}if(c.render){var l=Object.append(c.featureData,{__link:encodeURI(y)});result=GISCLOUD.FileFormats.printfAndBBCode(null,l,c);if(!result.error){o=result.html.replace("<a","<a "+r+'" onclick="return false;" ')}}S.push(o)}}});var n={url:g,external:!u,title:_.join(", "),autoplay:true};var a=user&&user.options.MEDIA_PLAYER_NEXT_AND_PREV;if(c&&c.dataIndex&&a)n.column=c.dataIndex;var M="";if(m=="fa-file-audio-o"){if(u)b="javascript:;";M=u?"onclick='fn.showMedia("+JSON.stringify(n)+"); return false;'":""}else if(m=="picture"){if(u)b="javascript:;";n.width=640;n.height=480;M=u?"onclick='fn.showMedia("+JSON.stringify(n)+"); return false;'":""}else if(m=="fa-file-video-o"&&(w=="mpg"||w=="flv"||w=="mp4"||w=="webm"||w=="wmv"||w=="ogv"||w=="avi"||w=="3gp")){b="javascript:;";M=u?"onclick='fn.showMedia("+JSON.stringify(n)+"); return false;'":""}else if(m=="ui-pdf"){b=b;n.target="_blank";t=" target='_blank' "}else{n.target="_blank";t=" target='_blank' "}if(!u){n.target="_blank";t=" target='_blank' "}var s=c&&c.thumb&&m=="picture"?k.join(""):'<span class="gc-icon ui-voffset '+m+'"></span>'+_.join();if(c&&c.lightbox){return S.join(", ")}if(c&&c.urlOnly){return g}return c&&c.actionOnly?n:'<a href="'+b+'" '+M+" "+t+" >"+s+"</a>"},formatRecordValue:function(e,t,i){if(e===""||e==null){return"&nbsp;"}var n=e.toString();var a=/^\s*mailto\:\s*([\S]+)\s*$/i;if(!i)i={};var s=n.substr(0,7);if(s=="file://"||s=="___json"||s=="http://"||n.substr(0,8)=="https://"){i.json=s=="___json";var r=s=="file://"||i.json;if(i.json){try{JSON.parse(n.substr(7))}catch(e){console.warn(e);return'<div class="datagrid-warning"><i class="fa fa-exclamation-triangle"></i><span>Invalid media format</span></div>'}}return GISCLOUD.FileFormats.formatFileForRecord(n,t,r,i)}else if(n.substr(0,12)=="directory://"){if(i)i.directory=true;return GISCLOUD.FileFormats.formatFileForRecord(n,t,true,i)}if(a.test(n)){return $("<a/>",{href:n,text:n.replace(a,"$1")}).prepend('<span class="ui-icon ui-voffset ui-link"></span>').html()}if(i.render){var o=GISCLOUD.FileFormats.printfAndBBCode(n,i.featureData,i);return o.html}else{return giscloud.xssSafe(n)}}});function is_numeric(e){return(typeof e==="number"||typeof e==="string")&&e!==""&&!isNaN(e)}function IsNumeric(e){if(!e&&e!==0)return;var t="0123456789.";var n=true;var a;for(i=0;i<e.length&&n==true;i++){a=e.charAt(i);if(t.indexOf(a)==-1){n=false;break}}return n}function hideFieldset(e){var t=$(e).find(".form");var i=$(e);var n=new Fx.Slide(t,{duration:"slow"});if(!(t.getStyle("height").toInt()>0)){var a=i.getCoordinates().height;$(t).css("height",a-40)}n.hide();i.addClass("collapsed");i.removeClass("collapsible")}function openFieldset(e){var t=$(e).find(".form");var i=$(e);var n=new Fx.Slide(t,{duration:"slow"});n.show();i.addClass("collapsible");i.removeClass("collapsed")}function visible(e,t){var e=$(e);if(e){if(t)$(e).css("visibility","visible");else $(e).css("visibility","hidden")}}function getRandomString(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var i=e?e:8;var n="";for(var a=0;a<i;a++){var s=Math.floor(Math.random()*t.length);n+=t.substring(s,s+1)}return n}function enable(e,t){var e=$(e);if(e){if($(e).attr("tag")=="input"){if(t){$(e).removeAttr("disabled")}else $(e).attr("disabled",true)}}}function clone(e){if(e==null||typeof e!="object")return e;var t=new e.constructor;for(var i in e)t[i]=clone(e[i]);return t}function getStyleRanges(e,t,i,n){var a=e.outline.split(",");var s=t.outline.split(",");var r=parseFloat(a[0]);var o=parseFloat(a[1]);var l=parseFloat(a[2]);var d=parseFloat(s[0]);var u=parseFloat(s[1]);var c=parseFloat(s[2]);var h=[];for(var f=0;f<i;f++){var p;var m=clone(e);if(f==0){p=a}else if(f==i-1){p=s}else{var g=[];g[0]=Math.abs(Math.round(r+(d-r)/i*f));g[1]=Math.abs(Math.round(o+(u-o)/i*f));g[2]=Math.abs(Math.round(l+(c-l)/i*f));if(g[0]>255)g[0]=255;if(g[1]>255)g[1]=255;if(g[2]>255)g[2]=255;p=g}m.width=1;m.borderwidth=Math.abs(Math.round(e.borderwidth+(t.borderwidth-e.borderwidth)/i*f))||0;m.visible=true;m.color=p.join();m.bordercolor=giscloud.Color.fromRgb(parseInt(p[0]),parseInt(p[1]),parseInt(p[2])).darker().rgb().join();m.fontcolor=e.fontcolor||"0,0,0";m.fontsize=e.fontsize||12;if(n=="point"){if(e.symbol&&t.symbol){var _=Math.round(Math.abs(t.symbol.size-e.symbol.size)/i);m.symbol=clone(e.symbol);m.symbol.size=Number(e.symbol.size)+_*f}else{m.symbol={type:"circle",color:m.color,border:"0,0,0",bw:"2",size:"6"};m.iconsoverlap=2}}h.push(m)}return h}function getRandomStyle(e){var t={};if(e&&e.alg==1){var i=Math.round(359/e.max);var n=Math.round(i*e.i);t.bordercolor=giscloud.Color.fromHsl(n,100,80).rgb().join();t.color=giscloud.Color.fromHsl(n,50,80).rgb().join()}else if(e&&e.alg==2){var a=giscloud.Color.randomHue(80,90),s=a.darker();t.bordercolor=s.rgb().join();t.color=a.rgb().join()}else{var n=Math.round(Math.random()*359);t.bordercolor=giscloud.Color.fromHsl(n,100,80).rgb().join();t.color=giscloud.Color.fromHsl(n,50,80).rgb().join()}t.fontcolor="0,0,0";t.outline="255,255,255";t.width=1;t.borderwidth=e&&e.geomtype=="line"?1:0;t.fontsize=12;t.cap=false;t.scale=true;t.visible=true;if(e&&e.geomtype=="point"){t.symbol={type:"circle",color:t.color,border:"0,0,0",bw:"2",size:"6"};t.iconsoverlap=2}return t}var pallete=[3329330,16716947,255,15787660,9127187,65280,16711680,65535,16776960,10824234,32768,16711935,128,16753920,16416882,32896,8388736,4620980,16766720,13789470,8421376,14315734,8087790,11403055,12357519,65407,16729344,7372944,0,8421504];function getTwoRandomStyles(){var e={};var t=Math.round(Math.random()*359);e.bordercolor=new giscloud.Color.fromHsl(t,90,70);e.color=new giscloud.Color.fromHsl(t,30,70);e.fontcolor="0,0,0";e.outline="255,255,255";e.width=1;e.borderwidth=0;e.fontsize=12;e.cap=false;e.scale=true;e.visible=true;var i=clone(e);i.color=new giscloud.Color.fromHsl(t,80,70);return[e,i]}function setDivStyle(e,t,i){var n=clayerform.getLayerType();if($.type(t)=="string")t=$(t);t.css("background-color","white");t.css("background-image","none");if(e==="raster"){t.css("border-style","groove");t.css("border-width","1px");t.css("border-color","black");t.attr("title",gclang.change_style);if(i.relief_color){t.find(".color").colorpicker("val",i.relief_color)}return}if(i.galleryUrl||i.url||i.symbol||i.color||i.hatchUrl||i.hatchSymbol||i.hatchGalleryUrl){t.removeClass("nocolor");t.removeClass("nocolor-20");t.empty();if(i.galleryUrl||i.hatchUrl||i.hatchGalleryUrl||i.url&&!/^\/icons\//i.test(i.url)){t.addClass("icon-cover")}if(i.galleryUrl&&n==="point"){t.css("background-image","url("+i.galleryUrl+")");t[0].title=t[0].title||i.galleryUrl.substring(i.galleryUrl.lastIndexOf("/")+1,i.galleryUrl.lastIndexOf("."))}else if(i.url){t.css("background-image","url("+fno.liveSite+"assets/icon.php?p="+encodeURI(i.url).replace("(","%28").replace(")","%29")+")");t[0].title=t[0].title||i.url.substring(i.url.lastIndexOf("/")+1);return}else if(i.symbol&&i.symbol.type){var a=fno.liveSite+"assets/icon.php?"+$.param(i.symbol);var s=$("<img/>").attr({src:a}).css("width","20px").css("height","20px");s.appendTo(t);return}if(i.hatchUrl&&n==="polygon"){t.css("background-color","none");t.css("background-image","url("+fno.liveSite+"assets/icon.php?p="+encodeURI(i.hatchUrl).replace("(","%28").replace(")","%29")+")");t[0].title=t[0].title||i.hatchUrl.substring(i.hatchUrl.lastIndexOf("/")+1,i.hatchUrl.lastIndexOf("."))}else if(i.hatchGalleryUrl&&n==="polygon"){t.css("background-color","none");t.css("background-image","url("+i.hatchGalleryUrl+")");t[0].title=t[0].title||i.hatchGalleryUrl.substring(i.hatchGalleryUrl.lastIndexOf("/")+1,i.hatchGalleryUrl.lastIndexOf("."))}else if(i.color){t.css("background-color","rgb("+i.color+")")}}else{if(t.hasClass("styleicon2")||t.hasClass("styleicon"))t.addClass("nocolor-20");else t.addClass("nocolor");if(i.color){if(typeof i.color=="object"){i.color=i.color.rgb().toString()}t.css("background-color","rgb("+i.color+")")}}if(i.bordercolor){if(typeof i.bordercolor=="object"){i.bordercolor=i.bordercolor.rgb().toString()}t.css("border","1px solid rgb("+i.bordercolor+")")}else t.css("border","1px solid #333333")}var ImgTip=new giscloud.blja.Class({options:{onShow:function(e){$(e).css("visibility","visible")},onHide:function(e){e.dispose()},maxTitleChars:30,showDelay:0,hideDelay:100,className:"tool",offsets:{x:16,y:16},fixed:false},initialize:function(e,t){this.setOptions(t);this.toolTip=new giscloud.blja.Element("div",{class:this.options.className+"-tip",styles:{position:"absolute",top:"0",left:"0",visibility:"hidden"}}).inject(document.body);var i=this.end.bind(this);document.addEvent("dblclick",i);if(document.img_tip_wrapper)$(document.img_tip_wrapper).empty();document.img_tip_wrapper=this.wrapper=new giscloud.blja.Element("div").inject(this.toolTip);$$(e).each(this.build,this);if(this.options.initialize)this.options.initialize.call(this)},build:function(e){this.start(e);this.position(e);if(!this.options.fixed)e.addEvent("mousemove",this.locate.bindWithEvent(this));var t=this.end.bind(this);e.addEvent("mouseleave",t);e.addEvent("trash",t)},onData:function(e){this.options.cont.text.innerHTML=e.value},start:function(e){this.wrapper.empty();if(this.options.imgsrc){if(this.options.imgsrc.indexOf(".swf")){this.str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" ';this.str+='width="'+this.options.width+'" ';this.str+='height="'+this.options.height+'" ';this.str+='title="MultiBoxMedia">';this.str+='<param name="movie" value="'+this.options.imgsrc+'" />';this.str+='<param name="quality" value="high" />';this.str+='<embed src="'+this.options.imgsrc+'" ';this.str+='quality="high" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" ';this.str+='width="'+this.options.width+'" ';this.str+='height="'+this.options.height+'"></embed>';this.str+="</object>";this.img=new giscloud.blja.Element("div");this.img.innerHTML=this.str}else{this.img=new giscloud.blja.Element("img",{src:this.options.imgsrc,style:"border:1px solid #e4e4e4; padding:5px; background-color:white"})}}this.img.inject(this.wrapper);clearInterval(this.timer);this.timer=this.show.delay(this.options.showDelay,this)},end:function(e){clearInterval(this.timer);this.timer=this.hide.delay(this.options.hideDelay,this)},position:function(e){var t=e.getPosition();this.toolTip.setStyles({left:t.x+this.options.offsets.x,top:t.y+this.options.offsets.y})},locate:function(e){var t={x:window.getWidth(),y:window.getHeight()};var i={x:window.getScrollLeft(),y:window.getScrollTop()};var n={x:this.toolTip.offsetWidth,y:this.toolTip.offsetHeight};var a={x:"left",y:"top"};for(var s in a){var r=e.page[s]+this.options.offsets[s];if(r+n[s]-i[s]>t[s])r=e.page[s]-this.options.offsets[s]-n[s];$(this.toolTip).css(a[s],r)}},show:function(){if(this.options.timeout)this.timer=this.hide.delay(this.options.timeout,this);this.fireEvent("onShow",[this.toolTip])},hide:function(){this.fireEvent("onHide",[this.toolTip])}});ImgTip.__implement(new giscloud.blja.Events,new giscloud.blja.Options);function insertAtCaret(e,t){if(document.selection){e.focus();var i=e.value.replace(/\r\n/g,"\n");var n=document.selection.createRange();if(n.parentElement()!=e){return false}n.text=t;var a=tmp=e.value.replace(/\r\n/g,"\n");for(var s=0;s<i.length;s++){if(i.charAt(s)!=a.charAt(s))break}for(var r=0,o=0;tmp.match(t)&&(tmp=tmp.replace(t,""))&&r<=s;r=o+t.length){o=a.indexOf(t,r)}}else if(e.selectionStart){var o=e.selectionStart;var l=e.selectionEnd;e.value=e.value.substr(0,o)+t+e.value.substr(l,e.value.length)}if(o!=null){setCaretTo(e,o+t.length)}else{e.value+=t}}function setCaretTo(e,t){if(e.createTextRange){var i=e.createTextRange();i.move("character",t);i.select()}else if(e.selectionStart){e.focus();e.setSelectionRange(t,t)}}function getFileExtension(e){return e.substring(e.lastIndexOf(".")+1)}function getSourceObject(e){var t=typeof e=="object"?e:$.parseJSON(e),i;if(!t)return null;if(t.type==="pg"){if(t.dbtype==="oracle"){t.schema="";t.table=t.src;t.fullsrc=t.src}else{i=t.src.split(".");if(i.length===2){t.schema=i[0];t.table=i[1]}t.fullsrc=t.schema==="public"?t.table:t.src}return t}if(t.type=="file"){if(t.src)t.name=t.src.substring(t.src.lastIndexOf("/")+1)}return t}function formatGetInfo(e,t){if(!e)return"Invalid data.";var i=$("<div/>");if(e.epsg>0){i.append(document.createTextNode("EPSG: "+e.epsg)).append($("<br/>"))}i.append(document.createTextNode("PROJ4: "+e.proj4)).append($("<br/>")).append(document.createTextNode("Bounds: "+e.bound.xmin+", "+e.bound.ymin+", "+e.bound.xmax+", "+e.bound.ymax)).append($("<br/>")).append(document.createTextNode("Units: "+e.unit)).append($("<br/>")).append(document.createTextNode("Features: "+e.featurecount));if(e.attributes&&(!t||t&&!t.noattributes)){i.append($("<br/>")).append(document.createTextNode("Attributes: "));var n=e.attributes;var a;for(var s=0;s<n.length;s++){var r=n[s];a=r.name+"("+r.type+")";if(s<n.length-1)a+=", ";i.append(document.createTextNode(a))}}return i.html()}function showProjections(e,t){var i={fid:"projectionform",width:600,bootstrap:true,overlay:false,dragable:true,height:"auto",title:gclang.Spatial_Projections,url:fno.liveSite+"map/form_projection",buttons:[{html:gclang.ok,class:"bluebutton",id:"prjf_ok"},{html:gclang.Cancel,id:"prjf_cancel"}]};if(e)i.data=e;projectionform=formManager.open(i);if(t)projectionform.addEvent("close",t);return projectionform}var encodingsList=new Array;encodingsList.push({name:"UTF8",desc:"Unicode, 8-bit",lang:"all",alias:"Unicode"});encodingsList.push({name:"BIG5",desc:"Big Five",lang:"Traditional Chinese",alias:"WIN950, Windows950"});encodingsList.push({name:"EUC_CN",desc:"Extended UNIX Code-CN",lang:"Simplified Chinese",alias:""});encodingsList.push({name:"EUC_JP",desc:"Extended UNIX Code-JP",lang:"Japanese",alias:""});encodingsList.push({name:"EUC_KR",desc:"Extended UNIX Code-KR",lang:"Korean",alias:""});encodingsList.push({name:"EUC_TW",desc:"Extended UNIX Code-TW",lang:"Traditional Chinese, Taiwanese",alias:""});encodingsList.push({name:"GB18030",desc:"National Standard",lang:"Chinese",alias:""});encodingsList.push({name:"GBK",desc:"Extended National Standard",lang:"Simplified Chinese",alias:"WIN936, Windows936"});encodingsList.push({name:"ISO_8859_5",desc:"ISO 8859-5, ECMA 113",lang:"Latin/Cyrillic",alias:""});encodingsList.push({name:"ISO_8859_6",desc:"ISO 8859-6, ECMA 114",lang:"Latin/Arabic",alias:""});encodingsList.push({name:"ISO_8859_7",desc:"ISO 8859-7, ECMA 118",lang:"Latin/Greek",alias:""});encodingsList.push({name:"ISO_8859_8",desc:"ISO 8859-8, ECMA 121",lang:"Latin/Hebrew",alias:""});encodingsList.push({name:"JOHAB",desc:"JOHAB",lang:"Korean (Hangul)",alias:""});encodingsList.push({name:"KOI8",desc:"KOI8-R(U)",lang:"Cyrillic",alias:"KOI8R"});encodingsList.push({name:"LATIN1",desc:"ISO 8859-1, ECMA 94",lang:"Western European",alias:"ISO88591"});encodingsList.push({name:"LATIN2",desc:"ISO 8859-2, ECMA 94",lang:"Central European",alias:"ISO88592"});encodingsList.push({name:"LATIN3",desc:"ISO 8859-3, ECMA 94",lang:"South European",alias:"ISO88593"});encodingsList.push({name:"LATIN4",desc:"ISO 8859-4, ECMA 94",lang:"North European",alias:"ISO88594"});encodingsList.push({name:"LATIN5",desc:"ISO 8859-9, ECMA 128",lang:"Turkish",alias:"ISO88599"});encodingsList.push({name:"LATIN6",desc:"ISO 8859-10, ECMA 144",lang:"Nordic",alias:"ISO885910"});encodingsList.push({name:"LATIN7",desc:"ISO 8859-13",lang:"Baltic",alias:"ISO885913"});encodingsList.push({name:"LATIN8",desc:"ISO 8859-14",lang:"Celtic",alias:"ISO885914"});encodingsList.push({name:"LATIN9",desc:"ISO 8859-15",lang:"LATIN1 with Euro and accents",alias:"ISO885915"});encodingsList.push({name:"LATIN10",desc:"ISO 8859-16, ASRO SR 14111",lang:"Romanian",alias:"ISO885916"});encodingsList.push({name:"MULE_INTERNAL",desc:"Mule internal code",lang:"Multilingual Emacs",alias:""});encodingsList.push({name:"SJIS",desc:"Shift JIS, Japanese, Mskanji",lang:"ShiftJIS",alias:"WIN932, Windows932"});encodingsList.push({name:"SQL_ASCII",desc:"unspecified (see text)",lang:"any",alias:""});encodingsList.push({name:"UHC",desc:"Unified Hangul Code",lang:"Korean",alias:"WIN949, Windows949"});encodingsList.push({name:"WINDOWS-866",desc:"Windows CP866",lang:"Cyrillic",alias:"ALT"});encodingsList.push({name:"WINDOWS-874",desc:"Windows CP874",lang:"Thai",alias:""});encodingsList.push({name:"WINDOWS-1250",desc:"Windows CP1250",lang:"Central European",alias:""});encodingsList.push({name:"WINDOWS-1251",desc:"Windows CP1251",lang:"Cyrillic",alias:"WIN"});encodingsList.push({name:"WINDOWS-1252",desc:"Windows CP1252",lang:"Western European",alias:""});encodingsList.push({name:"WINDOWS-1253",desc:"Windows CP1253",lang:"Greek",alias:""});encodingsList.push({name:"WINDOWS-1254",desc:"Windows CP1254",lang:"Turkish",alias:""});encodingsList.push({name:"WINDOWS-1255",desc:"Windows CP1255",lang:"Hebrew",alias:""});encodingsList.push({name:"WINDOWS-1256",desc:"Windows CP1256",lang:"Arabic",alias:""});encodingsList.push({name:"WINDOWS-1257",desc:"Windows CP1257",lang:"Baltic",alias:""});encodingsList.push({name:"WINDOWS-1258",desc:"Windows CP1258",lang:"Vietnamese",alias:"ABC, TCVN, TCVN5712, VSCII"});function getEncodingList(){return encodingsList}var iconvenc=["437","500","500V1","850","851","852","855","856","857","860","861","862","863","864","865","866","866NAV","869","874","904","1026","1046","1047","8859_1","8859_2","8859_3","8859_4","8859_5","8859_6","8859_7","8859_8","8859_9","10646-1:1993","10646-1:1993/UCS4","ANSI_X3.4-1968","ANSI_X3.4-1986","ANSI_X3.4","ANSI_X3.110-1983","ANSI_X3.110","ARABIC","ARABIC7","ARMSCII-8","ASCII","ASMO-708","ASMO_449","BALTIC","BIG-5","BIG-FIVE","BIG5-HKSCS","BIG5","BIG5HKSCS","BIGFIVE","BRF","BS_4730","CA","CN-BIG5","CN-GB","CN","CP-AR","CP-GR","CP-HU","CP037","CP038","CP273","CP274","CP275","CP278","CP280","CP281","CP282","CP284","CP285","CP290","CP297","CP367","CP420","CP423","CP424","CP437","CP500","CP737","CP775","CP803","CP813","CP819","CP850","CP851","CP852","CP855","CP856","CP857","CP860","CP861","CP862","CP863","CP864","CP865","CP866","CP866NAV","CP868","CP869","CP870","CP871","CP874","CP875","CP880","CP891","CP901","CP902","CP903","CP904","CP905","CP912","CP915","CP916","CP918","CP920","CP921","CP922","CP930","CP932","CP933","CP935","CP936","CP937","CP939","CP949","CP950","CP1004","CP1008","CP1025","CP1026","CP1046","CP1047","CP1070","CP1079","CP1081","CP1084","CP1089","CP1097","CP1112","CP1122","CP1123","CP1124","CP1125","CP1129","CP1130","CP1132","CP1133","CP1137","CP1140","CP1141","CP1142","CP1143","CP1144","CP1145","CP1146","CP1147","CP1148","CP1149","CP1153","CP1154","CP1155","CP1156","CP1157","CP1158","CP1160","CP1161","CP1162","CP1163","CP1164","CP1166","CP1167","CP1250","CP1251","CP1252","CP1253","CP1254","CP1255","CP1256","CP1257","CP1258","CP1282","CP1361","CP1364","CP1371","CP1388","CP1390","CP1399","CP4517","CP4899","CP4909","CP4971","CP5347","CP9030","CP9066","CP9448","CP10007","CP12712","CP16804","CPIBM861","CSA7-1","CSA7-2","CSASCII","CSA_T500-1983","CSA_T500","CSA_Z243.4-1985-1","CSA_Z243.4-1985-2","CSA_Z243.419851","CSA_Z243.419852","CSDECMCS","CSEBCDICATDE","CSEBCDICATDEA","CSEBCDICCAFR","CSEBCDICDKNO","CSEBCDICDKNOA","CSEBCDICES","CSEBCDICESA","CSEBCDICESS","CSEBCDICFISE","CSEBCDICFISEA","CSEBCDICFR","CSEBCDICIT","CSEBCDICPT","CSEBCDICUK","CSEBCDICUS","CSEUCKR","CSEUCPKDFMTJAPANESE","CSGB2312","CSHPROMAN8","CSIBM037","CSIBM038","CSIBM273","CSIBM274","CSIBM275","CSIBM277","CSIBM278","CSIBM280","CSIBM281","CSIBM284","CSIBM285","CSIBM290","CSIBM297","CSIBM420","CSIBM423","CSIBM424","CSIBM500","CSIBM803","CSIBM851","CSIBM855","CSIBM856","CSIBM857","CSIBM860","CSIBM863","CSIBM864","CSIBM865","CSIBM866","CSIBM868","CSIBM869","CSIBM870","CSIBM871","CSIBM880","CSIBM891","CSIBM901","CSIBM902","CSIBM903","CSIBM904","CSIBM905","CSIBM918","CSIBM921","CSIBM922","CSIBM930","CSIBM932","CSIBM933","CSIBM935","CSIBM937","CSIBM939","CSIBM943","CSIBM1008","CSIBM1025","CSIBM1026","CSIBM1097","CSIBM1112","CSIBM1122","CSIBM1123","CSIBM1124","CSIBM1129","CSIBM1130","CSIBM1132","CSIBM1133","CSIBM1137","CSIBM1140","CSIBM1141","CSIBM1142","CSIBM1143","CSIBM1144","CSIBM1145","CSIBM1146","CSIBM1147","CSIBM1148","CSIBM1149","CSIBM1153","CSIBM1154","CSIBM1155","CSIBM1156","CSIBM1157","CSIBM1158","CSIBM1160","CSIBM1161","CSIBM1163","CSIBM1164","CSIBM1166","CSIBM1167","CSIBM1364","CSIBM1371","CSIBM1388","CSIBM1390","CSIBM1399","CSIBM4517","CSIBM4899","CSIBM4909","CSIBM4971","CSIBM5347","CSIBM9030","CSIBM9066","CSIBM9448","CSIBM12712","CSIBM16804","CSIBM11621162","CSISO4UNITEDKINGDOM","CSISO10SWEDISH","CSISO11SWEDISHFORNAMES","CSISO14JISC6220RO","CSISO15ITALIAN","CSISO16PORTUGESE","CSISO17SPANISH","CSISO18GREEK7OLD","CSISO19LATINGREEK","CSISO21GERMAN","CSISO25FRENCH","CSISO27LATINGREEK1","CSISO49INIS","CSISO50INIS8","CSISO51INISCYRILLIC","CSISO58GB1988","CSISO60DANISHNORWEGIAN","CSISO60NORWEGIAN1","CSISO61NORWEGIAN2","CSISO69FRENCH","CSISO84PORTUGUESE2","CSISO85SPANISH2","CSISO86HUNGARIAN","CSISO88GREEK7","CSISO89ASMO449","CSISO90","CSISO92JISC62991984B","CSISO99NAPLPS","CSISO103T618BIT","CSISO111ECMACYRILLIC","CSISO121CANADIAN1","CSISO122CANADIAN2","CSISO139CSN369103","CSISO141JUSIB1002","CSISO143IECP271","CSISO150","CSISO150GREEKCCITT","CSISO151CUBA","CSISO153GOST1976874","CSISO646DANISH","CSISO2022CN","CSISO2022JP","CSISO2022JP2","CSISO2022KR","CSISO2033","CSISO5427CYRILLIC","CSISO5427CYRILLIC1981","CSISO5428GREEK","CSISO10367BOX","CSISOLATIN1","CSISOLATIN2","CSISOLATIN3","CSISOLATIN4","CSISOLATIN5","CSISOLATIN6","CSISOLATINARABIC","CSISOLATINCYRILLIC","CSISOLATINGREEK","CSISOLATINHEBREW","CSKOI8R","CSKSC5636","CSMACINTOSH","CSNATSDANO","CSNATSSEFI","CSN_369103","CSPC8CODEPAGE437","CSPC775BALTIC","CSPC850MULTILINGUAL","CSPC862LATINHEBREW","CSPCP852","CSSHIFTJIS","CSUCS4","CSUNICODE","CSWINDOWS31J","CUBA","CWI-2","CWI","CYRILLIC","DE","DEC-MCS","DEC","DECMCS","DIN_66003","DK","DS2089","DS_2089","E13B","EBCDIC-AT-DE-A","EBCDIC-AT-DE","EBCDIC-BE","EBCDIC-BR","EBCDIC-CA-FR","EBCDIC-CP-AR1","EBCDIC-CP-AR2","EBCDIC-CP-BE","EBCDIC-CP-CA","EBCDIC-CP-CH","EBCDIC-CP-DK","EBCDIC-CP-ES","EBCDIC-CP-FI","EBCDIC-CP-FR","EBCDIC-CP-GB","EBCDIC-CP-GR","EBCDIC-CP-HE","EBCDIC-CP-IS","EBCDIC-CP-IT","EBCDIC-CP-NL","EBCDIC-CP-NO","EBCDIC-CP-ROECE","EBCDIC-CP-SE","EBCDIC-CP-TR","EBCDIC-CP-US","EBCDIC-CP-WT","EBCDIC-CP-YU","EBCDIC-CYRILLIC","EBCDIC-DK-NO-A","EBCDIC-DK-NO","EBCDIC-ES-A","EBCDIC-ES-S","EBCDIC-ES","EBCDIC-FI-SE-A","EBCDIC-FI-SE","EBCDIC-FR","EBCDIC-GREEK","EBCDIC-INT","EBCDIC-INT1","EBCDIC-IS-FRISS","EBCDIC-IT","EBCDIC-JP-E","EBCDIC-JP-KANA","EBCDIC-PT","EBCDIC-UK","EBCDIC-US","EBCDICATDE","EBCDICATDEA","EBCDICCAFR","EBCDICDKNO","EBCDICDKNOA","EBCDICES","EBCDICESA","EBCDICESS","EBCDICFISE","EBCDICFISEA","EBCDICFR","EBCDICISFRISS","EBCDICIT","EBCDICPT","EBCDICUK","EBCDICUS","ECMA-114","ECMA-118","ECMA-128","ECMA-CYRILLIC","ECMACYRILLIC","ELOT_928","ES","ES2","EUC-CN","EUC-JISX0213","EUC-JP-MS","EUC-JP","EUC-KR","EUC-TW","EUCCN","EUCJP-MS","EUCJP-OPEN","EUCJP-WIN","EUCJP","EUCKR","EUCTW","FI","FR","GB","GB2312","GB13000","GB18030","GBK","GB_1988-80","GB_198880","GEORGIAN-ACADEMY","GEORGIAN-PS","GOST_19768-74","GOST_19768","GOST_1976874","GREEK-CCITT","GREEK","GREEK7-OLD","GREEK7","GREEK7OLD","GREEK8","GREEKCCITT","HEBREW","HP-ROMAN8","HPROMAN8","HU","IBM-803","IBM-856","IBM-901","IBM-902","IBM-921","IBM-922","IBM-930","IBM-932","IBM-933","IBM-935","IBM-937","IBM-939","IBM-943","IBM-1008","IBM-1025","IBM-1046","IBM-1047","IBM-1097","IBM-1112","IBM-1122","IBM-1123","IBM-1124","IBM-1129","IBM-1130","IBM-1132","IBM-1133","IBM-1137","IBM-1140","IBM-1141","IBM-1142","IBM-1143","IBM-1144","IBM-1145","IBM-1146","IBM-1147","IBM-1148","IBM-1149","IBM-1153","IBM-1154","IBM-1155","IBM-1156","IBM-1157","IBM-1158","IBM-1160","IBM-1161","IBM-1162","IBM-1163","IBM-1164","IBM-1166","IBM-1167","IBM-1364","IBM-1371","IBM-1388","IBM-1390","IBM-1399","IBM-4517","IBM-4899","IBM-4909","IBM-4971","IBM-5347","IBM-9030","IBM-9066","IBM-9448","IBM-12712","IBM-16804","IBM037","IBM038","IBM256","IBM273","IBM274","IBM275","IBM277","IBM278","IBM280","IBM281","IBM284","IBM285","IBM290","IBM297","IBM367","IBM420","IBM423","IBM424","IBM437","IBM500","IBM775","IBM803","IBM813","IBM819","IBM848","IBM850","IBM851","IBM852","IBM855","IBM856","IBM857","IBM860","IBM861","IBM862","IBM863","IBM864","IBM865","IBM866","IBM866NAV","IBM868","IBM869","IBM870","IBM871","IBM874","IBM875","IBM880","IBM891","IBM901","IBM902","IBM903","IBM904","IBM905","IBM912","IBM915","IBM916","IBM918","IBM920","IBM921","IBM922","IBM930","IBM932","IBM933","IBM935","IBM937","IBM939","IBM943","IBM1004","IBM1008","IBM1025","IBM1026","IBM1046","IBM1047","IBM1089","IBM1097","IBM1112","IBM1122","IBM1123","IBM1124","IBM1129","IBM1130","IBM1132","IBM1133","IBM1137","IBM1140","IBM1141","IBM1142","IBM1143","IBM1144","IBM1145","IBM1146","IBM1147","IBM1148","IBM1149","IBM1153","IBM1154","IBM1155","IBM1156","IBM1157","IBM1158","IBM1160","IBM1161","IBM1162","IBM1163","IBM1164","IBM1166","IBM1167","IBM1364","IBM1371","IBM1388","IBM1390","IBM1399","IBM4517","IBM4899","IBM4909","IBM4971","IBM5347","IBM9030","IBM9066","IBM9448","IBM12712","IBM16804","IEC_P27-1","IEC_P271","INIS-8","INIS-CYRILLIC","INIS","INIS8","INISCYRILLIC","ISIRI-3342","ISIRI3342","ISO-2022-CN-EXT","ISO-2022-CN","ISO-2022-JP-2","ISO-2022-JP-3","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-9E","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","ISO-10646","ISO-10646/UCS2","ISO-10646/UCS4","ISO-10646/UTF-8","ISO-10646/UTF8","ISO-CELTIC","ISO-IR-4","ISO-IR-6","ISO-IR-8-1","ISO-IR-9-1","ISO-IR-10","ISO-IR-11","ISO-IR-14","ISO-IR-15","ISO-IR-16","ISO-IR-17","ISO-IR-18","ISO-IR-19","ISO-IR-21","ISO-IR-25","ISO-IR-27","ISO-IR-37","ISO-IR-49","ISO-IR-50","ISO-IR-51","ISO-IR-54","ISO-IR-55","ISO-IR-57","ISO-IR-60","ISO-IR-61","ISO-IR-69","ISO-IR-84","ISO-IR-85","ISO-IR-86","ISO-IR-88","ISO-IR-89","ISO-IR-90","ISO-IR-92","ISO-IR-98","ISO-IR-99","ISO-IR-100","ISO-IR-101","ISO-IR-103","ISO-IR-109","ISO-IR-110","ISO-IR-111","ISO-IR-121","ISO-IR-122","ISO-IR-126","ISO-IR-127","ISO-IR-138","ISO-IR-139","ISO-IR-141","ISO-IR-143","ISO-IR-144","ISO-IR-148","ISO-IR-150","ISO-IR-151","ISO-IR-153","ISO-IR-155","ISO-IR-156","ISO-IR-157","ISO-IR-166","ISO-IR-179","ISO-IR-193","ISO-IR-197","ISO-IR-199","ISO-IR-203","ISO-IR-209","ISO-IR-226","ISO/TR_11548-1","ISO646-CA","ISO646-CA2","ISO646-CN","ISO646-CU","ISO646-DE","ISO646-DK","ISO646-ES","ISO646-ES2","ISO646-FI","ISO646-FR","ISO646-FR1","ISO646-GB","ISO646-HU","ISO646-IT","ISO646-JP-OCR-B","ISO646-JP","ISO646-KR","ISO646-NO","ISO646-NO2","ISO646-PT","ISO646-PT2","ISO646-SE","ISO646-SE2","ISO646-US","ISO646-YU","ISO2022CN","ISO2022CNEXT","ISO2022JP","ISO2022JP2","ISO2022KR","ISO6937","ISO8859-1","ISO8859-2","ISO8859-3","ISO8859-4","ISO8859-5","ISO8859-6","ISO8859-7","ISO8859-8","ISO8859-9","ISO8859-9E","ISO8859-10","ISO8859-11","ISO8859-13","ISO8859-14","ISO8859-15","ISO8859-16","ISO11548-1","ISO88591","ISO88592","ISO88593","ISO88594","ISO88595","ISO88596","ISO88597","ISO88598","ISO88599","ISO88599E","ISO885910","ISO885911","ISO885913","ISO885914","ISO885915","ISO885916","ISO_646.IRV:1991","ISO_2033-1983","ISO_2033","ISO_5427-EXT","ISO_5427","ISO_5427:1981","ISO_5427EXT","ISO_5428","ISO_5428:1980","ISO_6937-2","ISO_6937-2:1983","ISO_6937","ISO_6937:1992","ISO_8859-1","ISO_8859-1:1987","ISO_8859-2","ISO_8859-2:1987","ISO_8859-3","ISO_8859-3:1988","ISO_8859-4","ISO_8859-4:1988","ISO_8859-5","ISO_8859-5:1988","ISO_8859-6","ISO_8859-6:1987","ISO_8859-7","ISO_8859-7:1987","ISO_8859-7:2003","ISO_8859-8","ISO_8859-8:1988","ISO_8859-9","ISO_8859-9:1989","ISO_8859-9E","ISO_8859-10","ISO_8859-10:1992","ISO_8859-14","ISO_8859-14:1998","ISO_8859-15","ISO_8859-15:1998","ISO_8859-16","ISO_8859-16:2001","ISO_9036","ISO_10367-BOX","ISO_10367BOX","ISO_11548-1","ISO_69372","IT","JIS_C6220-1969-RO","JIS_C6229-1984-B","JIS_C62201969RO","JIS_C62291984B","JOHAB","JP-OCR-B","JP","JS","JUS_I.B1.002","KOI-7","KOI-8","KOI8-R","KOI8-RU","KOI8-T","KOI8-U","KOI8","KOI8R","KOI8U","KSC5636","L1","L2","L3","L4","L5","L6","L7","L8","L10","LATIN-9","LATIN-GREEK-1","LATIN-GREEK","LATIN1","LATIN2","LATIN3","LATIN4","LATIN5","LATIN6","LATIN7","LATIN8","LATIN10","LATINGREEK","LATINGREEK1","MAC-CENTRALEUROPE","MAC-CYRILLIC","MAC-IS","MAC-SAMI","MAC-UK","MAC","MACCYRILLIC","MACINTOSH","MACIS","MACUK","MACUKRAINIAN","MIK","MS-ANSI","MS-ARAB","MS-CYRL","MS-EE","MS-GREEK","MS-HEBR","MS-MAC-CYRILLIC","MS-TURK","MS932","MS936","MSCP949","MSCP1361","MSMACCYRILLIC","MSZ_7795.3","MS_KANJI","NAPLPS","NATS-DANO","NATS-SEFI","NATSDANO","NATSSEFI","NC_NC0010","NC_NC00-10","NC_NC00-10:81","NF_Z_62-010","NF_Z_62-010_(1973)","NF_Z_62-010_1973","NF_Z_62010","NF_Z_62010_1973","NO","NO2","NS_4551-1","NS_4551-2","NS_45511","NS_45512","OS2LATIN1","OSF00010001","OSF00010002","OSF00010003","OSF00010004","OSF00010005","OSF00010006","OSF00010007","OSF00010008","OSF00010009","OSF0001000A","OSF00010020","OSF00010100","OSF00010101","OSF00010102","OSF00010104","OSF00010105","OSF00010106","OSF00030010","OSF0004000A","OSF0005000A","OSF05010001","OSF100201A4","OSF100201A8","OSF100201B5","OSF100201F4","OSF100203B5","OSF1002011C","OSF1002011D","OSF1002035D","OSF1002035E","OSF1002035F","OSF1002036B","OSF1002037B","OSF10010001","OSF10020025","OSF10020111","OSF10020115","OSF10020116","OSF10020118","OSF10020122","OSF10020129","OSF10020352","OSF10020354","OSF10020357","OSF10020359","OSF10020360","OSF10020364","OSF10020365","OSF10020366","OSF10020367","OSF10020370","OSF10020387","OSF10020388","OSF10020396","OSF10020402","OSF10020417","PT","PT2","PT154","R8","RK1048","ROMAN8","RUSCII","SE","SE2","SEN_850200_B","SEN_850200_C","SHIFT-JIS","SHIFT_JIS","SHIFT_JISX0213","SJIS-OPEN","SJIS-WIN","SJIS","SS636127","STRK1048-2002","ST_SEV_358-88","T.61-8BIT","T.61","T.618BIT","TCVN-5712","TCVN","TCVN5712-1","TCVN5712-1:1993","TIS-620","TIS620-0","TIS620.2529-1","TIS620.2533-0","TIS620","TS-5881","TSCII","UCS-2","UCS-2BE","UCS-2LE","UCS-4","UCS-4BE","UCS-4LE","UCS2","UCS4","UHC","UJIS","UK","UNICODE","UNICODEBIG","UNICODELITTLE","US-ASCII","US","UTF-7","UTF-8","UTF-16","UTF-16BE","UTF-16LE","UTF-32","UTF-32BE","UTF-32LE","UTF7","UTF8","UTF16","UTF16BE","UTF16LE","UTF32","UTF32BE","UTF32LE","VISCII","WCHAR_T","WIN-SAMI-2","WINBALTRIM","WINDOWS-31J","WINDOWS-874","WINDOWS-936","WINDOWS-1250","WINDOWS-1251","WINDOWS-1252","WINDOWS-1253","WINDOWS-1254","WINDOWS-1255","WINDOWS-1256","WINDOWS-1257","WINDOWS-1258","WINSAMI2","WS2","YU"];var gcFileExt={};gcFileExt.All={label:"All Files (*.*)",ext:""};gcFileExt.Spatial={label:"All Spatial Files (*.shp; *.mif; *.mid; *.tab; *.kml; *.gpx, *.tif; *.tiff; *.sid; *.ecw; *.img; *.jp2; *.jpg; *.gif; *.png; *.pdf; *.json; *.geojson; *.sqlite)",ext:"shp,mif,mid,tab,kml,gpx,sqlite,tif,tiff,jpg,gif,sid,hgt,dem,json,geojson,ecw,img,jp2,pdf,png"};gcFileExt.SpatialVector={label:"Spatial Vector Files (*.shp; *.mif; *.mid; *.tab; *.kml; *.gpx; *.json; *.geojson; *.sqlite)",ext:"shp,mif,mid,tab,kml,gpx,json,geojson,sqlite"};gcFileExt.SpatialRaster={label:"Spatial Raster Files (*.tif; *.tiff; *.jpg; *.gif; *.sid; *.ecw; *.ecw; *.jp2; *.pdf; *.png)",ext:"tif,tiff,jpg,gif,sid,hgt,dem,ecw,img,jp2,pdf,png"};gcFileExt.Shape=gcFileExt.Shapefile={label:"ESRI Shapefiles (*.shp)",ext:"shp"};gcFileExt.MapInfo={label:"MapInfo Files(*.mif)",ext:"mif"};gcFileExt.CSV={label:"Excel 2003 and CSV Files (*.csv; *.xls)",ext:"csv,xls"};gcFileExt.GTiff={label:"GeoTiff Files (*.tif; *.tiff)",ext:"tif,tiff"};gcFileExt.Media={label:"Media Files (*.jpg; *.png; *.gif; *.pdf; *.mp3; *.mp4; *.aac; *.flac; *.wav; *.m4a; *.wma; *.mp4; *.3gp; *.ogv; *.wmv; *.webm; *.flv; *.avi; *.mpg)",ext:"jpg,png,gif,pdf,mp3,mp4,aac,flac,wav,m4a,wma,3gp,ogv,wmv,webm,flv,avi,mpg"};gcFileExt.Image={label:"Image Files (*.jpg; *.png; *.gif)",ext:"jpg,jpeg,png,gif"};gcFileExt.Audio={label:"Audio Files (*.mp3; *.mp4; *.aac; *.flac; *.wav; *.m4a; *.wma;)",ext:"mp3,mp4,aac,flac,wav,m4a,wma"};gcFileExt.Video={label:"Video Files (*.mp4; *.3gp; *.ogv; *.wmv; *.webm; *.flv; *.avi; *.mpg; *.mov;)",ext:"mp4,3gp,ogv,wmv,webm,flv,avi,mpg,mov"};gcFileExt.AAll=[gcFileExt.All,gcFileExt.Spatial,gcFileExt.SpatialVector,gcFileExt.SpatialRaster,gcFileExt.CSV];var cPostGIS=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"modules_gc/layer/cpostgis.php",module:"postgis"},initialize:function(e){this.lastImportData=null},a:function(e){},onImportToPostGISComplete:function(e){om.hideLoader();if(e.result=="yes"){gcapp.check_subscription();om.showMessage(e.msg);loadPostGISLayers()}else{var t="Error while importing data into database. ";if(e.output){t+=e.output}else{t+=e.msg}giscloud.log.push("import_postgis_error",{error:t});this.lastImportData.error=t;this.showImportToPGDialog(this.lastImportData)}},onImportFormClose:function(e){if(!e||!e.epsg){return}this.lastImportData=e;giscloud.log.push("import_postgis_start",{epsg:e.epsg,tablename:e.tablename});fnm.importToPostGIS(e,gcPostGIS.onImportToPostGISComplete.bind(gcPostGIS))},showImportToPGDialog:function(e,t){var i={fid:"postgisimport",width:600,height:"auto",bootstrap:true,overlay:false,title:"Import to database",url:fno.liveSite+"dbmanager/form_importtogis",data:e,buttons:[{id:"ipgf_import",html:"Import",click:"",class:"bluebutton"},{id:"ipgf_cancel",html:"Cancel",click:""}]};importtopgdialogform=formManager.open(i);importtopgdialogform.addEvent("close",this.onImportFormClose.bind(this))},showImportToPG2PGDialog:function(e){var t={fid:"pg2pgimport",width:600,height:"auto",title:"Import to database",url:fno.liveSite+"dbmanager/form_import_pg2pg",fdata:e,bootstrap:true,overlay:false,buttons:[{html:"Import",click:"gcapp.importpg2pg.startImport();",class:"bluebutton"},{html:"Close",click:"importtopgdialogform.close();"}]};importtopgdialogform=formManager.open(t);importtopgdialogform.addEvent("close",this.onImportFormClose.bind(this));return importtopgdialogform},duplicate:function(e,t,i,n){if(!e||!(e.length>0))return;var a={module:"postgis",task:"duplicate",tables:e.join(),connid:i,schema:n};this.call(a,"duplicate",t)},truncate:function(e,t,i,n){if(!e||!(e.length>0))return;var a={module:"postgis",task:"truncate",tables:e.join(),connid:i,schema:n};this.call(a,"truncate",t)},showCSV2PostGISWizard:function(e,t){var i={fid:"csv2postgis",width:600,height:"auto",title:gclang.csv_import_wizard,url:fno.liveSite+"dbmanager/form_importcsv2postgis",data:e};csv2postgiswizard=formManager.open(i);csv2postgiswizard.addEvent("close",this.onImportFormClose.bind(this))}});gcPostGIS=new cPostGIS;var fnApplication=new giscloud.blja.Class({Implements:[giscloud.blja.Events,giscloud.blja.Options],getOptions:function(){return{isMap:false,hideAuxMenu:false,generatorConnected:false,auxMenuOpacity:0}},initialize:function(e,t){this.setOptions(this.getOptions(),t);this.path=null;this.liveSite=null;this.lastMapID=-1;this.queue={}},isConnected:function(){return this.options.generatorConnected},safeUnloadMap:function(){if(fnm.isVisible()){fnw.removeEventListener("scalechange",gcapp.gcmap.onScaleChange.bind(gcapp.map));fnw.removeEventListener("onloadstart",gcapp.gcmap.onTileStartLoading.bind(gcapp.map));fnw.removeEventListener("onloadend",gcapp.gcmap.onTileStopLoading.bind(gcapp.map))}},loadModule:function(e,t,i){this.safeUnloadMap();if(e=="main"){e="main2"}else{$(e).empty();$(e).showLoader()}var n=new RequestMootools.HTML({url:t.url,update:$(e),onComplete:i,evalResponse:false,evalScripts:true}).get(t.data)},unloadModule:function(e){this.safeUnloadMap();if(e=="main"){}else{$(e).empty()}},call:function(e,t){var i=new RequestMootools.JSON({url:e,onComplete:function(e){t(e)}}).send()},showMap:function(e,t){var i=this.getMap();if(!i)return;if(fnm.isVisible()){if(i.mid==this.lastMapID&&!t){gcapp.gcmap.reloadMap(e)}else{this.lastMapID=i.mid;gcapp.gcmap.loadMap(i.mid,e)}}else{safeLoadMapData={mid:i.mid,callback:e}}},unloadMap:function(){if(fnm.isVisible()){}},setMap:function(e){this.currentMap=e;var n={};if(e&&e.options){if(typeof e.options=="string"){var t=e.options.split(";_;_");$.each(t,function(e,t){var i=t.split("||||");n[i[0]]=i[1]})}else{n=e.options}}var i;if(e&&e.permissions){if(typeof e.permissions=="string"){i=e.permissions.split(",")}else{i=e.permissions}}if(this.currentMap){this.currentMap.permissions=i;this.currentMap.options=n}gcapp.gcmap.updateProj4();fn.setTitle(e);if(e)gcapp.headerToolbarActions&&gcapp.headerToolbarActions.setCurrentMapId(e.mid);fn.shareStatus()},shareStatus:function(){var e=jQuery("#layers-panel_title");if(!e.length||!this.currentMap)return;$(".gc-map-share-status").remove();if(this.currentMap.share=="t"){$("<i/>").addClass("gc-map-share-status fa fa-globe").appendTo(e.parent()).attr("title","This map is publicly available. Click to change.").click(function(){if(gcapp.checkAndWarnForLogin())gcproject.sharingAndPublishMap()})}},getPermalink:function(){if(!this.currentMap.name)return null;var e=get_sef(this.currentMap.name);return fno.liveSite+"map/"+this.currentMap.mid+"/"+e},getPermalinkPath:function(){if(!this.currentMap||!this.currentMap.name)return"";var e=get_sef(this.currentMap.name);return"/map/"+this.currentMap.mid+"/"+e},getViewerPermalink:function(){if(!this.currentMap.name)return null;var e=get_sef(this.currentMap.name);return fno.viewerSite+"map/"+this.currentMap.mid+"/"+e},setTitle:function(e){var t=fno.namePrefix?fno.namePrefix+" - ":"";if(e){var i=this.getPermalink();e.name=e.name||"";var n=gcApp.utils.escapeHtml(e.name);if(fno.app_instance_id!=fno.gcinit_mdc_portal_id){gcapp.headerToolbarActions&&gcapp.headerToolbarActions.setProjectName(n)}gcapp.headerToolbarActions&&gcapp.headerToolbarActions.showProjectName();if($("#map_name_link").length){$("#map_name_link").attr("title",n).attr("href",i).html(e.name);$("#map_link").attr("href",i)}if($("#layers-panel_title").length>0&&!$("#layers-panel_title").data().mapName){$("#layers-panel_title").html("<a id='map_perm_link' class='linkbutton' href='"+i+"' target=\"_parent\" title='"+n+"'>"+n+"</a>")}document.title=t+fno.name+" - Map '"+e.name+"'";if(this.currentMap)this.currentMap.name=e.name}else{if($("#layers-panel_title")){$("#layers-panel_title").html("")}document.title=t+fno.name;gcapp.headerToolbarActions&&gcapp.headerToolbarActions.setProjectName("")}},getMap:function(){return this.currentMap},showMedia:function(e){if(!e||!e.url)return;var t=e.width?e.width:150;var i=e.height?e.height+69:190;t=Math.min(800,t);i=Math.min(800,i);var n="Media Player";if(e.title)n=e.title+" - "+n;if(this.mediaform)this.mediaform.close();var a=[{html:"Close",click:"fn.mediaform.close();"}];if(e.column){a.push({id:"fm_next_bt",html:"Next",click:"fmNext();"});a.push({id:"fm_prev_bt",html:"Previous",click:"fmPrev();"})}this.mediaform=formManager.open({fid:"mediaform",minimize:true,overlay:false,dragable:true,title:n,width:t,height:i,url:fno.liveSite+"feature/form_media",data:e,buttons:a});this.mediaform.fdata=e;this.mediaform.addEvent("minimize",function(){jQuery(".gc-media-form-pagination").hide()});this.mediaform.addEvent("maximize",function(){jQuery(".gc-media-form-pagination").show()})},getFormValues:function(e){e=$(e);if(!e)return null;var a={};$.each(e.find("input, select, textarea"),function(e,t){if(!t.attr("name")||t.prop("disabled"))return;var i=t.prop("tagName").toLowerCase()=="select"?Element.getSelected(t).map(function(e){return e.value}):(t.type=="radio"||t.type=="checkbox")&&!t.checked?null:t.value;var n=new Array;$splat(i).each(function(e){if(e)n.push(e)});if(n.length>0)a[t.name]=n.join(",")});return a}});var gcGeoprocessing=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"modules_gc/geoprocessing/cgeoprocessing.php",module:"layer"},initialize:function(e){this.options.module="geoprocessing"},merge:function(e,t){if(!e||typeof e!="object")return;e.module=this.options.module;e.task="merge";this.call(e,"merge",t)}});var fnLayer=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"modules_gc/layer/clayer.php",module:"layer"},initialize:function(e){this.lastSelectedLayer=-1;this.lastBeforeID=-1;this.options.module="layer"},unselect:function(){if(gcapp.gclayer)gcapp.gclayer.llist.unselect()},setData:function(e){return;this.removeLayers(true);if(e&&e.length>0){function i(e){e.each(function(e,t){e.data.dts_permissions=e.data.dts_permissions?e.data.dts_permissions.split(","):[];if($.type(e.children)=="array"&&e.children.length>0){i(e.children)}})}i(e)}this.layerData=e;if(gcapp.gclayer)gcapp.gclayer.llist.setData(e);if(this.lastSelection){if(gcapp.gclayer)gcapp.gclayer.llist.setSelection(this.lastSelection,true);this.lastSelection=null}else{this.unselect()}this.fireEvent("setdata",{data:this.layerData})},transformPoint:function(e,t,i,n,a,s){if(!i||!n){return}this.call({module:"layer",task:"transform_point",x:e,y:t,s_srs:i,t_srs:n,postgis:a?"yes":"no"},"transform_point",s)},getFileImportInfo:function(e,t){if(!e){return}this.call({module:"layer",task:"getfileimportinfo",filepath:e},"getfileimportinfo",t)},getInfoByLayerID:function(e,t){if(!e){return}this.call({module:"layer",task:"getinfobylayerid",lid:e},"getinfobylayerid",t)},getStatsByLayerID:function(e,t){if(!e||!e.lid||!e.column||!e.operation){return}e.module="layer";e.task="getstatsbylayerid";this.call(e,"getstatsbylayerid",t)},getSelectedLayers:function(e){if(!gcapp.gclayer||!gcapp.gclayer.llist)return null;if(e){return gcapp.gclayer.llist.getSelected()}var t=gcapp.gclayer.llist.getSelection();return t},getLayersNum:function(){return this.layerData.length},getLayers:function(e,t){if(gcapp.gclayer&&gcapp.gclayer.llist)return gcapp.gclayer.llist.getLayers(e);else return[]},recursiveFlatten:function(e,t){if(!e)return t;var i=this;jQuery(e).each(function(){t.push(this);if(this.children&&this.children.length>0)t=i.recursiveFlatten(this.children,t)});return t},getLayer:function(e){return this.layerData[e]},getLayerById:function(e){if(e<0)return null;return gcapp.gclayer.llist.tttree.getLayerById(e)},getChildren:function(e){if(!this.layerData)return[];var t=this.recursiveLayerWalker(this.layerData,e,true),i=[];if(!t.children||!t.children.length)return[];jQuery.each(t.children,function(e,t){i.push(t.data)});return i},recursiveLayerWalker:function(e,t,i){var n=null;if(!e)return n;var a=this;jQuery(e).each(function(){if(this.data&&this.data.id==t){n=i?this:this.data;return}if(!n&&this.children&&this.children.length>0)n=a.recursiveLayerWalker(this.children,t)});return n},removeLayers:function(e){if(gcapp.gclayer&&gcapp.gclayer.llist)gcapp.gclayer.llist.empty(e)},removeLayer:function(e){if(gcapp.gclayer)gcapp.gclayer.llist.removeItem(e)},addLayer:function(e){this.layerData.push(e)},saveLayer:function(e,t){if(!e){return}if(e.task=="new"){e.module="layer";this.call(e,"savelayer",t)}else if(e.task=="update"){jQuery.ajax({dataType:"json",url:"/layer/update",data:e,success:t,type:"POST"})}},deleteLayer:function(e,t){if(!e||e&&e.length==0){return}giscloud.log.push("layer_delete",{lid:e.join()});this.call({module:"layer",task:"delete",lids:e},"deletelayer",t)},duplicateLayer:function(e,t,i){if(!e){return}giscloud.log.push("layer_duplicate",{lid:e,duplicatesource:t});this.call({module:"layer",task:"duplicate",layerid:e,dplsrc:t?"yes":"no"},"duplicatelayer",i)},invertSelection:function(e,t){if(!e){return}this.call({module:"layer",task:"invertselection",selection:e},"invertselection",t)},newLayerFromSelection:function(e,t){if(!e||!e.lid||!e.fids){return}giscloud.log.push("layer_new_from_selection",{mid:currentMapID,lid:e.lid,count:e.fids.length});this.call({module:"layer",task:"newlayerfromselection",selection:JSON.stringify(e)},"newlayerfromselection",t)},createLayer:function(e,t){if(!e||!e.tablename||!e.attributes||!e.epsg||!e.geometrytype){return}e.module="layer";e.task="createlayer";this.call(e,"createlayer",function(e){giscloud.log.push("layer_create",{lid:e.lid});if(t)t(e)})},getFeaturesByBound:function(e,t){if(!e||!e.lid||!e.bound){return}e.bound=JSON.stringify(e.bound);e.module="layer";e.task="getfeaturesbybound";this.call(e,"getfeaturesbybound",t)},getType:function(e){switch(parseInt(e)){case 1:case 4:return"point";break;case 2:case 5:return"line";break;case 3:case 6:return"polygon";break}return"geometry"},saveOrder:function(e,t,i,n){if(!e){return}var a=i.grp==2;this.call({module:"layer",task:"sort",ordernames:e,mid:t,lid:i.id,isbasemap:a},"saveorder",n)},saveState:function(e,t,i,n,a){if((e||n)&&t&&i!=undefined&&i!=null){this.call({module:"layer",task:"savestate",lid:e,property:t,value:i,baselayer:n},"savestate",a)}},getPostGISColumns:function(e,t){if(!e)return;this.call({module:"layer",task:"getpostgiscolumns",lid:e},"getPostGISColumns",t)},getInfo:function(e,t){var i;switch(typeof e){case"string":i=getSourceObject(e);break;case"object":i=e;break;default:return false}if(!i)return false;switch(i.type){case"file":var n={};n.getinfo=fno.resources+"resources"+i.src;this.getPostGISInfo(i,i.proj4,i.encoding,t);return true;break;case"pg":this.getPostGISInfo(i,i.proj4,i.encoding,t);return true;break;default:return false}return false},getPostGISInfo:function(e,t,i,n){if(!e||typeof e!="object")return;var a={module:"layer",task:"getpostgisinfo",source:JSON.stringify(e)};if(i&&i.length>0)a.encoding=i;if(t&&t.length>0)a.proj4=t;this.call(a,"getpostgisinfo",n)},getPostGISLayers:function(e){var t={};t.module="layer";t.task="getpostgislayers";this.call(t,"getpostgislayers",e);return true},deletePostGISLayers:function(e,t,i,n){if(!e){return false}var a={};a.module="layer";a.task="deletepostgislayers";a.layers=e.join(",");a.connid=t;$.extend(a,i||{});this.call(a,"getpostgislayers",n);return true},getPostGISRecord:function(e,t,i,n,a,s,r,o){if(!e||!t){return}var l={module:"layer",task:"getpostgisrecord",source:e,id:t};if(n&&n.length>0)l.encoding=n;if(i&&i.length>0)l.proj4=i;if(a)l.lid=a;if(s)l.mid=s;if(r)l.tooltip=r;this.call(l,"getpostgisrecord",o)},reproject:function(e,t){if(!e||typeof e!="object")return;e.module="layer";e.task="reproject";this.call(e,"reproject",t)},getQuery:function(e,t){if(!e){return}var i={module:"layer",task:"getquery",queries:JSON.stringify(e)};this.call(i,"getquery",t)},export:function(e,t){jQuery.getJSON("/datasource/export",e).always(function(e){if(t)t(e)})}});var fnMap=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"modules_gc/map/cmap.php",module:"map"},initialize:function(e){this.mapdata=null;this.activemapid=null;this.layerstogenerate=null;this.editable=null;this.addEvent("list",function(e){this.mapdata=e})},getInfo:function(e,t,i,n,a){if(!e){return}var s=fno.liveSite+"rest/1/layers/"+e+"/attributeops/info.json";var r={};if(n)r.enc=n;if(i)r.proj4=i;om.gaq("map","getinfo","postgis",e+" "+t+" "+i);var o=new RequestMootools.JSON({url:s,onComplete:a}).get(r)},getFeatureInfo:function(e,t,i,n,a,s,r,o,l){if(!e||!t||n==null){return}var d={};d.module="layer";d.task="getinfoforfile";d.source=t;d.lid=e;d.mid=currentMapID;d.uid=n;d.layerid=i;d.tooltip=r;if(o){d.attrib=o}if(s&&s.length>0)d.enc=s;if(a&&a.length>0)d.proj4=a;om.gaq("map","getfeatureinfo",currentMapID,e+" "+t);var u=new RequestMootools.JSON({url:"/modules_gc/layer/clayer.php",onComplete:l}).get(d)},getMapData:function(e){if(this.mapdata)if(e>=0&&e<this.mapdata.length)return this.mapdata[e];return null},isGoogleProj:function(e){return e==3857||e==900913},isReprojectable:function(t){var i=[],n=[],a=function(e){return fnm.isGoogleProj(e)?900913:e},s,r,o;if(!fn.getMap()){return null}t=a(t);$.map(giscloud.ui.map.layers,function(e){if(["wms","wmts","tile"].contains(e.sourceType)){n.push(e)}});$.map(n,function(e){s=fnl.getLayerById(e.id);r=s.epsg?parseFloat(s.epsg):null;o=s.source.type||s.sourcetype||s.sourceType;r=a(r);if(["tile","wmts","wms"].contains(o)&&(!isNaN(r)&&r!=t||r===null&&o==="tile")){i.push(s)}});return i},getReprojectionConfirmMsg:function(e){var t,i;t=jQuery.map(e,function(e){return"<li>"+e.name+"</li>"}).join("");i="<div class='big' >Some layers in your map can not be reprojected so they need to be removed.<br><br>";i+="<ul class='gc-list' >"+t+"</ul>";i+="<br/>Do you want to continue?</div>";return i},showUserPrivateMaps:function(){var e,t;if(!user.private_maps)return;if(user.private_maps.length==0){giscloud.ui.confirm("All your maps are already public.",{title:"Private maps",hide_no:true});return}else{e="You have "+user.private_maps.length+" private maps.<br/>"}t="<div class='gc-private-maps-list big' >Free license doesn't allow private maps.<br/><br/>";t+=e;t+="<br/>Do you want to make them all publicly available to continue using the service under Free subscription?";t+="<br/><br/>WARNING: ANYONE WILL BE ABLE TO SEE YOUR MAPS. Once you make your maps publicly available you'll need to manually make them private again if you decide to switch to the premium license!</div>";giscloud.ui.confirm(t,{title:"Private maps"}).yes(function(){om.kcall("map/make_all_maps_public",null,function(){gcapp.check_subscription(function(){if(gcapp.userform)gcapp.userform.subscription.refresh()});om.showConfirm("All your maps are now publicly available.")})});jQuery(".gc-private-maps-list li").click(function(e){var t=jQuery(e.currentTarget).attr("rel");gcproject.mapChange(t)})},getMapDataByID:function(e,t){if(!e)return;var i={mid:e},n=__("Loading map! Please wait...");giscloud.ui.alert.show(n).green();jQuery.getJSON("/map/byid",i).always(function(e){if(gcproject.isMapAccessibleByPlan(e)){if(t){$.when(t(e)).always(giscloud.ui.alert.hide);return}}else{gcapp.homepage.show();mapNotAllowed()}giscloud.ui.alert.hide()})},saveMap:function(e,t){if(!e){return}e.module="map";this.call(e,"savemap",t)},deleteMap:function(e,t){if(!(e>0)){return}var i={};i.module="map";i.mapid=e;i.task="delete";giscloud.log.push("map_delete",{mid:e});this.call(i,"deletemap",t)},duplicateMap:function(e,t){if(!(e>0)){return}var i={};i.module="map";i.mapid=e;i.task="duplicate";giscloud.log.push("map_duplicate",{mid:e});this.call(i,"duplicatemap",t)},generate:function(e){if(!e){return}this.call({module:"map",task:"generate",mid:e},"generate")},cache2:function(e){if(!e||!e.mid){return}var t=function(e){if(!e){om.showError("There was an error creating cache.");return}if(e.result=="yes")om.showConfirm("Finished successfully!");else if(e.code&&e.msg)om.showError(e.code+" "+e.msg)};var i={module:"map",task:"cache",mid:e.mid};if(e.layers)i.layers=e.layers;if(e.force)i.force=e.force;this.call(i,"cache",t)},clearMapCache:function(e,t,i,n){if(!e){return}var a=function(e){if(n)n();om.showMessage(e.msg)};var s={module:"map",task:"clearmapcache",mid:e},r="Clearing map cache! Please wait... ",o=this;if(t)s.layersname=t;if(i)s.recache=i;giscloud.ui.alert.show(r).green();jQuery.getJSON("/map/clear_map_cache",s).always(function(e){giscloud.ui.alert.hide();if(a)a(e);o.fireEvent("clearmapcache")})},isVisible:function(){if($("#flashcontent").length&&fnw)return true;else return false},shareWMS:function(e,t,i){if(!e||!t){return}var n={module:"map",task:"sharewms",mid:e,wmsaccess:t};giscloud.log.push("share_map_wms",{mid:e,wmsaccess:t});this.call(n,"sharepublic",i)},importToPostGIS:function(e,t){if(!e||!e.tablename){return}e.module="map";e.task="importtopostgis";this.call(e,"importtopostgis",t)},proj42epsg:function(e,t){if(!e){return}this.call({module:"map",task:"proj42epsg",proj4:e},"proj42epsg",t)},getUnitFromProj4:function(e,t){if(!e){return}var i=e.split(" ");var n,a,s,r;for(var o=0;o<i.length;o++){var l=i[o].split("=");switch(l[0]){case"+proj":n=l[1];break;case"+units":a=l[1];break;case"+ellps":s=l[1].toLowerCase();break;case"+datum":r=l[1].toLowerCase();break}}if(s=="wgs84"||r=="wgs84")return"degree";if(a=="m")return"meter";switch(n){case"longlat":return"degree";break;case"utm":return"meter";break;case"merc":return"meter";break;case"tmerc":return"meter";break;default:return"";break}}});var gcReferences=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"reference",module:"media",container:null,lightbox:true,addButton:false,editable:false},initialize:function(e){this.setOptions(e);var t=typeof this.options.container=="string"?"#"+this.options.container:this.options.container;this.container=$(t);if(!this.container)return;this.references=new omRanges(this.container,{renderFunction:this.referenceRenderer.bind(this),sortable:true,deleteButton:this.options.editable,addButton:this.options.addButton});this.references.addEvent("newrange",this.onNewReference.bind(this));this.references.addEvent("deleterange",this.onDeleteReference.bind(this));var i=this;jQuery(".gc-btn-attach").off("click").click(function(e){i.newReference()});if(this.options.editable)jQuery("#gc_attach_bt").show();else jQuery("#gc_attach_bt").hide();this.list()},onListComplete:function(e,t){if(window.formreferences)formreferences.enable(true);if(!e){om.showError("There was an error.");return}if(e.result=="yes"){if(e.references&&e.references.length>0)this.references.deserialize(e.references);if(this.options.lightbox)gcApp.utils.initLightbox()}else{om.showError(e.msg)}},list:function(){if(!this.container)return;var e={module:this.options.module,task:"listreferences"};if(this.options.featureId&&this.options.layerId){e.lid=this.options.layerId;e.fid=this.options.featureId}else if(this.options.layerId){e.lid=this.options.layerId}else if(this.options.resourceId){e.resource_id=this.options.resourceId}else{console.log("Parameters are missing.");return}this.references.removeAll();if(window.formreferences)formreferences.disable(true);this.call(e,"listreferences",this.onListComplete.bind(this))},onSaveComplete:function(e,t){if(!e){om.showError("There was an error.");return}if(e.result=="yes"){t.data("data",{id:e.id,reference:e.reference});om.showConfirm(e.msg)}else{om.showError(e.msg)}this.list()},onBrowserSelect:function(e,t){t=t?t:this.references.addRange();if(!this.options.featureId||!this.options.layerId){console.log("Parameters are missing.");return}var i=t.data("data");if(!e||!e.files||!(e.files.length>0)){if(!i)this.references.deleteRange(t);return}var n=e.files[0];t.find(".reference").html(this.formatField({reference:n.path}));var a=this.options.layerId;var s=this.options.featureId;var r={module:this.options.module};if(i&&is_numeric(i.id)){r.task="updatereference";r.rid=i.id}else{r.task="savereference"}r.lid=a;r.fid=s;r.reference=n.relpath;var o=this;this.call(r,null,function(e){o.onSaveComplete(e,t)})},newReference:function(){this.onNewReference()},onNewReference:function(){this.showBrowser()},onDeleteReferenceComplete:function(e){if(!e){om.showError("There was an error.");return}if(e.result=="yes"){om.showConfirm(e.msg)}else{om.showError(e.msg)}},onDeleteReference:function(e){if(!e.data||!is_numeric(e.data.id))return;var t={module:this.options.module,task:"deletereference",rid:e.data.id};if(e.last){e.li.remove();e.li.data("data",null)}this.call(t,"deletereference",this.onDeleteReferenceComplete.bind(this))},showMedia:function(e,t){var i=t.data("data");var n=i.reference.substring(i.reference.lastIndexOf(".")+1);if(["jpg","jpeg","gif","png"].contains(n)){fn.showMedia({url:fno.liveSite+"assets/icon.php?p="+i.reference})}},referenceRenderer:function(e,t){var i=$("<div/>");i.addClass("reference");var n=$("<i/>").attr("title","Click to change reference");n.addClass("fa fa-paperclip");n.appendTo(e);i.appendTo(e);if(t&&t.reference){e.data("data",t);var a=this.formatField(t);i.html(a)}gcApp.utils.initLightbox()},formatField:function(e){var t=e.reference.substring(e.reference.lastIndexOf("/")+1);var i=e.reference.substring(e.reference.lastIndexOf(".")+1);if(["jpg","jpeg","gif","png","pdf"].contains(i)){}else{}var n=fno.liveSite+"reference/show/"+e.lid+"/"+e.id;var a="<a class='linkbutton' target='_blank' href='"+n+"' data-lightbox-type='iframe' data-lightbox-gallery='lightbox-attachments' >"+t+"</a>";a+="<div class='small comment gc-attach-date' >"+jQuery.datepicker.formatDate("dd MM, yy",new Date(e.created*1e3))+"</div>";return a},onChangeReferenceClick:function(e,t){this.showBrowser(t)},showBrowser:function(e){var t=this,i=formManager.fileBrowser({upload:true,selectmode:true,showimages:true,extensions:[gcFileExt.All],postgis:false});i.addEvent("close",function(e){t.onBrowserSelect(e)})},close:function(e){}});var gcToolbar=new giscloud.blja.Class({Implements:[giscloud.blja.Events],initialize:function(e){this.options={expanded:true,container:null,edit:true,elements:["homepage","togglemobile","search","togglemenu","layerlist","viewerswitch","currentlocation","zoom","zoomin","zoomout","viewall","select","info","measure","selectarea","selectfreehand","streetview","print","coordinates","scale","userlogin","locationtools"],mobile:fno.mobilebrowser&&window.screen.width<801};fno.newdesign=$("body").hasClass("gc-new-design");if(this.options.mobile){$(".gc-toolbar-menu").addClass("gc-responsive")}$.extend(this.options,e);this.tools={};this._opened=false;this.draw();this.active=null;var t=$.cookie("gc_map_toolbar_expanded");if(t!=undefined&&t!=null)this.toggleToolbar(t=="true");if(this.options.mobile){$("ul.gc-toolbar-menu").width($("body").width());var t=$.cookie("gc_map_toolbar_responsive_expanded");if(t!=undefined&&t!=null)this.toggleToolbarResponsive(t=="true");else this.toggleToolbarResponsive(false)}},setLocationToolbarPosition:function(e){var e=e||{},t=e.position,s=e.datagridTrigger?e.datagridOpen:$("#datagrid_pad").is(":visible")||$("#giscloud-datagrid").children().height()>0,i=e.panelOpen||e.datagridTrigger&&$("#gc-panel-right").css("right")!=="-300px",n=giscloud.app&&giscloud.app.panels&&giscloud.app.panels.length;if(this.options.mobile){return}var a=Math.round($(".gc-verticalcenter").height()/2);if(t){t.top&&$(".gc-verticalcenter").css("top",t.top);t.right&&$("ul.gc-toolbar-menu.-vertical").css("margin-right",t.right);return}else if(!s&&!i&&n===0){$(".gc-verticalcenter").css("top","calc(50% - "+a+"px)");$("ul.gc-toolbar-menu.-vertical").css("margin-right",0);return}if(s){$(".gc-verticalcenter").css("top",53)}else{$(".gc-verticalcenter").css("top","calc(50% - "+a+"px)")}if(i){$("ul.gc-toolbar-menu.-vertical").css("margin-right",$("#gc-panel-right").width())}else{$("ul.gc-toolbar-menu.-vertical").css("margin-right",0)}if(n>0){giscloud.app.panels.forEach(function(e,t){var i=e.getPanelEl(),n=giscloud.app.config.panels[t],a=parseInt(i.css("right").replace("px",""));if(s&&a&&a<64){i.css("right",64)}else if(!s&&a&&a>=64){if(n&&n.css&&n.css.right){i.css("right",n.css.right)}else{i.css("right",20)}}});if(!s){$(".gc-verticalcenter").css("top","calc(100% - "+(a*2+34)+"px)")}}},draw:function(){function e(){var e=$.cookie("gc_layer_list_visibility"),t=user&&user.options?user.options.LAYER_LIST_OPEN:undefined;if(e==null){if(t==="0"){return false}return true}return e!=="false"}if(window.toolbarControl)window.toolbarControl.empty();if(window.locationToolbarControl)window.locationToolbarControl.empty();if(this.options.elements&&!this.options.elements.contains("locationtools")&&(this.options.elements.contains("viewerswitch")||this.options.elements.contains("currentlocation")||this.options.elements.contains("zoomin")||this.options.elements.contains("zoomout"))){this.options.elements.push("locationtools")}if(this.options.elements.contains("locationtools")&&!this.options.mobile){if($(".datagrid-drawer").length>0){$(".datagrid-drawer").on("open.gc-datagrid-drawer",this.setLocationToolbarPosition.bind(this,{datagridTrigger:true,datagridOpen:true}));$(".datagrid-drawer").on("close.gc-datagrid-drawer",this.setLocationToolbarPosition.bind(this,{datagridTrigger:true,datagridOpen:false}))}if(window.gcapp&&gcapp.rpanel){gcapp.rpanel.getPanelEl().on("open",this.setLocationToolbarPosition.bind(this,{panelOpen:true}));gcapp.rpanel.getPanelEl().on("close",this.setLocationToolbarPosition.bind(this,{panelOpen:false}))}if(gcapp.dataGridActions){gcapp.dataGridActions.on("[default]","open",this.setLocationToolbarPosition.bind(this,{datagridTrigger:true,datagridOpen:true}),"on_datagrid_open_change_toolbar_position");gcapp.dataGridActions.on("[default]","close",this.setLocationToolbarPosition.bind(this,{datagridTrigger:true,datagridOpen:false}),"on_datagrid_close_change_toolbar_position")}}if(this.options.elements.contains("togglemobile")&&this.options.mobile)this.add({id:"toolbar_responsive_toggle_bt",tool:"toggletoolbarresponsive",target:"toggletoolbarresponsive",title:gclang.Show_hide_toolbar,text:"Menu on/off",className:"fa-th-large",justAction:true});if(this.options.elements.contains("homepage")&&this.options.mobile)this.add({id:"toolbar_homepage_bt",tool:"homepage",target:"homepage",title:"Home",text:"Home",className:"fa-home",justAction:true});if(this.options.elements.contains("search")){this.add({id:"search_toggle_bt",tool:"search",target:"search",title:gclang.search,text:gclang.search,className:"fa-search",justAction:true})}if(this.options.elements.contains("layerlist")){this.add({id:"layer_list_toolbar_bt",tool:"layerlist",target:"layerlist",title:gclang.Layer_List,text:gclang.Layer_List,className:"fa-list-ul",justAction:true});if(e()){$("#gc_layers_box").show().position({my:"left top",at:"left+1 top+40",of:$(".gc-toolbar-menu")});$("#layer_list_toolbar_bt").addClass("active")}else{$("#gc_layers_box").hide()}}if(this.options.elements.contains("locationtools")){this.setLocationToolbarPosition();var t=giscloud.ui.map.getMode();if(giscloud.browserSupportsGL()&&fno.app_instance_type!=="fleet"){if(!this.options.mobile){this.add({tool:"viewerrotate",target:"viewerrotate",title:__("Rotate the view \n\nCTRL + mouse drag for full 3D"),text:"",textOnlyResponsive:false,className:"gc-toolbar-text-icon",justAction:true,group:"locationtools"})}this.add({tool:"viewerswitch",target:"viewerswitch",title:__("Switch to 3D"),text:t=="2D"?"3D":"2D",textOnlyResponsive:false,className:"gc-toolbar-text-icon",justAction:true,group:"locationtools"})}this.add({tool:"zoomin",target:"zoomin",title:gclang.Zoom_In,text:gclang.Zoom_In,textOnlyResponsive:true,className:"fa-plus fa-lg",justAction:true,group:"locationtools"});this.add({tool:"zoomout",target:"zoomout",title:gclang.Zoom_Out,text:gclang.Zoom_Out,textOnlyResponsive:true,className:"fa-minus fa-lg",justAction:true,group:"locationtools"});this.add({tool:"currentlocation",target:"currentlocation",title:__("Zoom To My Location"),text:__("Current position"),textOnlyResponsive:true,className:"fa-location-arrow fa-lg",justAction:true,group:"locationtools"})}if(this.options.elements.contains("togglemenu")&&!this.options.mobile)this.add({id:"toolbar_toggle_bt",tool:"toggletoolbar",target:"toggletoolbar",title:gclang.Show_hide_toolbar,className:"fa-angle-double-left",justAction:true});if(this.options.elements.contains("info"))this.add({tool:"InfoTool",target:"InfoTool",title:gclang.tools.info,text:gclang.tools.info,textOnlyResponsive:true,className:"fa-info",panWithMiddle:true,active:true,selection:true,clearselection:true});if(this.options.elements.contains("select")&&!this.options.mobile){this.add({tool:"SelectTool",target:"SelectTool",title:gclang.tools.select+" ("+gclang.hold_CTRL_for_multiple_selection+")",className:"gc-icon-arrow-pointer",panWithMiddle:true,selection:true,clearselection:false})}if(this.options.elements.contains("selectarea")&&!this.options.mobile)this.add({tool:"AreaSelection",target:"AreaSelection",title:gclang.tools.areaselection,text:gclang.tools.areaselection,textOnlyResponsive:true,className:"gc-icon-area-selection",panWithMiddle:true,selection:false,clearselection:false});if(this.options.elements.contains("selectfreehand")&&!this.options.mobile)this.add({tool:"freehandSelect",target:"freehandSelect",notFnwTool:true,title:__("Freehand selection"),text:__("Freehand selection"),textOnlyResponsive:true,className:"gc-icon-freehand",panWithMiddle:false,selection:false,clearselection:false});if(fno.streetview_portal_url&&!this.options.mobile&&this.options.elements.contains("streetview")&&user.options.STREETVIEW!="0"){this.streetview=new giscloud.ui.streetView;this.add({tool:"streetview",target:"streetview",title:gclang.Show_Google_Street_View,text:"Street View",textOnlyResponsive:true,className:"fa-street-view"})}if(!this.options.mobile){if(this.options.elements.contains("azimuth"))this.add({tool:"azimuth",target:"azimuth",title:"Azimuth tool",className:"fa-location-arrow",notFnwTool:true,panWithMiddle:true,selection:false,clearselection:true});if(this.options.elements.contains("zoom"))this.add({tool:"SelectAreaTool",target:"SelectAreaTool",title:gclang.tools.zoom,className:"fa-search-plus",panWithMiddle:true,selection:false,clearselection:true})}if(this.options.elements.contains("viewall"))this.add({tool:"viewall",title:gclang.tools.viewall,text:"View all",textOnlyResponsive:true,className:"fa-globe",target:"viewallbutton",justAction:true});if(!this.options.mobile){if(this.options.elements.contains("print")){if(!(user&&user.options&&user.options["TOOLBAR_NO_PRINT"])){this.add("separator");this.add({tool:"print",title:gclang.tools.print,className:"fa-print",target:"printtool",selection:false})}}}this.add("separator");if(this.options.elements.contains("measure")&&!this.options.mobile)this.add({tool:"CoordinateTool",target:"CoordinateTool",title:gclang.Measure_tools,text:gclang.Measure_tools,textOnlyResponsive:true,className:"gc-icon-measure-dist",panWithMiddle:true,selection:false,clearselection:true});if(this.options.elements.contains("areameasure"))this.add({tool:"areameasure",target:"areameasure",title:"Area Measuring",className:"fa-square-o",notFnwTool:true,panWithMiddle:true,selection:false,clearselection:true});if(this.options.elements.contains("distancemeasure"))this.add({tool:"MeasureTool",target:"measuretool",title:gclang.tools.measure,className:"gc-icon-measure",selection:false,panWithMiddle:true});if(this.options.elements.contains("countbypolygon"))this.add({tool:"countbypolygon",target:"countbypolygon",title:"Features Count Tool",className:"fa-money",notFnwTool:true,panWithMiddle:true,selection:false,clearselection:true});if(!this.options.mobile){if(this.options.elements.contains("scale")){var i=window.toolbarControl.add({tool:"scale"});this.scale=$(i).find("div");this.scale.attr("id","scale")}if(this.options.elements.contains("coordinates")){var i=window.toolbarControl.add({tool:"coordinates"});this.cordcheck=$(i).find(".fa");this.cordcheck.attr("id","toolbar_cord_picker");this.cordcheck.attr("title",gclang.Change_units_projection);var n=new giscloud.ui.ProjectionPicker(jQuery("#toolbar_cord_picker"),{no_title:true,hidden_fields:false});jQuery("#toolbar_cord_picker").on("select",function(e,t){gcapp.gcmap.onMapProjectionSelect(t)});this.coordinates=$(i).find("div");this.coordinates.attr("id","coordinatesnum");this.coordinates.attr("title",gclang.tools.coordinates_hint);this.coordinates.attr("html","0, 0");this.coordinates.addClass("coordinates");this.coordInline=new omniEdit("coordinatesnum",{});$(this.coordInline.input).attr("aria-label","Coordinates input");this.coordInline.addEvent("editcomplete",this.inlineCoordinatesChange.bind(this))}this.numofselected=$(window.toolbarControl.add({tool:"numofselected"}));this.numselfeatures=$(this.numofselected).find("div");$(this.numofselected).hide()}else{this.add({tool:"userlogin",title:"Login",text:user.id==-1?"Sign In":"Sign Out",textOnlyResponsive:true,className:"fa-user",target:"userlogin",justAction:true})}},inlineCoordinatesChange:function(e){if(Validate.now(Validate.Format,e.newvalue,{pattern:/^[-+]?[0-9]+[.]?([0-9]*)[\s]*[,][\s]*[-+]?[0-9]+[.]?([0-9]*)?$/i})){var t=e.newvalue.split(",");var i=trim(t[0]);var n=trim(t[1]);if(gcapp.gcmap.proj_src&&gcapp.gcmap.proj_dest&&gcapp.gcmap.proj_src!=gcapp.gcmap.proj_dest){var a={x:i*1,y:n*1};a=giscloud.proj4(gcapp.gcmap.proj_dest,gcapp.gcmap.proj_src,a);i=a.x;n=a.y}giscloud.log.push("mapviewer_set_coordinates",{mid:currentMapID,x:i,y:n});fnw.setLocation(i,n)}else{this.coordInline.set(e.oldvalue)}},add:function(t){if(!t.invisible){if(typeof t=="string"&&t=="separator"){return}var e=window.toolbarControl;if(t.group==="locationtools"&&!this.options.mobile){e=window.locationToolbarControl}var i=$(e.add(t));t.target=i;if(t.onclick)i.click(t.onclick);var n=this;i.mouseover(function(e){n.onToolMouseOver(e,t)});i.mouseout(function(e){n.onToolMouseOut(e,t)});i.click(function(e){e.stopPropagation();n.onToolClick(e,t)});i.mouseup(function(e){e.stopPropagation()});i.attr("data-type",t.tool)}this.tools[t.tool]=t;if(t.active){this.setTool(t.tool)}},setSelectionInfo:function(e){if(!this.numselfeatures)return;if(e){$(this.numselfeatures).html(e);$(this.numofselected).show()}else{$(this.numofselected).hide()}},selectionInfoVisibility:function(){if(!this.numselfeatures)return;var e=this.numselfeatures.html();if(e.length){this.numofselected.show()}else{this.numofselected.hide()}},setTool:function(e,t){var i=this.tools[e];if(!i)return;var n=this.active==e||e=="InfoTool";this.resetActive();this.onToolMouseOver(i,i);this.onToolClick(i,i,t,n)},hideTool:function(e){if(e=="coordinates"){}else{var t=this.tools[e];var i=$(t.target)}i.hide()},showTool:function(e){if(e=="coordinates"){}else{var t=this.tools[e];var i=$(t.target)}i.show()},isStreetViewActive:function(){var e=$(".gc-toolbar-item.gc-tool-active");if(e&&e.attr("data-type")==="streetview"){return true}else{return false}},onToolMouseOver:function(e,t){if(t.invisible)return;var i=$(t.target);this.onHover(i)},onToolMouseOut:function(e,t,i){if(t.invisible)return;var n=$(e.target);if(this.active!=t.tool&&(!t.toggle||!n.hasClass("toggle"))||i){this.onLeave(n)}},onToolClick:function(e,t,i,n){if(this.options.mobile&&t.tool!="toggletoolbarresponsive"){this.toggleToolbarResponsive(false)}if(!n)giscloud.log.push("tool_set",{tool:t.tool,toggle:t.toggle,on:i});if(t.justAction)return this.specialTools(t);if(!t.invisible){var a=$(e.target);if(t.toggle){if(i==null||i==undefined)a.toggleClass("toggle");else if(i)a.addClass("toggle");else a.removeClass("toggle")}}this.resetActive();if(this.specialTools(t)){this.setTool("InfoTool");this.fireEvent("toolchange",{tool:t.tool});return false}if(t.invisible){this.setTool("InfoTool");this.fireEvent("toolchange",{tool:t.tool});return false}this.onToolMouseOver(t,t,true);this.active=t.toggle&&!a.hasClass("toggle")?null:t.tool;if(fnm.isVisible()&&this.active){this.setBehavior(t);$(t.target).addClass("gc-tool-active");if(!t.notFnwTool)fnw.setTool(this.active)}this.fireEvent("toolchange",{tool:this.active});return false},specialTools:function(e,t){if(t&&this.active){switch(e.tool){case"streetview":this.streetview.deactivate();break}}if(!e)return;var i=$(e.target);switch(e.tool){case"AreaSelection":break;case"freehandSelect":this.activateAPITool("freehandSelect",t);return false;break;case"search":this.toggleSearch();return true;break;case"layerlist":this.toggleLayerList();return true;break;case"zoomin":giscloud.ui.map.scale(giscloud.ui.map.scale()+1);return true;break;case"zoomout":giscloud.ui.map.scale(giscloud.ui.map.scale()-1);return true;break;case"viewall":fnw.setViewBoundAnim();return true;break;case"currentlocation":giscloud.ui.map.zoomToCurrentLocation();return true;break;case"viewerswitch":var n=this,a=giscloud.ui.map.getMode(),s,r,o,l;if(this._viewerSwitchInProgress){return true}this._viewerSwitchInProgress=true;o=i.find("span");l=i.find("i");l.addClass("fa fa-spinner fa-spin");o.hide();if(a==="2D"){s="3D";o.attr("title","Switch to 2D");o.text("2D");r="switch_to_3d"}else{s="2D";o.attr("title","Switch to 3D");o.text("3D");if(this.tools.viewerrotate){this.tools.viewerrotate.target.hide()}r="switch_to_2d"}this.toggleLayerListDems(s);giscloud.ui.map.changeMode(s,function(){l.removeClass("fa fa-spinner fa-spin");o.show();n._viewerSwitchInProgress=false;if(n.tools.viewerrotate&&s=="3D"){n.tools.viewerrotate.compassDirection(0);n.tools.viewerrotate.target.show()}});giscloud.log.push(r,{mid:giscloud.ui.map.mapId});return true;break;case"streetview":if(!t){this.streetview.activate()}break;case"homepage":gcapp.homepage.show();return false;case"toggletoolbarresponsive":this.toggleToolbarResponsive(!this.options.expanded);return false;case"toggletoolbar":this.toggleToolbar(!this.options.expanded);return false;case"azimuth":this.activateAPITool("azimuth",t);return false;break;case"areameasure":this.activateAPITool("areaMeasure",t);return false;break;case"distancemeasure":this.activateAPITool("distanceMeasure",t);return false;break;case"countbypolygon":this.activateAPITool("countByPolygon",t);return false;break;case"MeasureTool":return false;case"print":this.print();return true;break;case"userlogin":if(user.id==-1)showLoginForm();else logOut();return true;case"InfoTool":case"SelectTool":var d=fnl.getLayers();for(var u=0;u<d.length;u++){var c=d[u];var h=c.grp!=null?"layer_group_"+c.grp:"layer"+c.id;var f=fnw.getLayerByName(h);if(!f)continue;if(c.lock=="t"){f.setSelectable(false)}else{f.setSelectable(true)}}break;case"CoordinateTool":formManager.close("coordinatetoolwin");if(!t){gcapp.coordinatetoolwin=formManager.open({bootstrap:true,overlay:false,fid:"coordinatetoolwin",minimize:true,dragable:true,title:gclang.Measure_tools,width:380,footer:false,savePosition:true,url:fno.liveSite+"toolbox/coordinatetool/form"})}break}return false},toggleToolbarResponsive:function(e){if(!e){$(".gc-toolbar-item:gt(0)").hide();$("#toolbar_responsive_toggle_bt").addClass("small")}else{$(".gc-toolbar-item:gt(0)").show();$("#toolbar_responsive_toggle_bt").removeClass("small");this.hideSearch();this.hideLayerList()}this.options.expanded=e;$.cookie("gc_map_toolbar_responsive_expanded",e)},toggleToolbar:function(e){if($("#toolbar_toggle_bt").length<1)return;if(!e){var t=[];$("#toolbar_toggle_bt i").addClass("fa-angle-double-right");$("#toolbar_toggle_bt i").removeClass("fa-angle-double-left");if($("#search_toggle_bt").length>0)t.push(1);if($("#layer_list_toolbar_bt").length>0)t.push(1);$(".gc-toolbar-menu:not(.-vertical) .gc-toolbar-item:gt("+t.length+")").hide();this.selectionInfoVisibility()}else{var t=[];$("#toolbar_toggle_bt i").removeClass("fa-angle-double-right");$("#toolbar_toggle_bt i").addClass("fa-angle-double-left");if($("#search_toggle_bt").length>0)t.push(1);if($("#layer_list_toolbar_bt").length>0)t.push(1);$(".gc-toolbar-menu:not(.-vertical) .gc-toolbar-item:gt("+t.length+")").show();this.selectionInfoVisibility()}this.options.expanded=e;$.cookie("gc_map_toolbar_expanded",e)},toggleLayerList:function(){if($("#gc_layers_box").is(":visible")){this.hideLayerList()}else{this.showLayerList()}},toggleLayerListDems:function(e){if(e==="3D"&&$("#customDemListContainer #customDemList").children().length){$("#customDemListContainer").show()}else{$("#customDemListContainer").hide()}},hideLayerList:function(e){$("#gc_layers_box").hide();$("#layer_list_toolbar_bt").removeClass("active");if(!e)$.cookie("gc_layer_list_visibility",false)},showLayerList:function(){this.hideSearch();if(this.options.mobile){$("#gc_layers_box").show().width($("body").width()).position({my:"left top",at:"left top+36",of:$(".gc-toolbar-menu")})}else{$("#gc_layers_box").show().position({my:"left top",at:"left+1 top+40",of:$(".gc-toolbar-menu")})}$("#layer_list_parent").height("auto");$("#layer_list_toolbar_bt").addClass("active");$.cookie("gc_layer_list_visibility",true)},toggleSearch:function(){if($("#gc_search_panel").is(":visible"))this.hideSearch();else this.showSearch()},hideSearch:function(e){$("#search_toggle_bt").removeClass("active");$("#gc_search_panel").hide();$(".gc-search-box").hide()},showSearch:function(){var e;e=this.options.mobile?"left+40 top":"left+1 bottom+10";$(".gc-toolbar-panel").hide();$("#layer_list_toolbar_bt").removeClass("active");$("#gc_search_panel").show().position({my:"left top",at:e,of:$(".gc-toolbar-menu")});$("#search_toggle_bt").addClass("active");$(".quicksearch").focus()},print:function(){if(fnw){gcproject.exportMap({print:true})}},resetActive:function(){if(this.active){var e=this.tools[this.active];if(!e.toggle&&!e.invisible){this.onToolMouseOut(e,e,true);this.specialTools(e,true);this.active=null;$(e.target).removeClass("gc-tool-active")}}},setBehavior:function(e){if(fnm.isVisible()){if(e.panWithMiddle)fnw.enablePanWithMiddleButton();else fnw.disablePanWithMiddleButton();if(e.selection)fnw.enableSelection();else fnw.disableSelection();if(e.clearselection&&gcapp.selo)gcapp.selo.clearSelection()}},activateAPITool:function(e,t){if(t){if(this.currentApiTool){this.currentApiTool.deactivate();this.currentApiTool=null}}else{this.currentApiTool=giscloud.ui.defaultTools.tool(e);this.currentApiTool.viewer=giscloud.ui.map;this.currentApiTool.activate()}},onHover:function(e){if(!e)return;if(e.get("tag")=="div")e=e.getParent();e.addClass("hover")},onLeave:function(e){if(!e)return;if(e.get("tag")=="div")e=e.getParent();e.removeClass("hover")}});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,a;function h(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function l(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function d(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function c(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){for(var i in t)p(t,i)&&(e[i]=t[i]);return p(t,"toString")&&(e.toString=t.toString),p(t,"valueOf")&&(e.valueOf=t.valueOf),e}function g(e,t,i,n){return xt(e,t,i,n,!0).utc()}function _(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function v(e){if(null==e._isValid){var t=_(e),i=a.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function y(e){var t=g(NaN);return null!=e?m(_(t),e):_(t).userInvalidated=!0,t}a=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,n=0;n<i;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var s=h.momentProperties=[];function b(e,t){var i,n,a;if(d(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),d(t._i)||(e._i=t._i),d(t._f)||(e._f=t._f),d(t._l)||(e._l=t._l),d(t._strict)||(e._strict=t._strict),d(t._tzm)||(e._tzm=t._tzm),d(t._isUTC)||(e._isUTC=t._isUTC),d(t._offset)||(e._offset=t._offset),d(t._pf)||(e._pf=_(t)),d(t._locale)||(e._locale=t._locale),0<s.length)for(i=0;i<s.length;i++)d(a=t[n=s[i]])||(e[n]=a);return e}var t=!1;function w(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,h.updateOffset(this),t=!1)}function M(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function k(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function L(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=k(t)),i}function r(e,t,i){var n,a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(n=0;n<a;n++)(i&&e[n]!==t[n]||!i&&L(e[n])!==L(t[n]))&&r++;return r+s}function S(e){!1===h.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function i(a,s){var r=!0;return m(function(){if(null!=h.deprecationHandler&&h.deprecationHandler(null,a),r){for(var e,t=[],i=0;i<arguments.length;i++){if(e="","object"==typeof arguments[i]){for(var n in e+="\n["+i+"] ",arguments[0])e+=n+": "+arguments[0][n]+", ";e=e.slice(0,-2)}else e=arguments[i];t.push(e)}S(a+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),r=!1}return s.apply(this,arguments)},s)}var n,T={};function x(e,t){null!=h.deprecationHandler&&h.deprecationHandler(e,t),T[e]||(S(t),T[e]=!0)}function D(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function C(e,t){var i,n=m({},e);for(i in t)p(t,i)&&(l(e[i])&&l(t[i])?(n[i]={},m(n[i],e[i]),m(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)p(e,i)&&!p(t,i)&&l(e[i])&&(n[i]=m({},n[i]));return n}function I(e){null!=e&&this.set(e)}h.suppressDeprecationWarnings=!1,h.deprecationHandler=null,n=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)p(e,t)&&i.push(t);return i};var E={};function O(e,t){var i=e.toLowerCase();E[i]=E[i+"s"]=E[t]=e}function Y(e){return"string"==typeof e?E[e]||E[e.toLowerCase()]:void 0}function $(e){var t,i,n={};for(i in e)p(e,i)&&(t=Y(i))&&(n[t]=e[i]);return n}var A={};function P(e,t){A[e]=t}function j(e,t,i){var n=""+Math.abs(e),a=t-n.length;return(0<=e?i?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+n}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},R={};function B(e,t,i,n){var a=n;"string"==typeof n&&(a=function(){return this[n]()}),e&&(R[e]=a),t&&(R[t[0]]=function(){return j(a.apply(this,arguments),t[1],t[2])}),i&&(R[i]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function z(e,t){return e.isValid()?(t=U(t,e.localeData()),H[t]=H[t]||function(n){var e,a,t,s=n.match(N);for(e=0,a=s.length;e<a;e++)R[s[e]]?s[e]=R[s[e]]:s[e]=(t=s[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,i="";for(t=0;t<a;t++)i+=D(s[t])?s[t].call(e,n):s[t];return i}}(t),H[t](e)):e.localeData().invalidDate()}function U(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}for(F.lastIndex=0;0<=i&&F.test(e);)e=e.replace(F,n),F.lastIndex=0,i-=1;return e}var W=/\d/,V=/\d\d/,G=/\d{3}/,q=/\d{4}/,J=/[+-]?\d{6}/,Q=/\d\d?/,K=/\d\d\d\d?/,Z=/\d\d\d\d\d\d?/,X=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ie=/\d+/,ne=/[+-]?\d+/,ae=/Z|[+-]\d\d:?\d\d/gi,se=/Z|[+-]\d\d(?::?\d\d)?/gi,re=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,oe={};function le(e,i,n){oe[e]=D(i)?i:function(e,t){return e&&n?n:i}}function de(e,t){return p(oe,e)?oe[e](t._strict,t._locale):new RegExp(ue(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,a){return t||i||n||a})))}function ue(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ce={};function he(e,i){var t,n=i;for("string"==typeof e&&(e=[e]),u(i)&&(n=function(e,t){t[i]=L(e)}),t=0;t<e.length;t++)ce[e[t]]=n}function fe(e,a){he(e,function(e,t,i,n){i._w=i._w||{},a(e,i._w,i,n)})}var pe=0,me=1,ge=2,_e=3,ve=4,ye=5,be=6,we=7,Me=8;function ke(e){return Le(e)?366:365}function Le(e){return e%4==0&&e%100!=0||e%400==0}B("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),B(0,["YY",2],0,function(){return this.year()%100}),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),O("year","y"),P("year",1),le("Y",ne),le("YY",Q,V),le("YYYY",ee,q),le("YYYYY",te,J),le("YYYYYY",te,J),he(["YYYYY","YYYYYY"],pe),he("YYYY",function(e,t){t[pe]=2===e.length?h.parseTwoDigitYear(e):L(e)}),he("YY",function(e,t){t[pe]=h.parseTwoDigitYear(e)}),he("Y",function(e,t){t[pe]=parseInt(e,10)}),h.parseTwoDigitYear=function(e){return L(e)+(68<L(e)?1900:2e3)};var Se,Te=xe("FullYear",!0);function xe(t,i){return function(e){return null!=e?(Ce(this,t,e),h.updateOffset(this,i),this):De(this,t)}}function De(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Ce(e,t,i){e.isValid()&&!isNaN(i)&&("FullYear"===t&&Le(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),Ie(i,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function Ie(e,t){if(isNaN(e)||isNaN(t))return NaN;var i,n=(t%(i=12)+i)%i;return e+=(t-n)/12,1===n?Le(e)?29:28:31-n%7%2}Se=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",function(){return this.month()+1}),B("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),B("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("month","M"),P("month",8),le("M",Q),le("MM",Q,V),le("MMM",function(e,t){return t.monthsShortRegex(e)}),le("MMMM",function(e,t){return t.monthsRegex(e)}),he(["M","MM"],function(e,t){t[me]=L(e)-1}),he(["MMM","MMMM"],function(e,t,i,n){var a=i._locale.monthsParse(e,n,i._strict);null!=a?t[me]=a:_(i).invalidMonth=e});var Ee=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oe="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Ye="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function $e(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=L(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return i=Math.min(e.date(),Ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function Ae(e){return null!=e?($e(this,e),h.updateOffset(this,!0),this):De(this,"Month")}var Pe=re;var je=re;function Ne(){function e(e,t){return t.length-e.length}var t,i,n=[],a=[],s=[];for(t=0;t<12;t++)i=g([2e3,t]),n.push(this.monthsShort(i,"")),a.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(n.sort(e),a.sort(e),s.sort(e),t=0;t<12;t++)n[t]=ue(n[t]),a[t]=ue(a[t]);for(t=0;t<24;t++)s[t]=ue(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Fe(e){var t;if(e<100&&0<=e){var i=Array.prototype.slice.call(arguments);i[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function He(e,t,i){var n=7+t-i;return-((7+Fe(e,0,n).getUTCDay()-t)%7)+n-1}function Re(e,t,i,n,a){var s,r,o=1+7*(t-1)+(7+i-n)%7+He(e,n,a);return r=o<=0?ke(s=e-1)+o:o>ke(e)?(s=e+1,o-ke(e)):(s=e,o),{year:s,dayOfYear:r}}function Be(e,t,i){var n,a,s=He(e.year(),t,i),r=Math.floor((e.dayOfYear()-s-1)/7)+1;return r<1?n=r+ze(a=e.year()-1,t,i):r>ze(e.year(),t,i)?(n=r-ze(e.year(),t,i),a=e.year()+1):(a=e.year(),n=r),{week:n,year:a}}function ze(e,t,i){var n=He(e,t,i),a=He(e+1,t,i);return(ke(e)-n+a)/7}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),O("week","w"),O("isoWeek","W"),P("week",5),P("isoWeek",5),le("w",Q),le("ww",Q,V),le("W",Q),le("WW",Q,V),fe(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=L(e)});function Ue(e,t){return e.slice(t,7).concat(e.slice(0,t))}B("d",0,"do","day"),B("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),B("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),B("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),O("day","d"),O("weekday","e"),O("isoWeekday","E"),P("day",11),P("weekday",11),P("isoWeekday",11),le("d",Q),le("e",Q),le("E",Q),le("dd",function(e,t){return t.weekdaysMinRegex(e)}),le("ddd",function(e,t){return t.weekdaysShortRegex(e)}),le("dddd",function(e,t){return t.weekdaysRegex(e)}),fe(["dd","ddd","dddd"],function(e,t,i,n){var a=i._locale.weekdaysParse(e,n,i._strict);null!=a?t.d=a:_(i).invalidWeekday=e}),fe(["d","e","E"],function(e,t,i,n){t[n]=L(e)});var We="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ve="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Ge="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var qe=re;var Je=re;var Qe=re;function Ke(){function e(e,t){return t.length-e.length}var t,i,n,a,s,r=[],o=[],l=[],d=[];for(t=0;t<7;t++)i=g([2e3,1]).day(t),n=this.weekdaysMin(i,""),a=this.weekdaysShort(i,""),s=this.weekdays(i,""),r.push(n),o.push(a),l.push(s),d.push(n),d.push(a),d.push(s);for(r.sort(e),o.sort(e),l.sort(e),d.sort(e),t=0;t<7;t++)o[t]=ue(o[t]),l[t]=ue(l[t]),d[t]=ue(d[t]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ze(){return this.hours()%12||12}function Xe(e,t){B(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Ze),B("k",["kk",2],0,function(){return this.hours()||24}),B("hmm",0,0,function(){return""+Ze.apply(this)+j(this.minutes(),2)}),B("hmmss",0,0,function(){return""+Ze.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)}),B("Hmm",0,0,function(){return""+this.hours()+j(this.minutes(),2)}),B("Hmmss",0,0,function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),O("hour","h"),P("hour",13),le("a",et),le("A",et),le("H",Q),le("h",Q),le("k",Q),le("HH",Q,V),le("hh",Q,V),le("kk",Q,V),le("hmm",K),le("hmmss",Z),le("Hmm",K),le("Hmmss",Z),he(["H","HH"],_e),he(["k","kk"],function(e,t,i){var n=L(e);t[_e]=24===n?0:n}),he(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),he(["h","hh"],function(e,t,i){t[_e]=L(e),_(i).bigHour=!0}),he("hmm",function(e,t,i){var n=e.length-2;t[_e]=L(e.substr(0,n)),t[ve]=L(e.substr(n)),_(i).bigHour=!0}),he("hmmss",function(e,t,i){var n=e.length-4,a=e.length-2;t[_e]=L(e.substr(0,n)),t[ve]=L(e.substr(n,2)),t[ye]=L(e.substr(a)),_(i).bigHour=!0}),he("Hmm",function(e,t,i){var n=e.length-2;t[_e]=L(e.substr(0,n)),t[ve]=L(e.substr(n))}),he("Hmmss",function(e,t,i){var n=e.length-4,a=e.length-2;t[_e]=L(e.substr(0,n)),t[ve]=L(e.substr(n,2)),t[ye]=L(e.substr(a))});var tt,it=xe("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Oe,monthsShort:Ye,week:{dow:0,doy:6},weekdays:We,weekdaysMin:Ge,weekdaysShort:Ve,meridiemParse:/[ap]\.?m?\.?/i},at={},st={};function rt(e){return e?e.toLowerCase().replace("_","-"):e}function ot(e){var t=null;if(!at[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=tt._abbr,require("./locale/"+e),lt(t)}catch(e){}return at[e]}function lt(e,t){var i;return e&&((i=d(t)?ut(e):dt(e,t))?tt=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),tt._abbr}function dt(e,t){if(null===t)return delete at[e],null;var i,n=nt;if(t.abbr=e,null!=at[e])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=at[e]._config;else if(null!=t.parentLocale)if(null!=at[t.parentLocale])n=at[t.parentLocale]._config;else{if(null==(i=ot(t.parentLocale)))return st[t.parentLocale]||(st[t.parentLocale]=[]),st[t.parentLocale].push({name:e,config:t}),null;n=i._config}return at[e]=new I(C(n,t)),st[e]&&st[e].forEach(function(e){dt(e.name,e.config)}),lt(e),at[e]}function ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return tt;if(!o(e)){if(t=ot(e))return t;e=[e]}return function(e){for(var t,i,n,a,s=0;s<e.length;){for(t=(a=rt(e[s]).split("-")).length,i=(i=rt(e[s+1]))?i.split("-"):null;0<t;){if(n=ot(a.slice(0,t).join("-")))return n;if(i&&i.length>=t&&r(a,i,!0)>=t-1)break;t--}s++}return tt}(e)}function ct(e){var t,i=e._a;return i&&-2===_(e).overflow&&(t=i[me]<0||11<i[me]?me:i[ge]<1||i[ge]>Ie(i[pe],i[me])?ge:i[_e]<0||24<i[_e]||24===i[_e]&&(0!==i[ve]||0!==i[ye]||0!==i[be])?_e:i[ve]<0||59<i[ve]?ve:i[ye]<0||59<i[ye]?ye:i[be]<0||999<i[be]?be:-1,_(e)._overflowDayOfYear&&(t<pe||ge<t)&&(t=ge),_(e)._overflowWeeks&&-1===t&&(t=we),_(e)._overflowWeekday&&-1===t&&(t=Me),_(e).overflow=t),e}function ht(e,t,i){return null!=e?e:null!=t?t:i}function ft(e){var t,i,n,a,s,r=[];if(!e._d){var o,l;for(o=e,l=new Date(h.now()),n=o._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()],e._w&&null==e._a[ge]&&null==e._a[me]&&function(e){var t,i,n,a,s,r,o,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)s=1,r=4,i=ht(t.GG,e._a[pe],Be(Dt(),1,4).year),n=ht(t.W,1),((a=ht(t.E,1))<1||7<a)&&(l=!0);else{s=e._locale._week.dow,r=e._locale._week.doy;var d=Be(Dt(),s,r);i=ht(t.gg,e._a[pe],d.year),n=ht(t.w,d.week),null!=t.d?((a=t.d)<0||6<a)&&(l=!0):null!=t.e?(a=t.e+s,(t.e<0||6<t.e)&&(l=!0)):a=s}n<1||n>ze(i,s,r)?_(e)._overflowWeeks=!0:null!=l?_(e)._overflowWeekday=!0:(o=Re(i,n,a,s,r),e._a[pe]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(s=ht(e._a[pe],n[pe]),(e._dayOfYear>ke(s)||0===e._dayOfYear)&&(_(e)._overflowDayOfYear=!0),i=Fe(s,0,e._dayOfYear),e._a[me]=i.getUTCMonth(),e._a[ge]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=n[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[_e]&&0===e._a[ve]&&0===e._a[ye]&&0===e._a[be]&&(e._nextDay=!0,e._a[_e]=0),e._d=(e._useUTC?Fe:function(e,t,i,n,a,s,r){var o;return e<100&&0<=e?(o=new Date(e+400,t,i,n,a,s,r),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,i,n,a,s,r),o}).apply(null,r),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_e]=24),e._w&&void 0!==e._w.d&&e._w.d!==a&&(_(e).weekdayMismatch=!0)}}var pt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gt=/Z|[+-]\d\d(?::?\d\d)?/,_t=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],vt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],yt=/^\/?Date\((\-?\d+)/i;function bt(e){var t,i,n,a,s,r,o=e._i,l=pt.exec(o)||mt.exec(o);if(l){for(_(e).iso=!0,t=0,i=_t.length;t<i;t++)if(_t[t][1].exec(l[1])){a=_t[t][0],n=!1!==_t[t][2];break}if(null==a)return void(e._isValid=!1);if(l[3]){for(t=0,i=vt.length;t<i;t++)if(vt[t][1].exec(l[3])){s=(l[2]||" ")+vt[t][0];break}if(null==s)return void(e._isValid=!1)}if(!n&&null!=s)return void(e._isValid=!1);if(l[4]){if(!gt.exec(l[4]))return void(e._isValid=!1);r="Z"}e._f=a+(s||"")+(r||""),St(e)}else e._isValid=!1}var wt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Mt(e,t,i,n,a,s){var r=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),Ye.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(a,10)];return s&&r.push(parseInt(s,10)),r}var kt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Lt(e){var t,i,n,a=wt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(a){var s=Mt(a[4],a[3],a[2],a[5],a[6],a[7]);if(t=a[1],i=s,n=e,t&&Ve.indexOf(t)!==new Date(i[0],i[1],i[2]).getDay()&&(_(n).weekdayMismatch=!0,!(n._isValid=!1)))return;e._a=s,e._tzm=function(e,t,i){if(e)return kt[e];if(t)return 0;var n=parseInt(i,10),a=n%100;return(n-a)/100*60+a}(a[8],a[9],a[10]),e._d=Fe.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),_(e).rfc2822=!0}else e._isValid=!1}function St(e){if(e._f!==h.ISO_8601)if(e._f!==h.RFC_2822){e._a=[],_(e).empty=!0;var t,i,n,a,s,r,o,l,d=""+e._i,u=d.length,c=0;for(n=U(e._f,e._locale).match(N)||[],t=0;t<n.length;t++)a=n[t],(i=(d.match(de(a,e))||[])[0])&&(0<(s=d.substr(0,d.indexOf(i))).length&&_(e).unusedInput.push(s),d=d.slice(d.indexOf(i)+i.length),c+=i.length),R[a]?(i?_(e).empty=!1:_(e).unusedTokens.push(a),r=a,l=e,null!=(o=i)&&p(ce,r)&&ce[r](o,l._a,l,r)):e._strict&&!i&&_(e).unusedTokens.push(a);_(e).charsLeftOver=u-c,0<d.length&&_(e).unusedInput.push(d),e._a[_e]<=12&&!0===_(e).bigHour&&0<e._a[_e]&&(_(e).bigHour=void 0),_(e).parsedDateParts=e._a.slice(0),_(e).meridiem=e._meridiem,e._a[_e]=function(e,t,i){var n;if(null==i)return t;return null!=e.meridiemHour?e.meridiemHour(t,i):(null!=e.isPM&&((n=e.isPM(i))&&t<12&&(t+=12),n||12!==t||(t=0)),t)}(e._locale,e._a[_e],e._meridiem),ft(e),ct(e)}else Lt(e);else bt(e)}function Tt(e){var t,i,n,a,s=e._i,r=e._f;return e._locale=e._locale||ut(e._l),null===s||void 0===r&&""===s?y({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),M(s)?new w(ct(s)):(c(s)?e._d=s:o(r)?function(e){var t,i,n,a,s;if(0===e._f.length)return _(e).invalidFormat=!0,e._d=new Date(NaN);for(a=0;a<e._f.length;a++)s=0,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],St(t),v(t)&&(s+=_(t).charsLeftOver,s+=10*_(t).unusedTokens.length,_(t).score=s,(null==n||s<n)&&(n=s,i=t));m(e,i||t)}(e):r?St(e):d(i=(t=e)._i)?t._d=new Date(h.now()):c(i)?t._d=new Date(i.valueOf()):"string"==typeof i?(n=t,null===(a=yt.exec(n._i))?(bt(n),!1===n._isValid&&(delete n._isValid,Lt(n),!1===n._isValid&&(delete n._isValid,h.createFromInputFallback(n)))):n._d=new Date(+a[1])):o(i)?(t._a=f(i.slice(0),function(e){return parseInt(e,10)}),ft(t)):l(i)?function(e){if(!e._d){var t=$(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ft(e)}}(t):u(i)?t._d=new Date(i):h.createFromInputFallback(t),v(e)||(e._d=null),e))}function xt(e,t,i,n,a){var s,r={};return!0!==i&&!1!==i||(n=i,i=void 0),(l(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=a,r._l=i,r._i=e,r._f=t,r._strict=n,(s=new w(ct(Tt(r))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Dt(e,t,i,n){return xt(e,t,i,n,!1)}h.createFromInputFallback=i("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),h.ISO_8601=function(){},h.RFC_2822=function(){};var Ct=i("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()}),It=i("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:y()});function Et(e,t){var i,n;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Dt();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}var Ot=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Yt(e){var t=$(e),i=t.year||0,n=t.quarter||0,a=t.month||0,s=t.week||t.isoWeek||0,r=t.day||0,o=t.hour||0,l=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Se.call(Ot,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var i=!1,n=0;n<Ot.length;++n)if(e[Ot[n]]){if(i)return!1;parseFloat(e[Ot[n]])!==L(e[Ot[n]])&&(i=!0)}return!0}(t),this._milliseconds=+u+1e3*d+6e4*l+1e3*o*60*60,this._days=+r+7*s,this._months=+a+3*n+12*i,this._data={},this._locale=ut(),this._bubble()}function $t(e){return e instanceof Yt}function At(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Pt(e,i){B(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+j(~~(e/60),2)+i+j(~~e%60,2)})}Pt("Z",":"),Pt("ZZ",""),le("Z",se),le("ZZ",se),he(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Nt(se,e)});var jt=/([\+\-]|\d\d)/gi;function Nt(e,t){var i=(t||"").match(e);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(jt)||["-",0,0],a=60*n[1]+L(n[2]);return 0===a?0:"+"===n[0]?a:-a}function Ft(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(M(e)||c(e)?e.valueOf():Dt(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),h.updateOffset(i,!1),i):Dt(e).local()}function Ht(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Rt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}h.updateOffset=function(){};var Bt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,zt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ut(e,t){var i,n,a,s=e,r=null;return $t(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:u(e)?(s={},t?s[t]=e:s.milliseconds=e):(r=Bt.exec(e))?(i="-"===r[1]?-1:1,s={y:0,d:L(r[ge])*i,h:L(r[_e])*i,m:L(r[ve])*i,s:L(r[ye])*i,ms:L(At(1e3*r[be]))*i}):(r=zt.exec(e))?(i="-"===r[1]?-1:1,s={y:Wt(r[2],i),M:Wt(r[3],i),w:Wt(r[4],i),d:Wt(r[5],i),h:Wt(r[6],i),m:Wt(r[7],i),s:Wt(r[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(a=function(e,t){var i;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Ft(t,e),e.isBefore(t)?i=Vt(e,t):((i=Vt(t,e)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(Dt(s.from),Dt(s.to)),(s={}).ms=a.milliseconds,s.M=a.months),n=new Yt(s),$t(e)&&p(e,"_locale")&&(n._locale=e._locale),n}function Wt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Vt(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Gt(n,a){return function(e,t){var i;return null===t||isNaN(+t)||(x(a,"moment()."+a+"(period, number) is deprecated. Please use moment()."+a+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=e,e=t,t=i),qt(this,Ut(e="string"==typeof e?+e:e,t),n),this}}function qt(e,t,i,n){var a=t._milliseconds,s=At(t._days),r=At(t._months);e.isValid()&&(n=null==n||n,r&&$e(e,De(e,"Month")+r*i),s&&Ce(e,"Date",De(e,"Date")+s*i),a&&e._d.setTime(e._d.valueOf()+a*i),n&&h.updateOffset(e,s||r))}Ut.fn=Yt.prototype,Ut.invalid=function(){return Ut(NaN)};var Jt=Gt(1,"add"),Qt=Gt(-1,"subtract");function Kt(e,t){var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,"months");return-(i+(t-n<0?(t-n)/(n-e.clone().add(i-1,"months")):(t-n)/(e.clone().add(i+1,"months")-n)))||0}function Zt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ut(e))&&(this._locale=t),this)}h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function ei(){return this._locale}var ti=126227808e5;function ii(e,t){return(e%t+t)%t}function ni(e,t,i){return e<100&&0<=e?new Date(e+400,t,i)-ti:new Date(e,t,i).valueOf()}function ai(e,t,i){return e<100&&0<=e?Date.UTC(e+400,t,i)-ti:Date.UTC(e,t,i)}function si(e,t){B(0,[e,e.length],0,t)}function ri(e,t,i,n,a){var s;return null==e?Be(this,n,a).year:((s=ze(e,n,a))<t&&(t=s),function(e,t,i,n,a){var s=Re(e,t,i,n,a),r=Fe(s.year,0,s.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}.call(this,e,t,i,n,a))}B(0,["gg",2],0,function(){return this.weekYear()%100}),B(0,["GG",2],0,function(){return this.isoWeekYear()%100}),si("gggg","weekYear"),si("ggggg","weekYear"),si("GGGG","isoWeekYear"),si("GGGGG","isoWeekYear"),O("weekYear","gg"),O("isoWeekYear","GG"),P("weekYear",1),P("isoWeekYear",1),le("G",ne),le("g",ne),le("GG",Q,V),le("gg",Q,V),le("GGGG",ee,q),le("gggg",ee,q),le("GGGGG",te,J),le("ggggg",te,J),fe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=L(e)}),fe(["gg","GG"],function(e,t,i,n){t[n]=h.parseTwoDigitYear(e)}),B("Q",0,"Qo","quarter"),O("quarter","Q"),P("quarter",7),le("Q",W),he("Q",function(e,t){t[me]=3*(L(e)-1)}),B("D",["DD",2],"Do","date"),O("date","D"),P("date",9),le("D",Q),le("DD",Q,V),le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),he(["D","DD"],ge),he("Do",function(e,t){t[ge]=L(e.match(Q)[0])});var oi=xe("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),O("dayOfYear","DDD"),P("dayOfYear",4),le("DDD",X),le("DDDD",G),he(["DDD","DDDD"],function(e,t,i){i._dayOfYear=L(e)}),B("m",["mm",2],0,"minute"),O("minute","m"),P("minute",14),le("m",Q),le("mm",Q,V),he(["m","mm"],ve);var li=xe("Minutes",!1);B("s",["ss",2],0,"second"),O("second","s"),P("second",15),le("s",Q),le("ss",Q,V),he(["s","ss"],ye);var di,ui=xe("Seconds",!1);for(B("S",0,0,function(){return~~(this.millisecond()/100)}),B(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,function(){return 10*this.millisecond()}),B(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),B(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),B(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),B(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),B(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),O("millisecond","ms"),P("millisecond",16),le("S",X,W),le("SS",X,V),le("SSS",X,G),di="SSSS";di.length<=9;di+="S")le(di,ie);function ci(e,t){t[be]=L(1e3*("0."+e))}for(di="S";di.length<=9;di+="S")he(di,ci);var hi=xe("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var fi=w.prototype;function pi(e){return e}fi.add=Jt,fi.calendar=function(e,t){var i=e||Dt(),n=Ft(i,this).startOf("day"),a=h.calendarFormat(this,n)||"sameElse",s=t&&(D(t[a])?t[a].call(this,i):t[a]);return this.format(s||this.localeData().calendar(a,this,Dt(i)))},fi.clone=function(){return new w(this)},fi.diff=function(e,t,i){var n,a,s;if(!this.isValid())return NaN;if(!(n=Ft(e,this)).isValid())return NaN;switch(a=6e4*(n.utcOffset()-this.utcOffset()),t=Y(t)){case"year":s=Kt(this,n)/12;break;case"month":s=Kt(this,n);break;case"quarter":s=Kt(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-a)/864e5;break;case"week":s=(this-n-a)/6048e5;break;default:s=this-n}return i?s:k(s)},fi.endOf=function(e){var t;if(void 0===(e=Y(e))||"millisecond"===e||!this.isValid())return this;var i=this._isUTC?ai:ni;switch(e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-ii(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-ii(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-ii(t,1e3)-1;break}return this._d.setTime(t),h.updateOffset(this,!0),this},fi.format=function(e){e||(e=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);var t=z(this,e);return this.localeData().postformat(t)},fi.from=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Dt(e).isValid())?Ut({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},fi.fromNow=function(e){return this.from(Dt(),e)},fi.to=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Dt(e).isValid())?Ut({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},fi.toNow=function(e){return this.to(Dt(),e)},fi.get=function(e){return D(this[e=Y(e)])?this[e]():this},fi.invalidAt=function(){return _(this).overflow},fi.isAfter=function(e,t){var i=M(e)?e:Dt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=Y(t)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},fi.isBefore=function(e,t){var i=M(e)?e:Dt(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=Y(t)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},fi.isBetween=function(e,t,i,n){var a=M(e)?e:Dt(e),s=M(t)?t:Dt(t);return!!(this.isValid()&&a.isValid()&&s.isValid())&&("("===(n=n||"()")[0]?this.isAfter(a,i):!this.isBefore(a,i))&&(")"===n[1]?this.isBefore(s,i):!this.isAfter(s,i))},fi.isSame=function(e,t){var i,n=M(e)?e:Dt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=Y(t)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},fi.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},fi.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},fi.isValid=function(){return v(this)},fi.lang=Xt,fi.locale=Zt,fi.localeData=ei,fi.max=It,fi.min=Ct,fi.parsingFlags=function(){return m({},_(this))},fi.set=function(e,t){if("object"==typeof e)for(var i=function(e){var t=[];for(var i in e)t.push({unit:i,priority:A[i]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=$(e)),n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit]);else if(D(this[e=Y(e)]))return this[e](t);return this},fi.startOf=function(e){var t;if(void 0===(e=Y(e))||"millisecond"===e||!this.isValid())return this;var i=this._isUTC?ai:ni;switch(e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ii(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=ii(t,6e4);break;case"second":t=this._d.valueOf(),t-=ii(t,1e3);break}return this._d.setTime(t),h.updateOffset(this,!0),this},fi.subtract=Qt,fi.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},fi.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},fi.toDate=function(){return new Date(this.valueOf())},fi.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||9999<i.year()?z(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",z(i,"Z")):z(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},fi.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var i="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a=t+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+a)},fi.toJSON=function(){return this.isValid()?this.toISOString():null},fi.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},fi.unix=function(){return Math.floor(this.valueOf()/1e3)},fi.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},fi.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},fi.year=Te,fi.isLeapYear=function(){return Le(this.year())},fi.weekYear=function(e){return ri.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},fi.isoWeekYear=function(e){return ri.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},fi.quarter=fi.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},fi.month=Ae,fi.daysInMonth=function(){return Ie(this.year(),this.month())},fi.week=fi.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},fi.isoWeek=fi.isoWeeks=function(e){var t=Be(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},fi.weeksInYear=function(){var e=this.localeData()._week;return ze(this.year(),e.dow,e.doy)},fi.isoWeeksInYear=function(){return ze(this.year(),1,4)},fi.date=oi,fi.day=fi.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,i,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,i=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=i.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-n,"d")):n},fi.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},fi.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,i,n=(t=e,i=this.localeData(),"string"==typeof t?i.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?n:n-7)},fi.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},fi.hour=fi.hours=it,fi.minute=fi.minutes=li,fi.second=fi.seconds=ui,fi.millisecond=fi.milliseconds=hi,fi.utcOffset=function(e,t,i){var n,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?a:Ht(this);if("string"==typeof e){if(null===(e=Nt(se,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(n=Ht(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),a!==e&&(!t||this._changeInProgress?qt(this,Ut(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null)),this},fi.utc=function(e){return this.utcOffset(0,e)},fi.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ht(this),"m")),this},fi.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Nt(ae,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},fi.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Dt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},fi.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},fi.isLocal=function(){return!!this.isValid()&&!this._isUTC},fi.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},fi.isUtc=Rt,fi.isUTC=Rt,fi.zoneAbbr=function(){return this._isUTC?"UTC":""},fi.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},fi.dates=i("dates accessor is deprecated. Use date instead.",oi),fi.months=i("months accessor is deprecated. Use month instead",Ae),fi.years=i("years accessor is deprecated. Use year instead",Te),fi.zone=i("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),fi.isDSTShifted=i("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e={};if(b(e,this),(e=Tt(e))._a){var t=e._isUTC?g(e._a):Dt(e._a);this._isDSTShifted=this.isValid()&&0<r(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var mi=I.prototype;function gi(e,t,i,n){var a=ut(),s=g().set(n,t);return a[i](s,e)}function _i(e,t,i){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return gi(e,t,i,"month");var n,a=[];for(n=0;n<12;n++)a[n]=gi(e,n,i,"month");return a}function vi(e,t,i,n){t=("boolean"==typeof e?u(t)&&(i=t,t=void 0):(t=e,e=!1,u(i=t)&&(i=t,t=void 0)),t||"");var a,s=ut(),r=e?s._week.dow:0;if(null!=i)return gi(t,(i+r)%7,n,"day");var o=[];for(a=0;a<7;a++)o[a]=gi(t,(a+r)%7,n,"day");return o}mi.calendar=function(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return D(n)?n.call(t,i):n},mi.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},mi.invalidDate=function(){return this._invalidDate},mi.ordinal=function(e){return this._ordinal.replace("%d",e)},mi.preparse=pi,mi.postformat=pi,mi.relativeTime=function(e,t,i,n){var a=this._relativeTime[i];return D(a)?a(e,t,i,n):a.replace(/%d/i,e)},mi.pastFuture=function(e,t){var i=this._relativeTime[0<e?"future":"past"];return D(i)?i(t):i.replace(/%s/i,t)},mi.set=function(e){var t,i;for(i in e)D(t=e[i])?this[i]=t:this["_"+i]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},mi.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ee).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},mi.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ee.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},mi.monthsParse=function(e,t,i){var n,a,s;if(this._monthsParseExact)return function(e,t,i){var n,a,s,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=g([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(a=Se.call(this._shortMonthsParse,r))?a:null:-1!==(a=Se.call(this._longMonthsParse,r))?a:null:"MMM"===t?-1!==(a=Se.call(this._shortMonthsParse,r))?a:-1!==(a=Se.call(this._longMonthsParse,r))?a:null:-1!==(a=Se.call(this._longMonthsParse,r))?a:-1!==(a=Se.call(this._shortMonthsParse,r))?a:null}.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(a=g([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},mi.monthsRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(p(this,"_monthsRegex")||(this._monthsRegex=je),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},mi.monthsShortRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(p(this,"_monthsShortRegex")||(this._monthsShortRegex=Pe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},mi.week=function(e){return Be(e,this._week.dow,this._week.doy).week},mi.firstDayOfYear=function(){return this._week.doy},mi.firstDayOfWeek=function(){return this._week.dow},mi.weekdays=function(e,t){var i=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ue(i,this._week.dow):e?i[e.day()]:i},mi.weekdaysMin=function(e){return!0===e?Ue(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},mi.weekdaysShort=function(e){return!0===e?Ue(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},mi.weekdaysParse=function(e,t,i){var n,a,s;if(this._weekdaysParseExact)return function(e,t,i){var n,a,s,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=g([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(a=Se.call(this._weekdaysParse,r))?a:null:"ddd"===t?-1!==(a=Se.call(this._shortWeekdaysParse,r))?a:null:-1!==(a=Se.call(this._minWeekdaysParse,r))?a:null:"dddd"===t?-1!==(a=Se.call(this._weekdaysParse,r))?a:-1!==(a=Se.call(this._shortWeekdaysParse,r))?a:-1!==(a=Se.call(this._minWeekdaysParse,r))?a:null:"ddd"===t?-1!==(a=Se.call(this._shortWeekdaysParse,r))?a:-1!==(a=Se.call(this._weekdaysParse,r))?a:-1!==(a=Se.call(this._minWeekdaysParse,r))?a:null:-1!==(a=Se.call(this._minWeekdaysParse,r))?a:-1!==(a=Se.call(this._weekdaysParse,r))?a:-1!==(a=Se.call(this._shortWeekdaysParse,r))?a:null}.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(a=g([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}},mi.weekdaysRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(p(this,"_weekdaysRegex")||(this._weekdaysRegex=qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},mi.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},mi.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ke.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},mi.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},mi.meridiem=function(e,t,i){return 11<e?i?"pm":"PM":i?"am":"AM"},lt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===L(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),h.lang=i("moment.lang is deprecated. Use moment.locale instead.",lt),h.langData=i("moment.langData is deprecated. Use moment.localeData instead.",ut);var yi=Math.abs;function bi(e,t,i,n){var a=Ut(t,i);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function wi(e){return e<0?Math.floor(e):Math.ceil(e)}function Mi(e){return 4800*e/146097}function ki(e){return 146097*e/4800}function Li(e){return function(){return this.as(e)}}var Si=Li("ms"),Ti=Li("s"),xi=Li("m"),Di=Li("h"),Ci=Li("d"),Ii=Li("w"),Ei=Li("M"),Oi=Li("Q"),Yi=Li("y");function $i(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ai=$i("milliseconds"),Pi=$i("seconds"),ji=$i("minutes"),Ni=$i("hours"),Fi=$i("days"),Hi=$i("months"),Ri=$i("years");var Bi=Math.round,zi={ss:44,s:45,m:45,h:22,d:26,M:11};var Ui=Math.abs;function Wi(e){return(0<e)-(e<0)||+e}function Vi(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i=Ui(this._milliseconds)/1e3,n=Ui(this._days),a=Ui(this._months);t=k((e=k(i/60))/60),i%=60,e%=60;var s=k(a/12),r=a%=12,o=n,l=t,d=e,u=i?i.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var h=c<0?"-":"",f=Wi(this._months)!==Wi(c)?"-":"",p=Wi(this._days)!==Wi(c)?"-":"",m=Wi(this._milliseconds)!==Wi(c)?"-":"";return h+"P"+(s?f+s+"Y":"")+(r?f+r+"M":"")+(o?p+o+"D":"")+(l||d||u?"T":"")+(l?m+l+"H":"")+(d?m+d+"M":"")+(u?m+u+"S":"")}var Gi=Yt.prototype;Gi.isValid=function(){return this._isValid},Gi.abs=function(){var e=this._data;return this._milliseconds=yi(this._milliseconds),this._days=yi(this._days),this._months=yi(this._months),e.milliseconds=yi(e.milliseconds),e.seconds=yi(e.seconds),e.minutes=yi(e.minutes),e.hours=yi(e.hours),e.months=yi(e.months),e.years=yi(e.years),this},Gi.add=function(e,t){return bi(this,e,t,1)},Gi.subtract=function(e,t){return bi(this,e,t,-1)},Gi.as=function(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=Y(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,i=this._months+Mi(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(ki(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},Gi.asMilliseconds=Si,Gi.asSeconds=Ti,Gi.asMinutes=xi,Gi.asHours=Di,Gi.asDays=Ci,Gi.asWeeks=Ii,Gi.asMonths=Ei,Gi.asQuarters=Oi,Gi.asYears=Yi,Gi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*L(this._months/12):NaN},Gi._bubble=function(){var e,t,i,n,a,s=this._milliseconds,r=this._days,o=this._months,l=this._data;return 0<=s&&0<=r&&0<=o||s<=0&&r<=0&&o<=0||(s+=864e5*wi(ki(o)+r),o=r=0),l.milliseconds=s%1e3,e=k(s/1e3),l.seconds=e%60,t=k(e/60),l.minutes=t%60,i=k(t/60),l.hours=i%24,o+=a=k(Mi(r+=k(i/24))),r-=wi(ki(a)),n=k(o/12),o%=12,l.days=r,l.months=o,l.years=n,this},Gi.clone=function(){return Ut(this)},Gi.get=function(e){return e=Y(e),this.isValid()?this[e+"s"]():NaN},Gi.milliseconds=Ai,Gi.seconds=Pi,Gi.minutes=ji,Gi.hours=Ni,Gi.days=Fi,Gi.weeks=function(){return k(this.days()/7)},Gi.months=Hi,Gi.years=Ri,Gi.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,i,n,a,s,r,o,l,d,u,c,h=this.localeData(),f=(i=!e,n=h,a=Ut(t=this).abs(),s=Bi(a.as("s")),r=Bi(a.as("m")),o=Bi(a.as("h")),l=Bi(a.as("d")),d=Bi(a.as("M")),u=Bi(a.as("y")),(c=s<=zi.ss&&["s",s]||s<zi.s&&["ss",s]||r<=1&&["m"]||r<zi.m&&["mm",r]||o<=1&&["h"]||o<zi.h&&["hh",o]||l<=1&&["d"]||l<zi.d&&["dd",l]||d<=1&&["M"]||d<zi.M&&["MM",d]||u<=1&&["y"]||["yy",u])[2]=i,c[3]=0<+t,c[4]=n,function(e,t,i,n,a){return a.relativeTime(t||1,!!i,e,n)}.apply(null,c));return e&&(f=h.pastFuture(+this,f)),h.postformat(f)},Gi.toISOString=Vi,Gi.toString=Vi,Gi.toJSON=Vi,Gi.locale=Zt,Gi.localeData=ei,Gi.toIsoString=i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Vi),Gi.lang=Xt,B("X",0,0,"unix"),B("x",0,0,"valueOf"),le("x",ne),le("X",/[+-]?\d+(\.\d{1,3})?/),he("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),he("x",function(e,t,i){i._d=new Date(L(e))}),h.version="2.24.0",e=Dt,h.fn=fi,h.min=function(){return Et("isBefore",[].slice.call(arguments,0))},h.max=function(){return Et("isAfter",[].slice.call(arguments,0))},h.now=function(){return Date.now?Date.now():+new Date},h.utc=g,h.unix=function(e){return Dt(1e3*e)},h.months=function(e,t){return _i(e,t,"months")},h.isDate=c,h.locale=lt,h.invalid=y,h.duration=Ut,h.isMoment=M,h.weekdays=function(e,t,i){return vi(e,t,i,"weekdays")},h.parseZone=function(){return Dt.apply(null,arguments).parseZone()},h.localeData=ut,h.isDuration=$t,h.monthsShort=function(e,t){return _i(e,t,"monthsShort")},h.weekdaysMin=function(e,t,i){return vi(e,t,i,"weekdaysMin")},h.defineLocale=dt,h.updateLocale=function(e,t){if(null!=t){var i,n,a=nt;null!=(n=ot(e))&&(a=n._config),(i=new I(t=C(a,t))).parentLocale=at[e],at[e]=i,lt(e)}else null!=at[e]&&(null!=at[e].parentLocale?at[e]=at[e].parentLocale:null!=at[e]&&delete at[e]);return at[e]},h.locales=function(){return n(at)},h.weekdaysShort=function(e,t,i){return vi(e,t,i,"weekdaysShort")},h.normalizeUnits=Y,h.relativeTimeRounding=function(e){return void 0===e?Bi:"function"==typeof e&&(Bi=e,!0)},h.relativeTimeThreshold=function(e,t){return void 0!==zi[e]&&(void 0===t?zi[e]:(zi[e]=t,"s"===e&&(zi.ss=t-1),!0))},h.calendarFormat=function(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},h.prototype=fi,h.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},h.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,i){return e<12?i?"vm":"VM":i?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}}),h.defineLocale("ar-dz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:4}}),h.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}});var qi={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},Ji=function(e){return 0===e?0:1===e?1:2===e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5},Qi={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},Ki=function(r){return function(e,t,i,n){var a=Ji(e),s=Qi[r][Ji(e)];return 2===a&&(s=s[t?0:1]),s.replace(/%d/i,e)}},Zi=["","","","","","","","","","","",""];h.defineLocale("ar-ly",{months:Zi,monthsShort:Zi,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:Ki("s"),ss:Ki("s"),m:Ki("m"),mm:Ki("m"),h:Ki("h"),hh:Ki("h"),d:Ki("d"),dd:Ki("d"),M:Ki("M"),MM:Ki("M"),y:Ki("y"),yy:Ki("y")},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return qi[e]}).replace(/,/g,"")},week:{dow:6,doy:12}}),h.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}});var Xi={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},en={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return en[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Xi[e]}).replace(/,/g,"")},week:{dow:0,doy:6}}),h.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}});var tn={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},nn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},an=function(e){return 0===e?0:1===e?1:2===e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5},sn={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},rn=function(r){return function(e,t,i,n){var a=an(e),s=sn[r][an(e)];return 2===a&&(s=s[t?0:1]),s.replace(/%d/i,e)}},on=["","","","","","","","","","","",""];h.defineLocale("ar",{months:on,monthsShort:on,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:rn("s"),ss:rn("s"),m:rn("m"),mm:rn("m"),h:rn("h"),hh:rn("h"),d:rn("d"),dd:rn("d"),M:rn("M"),MM:rn("M"),y:rn("y"),yy:rn("y")},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return nn[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return tn[e]}).replace(/,/g,"")},week:{dow:6,doy:12}});var ln={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};function dn(e,t,i){var n,a;return"m"===i?t?"":"":"h"===i?t?"":"":e+" "+(n=+e,a={ss:t?"__":"__",mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[i].split("_"),n%10==1&&n%100!=11?a[0]:2<=n%10&&n%10<=4&&(n%100<10||20<=n%100)?a[1]:a[2])}h.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec\u0259|s\u0259h\u0259r|g\xfcnd\xfcz|ax\u015fam/,isPM:function(e){return/^(g\xfcnd\xfcz|ax\u015fam)$/.test(e)},meridiem:function(e,t,i){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0131nc\u0131|inci|nci|\xfcnc\xfc|nc\u0131|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var t=e%10;return e+(ln[t]||ln[e%100-t]||ln[100<=e?100:null])},week:{dow:1,doy:7}}),h.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[\u0423\u0443\u045e] ?(?:\u043c\u0456\u043d\u0443\u043b\u0443\u044e|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u0443\u044e)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:dn,mm:dn,h:dn,hh:dn,d:"",dd:dn,M:"",MM:dn,y:"",yy:dn},meridiemParse:/\u043d\u043e\u0447\u044b|\u0440\u0430\u043d\u0456\u0446\u044b|\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430/,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430)$/.test(e)},meridiem:function(e,t,i){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(\u0456|\u044b|\u0433\u0430)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}}),h.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(e){var t=e%10,i=e%100;return 0===e?e+"-":0===i?e+"-":10<i&&i<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}}),h.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}});var un={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},cn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ee\u09ef\u09e6]/g,function(e){return cn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return un[e]})},meridiemParse:/\u09b0\u09be\u09a4|\u09b8\u0995\u09be\u09b2|\u09a6\u09c1\u09aa\u09c1\u09b0|\u09ac\u09bf\u0995\u09be\u09b2|\u09b0\u09be\u09a4/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&4<=e||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}});var hn={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},fn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function pn(e,t,i){var n,a,s;return e+" "+(n={mm:"munutenn",MM:"miz",dd:"devezh"}[i],2!==e?n:void 0!==(s={m:"v",b:"v",d:"z"})[(a=n).charAt(0)]?s[a.charAt(0)]+a.substring(1):a)}function mn(e,t,i){var n=e+" ";switch(i){case"ss":return n+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return n+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return n+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return n+=1===e?"dan":"dana";case"MM":return n+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return n+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}h.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[\u0f21\u0f22\u0f23\u0f24\u0f25\u0f26\u0f27\u0f28\u0f29\u0f20]/g,function(e){return fn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return hn[e]})},meridiemParse:/\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c|\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66|\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44|\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42|\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&4<=e||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}}),h.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:pn,h:"un eur",hh:"%d eur",d:"un devezh",dd:pn,M:"ur miz",MM:pn,y:"ur bloaz",yy:function(e){switch(function e(t){return 9<t?e(t%10):t}(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a\xf1|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4}}),h.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:mn,m:mn,mm:mn,h:mn,hh:mn,d:"dan",dd:mn,M:"mjesec",MM:mn,y:"godinu",yy:mn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),h.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|\xe8|a)/,ordinal:function(e,t){var i=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(i="a"),e+i},week:{dow:1,doy:4}});var gn="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),_n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),vn=[/^led/i,/^\xfano/i,/^b\u0159e/i,/^dub/i,/^kv\u011b/i,/^(\u010dvn|\u010derven$|\u010dervna)/i,/^(\u010dvc|\u010dervenec|\u010dervence)/i,/^srp/i,/^z\xe1\u0159/i,/^\u0159\xedj/i,/^lis/i,/^pro/i],yn=/^(leden|\xfanor|b\u0159ezen|duben|kv\u011bten|\u010dervenec|\u010dervence|\u010derven|\u010dervna|srpen|z\xe1\u0159\xed|\u0159\xedjen|listopad|prosinec|led|\xfano|b\u0159e|dub|kv\u011b|\u010dvn|\u010dvc|srp|z\xe1\u0159|\u0159\xedj|lis|pro)/i;function bn(e){return 1<e&&e<5&&1!=~~(e/10)}function wn(e,t,i,n){var a=e+" ";switch(i){case"s":return t||n?"pr sekund":"pr sekundami";case"ss":return t||n?a+(bn(e)?"sekundy":"sekund"):a+"sekundami";break;case"m":return t?"minuta":n?"minutu":"minutou";case"mm":return t||n?a+(bn(e)?"minuty":"minut"):a+"minutami";break;case"h":return t?"hodina":n?"hodinu":"hodinou";case"hh":return t||n?a+(bn(e)?"hodiny":"hodin"):a+"hodinami";break;case"d":return t||n?"den":"dnem";case"dd":return t||n?a+(bn(e)?"dny":"dn"):a+"dny";break;case"M":return t||n?"msc":"mscem";case"MM":return t||n?a+(bn(e)?"msce":"msc"):a+"msci";break;case"y":return t||n?"rok":"rokem";case"yy":return t||n?a+(bn(e)?"roky":"let"):a+"lety";break}}function Mn(e,t,i,n){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?a[i][0]:a[i][1]}function kn(e,t,i,n){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?a[i][0]:a[i][1]}function Ln(e,t,i,n){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?a[i][0]:a[i][1]}h.defineLocale("cs",{months:gn,monthsShort:_n,monthsRegex:yn,monthsShortRegex:yn,monthsStrictRegex:/^(leden|ledna|\xfanora|\xfanor|b\u0159ezen|b\u0159ezna|duben|dubna|kv\u011bten|kv\u011btna|\u010dervenec|\u010dervence|\u010derven|\u010dervna|srpen|srpna|z\xe1\u0159\xed|\u0159\xedjen|\u0159\xedjna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|\xfano|b\u0159e|dub|kv\u011b|\u010dvn|\u010dvc|srp|z\xe1\u0159|\u0159\xedj|lis|pro)/i,monthsParse:vn,longMonthsParse:vn,shortMonthsParse:vn,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:wn,ss:wn,m:wn,mm:wn,h:wn,hh:wn,d:wn,dd:wn,M:wn,MM:wn,y:wn,yy:wn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){return e+(/\u0441\u0435\u0445\u0435\u0442$/i.exec(e)?"":/\u04ab\u0443\u043b$/i.exec(e)?"":"")},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-\u043c\u04d7\u0448/,ordinal:"%d-",week:{dow:1,doy:7}}),h.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return 20<e?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":0<e&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}}),h.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:Mn,mm:"%d Minuten",h:Mn,hh:"%d Stunden",d:Mn,dd:Mn,M:Mn,MM:Mn,y:Mn,yy:Mn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:kn,mm:"%d Minuten",h:kn,hh:"%d Stunden",d:kn,dd:kn,M:kn,MM:kn,y:kn,yy:kn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:Ln,mm:"%d Minuten",h:Ln,hh:"%d Stunden",d:Ln,dd:Ln,M:Ln,MM:Ln,y:Ln,yy:Ln},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Sn=["","","","","","","","","","","",""],Tn=["","","","","","",""];h.defineLocale("dv",{months:Sn,monthsShort:Sn,weekdays:Tn,weekdaysShort:Tn,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0789\u0786|\u0789\u078a/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}}),h.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,i){return 11<e?i?"":"":i?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[\u03a0\u039c]\.?\u039c?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var i=this._calendarEl[e],n=t&&t.hours();return D(i)&&(i=i.apply(t)),i.replace("{}",n%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}\u03b7/,ordinal:"%d",week:{dow:1,doy:4}}),h.defineLocale("en-SG",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),h.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),h.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),h.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),h.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),h.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),h.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),h.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,i){return 11<e?i?"p.t.m.":"P.T.M.":i?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"sekundoj",ss:"%d sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});var xn="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),Dn="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),Cn=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],In=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;h.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?Dn[e.month()]:xn[e.month()]:xn},monthsRegex:In,monthsShortRegex:In,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:Cn,longMonthsParse:Cn,shortMonthsParse:Cn,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:1,doy:4}});var En="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),On="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),Yn=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],$n=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;h.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?On[e.month()]:En[e.month()]:En},monthsRegex:$n,monthsShortRegex:$n,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:Yn,longMonthsParse:Yn,shortMonthsParse:Yn,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:0,doy:6}});var An="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),Pn="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),jn=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],Nn=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;function Fn(e,t,i,n){var a={s:["mne sekundi","mni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?a[i][2]?a[i][2]:a[i][1]:n?a[i][0]:a[i][1]}h.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?Pn[e.month()]:An[e.month()]:An},monthsRegex:Nn,monthsShortRegex:Nn,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:jn,longMonthsParse:jn,shortMonthsParse:jn,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:1,doy:4}}),h.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:Fn,ss:Fn,m:Fn,mm:Fn,h:Fn,hh:Fn,d:Fn,dd:"%d peva",M:Fn,MM:Fn,y:Fn,yy:Fn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Hn={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Rn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631|\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/,isPM:function(e){return/\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/.test(e)},meridiem:function(e,t,i){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:" d%",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[\u06f0-\u06f9]/g,function(e){return Rn[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Hn[e]}).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}\u0645/,ordinal:"%d",week:{dow:6,doy:12}});var Bn="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),zn=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",Bn[7],Bn[8],Bn[9]];function Un(e,t,i,n){var a,s,r="";switch(i){case"s":return n?"muutaman sekunnin":"muutama sekunti";case"ss":return n?"sekunnin":"sekuntia";case"m":return n?"minuutin":"minuutti";case"mm":r=n?"minuutin":"minuuttia";break;case"h":return n?"tunnin":"tunti";case"hh":r=n?"tunnin":"tuntia";break;case"d":return n?"pivn":"piv";case"dd":r=n?"pivn":"piv";break;case"M":return n?"kuukauden":"kuukausi";case"MM":r=n?"kuukauden":"kuukautta";break;case"y":return n?"vuoden":"vuosi";case"yy":r=n?"vuoden":"vuotta";break}return s=n,r=((a=e)<10?s?zn[a]:Bn[a]:a)+" "+r}h.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:Un,ss:Un,m:Un,mm:Un,h:Un,hh:Un,d:Un,dd:Un,M:Un,MM:Un,y:Un,yy:Un},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}}),h.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}}),h.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}});var Wn="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),Vn="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");h.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?Vn[e.month()]:Wn[e.month()]:Wn},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}});h.defineLocale("ga",{months:["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Mitheamh","Iil","Lnasa","Men Fmhair","Deaireadh Fmhair","Samhain","Nollaig"],monthsShort:["Ean","Feab","Mrt","Aibr","Beal","Mit","Iil","Lna","Men","Deai","Samh","Noll"],monthsParseExact:!0,weekdays:["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Satharn"],weekdaysShort:["Dom","Lua","Mi","Ca","Da","hAo","Sat"],weekdaysMin:["Do","Lu","M","Ce","D","hA","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn aig] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d m",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}});function Gn(e,t,i,n){var a={s:["thodde secondanim","thodde second"],ss:[e+" secondanim",e+" second"],m:["eka mintan","ek minute"],mm:[e+" mintanim",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voranim",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disanim",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineanim",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsanim",e+" vorsam"]};return t?a[i][0]:a[i][1]}h.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}}),h.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:1,doy:4}}),h.defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:Gn,ss:Gn,m:Gn,mm:Gn,h:Gn,hh:Gn,d:Gn,dd:Gn,M:Gn,MM:Gn,y:Gn,yy:Gn},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){switch(t){case"D":return e+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokalli"===t?e:"donparam"===t?12<e?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"rati":e<12?"sokalli":e<16?"donparam":e<20?"sanje":"rati"}});var qn={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Jn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[\u0ae7\u0ae8\u0ae9\u0aea\u0aeb\u0aec\u0aed\u0aee\u0aef\u0ae6]/g,function(e){return Jn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return qn[e]})},meridiemParse:/\u0ab0\u0abe\u0aa4|\u0aac\u0aaa\u0acb\u0ab0|\u0ab8\u0ab5\u0abe\u0ab0|\u0ab8\u0abe\u0a82\u0a9c/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?10<=e?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}}),h.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10==0&&10!==e?e+" ":e+" "}},meridiemParse:/\u05d0\u05d7\u05d4"\u05e6|\u05dc\u05e4\u05e0\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8|\u05d1\u05d1\u05d5\u05e7\u05e8|\u05d1\u05e2\u05e8\u05d1/i,isPM:function(e){return/^(\u05d0\u05d7\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05d1\u05e2\u05e8\u05d1)$/.test(e)},meridiem:function(e,t,i){return e<5?" ":e<10?"":e<12?i?'"':" ":e<18?i?'"':" ":""}});var Qn={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Kn={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function Zn(e,t,i){var n=e+" ";switch(i){case"ss":return n+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return n+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return n+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return n+=1===e?"dan":"dana";case"MM":return n+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return n+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}h.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return Kn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Qn[e]})},meridiemParse:/\u0930\u093e\u0924|\u0938\u0941\u092c\u0939|\u0926\u094b\u092a\u0939\u0930|\u0936\u093e\u092e/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?10<=e?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}}),h.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:Zn,m:Zn,mm:Zn,h:Zn,hh:Zn,d:"dan",dd:Zn,M:"mjesec",MM:Zn,y:"godinu",yy:Zn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Xn="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function ea(e,t,i,n){var a=e;switch(i){case"s":return n||t?"nhny msodperc":"nhny msodperce";case"ss":return a+(n||t)?" msodperc":" msodperce";case"m":return"egy"+(n||t?" perc":" perce");case"mm":return a+(n||t?" perc":" perce");case"h":return"egy"+(n||t?" ra":" rja");case"hh":return a+(n||t?" ra":" rja");case"d":return"egy"+(n||t?" nap":" napja");case"dd":return a+(n||t?" nap":" napja");case"M":return"egy"+(n||t?" hnap":" hnapja");case"MM":return a+(n||t?" hnap":" hnapja");case"y":return"egy"+(n||t?" v":" ve");case"yy":return a+(n||t?" v":" ve")}return""}function ta(e){return(e?"":"[mlt] ")+"["+Xn[this.day()]+"] LT[-kor]"}function ia(e){return e%100==11||e%10!=1}function na(e,t,i,n){var a=e+" ";switch(i){case"s":return t||n?"nokkrar sekndur":"nokkrum sekndum";case"ss":return ia(e)?a+(t||n?"sekndur":"sekndum"):a+"seknda";case"m":return t?"mnta":"mntu";case"mm":return ia(e)?a+(t||n?"mntur":"mntum"):t?a+"mnta":a+"mntu";case"hh":return ia(e)?a+(t||n?"klukkustundir":"klukkustundum"):a+"klukkustund";case"d":return t?"dagur":n?"dag":"degi";case"dd":return ia(e)?t?a+"dagar":a+(n?"daga":"dgum"):t?a+"dagur":a+(n?"dag":"degi");case"M":return t?"mnuur":n?"mnu":"mnui";case"MM":return ia(e)?t?a+"mnuir":a+(n?"mnui":"mnuum"):t?a+"mnuur":a+(n?"mnu":"mnui");case"y":return t||n?"r":"ri";case"yy":return ia(e)?a+(t||n?"r":"rum"):a+(t||n?"r":"ri")}}h.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,i){return e<12?!0===i?"de":"DE":!0===i?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return ta.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return ta.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:ea,ss:ea,m:ea,mm:ea,h:ea,hh:ea,d:ea,dd:ea,M:ea,MM:ea,y:ea,yy:ea},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/\u0563\u056b\u0577\u0565\u0580\u057e\u0561|\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561|\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576/,isPM:function(e){return/^(\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(\u056b\u0576|\u0580\u0564)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}}),h.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?11<=e?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,i){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),h.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:na,ss:na,m:na,mm:na,h:"klukkustund",hh:na,d:na,dd:na,M:na,MM:na,y:na,yy:na},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:1,doy:4}}),h.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:1,doy:4}}),h.defineLocale("ja",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(e){return e.week()<this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(e){return this.week()<e.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}\u65e5/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}}),h.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?11<=e?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,i){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),h.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(\u10ec\u10d8\u10dc\u10d0|\u10e8\u10d4\u10db\u10d3\u10d4\u10d2)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10ec\u10d4\u10da\u10d8)/.test(e)?e.replace(/\u10d8$/,""):e+""},past:function(e){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10d3\u10e6\u10d4|\u10d7\u10d5\u10d4)/.test(e)?e.replace(/(\u10d8|\u10d4)$/," "):/\u10ec\u10d4\u10da\u10d8/.test(e)?e.replace(/\u10ec\u10d4\u10da\u10d8$/," "):void 0},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-\u10da\u10d8|\u10db\u10d4-\d{1,2}|\d{1,2}-\u10d4/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20==0||e%100==0?"-"+e:e+"-"},week:{dow:1,doy:7}});var aa={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};h.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(\u0448\u0456|\u0448\u044b)/,ordinal:function(e){return e+(aa[e]||aa[e%10]||aa[100<=e?100:null])},week:{dow:1,doy:7}});var sa={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},ra={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u1796\u17d2\u179a\u17b9\u1780|\u179b\u17d2\u1784\u17b6\u1785/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\u1791\u17b8\d{1,2}/,ordinal:"%d",preparse:function(e){return e.replace(/[\u17e1\u17e2\u17e3\u17e4\u17e5\u17e6\u17e7\u17e8\u17e9\u17e0]/g,function(e){return ra[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return sa[e]})},week:{dow:1,doy:4}});var oa={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},la={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[\u0ce7\u0ce8\u0ce9\u0cea\u0ceb\u0cec\u0ced\u0cee\u0cef\u0ce6]/g,function(e){return la[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return oa[e]})},meridiemParse:/\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf|\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6|\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8|\u0cb8\u0c82\u0c9c\u0cc6/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?10<=e?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}(\u0ca8\u0cc6\u0cd5)/,ordinal:function(e){return e+""},week:{dow:0,doy:6}}),h.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(\uc77c|\uc6d4|\uc8fc)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},meridiemParse:/\uc624\uc804|\uc624\ud6c4/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""}});var da={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},ua={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},ca=[" ","","","","","","","",""," "," "," "];h.defineLocale("ku",{months:ca,monthsShort:ca,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u0626\u06ce\u0648\u0627\u0631\u0647\u200c|\u0628\u0647\u200c\u06cc\u0627\u0646\u06cc/,isPM:function(e){return/\u0626\u06ce\u0648\u0627\u0631\u0647\u200c/.test(e)},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return ua[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return da[e]}).replace(/,/g,"")},week:{dow:6,doy:12}});var ha={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};function fa(e,t,i,n){var a={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?a[i][0]:a[i][1]}function pa(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return pa(0===t?e/10:t)}if(e<1e4){for(;10<=e;)e/=10;return pa(e)}return pa(e/=1e3)}h.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(\u0447\u0438|\u0447\u044b|\u0447\u04af|\u0447\u0443)/,ordinal:function(e){return e+(ha[e]||ha[e%10]||ha[100<=e?100:null])},week:{dow:1,doy:7}}),h.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return pa(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return pa(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:fa,mm:"%d Minutten",h:fa,hh:"%d Stonnen",d:fa,dd:"%d Deeg",M:fa,MM:"%d Mint",y:fa,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2|\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/(\u0e97\u0eb5\u0ec8)\d{1,2}/,ordinal:function(e){return""+e}});var ma={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function ga(e,t,i,n){return t?va(i)[0]:n?va(i)[1]:va(i)[2]}function _a(e){return e%10==0||10<e&&e<20}function va(e){return ma[e].split("_")}function ya(e,t,i,n){var a=e+" ";return 1===e?a+ga(0,t,i[0],n):t?a+(_a(e)?va(i)[1]:va(i)[0]):n?a+va(i)[1]:a+(_a(e)?va(i)[1]:va(i)[2])}h.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(e,t,i,n){return t?"kelios sekunds":n?"keli sekundi":"kelias sekundes"},ss:ya,m:ga,mm:ya,h:ga,hh:ya,d:ga,dd:ya,M:ga,MM:ya,y:ga,yy:ya},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}});var ba={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function wa(e,t,i){return i?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function Ma(e,t,i){return e+" "+wa(ba[i],e,t)}function ka(e,t,i){return wa(ba[i],e,t)}h.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(e,t){return t?"daas sekundes":"dam sekundm"},ss:Ma,m:ka,mm:Ma,h:ka,hh:Ma,d:ka,dd:Ma,M:ka,MM:Ma,y:ka,yy:Ma},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var La={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:2<=e&&e<=4?t[1]:t[2]},translate:function(e,t,i){var n=La.words[i];return 1===i.length?t?n[0]:n[1]:e+" "+La.correctGrammaticalCase(e,n)}};function Sa(e,t,i,n){switch(i){case"s":return t?" ":" ";case"ss":return e+(t?" ":" ");case"m":case"mm":return e+(t?" ":" ");case"h":case"hh":return e+(t?" ":" ");case"d":case"dd":return e+(t?" ":" ");case"M":case"MM":return e+(t?" ":" ");case"y":case"yy":return e+(t?" ":" ");default:return e}}h.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:La.translate,m:La.translate,mm:La.translate,h:La.translate,hh:La.translate,d:"dan",dd:La.translate,M:"mjesec",MM:La.translate,y:"godinu",yy:La.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),h.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:1,doy:4}}),h.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(e){var t=e%10,i=e%100;return 0===e?e+"-":0===i?e+"-":10<i&&i<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}}),h.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f|\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46|\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d|\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02|\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f/i,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&4<=e||" "===t||""===t?e+12:e},meridiem:function(e,t,i){return e<4?"":e<12?"":e<17?" ":e<20?"":""}}),h.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/\u04ae\u04e8|\u04ae\u0425/i,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:Sa,ss:Sa,m:Sa,mm:Sa,h:Sa,hh:Sa,d:Sa,dd:Sa,M:Sa,MM:Sa,y:Sa,yy:Sa},dayOfMonthOrdinalParse:/\d{1,2} \u04e9\u0434\u04e9\u0440/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" ";default:return e}}});var Ta={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},xa={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function Da(e,t,i,n){var a="";if(t)switch(i){case"s":a=" ";break;case"ss":a="%d ";break;case"m":a=" ";break;case"mm":a="%d ";break;case"h":a=" ";break;case"hh":a="%d ";break;case"d":a=" ";break;case"dd":a="%d ";break;case"M":a=" ";break;case"MM":a="%d ";break;case"y":a=" ";break;case"yy":a="%d ";break}else switch(i){case"s":a=" ";break;case"ss":a="%d ";break;case"m":a=" ";break;case"mm":a="%d ";break;case"h":a=" ";break;case"hh":a="%d ";break;case"d":a=" ";break;case"dd":a="%d ";break;case"M":a=" ";break;case"MM":a="%d ";break;case"y":a=" ";break;case"yy":a="%d ";break}return a.replace(/%d/i,e)}h.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:Da,ss:Da,m:Da,mm:Da,h:Da,hh:Da,d:Da,dd:Da,M:Da,MM:Da,y:Da,yy:Da},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return xa[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Ta[e]})},meridiemParse:/\u0930\u093e\u0924\u094d\u0930\u0940|\u0938\u0915\u093e\u0933\u0940|\u0926\u0941\u092a\u093e\u0930\u0940|\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?10<=e?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}}),h.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?11<=e?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,i){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),h.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?11<=e?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,i){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),h.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:1,doy:4}});var Ca={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Ia={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[\u1041\u1042\u1043\u1044\u1045\u1046\u1047\u1048\u1049\u1040]/g,function(e){return Ia[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Ca[e]})},week:{dow:1,doy:4}}),h.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Ea={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Oa={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return Oa[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Ea[e]})},meridiemParse:/\u0930\u093e\u0924\u093f|\u092c\u093f\u0939\u093e\u0928|\u0926\u093f\u0909\u0901\u0938\u094b|\u0938\u093e\u0901\u091d/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?10<=e?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<3?"":e<12?"":e<16?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}});var Ya="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),$a="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),Aa=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],Pa=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;h.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?$a[e.month()]:Ya[e.month()]:Ya},monthsRegex:Pa,monthsShortRegex:Pa,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:Aa,longMonthsParse:Aa,shortMonthsParse:Aa,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}});var ja="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),Na="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),Fa=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],Ha=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;h.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,t){return e?/-MMM-/.test(t)?Na[e.month()]:ja[e.month()]:ja},monthsRegex:Ha,monthsShortRegex:Ha,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:Fa,longMonthsParse:Fa,shortMonthsParse:Fa,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}}),h.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Ra={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},Ba={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[\u0a67\u0a68\u0a69\u0a6a\u0a6b\u0a6c\u0a6d\u0a6e\u0a6f\u0a66]/g,function(e){return Ba[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Ra[e]})},meridiemParse:/\u0a30\u0a3e\u0a24|\u0a38\u0a35\u0a47\u0a30|\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30|\u0a38\u0a3c\u0a3e\u0a2e/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?10<=e?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}});var za="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),Ua="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function Wa(e){return e%10<5&&1<e%10&&~~(e/10)%10!=1}function Va(e,t,i){var n=e+" ";switch(i){case"ss":return n+(Wa(e)?"sekundy":"sekund");case"m":return t?"minuta":"minut";case"mm":return n+(Wa(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return n+(Wa(e)?"godziny":"godzin");case"MM":return n+(Wa(e)?"miesice":"miesicy");case"yy":return n+(Wa(e)?"lata":"lat")}}function Ga(e,t,i){var n=" ";return(20<=e%100||100<=e&&e%100==0)&&(n=" de "),e+n+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[i]}function qa(e,t,i){var n,a;return"m"===i?t?"":"":e+" "+(n=+e,a={ss:t?"__":"__",mm:t?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"}[i].split("_"),n%10==1&&n%100!=11?a[0]:2<=n%10&&n%10<=4&&(n%100<10||20<=n%100)?a[1]:a[2])}h.defineLocale("pl",{months:function(e,t){return e?""===t?"("+Ua[e.month()]+"|"+za[e.month()]+")":/D MMMM/.test(t)?Ua[e.month()]:za[e.month()]:za},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:Va,m:Va,mm:Va,h:Va,hh:Va,d:"1 dzie",dd:"%d dni",M:"miesic",MM:Va,y:"rok",yy:Va},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d"}),h.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d",week:{dow:1,doy:4}}),h.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:Ga,m:"un minut",mm:Ga,h:"o or",hh:Ga,d:"o zi",dd:Ga,M:"o lun",MM:Ga,y:"un an",yy:Ga},week:{dow:1,doy:7}});var Ja=[/^\u044f\u043d\u0432/i,/^\u0444\u0435\u0432/i,/^\u043c\u0430\u0440/i,/^\u0430\u043f\u0440/i,/^\u043c\u0430[\u0439\u044f]/i,/^\u0438\u044e\u043d/i,/^\u0438\u044e\u043b/i,/^\u0430\u0432\u0433/i,/^\u0441\u0435\u043d/i,/^\u043e\u043a\u0442/i,/^\u043d\u043e\u044f/i,/^\u0434\u0435\u043a/i];h.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e|\u044d\u0442\u0443)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:Ja,longMonthsParse:Ja,shortMonthsParse:Ja,monthsRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsShortRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsStrictRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044f\u044c]|\u0444\u0435\u0432\u0440\u0430\u043b[\u044f\u044c]|\u043c\u0430\u0440\u0442\u0430?|\u0430\u043f\u0440\u0435\u043b[\u044f\u044c]|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044f\u044c]|\u0438\u044e\u043b[\u044f\u044c]|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043d\u043e\u044f\u0431\u0440[\u044f\u044c]|\u0434\u0435\u043a\u0430\u0431\u0440[\u044f\u044c])/i,monthsShortStrictRegex:/^(\u044f\u043d\u0432\.|\u0444\u0435\u0432\u0440?\.|\u043c\u0430\u0440[\u0442.]|\u0430\u043f\u0440\.|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044c\u044f.]|\u0438\u044e\u043b[\u044c\u044f.]|\u0430\u0432\u0433\.|\u0441\u0435\u043d\u0442?\.|\u043e\u043a\u0442\.|\u043d\u043e\u044f\u0431?\.|\u0434\u0435\u043a\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:qa,m:qa,mm:qa,h:"",hh:qa,d:"",dd:qa,M:"",MM:qa,y:"",yy:qa},meridiemParse:/\u043d\u043e\u0447\u0438|\u0443\u0442\u0440\u0430|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430/i,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430)$/.test(e)},meridiem:function(e,t,i){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e|\u044f)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:4}});var Qa=["","","","","","","","","","","",""],Ka=["","","","","","",""];h.defineLocale("sd",{months:Qa,monthsShort:Qa,weekdays:Ka,weekdaysShort:Ka,weekdaysMin:Ka,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}}),h.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} \u0dc0\u0dd0\u0db1\u0dd2/,ordinal:function(e){return e+" "},meridiemParse:/\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4|\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4|\u0db4\u0dd9.\u0dc0|\u0db4.\u0dc0./,isPM:function(e){return".."===e||" "===e},meridiem:function(e,t,i){return 11<e?i?"..":" ":i?"..":" "}});var Za="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),Xa="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function es(e){return 1<e&&e<5}function ts(e,t,i,n){var a=e+" ";switch(i){case"s":return t||n?"pr seknd":"pr sekundami";case"ss":return t||n?a+(es(e)?"sekundy":"seknd"):a+"sekundami";break;case"m":return t?"minta":n?"mintu":"mintou";case"mm":return t||n?a+(es(e)?"minty":"mint"):a+"mintami";break;case"h":return t?"hodina":n?"hodinu":"hodinou";case"hh":return t||n?a+(es(e)?"hodiny":"hodn"):a+"hodinami";break;case"d":return t||n?"de":"dom";case"dd":return t||n?a+(es(e)?"dni":"dn"):a+"dami";break;case"M":return t||n?"mesiac":"mesiacom";case"MM":return t||n?a+(es(e)?"mesiace":"mesiacov"):a+"mesiacmi";break;case"y":return t||n?"rok":"rokom";case"yy":return t||n?a+(es(e)?"roky":"rokov"):a+"rokmi";break}}function is(e,t,i,n){var a=e+" ";switch(i){case"s":return t||n?"nekaj sekund":"nekaj sekundami";case"ss":return a+=1===e?t?"sekundo":"sekundi":2===e?t||n?"sekundi":"sekundah":e<5?t||n?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return a+=1===e?t?"minuta":"minuto":2===e?t||n?"minuti":"minutama":e<5?t||n?"minute":"minutami":t||n?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return a+=1===e?t?"ura":"uro":2===e?t||n?"uri":"urama":e<5?t||n?"ure":"urami":t||n?"ur":"urami";case"d":return t||n?"en dan":"enim dnem";case"dd":return a+=1===e?t||n?"dan":"dnem":2===e?t||n?"dni":"dnevoma":t||n?"dni":"dnevi";case"M":return t||n?"en mesec":"enim mesecem";case"MM":return a+=1===e?t||n?"mesec":"mesecem":2===e?t||n?"meseca":"mesecema":e<5?t||n?"mesece":"meseci":t||n?"mesecev":"meseci";case"y":return t||n?"eno leto":"enim letom";case"yy":return a+=1===e?t||n?"leto":"letom":2===e?t||n?"leti":"letoma":e<5?t||n?"leta":"leti":t||n?"let":"leti"}}h.defineLocale("sk",{months:Za,monthsShort:Xa,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:ts,ss:ts,m:ts,mm:ts,h:ts,hh:ts,d:ts,dd:ts,M:ts,MM:ts,y:ts,yy:ts},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:is,ss:is,m:is,mm:is,h:is,hh:is,d:is,dd:is,M:is,MM:is,y:is,yy:is},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),h.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,i){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var ns={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:2<=e&&e<=4?t[1]:t[2]},translate:function(e,t,i){var n=ns.words[i];return 1===i.length?t?n[0]:n[1]:e+" "+ns.correctGrammaticalCase(e,n)}};h.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:ns.translate,m:ns.translate,mm:ns.translate,h:ns.translate,hh:ns.translate,d:"",dd:ns.translate,M:"",MM:ns.translate,y:"",yy:ns.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var as={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:2<=e&&e<=4?t[1]:t[2]},translate:function(e,t,i){var n=as.words[i];return 1===i.length?t?n[0]:n[1]:e+" "+as.correctGrammaticalCase(e,n)}};h.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:as.translate,m:as.translate,mm:as.translate,h:as.translate,hh:as.translate,d:"dan",dd:as.translate,M:"mesec",MM:as.translate,y:"godinu",yy:as.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),h.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,i){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?11<=e?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),h.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}}),h.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}});var ss={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},rs={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};h.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}\u0bb5\u0ba4\u0bc1/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[\u0be7\u0be8\u0be9\u0bea\u0beb\u0bec\u0bed\u0bee\u0bef\u0be6]/g,function(e){return rs[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return ss[e]})},meridiemParse:/\u0baf\u0bbe\u0bae\u0bae\u0bcd|\u0bb5\u0bc8\u0b95\u0bb1\u0bc8|\u0b95\u0bbe\u0bb2\u0bc8|\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd|\u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1|\u0bae\u0bbe\u0bb2\u0bc8/,meridiem:function(e,t,i){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<2?e:e+12:""===t||""===t?e:""===t&&10<=e?e:e+12},week:{dow:0,doy:6}}),h.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}\u0c35/,ordinal:"%d",meridiemParse:/\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f|\u0c09\u0c26\u0c2f\u0c02|\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02|\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?10<=e?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}}),h.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",ss:"minutu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}});var os={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};h.defineLocale("tg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/\u0448\u0430\u0431|\u0441\u0443\u0431\u04b3|\u0440\u04ef\u0437|\u0431\u0435\u0433\u043e\u04b3/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?11<=e?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,i){return e<4?"":e<11?"":e<16?"":e<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(\u0443\u043c|\u044e\u043c)/,ordinal:function(e){return e+(os[e]||os[e%10]||os[100<=e?100:null])},week:{dow:1,doy:7}}),h.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),h.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});var ls="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function ds(e,t,i,n){var a=function(e){var t=Math.floor(e%1e3/100),i=Math.floor(e%100/10),n=e%10,a="";0<t&&(a+=ls[t]+"vatlh");0<i&&(a+=(""!==a?" ":"")+ls[i]+"maH");0<n&&(a+=(""!==a?" ":"")+ls[n]);return""===a?"pagh":a}(e);switch(i){case"ss":return a+" lup";case"mm":return a+" tup";case"hh":return a+" rep";case"dd":return a+" jaj";case"MM":return a+" jar";case"yy":return a+" DIS"}}h.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",ss:ds,m:"wa tup",mm:ds,h:"wa rep",hh:ds,d:"wa jaj",dd:ds,M:"wa jar",MM:ds,y:"wa DIS",yy:ds},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var us={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};function cs(e,t,i,n){var a={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return n?a[i][0]:t?a[i][0]:a[i][1]}function hs(e,t,i){var n,a;return"m"===i?t?"":"":"h"===i?t?"":"":e+" "+(n=+e,a={ss:t?"__":"__",mm:t?"__":"__",hh:t?"__":"__",dd:"__",MM:"__",yy:"__"}[i].split("_"),n%10==1&&n%100!=11?a[0]:2<=n%10&&n%10<=4&&(n%100<10||20<=n%100)?a[1]:a[2])}function fs(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}h.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(e,t){switch(t){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'nc";var i=e%10;return e+(us[i]||us[e%100-i]||us[100<=e?100:null])}},week:{dow:1,doy:7}}),h.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,i){return 11<e?i?"d'o":"D'O":i?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:cs,ss:cs,m:cs,mm:cs,h:cs,hh:cs,d:cs,dd:cs,M:cs,MM:cs,y:cs,yy:cs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),h.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),h.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}}),h.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5|\u0633\u06d5\u06be\u06d5\u0631|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646|\u0686\u06c8\u0634|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646|\u0643\u06d5\u0686/,meridiemHour:function(e,t){return 12===e&&(e=0)," "===t||""===t||" "===t?e:" "===t||""===t?e+12:11<=e?e:e+12},meridiem:function(e,t,i){var n=100*e+t;return n<600?" ":n<900?"":n<1130?" ":n<1230?"":n<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-\u0643\u06c8\u0646\u0649|-\u0626\u0627\u064a|-\u06be\u06d5\u067e\u062a\u06d5)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-";case"w":case"W":return e+"-";default:return e}},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:7}}),h.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(e,t){var i={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===e?i.nominative.slice(1,7).concat(i.nominative.slice(0,1)):e?i[/(\[[\u0412\u0432\u0423\u0443]\]) ?dddd/.test(t)?"accusative":/\[?(?:\u043c\u0438\u043d\u0443\u043b\u043e\u0457|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u043e\u0457)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:i.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:fs("[ "),nextDay:fs("[ "),lastDay:fs("[ "),nextWeek:fs("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return fs("[] dddd [").call(this);case 1:case 2:case 4:return fs("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:hs,m:hs,mm:hs,h:"",hh:hs,d:"",dd:hs,M:"",MM:hs,y:"",yy:hs},meridiemParse:/\u043d\u043e\u0447\u0456|\u0440\u0430\u043d\u043a\u0443|\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430/,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430)$/.test(e)},meridiem:function(e,t,i){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}});var ps=["","","","","","","","","","","",""],ms=["","","","","","",""];return h.defineLocale("ur",{months:ps,monthsShort:ps,weekdays:ms,weekdaysShort:ms,weekdaysMin:ms,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(e){return""===e},meridiem:function(e,t,i){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}}),h.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}}),h.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}}),h.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,i){return e<12?i?"sa":"SA":i?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}}),h.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),h.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/\u1ecdj\u1ecd\u0301\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}}),h.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t||""===t?e+12:11<=e?e:e+12},meridiem:function(e,t,i){var n=100*e+t;return n<600?"":n<900?"":n<1130?"":n<1230?"":n<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}}),h.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?11<=e?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,i){var n=100*e+t;return n<600?"":n<900?"":n<1130?"":n<1230?"":n<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),h.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?11<=e?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,i){var n=100*e+t;return n<600?"":n<900?"":n<1130?"":n<1230?"":n<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}}),h.locale("en"),h});(function(){function t(e){this._value=e}function L(e,t,i,n){var a,s,r=Math.pow(10,t);return s=(i(e*r)/r).toFixed(t),n&&(a=new RegExp("0{1,"+n+"}$"),s=s.replace(a,"")),s}function i(e,t,i){var n;return n=t.indexOf("$")>-1?a(e,t,i):t.indexOf("%")>-1?s(e,t,i):t.indexOf(":")>-1?r(e,t):d(e._value,t,i)}function n(e,t){var i,n,a,s,r,o=t,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],d=!1;if(t.indexOf(":")>-1)e._value=u(t);else if(t===x)e._value=0;else{for("."!==S[T].delimiters.decimal&&(t=t.replace(/\./g,"").replace(S[T].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+S[T].abbreviations.thousand+"(?:\\)|(\\"+S[T].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+S[T].abbreviations.million+"(?:\\)|(\\"+S[T].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+S[T].abbreviations.billion+"(?:\\)|(\\"+S[T].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+S[T].abbreviations.trillion+"(?:\\)|(\\"+S[T].currency.symbol+")?(?:\\))?)?$"),r=0;r<=l.length&&!(d=t.indexOf(l[r])>-1?Math.pow(1024,r+1):!1);r++);e._value=(d?d:1)*(o.match(i)?Math.pow(10,3):1)*(o.match(n)?Math.pow(10,6):1)*(o.match(a)?Math.pow(10,9):1)*(o.match(s)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=d?Math.ceil(e._value):e._value}return e._value}function a(e,t,i){var n,a,s=t.indexOf("$"),r=t.indexOf("("),o=t.indexOf("-"),l="";return t.indexOf(" $")>-1?(l=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(l=" ",t=t.replace("$ ","")):t=t.replace("$",""),a=d(e._value,t,i),1>=s?a.indexOf("(")>-1||a.indexOf("-")>-1?(a=a.split(""),n=1,(r>s||o>s)&&(n=0),a.splice(n,0,S[T].currency.symbol+l),a=a.join("")):a=S[T].currency.symbol+l+a:a.indexOf(")")>-1?(a=a.split(""),a.splice(-1,0,l+S[T].currency.symbol),a=a.join("")):a=a+l+S[T].currency.symbol,a}function s(e,t,i){var n,a="",s=100*e._value;return t.indexOf(" %")>-1?(a=" ",t=t.replace(" %","")):t=t.replace("%",""),n=d(s,t,i),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,a+"%"),n=n.join("")):n=n+a+"%",n}function r(e){var t=Math.floor(e._value/60/60),i=Math.floor((e._value-60*t*60)/60),n=Math.round(e._value-60*t*60-60*i);return t+":"+(10>i?"0"+i:i)+":"+(10>n?"0"+n:n)}function u(e){var t=e.split(":"),i=0;return 3===t.length?(i+=60*Number(t[0])*60,i+=60*Number(t[1]),i+=Number(t[2])):2===t.length&&(i+=60*Number(t[0]),i+=Number(t[1])),Number(i)}function d(e,t,i){var n,a,s,r,o,l,d=!1,u=!1,c=!1,h="",f=!1,p=!1,m=!1,g=!1,_=!1,v="",y="",b=Math.abs(e),w=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],M="",k=!1;if(0===e&&null!==x)return x;if(t.indexOf("(")>-1?(d=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(u=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(f=t.indexOf("aK")>=0,p=t.indexOf("aM")>=0,m=t.indexOf("aB")>=0,g=t.indexOf("aT")>=0,_=f||p||m||g,t.indexOf(" a")>-1?(h=" ",t=t.replace(" a","")):t=t.replace("a",""),b>=Math.pow(10,12)&&!_||g?(h+=S[T].abbreviations.trillion,e/=Math.pow(10,12)):b<Math.pow(10,12)&&b>=Math.pow(10,9)&&!_||m?(h+=S[T].abbreviations.billion,e/=Math.pow(10,9)):b<Math.pow(10,9)&&b>=Math.pow(10,6)&&!_||p?(h+=S[T].abbreviations.million,e/=Math.pow(10,6)):(b<Math.pow(10,6)&&b>=Math.pow(10,3)&&!_||f)&&(h+=S[T].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(v=" ",t=t.replace(" b","")):t=t.replace("b",""),s=0;s<=w.length;s++)if(n=Math.pow(1024,s),a=Math.pow(1024,s+1),e>=n&&a>e){v+=w[s],n>0&&(e/=n);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(y=" ",t=t.replace(" o","")):t=t.replace("o",""),y+=S[T].ordinal(e)),t.indexOf("[.]")>-1&&(c=!0,t=t.replace("[.]",".")),r=e.toString().split(".")[0],o=t.split(".")[1],l=t.indexOf(","),o?(o.indexOf("[")>-1?(o=o.replace("]",""),o=o.split("["),M=L(e,o[0].length+o[1].length,i,o[1].length)):M=L(e,o.length,i),r=M.split(".")[0],M=M.split(".")[1].length?S[T].delimiters.decimal+M.split(".")[1]:"",c&&0===Number(M.slice(1))&&(M="")):r=L(e,null,i),r.indexOf("-")>-1&&(r=r.slice(1),k=!0),l>-1&&(r=r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+S[T].delimiters.thousands)),0===t.indexOf(".")&&(r=""),(d&&k?"(":"")+(!d&&k?"-":"")+(!k&&u?"+":"")+r+M+(y?y:"")+(h?h:"")+(v?v:"")+(d&&k?")":"")}function o(e,t){S[e]=t}function l(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function c(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var i=l(e),n=l(t);return i>n?i:n},-1/0)}var h,e="1.5.3",S={},T="en",x=null,f="0,0",p="undefined"!=typeof module&&module.exports;h=function(e){return h.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=h.fn.unformat(e)),new t(Number(e))},h.version=e,h.isNumeral=function(e){return e instanceof t},h.language=function(e,t){if(!e)return T;if(e&&!t){if(!S[e])throw new Error("Unknown language : "+e);T=e}return(t||!S[e])&&o(e,t),h},h.languageData=function(e){if(!e)return S[T];if(!S[e])throw new Error("Unknown language : "+e);return S[e]},h.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),h.zeroFormat=function(e){x="string"==typeof e?e:null},h.defaultFormat=function(e){f="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,n,a=this.length>>>0,s=!1;for(1<arguments.length&&(n=t,s=!0),i=0;a>i;++i)this.hasOwnProperty(i)&&(s?n=e(n,this[i],i,this):(n=this[i],s=!0));if(!s)throw new TypeError("Reduce of empty array with no initial value");return n}),h.fn=t.prototype={clone:function(){return h(this)},format:function(e,t){return i(this,e?e:f,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:n(this,e?e:f)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t){return e+i*t}var i=c.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/i,this},subtract:function(e){function t(e,t){return e-i*t}var i=c.call(null,this._value,e);return this._value=[e].reduce(t,this._value*i)/i,this},multiply:function(e){function t(e,t){var i=c(e,t);return e*i*t*i/(i*i)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t){var i=c(e,t);return e*i/(t*i)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(h(this._value).subtract(e).value())}},p&&(module.exports=h),"undefined"==typeof ender&&(this.numeral=h),"function"==typeof define&&define.amd&&define([],function(){return h})}).call(this);var jg_ok,jg_ie,jg_fast,jg_dom,jg_moz;function _chkDHTM(e,t){e=document.body||null;jg_ie=e&&typeof e.insertAdjacentHTML!="undefined"&&document.createElement;jg_dom=e&&!jg_ie&&typeof e.appendChild!="undefined"&&typeof document.createRange!="undefined"&&typeof(t=document.createRange()).setStartBefore!="undefined"&&typeof t.createContextualFragment!="undefined";jg_fast=jg_ie&&document.all&&!window.opera;jg_moz=jg_dom&&typeof e.style.MozOpacity!="undefined";jg_ok=!!(jg_ie||jg_dom)}function _pntCnvDom(){var e=this.wnd.document.createRange();e.setStartBefore(this.cnv);e=e.createContextualFragment(jg_fast?this._htmRpc():this.htm);if(this.cnv)this.cnv.appendChild(e);this.htm=""}function _pntCnvIe(){if(this.cnv)this.cnv.insertAdjacentHTML("BeforeEnd",jg_fast?this._htmRpc():this.htm);this.htm=""}function _pntDoc(){this.wnd.document.write(jg_fast?this._htmRpc():this.htm);this.htm=""}function _pntN(){}function _mkDiv(e,t,i,n){this.htm+='<div style="position:absolute;'+"left:"+e+"px;"+"top:"+t+"px;"+"width:"+i+"px;"+"height:"+n+"px;"+"clip:rect(0,"+i+"px,"+n+"px,0);"+"background-color:"+this.color+(!jg_moz?";overflow:hidden":"")+';"></div>'}function _mkDivIe(e,t,i,n){this.htm+="%%"+this.color+";"+e+";"+t+";"+i+";"+n+";"}function _mkDivPrt(e,t,i,n){this.htm+='<div style="position:absolute;'+"border-left:"+i+"px solid "+this.color+";"+"left:"+e+"px;"+"top:"+t+"px;"+"width:0px;"+"height:"+n+"px;"+"clip:rect(0,"+i+"px,"+n+"px,0);"+"background-color:"+this.color+(!jg_moz?";overflow:hidden":"")+';"></div>'}var _regex=/%%([^;]+);([^;]+);([^;]+);([^;]+);([^;]+);/g;function _htmRpc(){return this.htm.replace(_regex,'<div style="overflow:hidden;position:absolute;background-color:'+'$1;left:$2;top:$3;width:$4;height:$5"></div>\n')}function _htmPrtRpc(){return this.htm.replace(_regex,'<div style="overflow:hidden;position:absolute;background-color:'+'$1;left:$2;top:$3;width:$4;height:$5;border-left:$4px solid $1"></div>\n')}function _mkLin(e,t,i,n){if(e>i){var a=i;var s=n;i=e;n=t;e=a;t=s}var r=i-e,o=Math.abs(n-t),l=e,d=t,u=t>n?-1:1;if(r>=o){var c=o<<1,h=c-(r<<1),f=c-r,p=l;while(r>0){--r;++l;if(f>0){this._mkDiv(p,d,l-p,1);d+=u;f+=h;p=l}else f+=c}this._mkDiv(p,d,i-p+1,1)}else{var c=r<<1,h=c-(o<<1),f=c-o,m=d;if(n<=t){while(o>0){--o;if(f>0){this._mkDiv(l++,d,1,m-d+1);d+=u;f+=h;m=d}else{d+=u;f+=c}}this._mkDiv(i,n,1,m-n+1)}else{while(o>0){--o;d+=u;if(f>0){this._mkDiv(l++,m,1,d-m);f+=h;m=d}else f+=c}this._mkDiv(i,m,1,n-m+1)}}}function _mkLin2D(e,t,i,n){if(e>i){var a=i;var s=n;i=e;n=t;e=a;t=s}var r=i-e,o=Math.abs(n-t),l=e,d=t,u=t>n?-1:1;var c=this.stroke;if(r>=o){if(r>0&&c-3>0){var h=(c*r*Math.sqrt(1+o*o/(r*r))-r-(c>>1)*o)/r;h=(!(c-4)?Math.ceil(h):Math.round(h))+1}else var h=c;var f=Math.ceil(c/2);var p=o<<1,m=p-(r<<1),g=p-r,_=l;while(r>0){--r;++l;if(g>0){this._mkDiv(_,d,l-_+f,h);d+=u;g+=m;_=l}else g+=p}this._mkDiv(_,d,i-_+f+1,h)}else{if(c-3>0){var h=(c*o*Math.sqrt(1+r*r/(o*o))-(c>>1)*r-o)/o;h=(!(c-4)?Math.ceil(h):Math.round(h))+1}else var h=c;var f=Math.round(c/2);var p=r<<1,m=p-(o<<1),g=p-o,v=d;if(n<=t){++f;while(o>0){--o;if(g>0){this._mkDiv(l++,d,h,v-d+f);d+=u;g+=m;v=d}else{d+=u;g+=p}}this._mkDiv(i,n,h,v-n+f)}else{while(o>0){--o;d+=u;if(g>0){this._mkDiv(l++,v,h,d-v+f);g+=m;v=d}else g+=p}this._mkDiv(i,v,h,n-v+f+1)}}}function _mkLinDott(e,t,i,n){if(e>i){var a=i;var s=n;i=e;n=t;e=a;t=s}var r=i-e,o=Math.abs(n-t),l=e,d=t,u=t>n?-1:1,c=true;if(r>=o){var h=o<<1,f=h-(r<<1),p=h-r;while(r>0){--r;if(c)this._mkDiv(l,d,1,1);c=!c;if(p>0){d+=u;p+=f}else p+=h;++l}}else{var h=r<<1,f=h-(o<<1),p=h-o;while(o>0){--o;if(c)this._mkDiv(l,d,1,1);c=!c;d+=u;if(p>0){++l;p+=f}else p+=h}}if(c)this._mkDiv(l,d,1,1)}function _mkOv(e,t,i,n){var a=++i>>1,s=++n>>1,r=i&1,o=n&1,l=e+a,d=t+s,u=0,c=s,h=0,f=s,p=a*a<<1,m=p<<1,g=s*s<<1,_=g<<1,v=(p>>1)*(1-(s<<1))+g,y=(g>>1)-p*((s<<1)-1),b,w;while(c>0){if(v<0){v+=g*((u<<1)+3);y+=_*++u}else if(y<0){v+=g*((u<<1)+3)-m*(c-1);y+=_*++u-p*((c--<<1)-3);b=u-h;w=f-c;if(b&2&&w&2){this._mkOvQds(l,d,u-2,c+2,1,1,r,o);this._mkOvQds(l,d,u-1,c+1,1,1,r,o)}else this._mkOvQds(l,d,u-1,f,b,w,r,o);h=u;f=c}else{y-=p*((c<<1)-3);v-=m*--c}}b=a-h+1;w=(f<<1)+o;c=d-f;this._mkDiv(l-a,c,b,w);this._mkDiv(l+h+r-1,c,b,w)}function _mkOv2D(e,t,i,n){var a=this.stroke;i+=a+1;n+=a+1;var s=i>>1,r=n>>1,o=i&1,l=n&1,d=e+s,u=t+r,c=0,h=r,f=s*s<<1,p=f<<1,m=r*r<<1,g=m<<1,_=(f>>1)*(1-(r<<1))+m,v=(m>>1)-f*((r<<1)-1);if(a-4<0&&(!(a-2)||i-51>0&&n-51>0)){var y=0,b=r,w,M,k;while(h>0){if(_<0){_+=m*((c<<1)+3);v+=g*++c}else if(v<0){_+=m*((c<<1)+3)-p*(h-1);v+=g*++c-f*((h--<<1)-3);w=c-y;M=b-h;if(w-1){k=w+1+(a&1);M=a}else if(M-1){k=a;M+=1+(a&1)}else k=M=a;this._mkOvQds(d,u,c-1,b,k,M,o,l);y=c;b=h}else{v-=f*((h<<1)-3);_-=p*--h}}this._mkDiv(d-s,u-b,a,(b<<1)+l);this._mkDiv(d+s+o-a,u-b,a,(b<<1)+l)}else{var L=i-(a<<1)>>1,S=n-(a<<1)>>1,T=0,x=S,D=L*L<<1,C=D<<1,I=S*S<<1,E=I<<1,O=(D>>1)*(1-(S<<1))+I,Y=(I>>1)-D*((S<<1)-1),$=new Array,A=new Array,P=new Array;$[0]=0;A[0]=r;P[0]=S-1;while(h>0){if(_<0){$[$.length]=c;A[A.length]=h;_+=m*((c<<1)+3);v+=g*++c}else if(v<0){$[$.length]=c;_+=m*((c<<1)+3)-p*(h-1);v+=g*++c-f*((h--<<1)-3);A[A.length]=h}else{v-=f*((h<<1)-3);_-=p*--h}if(x>0){if(O<0){O+=I*((T<<1)+3);Y+=E*++T;P[P.length]=x-1}else if(Y<0){O+=I*((T<<1)+3)-C*(x-1);Y+=E*++T-D*((x--<<1)-3);P[P.length]=x-1}else{Y-=D*((x<<1)-3);O-=C*--x;P[P.length-1]--}}}var y=-o,b=r,j=P[0],N=$.length,w,M;for(var F=0;F<N;F++){if(typeof P[F]!="undefined"){if(P[F]<j||A[F]<b){c=$[F];this._mkOvQds(d,u,c,b,c-y,b-j,o,l);y=c;b=A[F];j=P[F]}}else{c=$[F];this._mkDiv(d-c,u-b,1,(b<<1)+l);this._mkDiv(d+y+o,u-b,1,(b<<1)+l);y=c;b=A[F]}}this._mkDiv(d-s,u-b,1,(b<<1)+l);this._mkDiv(d+y+o,u-b,1,(b<<1)+l)}}function _mkOvDott(e,t,i,n){var a=++i>>1,s=++n>>1,r=i&1,o=n&1,l=o^1,d=e+a,u=t+s,c=0,h=s,f=a*a<<1,p=f<<1,m=s*s<<1,g=m<<1,_=(f>>1)*(1-(s<<1))+m,v=(m>>1)-f*((s<<1)-1),y=true;while(h>0){if(_<0){_+=m*((c<<1)+3);v+=g*++c}else if(v<0){_+=m*((c<<1)+3)-p*(h-1);v+=g*++c-f*((h--<<1)-3)}else{v-=f*((h<<1)-3);_-=p*--h}if(y&&h>=l)this._mkOvQds(d,u,c,h,1,1,r,o);y=!y}}function _mkRect(e,t,i,n){var a=this.stroke;this._mkDiv(e,t,i,a);this._mkDiv(e+i,t,a,n);this._mkDiv(e,t+n,i+a,a);this._mkDiv(e,t+a,a,n-a)}function _mkRectDott(e,t,i,n){this.drawLine(e,t,e+i,t);this.drawLine(e+i,t,e+i,t+n);this.drawLine(e,t+n,e+i,t+n);this.drawLine(e,t,e,t+n)}function jsgFont(){this.PLAIN="font-weight:normal;";this.BOLD="font-weight:bold;";this.ITALIC="font-style:italic;";this.ITALIC_BOLD=this.ITALIC+this.BOLD;this.BOLD_ITALIC=this.ITALIC_BOLD}var Font=new jsgFont;function jsgStroke(){this.DOTTED=-1}var Stroke=new jsgStroke;function jsGraphics(e,t){this.setColor=function(e){this.color=e.toLowerCase()};this.setStroke=function(e){this.stroke=e;if(!(e+1)){this.drawLine=_mkLinDott;this._mkOv=_mkOvDott;this.drawRect=_mkRectDott}else if(e-1>0){this.drawLine=_mkLin2D;this._mkOv=_mkOv2D;this.drawRect=_mkRect}else{this.drawLine=_mkLin;this._mkOv=_mkOv;this.drawRect=_mkRect}};this.setPrintable=function(e){this.printable=e;if(jg_fast){this._mkDiv=_mkDivIe;this._htmRpc=e?_htmPrtRpc:_htmRpc}else this._mkDiv=e?_mkDivPrt:_mkDiv};this.setFont=function(e,t,i){this.ftFam=e;this.ftSz=t;this.ftSty=i||Font.PLAIN};this.drawPolyline=this.drawPolyLine=function(e,t){for(var i=e.length-1;i;){--i;this.drawLine(e[i],t[i],e[i+1],t[i+1])}};this.fillRect=function(e,t,i,n){this._mkDiv(e,t,i,n)};this.drawPolygon=function(e,t){this.drawPolyline(e,t);this.drawLine(e[e.length-1],t[e.length-1],e[0],t[0])};this.drawEllipse=this.drawOval=function(e,t,i,n){this._mkOv(e,t,i,n)};this.fillEllipse=this.fillOval=function(e,t,i,n){var a=i>>1,s=n>>1,r=i&1,o=n&1,l=e+a,d=t+s,u=0,c=s,h=s,f=a*a<<1,p=f<<1,m=s*s<<1,g=m<<1,_=(f>>1)*(1-(s<<1))+m,v=(m>>1)-f*((s<<1)-1),y,b,w;if(i)while(c>0){if(_<0){_+=m*((u<<1)+3);v+=g*++u}else if(v<0){_+=m*((u<<1)+3)-p*(c-1);y=l-u;b=(u<<1)+r;v+=g*++u-f*((c--<<1)-3);w=h-c;this._mkDiv(y,d-h,b,w);this._mkDiv(y,d+c+o,b,w);h=c}else{v-=f*((c<<1)-3);_-=p*--c}}this._mkDiv(l-a,d-h,i,(h<<1)+o)};this.fillArc=function(e,t,i,n,a,s){var r=i>>1,o=n>>1,l=i&1|(n&1)<<16,d=e+r,u=t+o,c=0,h=o,f=c,p=h,m=r*r<<1,g=m<<1,_=o*o<<1,v=_<<1,y=(m>>1)*(1-(o<<1))+_,b=(_>>1)-m*((o<<1)-1),w,M,k,L,S=1<<(Math.floor((a%=360)/180)<<3)|2<<(Math.floor((s%=360)/180)<<3)|(a>=s)<<16,T=new Array(o+1),x=new Array(o+1);a*=Math.PI/180;s*=Math.PI/180;w=d+Math.round(r*Math.cos(a));M=u+Math.round(-o*Math.sin(a));_mkLinVirt(T,d,u,w,M);k=d+Math.round(r*Math.cos(s));L=u+Math.round(-o*Math.sin(s));_mkLinVirt(x,d,u,k,L);while(h>0){if(y<0){y+=_*((c<<1)+3);b+=v*++c}else if(b<0){y+=_*((c<<1)+3)-g*(h-1);f=c;b+=v*++c-m*((h--<<1)-3);this._mkArcDiv(f,h,p,d,u,l,T,x,S);p=h}else{b-=m*((h<<1)-3);y-=g*--h;if(h&&(T[h]!=T[h-1]||x[h]!=x[h-1])){this._mkArcDiv(c,h,p,d,u,l,T,x,S);f=c;p=h}}}this._mkArcDiv(c,0,p,d,u,l,T,x,S);if(l>>16){if(S>>16){var D=M<=u||L>u?d-c:d;this._mkDiv(D,u,c+d-D+(l&65535),1)}else if(S&1&&L>u)this._mkDiv(d-c,u,c,1)}};this.fillPolygon=function(e,t){var i;var n;var a,s;var r,o;var l,d;var u,c;var h;var f=e.length;if(!f)return;a=t[0];s=t[0];for(i=1;i<f;i++){if(t[i]<a)a=t[i];if(t[i]>s)s=t[i]}for(n=a;n<=s;n++){var p=new Array;h=0;for(i=0;i<f;i++){if(!i){u=f-1;c=0}else{u=i-1;c=i}o=t[u];d=t[c];if(o<d){r=e[u];l=e[c]}else if(o>d){d=t[u];o=t[c];l=e[u];r=e[c]}else continue;if(n>=o&&n<d)p[h++]=Math.round((n-o)*(l-r)/(d-o)+r);else if(n==s&&n>o&&n<=d)p[h++]=Math.round((n-o)*(l-r)/(d-o)+r)}p.sort(_CompInt);for(i=0;i<h;i+=2)this._mkDiv(p[i],n,p[i+1]-p[i]+1,1)}};this.drawString=function(e,t,i){this.htm+='<div style="position:absolute;white-space:nowrap;'+"left:"+t+"px;"+"top:"+i+"px;"+"font-family:"+this.ftFam+";"+"font-size:"+this.ftSz+";"+"color:"+this.color+";"+this.ftSty+'">'+e+"</div>"};this.drawStringRect=function(e,t,i,n,a){this.htm+='<div style="position:absolute;overflow:hidden;'+"left:"+t+"px;"+"top:"+i+"px;"+"width:"+n+"px;"+"text-align:"+a+";"+"font-family:"+this.ftFam+";"+"font-size:"+this.ftSz+";"+"color:"+this.color+";"+this.ftSty+'">'+e+"</div>"};this.drawImage=function(e,t,i,n,a,s){this.htm+='<div style="position:absolute;'+"left:"+t+"px;"+"top:"+i+"px;"+(n?"width:"+n+"px;":"")+(a?"height:"+a+"px;":"")+'">'+'<img src="'+e+'"'+(n?' width="'+n+'"':"")+(a?' height="'+a+'"':"")+(s?" "+s:"")+">"+"</div>"};this.clear=function(){this.htm="";if(this.cnv)this.cnv.innerHTML=""};this._mkOvQds=function(e,t,i,n,a,s,r,o){var l=e-i,d=e+i+r-a,u=t-n,c=t+n+o-s;if(d>l+a){this._mkDiv(d,u,a,s);this._mkDiv(d,c,a,s)}else a=d-l+a;this._mkDiv(l,u,a,s);this._mkDiv(l,c,a,s)};this._mkArcDiv=function(e,t,i,n,a,s,r,o,l){var d=n+e+(s&65535),u,c=i-t,h,f,p;if(!c)c=1;e=n-e;if(l&16711680){u=a-t-c;if(l&255){if(l&2){h=Math.max(e,o[t]);p=d-h;if(p>0)this._mkDiv(h,u,p,c)}if(l&1){f=Math.min(d,r[t]);p=f-e;if(p>0)this._mkDiv(e,u,p,c)}}else this._mkDiv(e,u,d-e,c);u=a+t+(s>>16);if(l&65280){if(l&256){h=Math.max(e,r[t]);p=d-h;if(p>0)this._mkDiv(h,u,p,c)}if(l&512){f=Math.min(d,o[t]);p=f-e;if(p>0)this._mkDiv(e,u,p,c)}}else this._mkDiv(e,u,d-e,c)}else{if(l&255){if(l&2)h=Math.max(e,o[t]);else h=e;if(l&1)f=Math.min(d,r[t]);else f=d;u=a-t-c;p=f-h;if(p>0)this._mkDiv(h,u,p,c)}if(l&65280){if(l&256)h=Math.max(e,r[t]);else h=e;if(l&512)f=Math.min(d,o[t]);else f=d;u=a+t+(s>>16);p=f-h;if(p>0)this._mkDiv(h,u,p,c)}}};this.setStroke(1);this.setFont("verdana,geneva,helvetica,sans-serif","12px",Font.PLAIN);this.color="#000000";this.htm="";this.wnd=t||window;if(!jg_ok)_chkDHTM();if(jg_ok){if(e){if(typeof e=="string")this.cont=document.all?this.wnd.document.all[e]||null:document.getElementById?this.wnd.document.getElementById(e)||null:null;else if(e==window.document)this.cont=document.getElementsByTagName("body")[0];else this.cont=e;this.cnv=this.wnd.document.createElement("div");this.cnv.style.fontSize=0;this.cont.appendChild(this.cnv);this.paint=jg_dom?_pntCnvDom:_pntCnvIe}else this.paint=_pntDoc}else this.paint=_pntN;this.setPrintable(false)}function _mkLinVirt(e,t,i,n,a){var s=Math.abs(n-t),r=Math.abs(a-i),o=t,l=i,d=t>n?-1:1,u=i>a?-1:1,c,h=0;if(s>=r){var f=r<<1,p=f-(s<<1);c=f-s;while(s>0){--s;if(c>0){e[h++]=o;l+=u;c+=p}else c+=f;o+=d}}else{var f=s<<1,p=f-(r<<1);c=f-r;while(r>0){--r;l+=u;e[h++]=o;if(c>0){o+=d;c+=p}else c+=f}}for(var m=e.length,h=m-h;h;)e[m-h--]=o}function _CompInt(e,t){return e-t}(function(e,t){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","moment"],t)}else if(typeof exports==="object"){t(require("jquery"),require("moment"))}else{if(!jQuery){throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first")}if(!moment){throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first")}t(e.jQuery,moment)}})(this,function(B,z){"use strict";if(typeof z==="undefined"){throw new Error("momentjs is required")}var U=0,n=function(n,a){var s=B.fn.datetimepicker.defaults,r={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},_=this,i=false,o,e=function(){var e=false,t,i;_.options=B.extend({},s,a);_.options.icons=B.extend({},r,_.options.icons);_.element=B(n);d();if(!(_.options.pickTime||_.options.pickDate)){throw new Error("Must choose at least one picker")}_.id=U++;z.locale(_.options.language);_.date=z();_.unset=false;_.isInput=_.element.is("input");_.component=false;if(_.element.hasClass("input-group")){if(_.element.find(".datepickerbutton").size()===0){_.component=_.element.find('[class^="input-group-"]')}else{_.component=_.element.find(".datepickerbutton")}}_.format=_.options.format;t=z().localeData();if(!_.format){_.format=_.options.pickDate?t.longDateFormat("L"):"";if(_.options.pickDate&&_.options.pickTime){_.format+=" "}_.format+=_.options.pickTime?t.longDateFormat("LT"):"";if(_.options.useSeconds){if(t.longDateFormat("LT").indexOf(" A")!==-1){_.format=_.format.split(" A")[0]+":ss A"}else{_.format+=":ss"}}}_.use24hours=_.format.toLowerCase().indexOf("a")<0&&_.format.indexOf("h")<0;if(_.component){e=_.component.find("span")}if(_.options.pickTime){if(e){e.addClass(_.options.icons.time)}}if(_.options.pickDate){if(e){e.removeClass(_.options.icons.time);e.addClass(_.options.icons.date)}}_.options.widgetParent=typeof _.options.widgetParent==="string"&&_.options.widgetParent||_.element.parents().filter(function(){return"scroll"===B(this).css("overflow-y")}).get(0)||"body";_.widget=B(F()).appendTo(_.options.widgetParent);_.minViewMode=_.options.minViewMode||0;if(typeof _.minViewMode==="string"){switch(_.minViewMode){case"months":_.minViewMode=1;break;case"years":_.minViewMode=2;break;default:_.minViewMode=0;break}}_.viewMode=_.options.viewMode||0;if(typeof _.viewMode==="string"){switch(_.viewMode){case"months":_.viewMode=1;break;case"years":_.viewMode=2;break;default:_.viewMode=0;break}}_.viewMode=Math.max(_.viewMode,_.minViewMode);_.options.disabledDates=j(_.options.disabledDates);_.options.enabledDates=j(_.options.enabledDates);_.startViewMode=_.viewMode;_.setMinDate(_.options.minDate);_.setMaxDate(_.options.maxDate);p();m();v();y();b();f();D();if(!l().prop("disabled")){C()}if(_.options.defaultDate!==""&&l().val()===""){_.setValue(_.options.defaultDate)}if(_.options.minuteStepping!==1){i=_.options.minuteStepping;_.date.minutes(Math.round(_.date.minutes()/i)*i%60).seconds(0)}},l=function(){var e;if(_.isInput){return _.element}e=_.element.find(".datepickerinput");if(e.size()===0){e=_.element.find("input")}else if(!e.is("input")){throw new Error('CSS class "datepickerinput" cannot be applied to non input element')}return e},d=function(){var e;if(_.element.is("input")){e=_.element.data()}else{e=_.element.find("input").data()}if(e.dateFormat!==undefined){_.options.format=e.dateFormat}if(e.datePickdate!==undefined){_.options.pickDate=e.datePickdate}if(e.datePicktime!==undefined){_.options.pickTime=e.datePicktime}if(e.dateUseminutes!==undefined){_.options.useMinutes=e.dateUseminutes}if(e.dateUseseconds!==undefined){_.options.useSeconds=e.dateUseseconds}if(e.dateUsecurrent!==undefined){_.options.useCurrent=e.dateUsecurrent}if(e.calendarWeeks!==undefined){_.options.calendarWeeks=e.calendarWeeks}if(e.dateMinutestepping!==undefined){_.options.minuteStepping=e.dateMinutestepping}if(e.dateMindate!==undefined){_.options.minDate=e.dateMindate}if(e.dateMaxdate!==undefined){_.options.maxDate=e.dateMaxdate}if(e.dateShowtoday!==undefined){_.options.showToday=e.dateShowtoday}if(e.dateCollapse!==undefined){_.options.collapse=e.dateCollapse}if(e.dateLanguage!==undefined){_.options.language=e.dateLanguage}if(e.dateDefaultdate!==undefined){_.options.defaultDate=e.dateDefaultdate}if(e.dateDisableddates!==undefined){_.options.disabledDates=e.dateDisableddates}if(e.dateEnableddates!==undefined){_.options.enabledDates=e.dateEnableddates}if(e.dateIcons!==undefined){_.options.icons=e.dateIcons}if(e.dateUsestrict!==undefined){_.options.useStrict=e.dateUsestrict}if(e.dateDirection!==undefined){_.options.direction=e.dateDirection}if(e.dateSidebyside!==undefined){_.options.sideBySide=e.dateSidebyside}if(e.dateDaysofweekdisabled!==undefined){_.options.daysOfWeekDisabled=e.dateDaysofweekdisabled}},u=function(){var e="absolute",t=_.component?_.component.offset():_.element.offset(),i=B(window),n;_.width=_.component?_.component.outerWidth():_.element.outerWidth();t.top=t.top+_.element.outerHeight();if(_.options.direction==="up"){n="top"}else if(_.options.direction==="bottom"){n="bottom"}else if(_.options.direction==="auto"){if(t.top+_.widget.height()>i.height()+i.scrollTop()&&_.widget.height()+_.element.outerHeight()<t.top){n="top"}else{n="bottom"}}if(n==="top"){t.bottom=i.height()-t.top+_.element.outerHeight()+3;_.widget.addClass("top").removeClass("bottom")}else{t.top+=1;_.widget.addClass("bottom").removeClass("top")}if(_.options.width!==undefined){_.widget.width(_.options.width)}if(_.options.orientation==="left"){_.widget.addClass("left-oriented");t.left=t.left-_.widget.width()+20}if(O()){e="fixed";t.top-=i.scrollTop();t.left-=i.scrollLeft()}if(i.width()<t.left+_.widget.outerWidth()){t.right=i.width()-t.left-_.width;t.left="auto";_.widget.addClass("pull-right")}else{t.right="auto";_.widget.removeClass("pull-right")}if(n==="top"){_.widget.css({position:e,bottom:t.bottom,top:"auto",left:t.left,right:t.right})}else{_.widget.css({position:e,top:t.top,bottom:"auto",left:t.left,right:t.right})}},c=function(e,t){if(z(_.date).isSame(z(e))&&!i){return}i=false;_.element.trigger({type:"dp.change",date:z(_.date),oldDate:z(e)});if(t!=="change"){_.element.change()}},h=function(e){i=true;_.element.trigger({type:"dp.error",date:z(e,_.format,_.options.useStrict)})},f=function(e){z.locale(_.options.language);var t=e;if(!t){t=l().val();if(t){_.date=z(t,_.format,_.options.useStrict)}if(!_.date){_.date=z()}}_.viewDate=z(_.date).startOf("month");g();w()},p=function(){z.locale(_.options.language);var e=B("<tr>"),t=z.weekdaysMin(),i;if(_.options.calendarWeeks===true){e.append('<th class="cw">#</th>')}if(z().localeData()._week.dow===0){for(i=0;i<7;i++){e.append('<th class="dow">'+t[i]+"</th>")}}else{for(i=1;i<8;i++){if(i===7){e.append('<th class="dow">'+t[0]+"</th>")}else{e.append('<th class="dow">'+t[i]+"</th>")}}}_.widget.find(".datepicker-days thead").append(e)},m=function(){z.locale(_.options.language);var e="",t,i=z.monthsShort();for(t=0;t<12;t++){e+='<span class="month">'+i[t]+"</span>"}_.widget.find(".datepicker-months td").append(e)},g=function(){if(!_.options.pickDate){return}z.locale(_.options.language);var e=_.viewDate.year(),t=_.viewDate.month(),i=_.options.minDate.year(),n=_.options.minDate.month(),a=_.options.maxDate.year(),s=_.options.maxDate.month(),r,o,l,d=[],u,c,h,f,p,m,g=z.months();_.widget.find(".datepicker-days").find(".disabled").removeClass("disabled");_.widget.find(".datepicker-months").find(".disabled").removeClass("disabled");_.widget.find(".datepicker-years").find(".disabled").removeClass("disabled");_.widget.find(".datepicker-days th:eq(1)").text(g[t]+" "+e);o=z(_.viewDate,_.format,_.options.useStrict).subtract(1,"months");f=o.daysInMonth();o.date(f).startOf("week");if(e===i&&t<=n||e<i){_.widget.find(".datepicker-days th:eq(0)").addClass("disabled")}if(e===a&&t>=s||e>a){_.widget.find(".datepicker-days th:eq(2)").addClass("disabled")}l=z(o).add(42,"d");while(o.isBefore(l)){if(o.weekday()===z().startOf("week").weekday()){u=B("<tr>");d.push(u);if(_.options.calendarWeeks===true){u.append('<td class="cw">'+o.week()+"</td>")}}c="";if(o.year()<e||o.year()===e&&o.month()<t){c+=" old"}else if(o.year()>e||o.year()===e&&o.month()>t){c+=" new"}if(o.isSame(z({y:_.date.year(),M:_.date.month(),d:_.date.date()}))){c+=" active"}if(A(o,"day")||!P(o)){c+=" disabled"}if(_.options.showToday===true){if(o.isSame(z(),"day")){c+=" today"}}if(_.options.daysOfWeekDisabled){for(h=0;h<_.options.daysOfWeekDisabled.length;h++){if(o.day()===_.options.daysOfWeekDisabled[h]){c+=" disabled";break}}}u.append('<td class="day'+c+'">'+o.date()+"</td>");r=o.date();o.add(1,"d");if(r===o.date()){o.add(1,"d")}}_.widget.find(".datepicker-days tbody").empty().append(d);m=_.date.year();g=_.widget.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");if(m===e){g.eq(_.date.month()).addClass("active")}if(e-1<i){_.widget.find(".datepicker-months th:eq(0)").addClass("disabled")}if(e+1>a){_.widget.find(".datepicker-months th:eq(2)").addClass("disabled")}for(h=0;h<12;h++){if(e===i&&n>h||e<i){B(g[h]).addClass("disabled")}else if(e===a&&s<h||e>a){B(g[h]).addClass("disabled")}}d="";e=parseInt(e/10,10)*10;p=_.widget.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).parents("table").find("td");_.widget.find(".datepicker-years").find("th").removeClass("disabled");if(i>e){_.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled")}if(a<e+9){_.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled")}e-=1;for(h=-1;h<11;h++){d+='<span class="year'+(h===-1||h===10?" old":"")+(m===e?" active":"")+(e<i||e>a?" disabled":"")+'">'+e+"</span>";e+=1}p.html(d)},v=function(){z.locale(_.options.language);var e=_.widget.find(".timepicker .timepicker-hours table"),t="",i,n,a;e.parent().hide();if(_.use24hours){i=0;for(n=0;n<6;n+=1){t+="<tr>";for(a=0;a<4;a+=1){t+='<td class="hour">'+N(i.toString())+"</td>";i++}t+="</tr>"}}else{i=1;for(n=0;n<3;n+=1){t+="<tr>";for(a=0;a<4;a+=1){t+='<td class="hour">'+N(i.toString())+"</td>";i++}t+="</tr>"}}e.html(t)},y=function(){var e=_.widget.find(".timepicker .timepicker-minutes table"),t="",i=0,n,a,s=_.options.minuteStepping;e.parent().hide();if(s===1){s=5}for(n=0;n<Math.ceil(60/s/4);n++){t+="<tr>";for(a=0;a<4;a+=1){if(i<60){t+='<td class="minute">'+N(i.toString())+"</td>";i+=s}else{t+="<td></td>"}}t+="</tr>"}e.html(t)},b=function(){var e=_.widget.find(".timepicker .timepicker-seconds table"),t="",i=0,n,a;e.parent().hide();for(n=0;n<3;n++){t+="<tr>";for(a=0;a<4;a+=1){t+='<td class="second">'+N(i.toString())+"</td>";i+=5}t+="</tr>"}e.html(t)},w=function(){if(!_.date){return}var e=_.widget.find(".timepicker span[data-time-component]"),t=_.date.hours(),i=_.date.format("A");if(!_.use24hours){if(t===0){t=12}else if(t!==12){t=t%12}_.widget.find(".timepicker [data-action=togglePeriod]").text(i)}e.filter("[data-time-component=hours]").text(N(t));e.filter("[data-time-component=minutes]").text(N(_.date.minutes()));e.filter("[data-time-component=seconds]").text(N(_.date.second()))},M=function(e){e.stopPropagation();e.preventDefault();_.unset=false;var t=B(e.target).closest("span, td, th"),i,n,a,s,r=z(_.date);if(t.length===1){if(!t.is(".disabled")){switch(t[0].nodeName.toLowerCase()){case"th":switch(t[0].className){case"picker-switch":D(1);break;case"prev":case"next":a=H.modes[_.viewMode].navStep;if(t[0].className==="prev"){a=a*-1}_.viewDate.add(a,H.modes[_.viewMode].navFnc);g();break}break;case"span":if(t.is(".month")){i=t.parent().find("span").index(t);_.viewDate.month(i)}else{n=parseInt(t.text(),10)||0;_.viewDate.year(n)}if(_.viewMode===_.minViewMode){_.date=z({y:_.viewDate.year(),M:_.viewDate.month(),d:_.viewDate.date(),h:_.date.hours(),m:_.date.minutes(),s:_.date.seconds()});Y();c(r,e.type)}D(-1);g();break;case"td":if(t.is(".day")){s=parseInt(t.text(),10)||1;i=_.viewDate.month();n=_.viewDate.year();if(t.is(".old")){if(i===0){i=11;n-=1}else{i-=1}}else if(t.is(".new")){if(i===11){i=0;n+=1}else{i+=1}}_.date=z({y:n,M:i,d:s,h:_.date.hours(),m:_.date.minutes(),s:_.date.seconds()});_.viewDate=z({y:n,M:i,d:Math.min(28,s)});g();Y();c(r,e.type)}break}}}},k={incrementHours:function(){$("add","hours",1)},incrementMinutes:function(){$("add","minutes",_.options.minuteStepping)},incrementSeconds:function(){$("add","seconds",1)},decrementHours:function(){$("subtract","hours",1)},decrementMinutes:function(){$("subtract","minutes",_.options.minuteStepping)},decrementSeconds:function(){$("subtract","seconds",1)},togglePeriod:function(){var e=_.date.hours();if(e>=12){e-=12}else{e+=12}_.date.hours(e)},showPicker:function(){_.widget.find(".timepicker > div:not(.timepicker-picker)").hide();_.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){_.widget.find(".timepicker .timepicker-picker").hide();_.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){_.widget.find(".timepicker .timepicker-picker").hide();_.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){_.widget.find(".timepicker .timepicker-picker").hide();_.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var t=parseInt(B(e.target).text(),10);if(!_.use24hours){if(_.date.hours()>=12){if(t!==12){t+=12}}else{if(t===12){t=0}}}_.date.hours(t);k.showPicker.call(_)},selectMinute:function(e){_.date.minutes(parseInt(B(e.target).text(),10));k.showPicker.call(_)},selectSecond:function(e){_.date.seconds(parseInt(B(e.target).text(),10));k.showPicker.call(_)}},L=function(e){var t=z(_.date),i=B(e.currentTarget).data("action"),n=k[i].apply(_,arguments);S(e);if(!_.date){_.date=z({y:1970})}Y();w();c(t,e.type);return n},S=function(e){e.stopPropagation();e.preventDefault()},T=function(e){if(e.keyCode===27){_.hide()}},x=function(e){z.locale(_.options.language);var t=B(e.target),i=z(_.date),n=z(t.val(),_.format,_.options.useStrict);if(n.isValid()&&!A(n)&&P(n)){f();_.setValue(n);c(i,e.type);Y()}else{_.viewDate=i;_.unset=true;c(i,e.type);h(n)}},D=function(e){if(e){_.viewMode=Math.max(_.minViewMode,Math.min(2,_.viewMode+e))}_.widget.find(".datepicker > div").hide().filter(".datepicker-"+H.modes[_.viewMode].clsName).show()},C=function(){var t,i,n,a,s;_.widget.on("click",".datepicker *",B.proxy(M,this));_.widget.on("click","[data-action]",B.proxy(L,this));_.widget.on("mousedown",B.proxy(S,this));_.element.on("keydown",B.proxy(T,this));if(_.options.pickDate&&_.options.pickTime){_.widget.on("click.togglePicker",".accordion-toggle",function(e){e.stopPropagation();t=B(this);i=t.closest("ul");n=i.find(".in");a=i.find(".collapse:not(.in)");if(n&&n.length){s=n.data("collapse");if(s&&s.transitioning){return}n.collapse("hide");a.collapse("show");t.find("span").toggleClass(_.options.icons.time+" "+_.options.icons.date);if(_.component){_.component.find("span").toggleClass(_.options.icons.time+" "+_.options.icons.date)}}})}if(_.isInput){_.element.on({click:B.proxy(_.show,this),focus:B.proxy(_.show,this),change:B.proxy(x,this),blur:B.proxy(_.hide,this)})}else{_.element.on({change:B.proxy(x,this)},"input");if(_.component){_.component.on("click",B.proxy(_.show,this));_.component.on("mousedown",B.proxy(S,this))}else{_.element.on("click",B.proxy(_.show,this))}}},I=function(){B(window).on("resize.datetimepicker"+_.id,B.proxy(u,this));if(!_.isInput){B(document).on("mousedown.datetimepicker"+_.id,B.proxy(_.hide,this))}},t=function(){_.widget.off("click",".datepicker *",_.click);_.widget.off("click","[data-action]");_.widget.off("mousedown",_.stopEvent);if(_.options.pickDate&&_.options.pickTime){_.widget.off("click.togglePicker")}if(_.isInput){_.element.off({focus:_.show,change:x,click:_.show,blur:_.hide})}else{_.element.off({change:x},"input");if(_.component){_.component.off("click",_.show);_.component.off("mousedown",_.stopEvent)}else{_.element.off("click",_.show)}}},E=function(){B(window).off("resize.datetimepicker"+_.id);if(!_.isInput){B(document).off("mousedown.datetimepicker"+_.id)}},O=function(){if(_.element){var e=_.element.parents(),t=false,i;for(i=0;i<e.length;i++){if(B(e[i]).css("position")==="fixed"){t=true;break}}return t}else{return false}},Y=function(){z.locale(_.options.language);var e="";if(!_.unset){e=z(_.date).format(_.format)}l().val(e);_.element.data("date",e);if(!_.options.pickTime){_.hide()}},$=function(e,t,i){z.locale(_.options.language);var n;if(e==="add"){n=z(_.date);if(n.hours()===23){n.add(i,t)}n.add(i,t)}else{n=z(_.date).subtract(i,t)}if(A(z(n.subtract(i,t)))||A(n)){h(n.format(_.format));return}if(e==="add"){_.date.add(i,t)}else{_.date.subtract(i,t)}_.unset=false},A=function(e,t){z.locale(_.options.language);var i=z(_.options.maxDate,_.format,_.options.useStrict),n=z(_.options.minDate,_.format,_.options.useStrict);if(t){i=i.endOf(t);n=n.startOf(t)}if(e.isAfter(i)||e.isBefore(n)){return true}if(_.options.disabledDates===false){return false}return _.options.disabledDates[e.format("YYYY-MM-DD")]===true},P=function(e){z.locale(_.options.language);if(_.options.enabledDates===false){return true}return _.options.enabledDates[e.format("YYYY-MM-DD")]===true},j=function(e){var t={},i=0,n;for(n=0;n<e.length;n++){if(z.isMoment(e[n])||e[n]instanceof Date){o=z(e[n])}else{o=z(e[n],_.format,_.options.useStrict)}if(o.isValid()){t[o.format("YYYY-MM-DD")]=true;i++}}if(i>0){return t}return false},N=function(e){e=e.toString();if(e.length>=2){return e}return"0"+e},F=function(){var e="<thead>"+"<tr>"+'<th class="prev">&lsaquo;</th><th colspan="'+(_.options.calendarWeeks?"6":"5")+'" class="picker-switch"></th><th class="next">&rsaquo;</th>'+"</tr>"+"</thead>",t='<tbody><tr><td colspan="'+(_.options.calendarWeeks?"8":"7")+'"></td></tr></tbody>',i='<div class="datepicker-days">'+'<table class="table-condensed">'+e+"<tbody></tbody></table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+e+t+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+e+t+"</table>"+"</div>",n="";if(_.options.pickDate&&_.options.pickTime){n='<div class="bootstrap-datetimepicker-widget'+(_.options.sideBySide?" timepicker-sbs":"")+(_.use24hours?" usetwentyfour":"")+' dropdown-menu">';if(_.options.sideBySide){n+='<div class="row">'+'<div class="col-sm-6 datepicker">'+i+"</div>"+'<div class="col-sm-6 timepicker">'+R.getTemplate()+"</div>"+"</div>"}else{n+='<ul class="list-unstyled">'+"<li"+(_.options.collapse?' class="collapse in"':"")+">"+'<div class="datepicker">'+i+"</div>"+"</li>"+'<li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+_.options.icons.time+'"></span></a></li>'+"<li"+(_.options.collapse?' class="collapse"':"")+">"+'<div class="timepicker">'+R.getTemplate()+"</div>"+"</li>"+"</ul>"}n+="</div>";return n}if(_.options.pickTime){return'<div class="bootstrap-datetimepicker-widget dropdown-menu">'+'<div class="timepicker">'+R.getTemplate()+"</div>"+"</div>"}return'<div class="bootstrap-datetimepicker-widget dropdown-menu">'+'<div class="datepicker">'+i+"</div>"+"</div>"},H={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},R={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};R.getTemplate=function(){return'<div class="timepicker-picker">'+'<table class="table-condensed">'+"<tr>"+'<td><a href="#" class="btn" data-action="incrementHours"><span class="'+_.options.icons.up+'"></span></a></td>'+'<td class="separator"></td>'+"<td>"+(_.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+_.options.icons.up+'"></span></a>':"")+"</td>"+(_.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+_.options.icons.up+'"></span></a></td>':"")+(_.use24hours?"":'<td class="separator"></td>')+"</tr>"+"<tr>"+"<td>"+R.hourTemplate+"</td> "+'<td class="separator">:</td>'+"<td>"+(_.options.useMinutes?R.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(_.options.useSeconds?'<td class="separator">:</td><td>'+R.secondTemplate+"</td>":"")+(_.use24hours?"":'<td class="separator"></td>'+'<td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+"</tr>"+"<tr>"+'<td><a href="#" class="btn" data-action="decrementHours"><span class="'+_.options.icons.down+'"></span></a></td>'+'<td class="separator"></td>'+"<td>"+(_.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+_.options.icons.down+'"></span></a>':"")+"</td>"+(_.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+_.options.icons.down+'"></span></a></td>':"")+(_.use24hours?"":'<td class="separator"></td>')+"</tr>"+"</table>"+"</div>"+'<div class="timepicker-hours" data-action="selectHour">'+'<table class="table-condensed"></table>'+"</div>"+'<div class="timepicker-minutes" data-action="selectMinute">'+'<table class="table-condensed"></table>'+"</div>"+(_.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")};_.destroy=function(){t();E();_.widget.remove();_.element.removeData("DateTimePicker");if(_.component){_.component.removeData("DateTimePicker")}};_.show=function(e){if(l().prop("disabled")){return}if(_.options.useCurrent){if(l().val()===""){if(_.options.minuteStepping!==1){var t=z(),i=_.options.minuteStepping;t.minutes(Math.round(t.minutes()/i)*i%60).seconds(0);_.setValue(t.format(_.format))}else{_.setValue(z().format(_.format))}c("",e.type)}}if(e&&e.type==="click"&&_.isInput&&_.widget.hasClass("picker-open")){return}if(_.widget.hasClass("picker-open")){_.widget.hide();_.widget.removeClass("picker-open")}else{_.widget.show();_.widget.addClass("picker-open")}_.height=_.component?_.component.outerHeight():_.element.outerHeight();u();_.element.trigger({type:"dp.show",date:z(_.date)});I();if(e){S(e)}};_.disable=function(){var e=l();if(e.prop("disabled")){return}e.prop("disabled",true);t()};_.enable=function(){var e=l();if(!e.prop("disabled")){return}e.prop("disabled",false);C()};_.hide=function(){var e=_.widget.find(".collapse"),t,i;for(t=0;t<e.length;t++){i=e.eq(t).data("collapse");if(i&&i.transitioning){return}}_.widget.hide();_.widget.removeClass("picker-open");_.viewMode=_.startViewMode;D();_.element.trigger({type:"dp.hide",date:z(_.date)});E()};_.setValue=function(e){z.locale(_.options.language);if(!e){_.unset=true;Y()}else{_.unset=false}if(!z.isMoment(e)){e=e instanceof Date?z(e):z(e,_.format,_.options.useStrict)}else{e=e.locale(_.options.language)}if(e.isValid()){_.date=e;Y();_.viewDate=z({y:_.date.year(),M:_.date.month()});g();w()}else{h(e)}};_.getDate=function(){if(_.unset){return null}return z(_.date)};_.setDate=function(e){var t=z(_.date);if(!e){_.setValue(null)}else{_.setValue(e)}c(t,"function")};_.setDisabledDates=function(e){_.options.disabledDates=j(e);if(_.viewDate){f()}};_.setEnabledDates=function(e){_.options.enabledDates=j(e);if(_.viewDate){f()}};_.setMaxDate=function(e){if(e===undefined){return}if(z.isMoment(e)||e instanceof Date){_.options.maxDate=z(e)}else{_.options.maxDate=z(e,_.format,_.options.useStrict)}if(_.viewDate){f()}};_.setMinDate=function(e){if(e===undefined){return}if(z.isMoment(e)||e instanceof Date){_.options.minDate=z(e)}else{_.options.minDate=z(e,_.format,_.options.useStrict)}if(_.viewDate){f()}};e()};B.fn.datetimepicker=function(i){return this.each(function(){var e=B(this),t=e.data("DateTimePicker");if(!t){e.data("DateTimePicker",new n(this,i))}})};B.fn.datetimepicker.defaults={format:false,pickDate:true,pickTime:true,useMinutes:true,useSeconds:false,useCurrent:true,calendarWeeks:false,minuteStepping:1,minDate:z({y:1900}),maxDate:z().add(100,"y"),showToday:true,collapse:true,language:z.locale(),defaultDate:"",disabledDates:false,enabledDates:false,icons:{},useStrict:false,direction:"auto",sideBySide:false,daysOfWeekDisabled:[],widgetParent:false}});(function(e,t){"use strict";if(typeof module!=="undefined"&&module.exports){module.exports=t(require("jquery"))}else if(typeof define==="function"&&define.amd){define("bootstrap3-typeahead",["jquery"],function(e){return t(e)})}else{t(e.jQuery)}})(this,function(d){"use strict";var s=function(e,t){this.$element=d(e);this.options=d.extend({},d.fn.typeahead.defaults,t);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.select=this.options.select||this.select;this.autoSelect=typeof this.options.autoSelect=="boolean"?this.options.autoSelect:true;this.highlighter=this.options.highlighter||this.highlighter;this.render=this.options.render||this.render;this.updater=this.options.updater||this.updater;this.displayText=this.options.displayText||this.displayText;this.source=this.options.source;this.delay=this.options.delay;this.$menu=d(this.options.menu);this.shown=false;this.listen();this.showHintOnFocus=typeof this.options.showHintOnFocus=="boolean"?this.options.showHintOnFocus:false;this.afterSelect=this.options.afterSelect};s.prototype={constructor:s,select:function(){var e=this.$menu.find(".active").data("value");this.$element.data("active",e);if(this.autoSelect||e){var t=this.updater(e);this.$element.val(t.name||t).change();this.afterSelect(t)}return this.hide()},updater:function(e){return e},setSource:function(e){this.source=e},show:function(){var e=d.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),t;t=typeof this.options.scrollHeight=="function"?this.options.scrollHeight.call():this.options.scrollHeight;this.$menu.insertAfter(this.$element).css({top:e.top+e.height+t,left:e.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(e){var t;if(typeof e!="undefined"&&e!==null){this.query=e}else{this.query=this.$element.val()||""}if(this.query.length<this.options.minLength){return this.shown?this.hide():this}var i=d.proxy(function(){t=d.isFunction(this.source)?this.source(this.query,d.proxy(this.process,this)):this.source;if(t){this.process(t)}},this);clearTimeout(this.lookupWorker);this.lookupWorker=setTimeout(i,this.delay)},process:function(e){var t=this;e=d.grep(e,function(e){return t.matcher(e)});e=this.sorter(e);if(!e.length){return this.shown?this.hide():this}if(e.length>0){this.$element.data("active",e[0])}else{this.$element.data("active",null)}if(this.options.items=="all"){return this.render(e).show()}else{return this.render(e.slice(0,this.options.items)).show()}},matcher:function(e){var t=this.displayText(e);return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],i=[],n=[],a;while(a=e.shift()){var s=this.displayText(a);if(!s.toLowerCase().indexOf(this.query.toLowerCase()))t.push(a);else if(~s.indexOf(this.query))i.push(a);else n.push(a)}return t.concat(i,n)},highlighter:function(e){var t=d("<div></div>");var i=this.query;var n=e.toLowerCase().indexOf(i.toLowerCase());var a,s,r,o,l;a=i.length;if(a==0){return t.text(e).html()}while(n>-1){s=e.substr(0,n);r=e.substr(n,a);o=e.substr(n+a);l=d("<strong></strong>").text(r);t.append(document.createTextNode(s)).append(l);e=o;n=e.toLowerCase().indexOf(i.toLowerCase())}return t.append(document.createTextNode(e)).html()},render:function(e){var n=this;var a=this;var s=false;e=d(e).map(function(e,t){var i=a.displayText(t);e=d(n.options.item).data("value",t);e.find("a").html(n.highlighter(i));if(i==a.$element.val()){e.addClass("active");a.$element.data("active",t);s=true}return e[0]});if(this.autoSelect&&!s){e.first().addClass("active");this.$element.data("active",e.first().data("value"))}this.$menu.html(e);return this},displayText:function(e){return e.name||e},next:function(e){var t=this.$menu.find(".active").removeClass("active"),i=t.next();if(!i.length){i=d(this.$menu.find("li")[0])}i.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),i=t.prev();if(!i.length){i=this.$menu.find("li").last()}i.addClass("active")},listen:function(){this.$element.on("focus",d.proxy(this.focus,this)).on("blur",d.proxy(this.blur,this)).on("keypress",d.proxy(this.keypress,this)).on("keyup",d.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",d.proxy(this.keydown,this))}this.$menu.on("click",d.proxy(this.click,this)).on("mouseenter","li",d.proxy(this.mouseenter,this)).on("mouseleave","li",d.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null);this.$element.data("active",null);this.$element.off("focus").off("blur").off("keypress").off("keyup");if(this.eventSupported("keydown")){this.$element.off("keydown")}this.$menu.remove()},eventSupported:function(e){var t=e in this.$element;if(!t){this.$element.setAttribute(e,"return;");t=typeof this.$element[e]==="function"}return t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:if(e.shiftKey)return;e.preventDefault();this.prev();break;case 40:if(e.shiftKey)return;e.preventDefault();this.next();break}e.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=~d.inArray(e.keyCode,[40,38,9,13,27]);if(!this.shown&&e.keyCode==40){this.lookup()}else{this.move(e)}},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation();e.preventDefault()},focus:function(e){if(!this.focused){this.focused=true;if(this.options.showHintOnFocus){this.lookup("")}}},blur:function(e){this.focused=false;if(!this.mousedover&&this.shown)this.hide()},click:function(e){e.stopPropagation();e.preventDefault();this.select();this.$element.focus()},mouseenter:function(e){this.mousedover=true;this.$menu.find(".active").removeClass("active");d(e.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=false;if(!this.focused&&this.shown)this.hide()}};var e=d.fn.typeahead;d.fn.typeahead=function(n){var a=arguments;if(typeof n=="string"&&n=="getActive"){return this.data("active")}return this.each(function(){var e=d(this),t=e.data("typeahead"),i=typeof n=="object"&&n;if(!t)e.data("typeahead",t=new s(this,i));if(typeof n=="string"){if(a.length>1){t[n].apply(t,Array.prototype.slice.call(a,1))}else{t[n]()}}})};d.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1,scrollHeight:0,autoSelect:true,afterSelect:d.noop,delay:0};d.fn.typeahead.Constructor=s;d.fn.typeahead.noConflict=function(){d.fn.typeahead=e;return this};d(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var t=d(this);if(t.data("typeahead"))return;t.typeahead(t.data())})});(function(e,t){if(typeof define==="function"&&define.amd){define(["jquery"],function(e){return t(e)})}else if(typeof exports==="object"){module.exports=t(require("jquery"))}else{t(jQuery)}})(this,function(){(function(k){"use strict";if(!String.prototype.includes){(function(){"use strict";var l={}.toString;var e=function(){try{var e={};var t=Object.defineProperty;var i=t(e,e,e)&&t}catch(e){}return i}();var d="".indexOf;var t=function(e){if(this==null){throw TypeError()}var t=String(this);if(e&&l.call(e)=="[object RegExp]"){throw TypeError()}var i=t.length;var n=String(e);var a=n.length;var s=arguments.length>1?arguments[1]:undefined;var r=s?Number(s):0;if(r!=r){r=0}var o=Math.min(Math.max(r,0),i);if(a+o>i){return false}return d.call(t,n,r)!=-1};if(e){e(String.prototype,"includes",{value:t,configurable:true,writable:true})}else{String.prototype.includes=t}})()}if(!String.prototype.startsWith){(function(){"use strict";var e=function(){try{var e={};var t=Object.defineProperty;var i=t(e,e,e)&&t}catch(e){}return i}();var d={}.toString;var t=function(e){if(this==null){throw TypeError()}var t=String(this);if(e&&d.call(e)=="[object RegExp]"){throw TypeError()}var i=t.length;var n=String(e);var a=n.length;var s=arguments.length>1?arguments[1]:undefined;var r=s?Number(s):0;if(r!=r){r=0}var o=Math.min(Math.max(r,0),i);if(a+o>i){return false}var l=-1;while(++l<a){if(t.charCodeAt(o+l)!=n.charCodeAt(l)){return false}}return true};if(e){e(String.prototype,"startsWith",{value:t,configurable:true,writable:true})}else{String.prototype.startsWith=t}})()}if(!Object.keys){Object.keys=function(e,t,i){i=[];for(t in e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}}k.fn.triggerNative=function(e){var t=this[0],i;if(t.dispatchEvent){if(typeof Event==="function"){i=new Event(e,{bubbles:true})}else{i=document.createEvent("Event");i.initEvent(e,true,false)}t.dispatchEvent(i)}else{if(t.fireEvent){i=document.createEventObject();i.eventType=e;t.fireEvent("on"+e,i)}this.trigger(e)}};k.expr[":"].icontains=function(e,t,i){var n=k(e);var a=(n.data("tokens")||n.text()).toUpperCase();return a.includes(i[3].toUpperCase())};k.expr[":"].ibegins=function(e,t,i){var n=k(e);var a=(n.data("tokens")||n.text()).toUpperCase();return a.startsWith(i[3].toUpperCase())};k.expr[":"].aicontains=function(e,t,i){var n=k(e);var a=(n.data("tokens")||n.data("normalizedText")||n.text()).toUpperCase();return a.includes(i[3].toUpperCase())};k.expr[":"].aibegins=function(e,t,i){var n=k(e);var a=(n.data("tokens")||n.data("normalizedText")||n.text()).toUpperCase();return a.startsWith(i[3].toUpperCase())};function y(e){var t=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];k.each(t,function(){e=e.replace(this.re,this.ch)});return e}function l(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var i="(?:"+Object.keys(t).join("|")+")",n=new RegExp(i),a=new RegExp(i,"g"),s=e==null?"":""+e;return n.test(s)?s.replace(a,function(e){return t[e]}):s}var d=function(e,t,i){if(i){i.stopPropagation();i.preventDefault()}this.$element=k(e);this.$newElement=null;this.$button=null;this.$menu=null;this.$lis=null;this.options=t;if(this.options.title===null){this.options.title=this.$element.attr("title")}this.val=d.prototype.val;this.render=d.prototype.render;this.refresh=d.prototype.refresh;this.setStyle=d.prototype.setStyle;this.selectAll=d.prototype.selectAll;this.deselectAll=d.prototype.deselectAll;this.destroy=d.prototype.remove;this.remove=d.prototype.remove;this.show=d.prototype.show;this.hide=d.prototype.hide;this.init()};d.VERSION="1.7.2";d.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return e==1?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[e==1?"Limit reached ({n} item max)":"Limit reached ({n} items max)",t==1?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:false,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:false,container:false,hideDisabled:false,showSubtext:false,showIcon:true,showContent:true,dropupAuto:true,header:false,liveSearch:false,liveSearchPlaceholder:null,liveSearchNormalize:false,liveSearchStyle:"contains",actionsBox:false,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:false,mobile:false,selectOnTab:false,dropdownAlignRight:false};d.prototype={constructor:d,init:function(){var t=this,e=this.$element.attr("id");this.$element.addClass("bs-select-hidden");this.liObj={};this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$button=this.$newElement.children("button");this.$menu=this.$newElement.children(".dropdown-menu");this.$menuInner=this.$menu.children(".inner");this.$searchbox=this.$menu.find("input");if(this.options.dropdownAlignRight)this.$menu.addClass("dropdown-menu-right");if(typeof e!=="undefined"){this.$button.attr("data-id",e);k('label[for="'+e+'"]').click(function(e){e.preventDefault();t.$button.focus()})}this.checkDisabled();this.clickListener();if(this.options.liveSearch)this.liveSearchListener();this.render();this.setStyle();this.setWidth();if(this.options.container)this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",this);if(this.options.mobile)this.mobile();this.$newElement.on("hide.bs.dropdown",function(e){t.$element.trigger("hide.bs.select",e)});this.$newElement.on("hidden.bs.dropdown",function(e){t.$element.trigger("hidden.bs.select",e)});this.$newElement.on("show.bs.dropdown",function(e){t.$element.trigger("show.bs.select",e)});this.$newElement.on("shown.bs.dropdown",function(e){t.$element.trigger("shown.bs.select",e)});setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var e=this.multiple?" show-tick":"",t=this.$element.parent().hasClass("input-group")?" input-group-btn":"",i=this.autofocus?" autofocus":"";var n=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"";var a=this.options.liveSearch?'<div class="bs-searchbox">'+'<input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+l(this.options.liveSearchPlaceholder)+'"')+">"+"</div>":"";var s=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox">'+'<div class="btn-group btn-group-sm btn-block">'+'<button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+"</button>"+'<button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button>"+"</div>"+"</div>":"";var r=this.multiple&&this.options.doneButton?'<div class="bs-donebutton">'+'<div class="btn-group btn-block">'+'<button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button>"+"</div>"+"</div>":"";var o='<div class="btn-group bootstrap-select'+e+t+'">'+'<button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+i+">"+'<span class="filter-option pull-left"></span>&nbsp;'+'<span class="caret"></span>'+"</button>"+'<div class="dropdown-menu open">'+n+a+s+'<ul class="dropdown-menu inner" role="menu">'+"</ul>"+r+"</div>"+"</div>";return k(o)},createView:function(){var e=this.createDropdown(),t=this.createLi();e.find("ul")[0].innerHTML=t;return e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menuInner[0].innerHTML=e},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var f=this,p=[],m=0,e=document.createElement("option"),g=-1;var _=function(e,t,i,n){return"<li"+(typeof i!=="undefined"&""!==i?' class="'+i+'"':"")+(typeof t!=="undefined"&null!==t?' data-original-index="'+t+'"':"")+(typeof n!=="undefined"&null!==n?'data-optgroup="'+n+'"':"")+">"+e+"</li>"};var v=function(e,t,i,n){return'<a tabindex="0"'+(typeof t!=="undefined"?' class="'+t+'"':"")+(typeof i!=="undefined"?' style="'+i+'"':"")+(f.options.liveSearchNormalize?' data-normalized-text="'+y(l(e))+'"':"")+(typeof n!=="undefined"||n!==null?' data-tokens="'+n+'"':"")+">"+e+'<span class="'+f.options.iconBase+" "+f.options.tickIcon+' check-mark"></span>'+"</a>"};if(this.options.title&&!this.multiple){g--;if(!this.$element.find(".bs-title-option").length){var t=this.$element[0];e.className="bs-title-option";e.appendChild(document.createTextNode(this.options.title));e.value="";t.insertBefore(e,t.firstChild);if(k(t.options[t.selectedIndex]).attr("selected")===undefined)e.selected=true}}this.$element.find("option").each(function(e){var t=k(this);g++;if(t.hasClass("bs-title-option"))return;var i=this.className||"",n=this.style.cssText,a=t.data("content")?t.data("content"):t.html(),s=t.data("tokens")?t.data("tokens"):null,r=typeof t.data("subtext")!=="undefined"?'<small class="text-muted">'+t.data("subtext")+"</small>":"",o=typeof t.data("icon")!=="undefined"?'<span class="'+f.options.iconBase+" "+t.data("icon")+'"></span> ':"",l=this.disabled||this.parentElement.tagName==="OPTGROUP"&&this.parentElement.disabled;if(o!==""&&l){o="<span>"+o+"</span>"}if(f.options.hideDisabled&&l){g--;return}if(!t.data("content")){a=o+'<span class="text">'+a+r+"</span>"}if(this.parentElement.tagName==="OPTGROUP"&&t.data("divider")!==true){var d=" "+this.parentElement.className||"";if(t.index()===0){m+=1;var u=this.parentElement.label,c=typeof t.parent().data("subtext")!=="undefined"?'<small class="text-muted">'+t.parent().data("subtext")+"</small>":"",h=t.parent().data("icon")?'<span class="'+f.options.iconBase+" "+t.parent().data("icon")+'"></span> ':"";u=h+'<span class="text">'+u+c+"</span>";if(e!==0&&p.length>0){g++;p.push(_("",null,"divider",m+"div"))}g++;p.push(_(u,null,"dropdown-header"+d,m))}p.push(_(v(a,"opt "+i+d,n,s),e,"",m))}else if(t.data("divider")===true){p.push(_("",e,"divider"))}else if(t.data("hidden")===true){p.push(_(v(a,i,n,s),e,"hidden is-hidden"))}else{if(this.previousElementSibling&&this.previousElementSibling.tagName==="OPTGROUP"){g++;p.push(_("",null,"divider",m+"div"))}p.push(_(v(a,i,n,s),e))}f.liObj[e]=g});if(!this.multiple&&this.$element.find("option:selected").length===0&&!this.options.title){this.$element.find("option").eq(0).prop("selected",true).attr("selected","selected")}return p.join("")},findLis:function(){if(this.$lis==null)this.$lis=this.$menu.find("li");return this.$lis},render:function(e){var n=this,t;if(e!==false){this.$element.find("option").each(function(e){var t=n.findLis().eq(n.liObj[e]);n.setDisabled(e,this.disabled||this.parentElement.tagName==="OPTGROUP"&&this.parentElement.disabled,t);n.setSelected(e,this.selected,t)})}this.tabIndex();var i=this.$element.find("option").map(function(){if(this.selected){if(n.options.hideDisabled&&(this.disabled||this.parentElement.tagName==="OPTGROUP"&&this.parentElement.disabled))return false;var e=k(this),t=e.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+e.data("icon")+'"></i> ':"",i;if(n.options.showSubtext&&e.data("subtext")&&!n.multiple){i=' <small class="text-muted">'+e.data("subtext")+"</small>"}else{i=""}if(typeof e.attr("title")!=="undefined"){return e.attr("title")}else if(e.data("content")&&n.options.showContent){return e.data("content")}else{return t+e.html()+i}}}).toArray();var a=!this.multiple?i[0]:i.join(this.options.multipleSeparator);if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var s=this.options.selectedTextFormat.split(">");if(s.length>1&&i.length>s[1]||s.length==1&&i.length>=2){t=this.options.hideDisabled?", [disabled]":"";var r=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+t).length,o=typeof this.options.countSelectedText==="function"?this.options.countSelectedText(i.length,r):this.options.countSelectedText;a=o.replace("{0}",i.length.toString()).replace("{1}",r.toString())}}if(this.options.title==undefined){this.options.title=this.$element.attr("title")}if(this.options.selectedTextFormat=="static"){a=this.options.title}if(!a){a=typeof this.options.title!=="undefined"?this.options.title:this.options.noneSelectedText}this.$button.attr("title",k.trim(a.replace(/<[^>]*>?/g,"")));this.$button.children(".filter-option").html(a);this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){if(this.$element.attr("class")){this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""))}var i=e?e:this.options.style;if(t=="add"){this.$button.addClass(i)}else if(t=="remove"){this.$button.removeClass(i)}else{this.$button.removeClass(this.options.style);this.$button.addClass(i)}},liHeight:function(e){if(!e&&(this.options.size===false||this.sizeInfo))return;var t=document.createElement("div"),i=document.createElement("div"),n=document.createElement("ul"),a=document.createElement("li"),s=document.createElement("li"),r=document.createElement("a"),o=document.createElement("span"),l=this.options.header?this.$menu.find(".popover-title")[0].cloneNode(true):null,d=this.options.liveSearch?document.createElement("div"):null,u=this.options.actionsBox&&this.multiple?this.$menu.find(".bs-actionsbox")[0].cloneNode(true):null,c=this.options.doneButton&&this.multiple?this.$menu.find(".bs-donebutton")[0].cloneNode(true):null;o.className="text";t.className=this.$menu[0].parentNode.className+" open";i.className="dropdown-menu open";n.className="dropdown-menu inner";a.className="divider";o.appendChild(document.createTextNode("Inner text"));r.appendChild(o);s.appendChild(r);n.appendChild(s);n.appendChild(a);if(l)i.appendChild(l);if(d){var h=document.createElement("span");d.className="bs-searchbox";h.className="form-control";d.appendChild(h);i.appendChild(d)}if(u)i.appendChild(u);i.appendChild(n);if(c)i.appendChild(c);t.appendChild(i);document.body.appendChild(t);var f=r.offsetHeight,p=l?l.offsetHeight:0,m=d?d.offsetHeight:0,g=u?u.offsetHeight:0,_=c?c.offsetHeight:0,v=k(a).outerHeight(true),y=typeof getComputedStyle==="function"?getComputedStyle(i):false,b=y?null:k(i),w=parseInt(y?y.paddingTop:b.css("paddingTop"))+parseInt(y?y.paddingBottom:b.css("paddingBottom"))+parseInt(y?y.borderTopWidth:b.css("borderTopWidth"))+parseInt(y?y.borderBottomWidth:b.css("borderBottomWidth")),M=w+parseInt(y?y.marginTop:b.css("marginTop"))+parseInt(y?y.marginBottom:b.css("marginBottom"))+2;document.body.removeChild(t);this.sizeInfo={liHeight:f,headerHeight:p,searchHeight:m,actionsHeight:g,doneButtonHeight:_,dividerHeight:v,menuPadding:w,menuExtras:M}},setSize:function(){this.findLis();this.liHeight();if(this.options.header)this.$menu.css("padding-top",0);if(this.options.size===false)return;var s=this,r=this.$menu,o=this.$menuInner,e=k(window),t=this.$newElement[0].offsetHeight,l=this.sizeInfo["liHeight"],d=this.sizeInfo["headerHeight"],u=this.sizeInfo["searchHeight"],c=this.sizeInfo["actionsHeight"],h=this.sizeInfo["doneButtonHeight"],i=this.sizeInfo["dividerHeight"],f=this.sizeInfo["menuPadding"],p=this.sizeInfo["menuExtras"],n=this.options.hideDisabled?".disabled":"",m,g,_,v,y=function(){_=s.$newElement.offset().top-e.scrollTop();v=e.height()-_-t};y();if(this.options.size==="auto"){var a=function(){var e,t=function(t,i){return function(e){if(i){return e.classList?e.classList.contains(t):k(e).hasClass(t)}else{return!(e.classList?e.classList.contains(t):k(e).hasClass(t))}}},i=s.$menuInner[0].getElementsByTagName("li"),n=Array.prototype.filter?Array.prototype.filter.call(i,t("hidden",false)):s.$lis.not(".hidden"),a=Array.prototype.filter?Array.prototype.filter.call(n,t("dropdown-header",true)):n.filter(".dropdown-header");y();m=v-p;if(s.options.container){if(!r.data("height"))r.data("height",r.height());g=r.data("height")}else{g=r.height()}if(s.options.dropupAuto){s.$newElement.toggleClass("dropup",_>v&&m-p<g)}if(s.$newElement.hasClass("dropup")){m=_-p}if(n.length+a.length>3){e=l*3+p-2}else{e=0}r.css({"max-height":m+"px",overflow:"hidden","min-height":e+d+u+c+h+"px"});o.css({"max-height":m-d-u-c-h-f+"px","overflow-y":"auto","min-height":Math.max(e-f,0)+"px"})};a();this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",a);e.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",a)}else if(this.options.size&&this.options.size!="auto"&&this.$lis.not(n).length>this.options.size){var b=this.$lis.not(".divider").not(n).children().slice(0,this.options.size).last().parent().index(),w=this.$lis.slice(0,b+1).filter(".divider").length;m=l*this.options.size+w*i+f;if(s.options.container){if(!r.data("height"))r.data("height",r.height());g=r.data("height")}else{g=r.height()}if(s.options.dropupAuto){this.$newElement.toggleClass("dropup",_>v&&m-p<g)}r.css({"max-height":m+d+u+c+h+"px",overflow:"hidden","min-height":""});o.css({"max-height":m-f+"px","overflow-y":"auto","min-height":""})}},setWidth:function(){if(this.options.width==="auto"){this.$menu.css("min-width","0");var e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,i=e.children(".dropdown-menu").outerWidth(),n=t.css("width","auto").children("button").outerWidth();e.remove();t.remove();this.$newElement.css("width",Math.max(i,n)+"px")}else if(this.options.width==="fit"){this.$menu.css("min-width","");this.$newElement.css("width","").addClass("fit-width")}else if(this.options.width){this.$menu.css("min-width","");this.$newElement.css("width",this.options.width)}else{this.$menu.css("min-width","");this.$newElement.css("width","")}if(this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"){this.$newElement.removeClass("fit-width")}},selectPosition:function(){var e=this,t="<div />",i=k(t),n,a,s=function(e){i.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup"));n=e.offset();a=e.hasClass("dropup")?0:e[0].offsetHeight;i.css({top:n.top+a,left:n.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){if(e.isDisabled()){return}s(k(this));i.appendTo(e.options.container);i.toggleClass("open",!k(this).hasClass("open"));i.append(e.$menu)});k(window).on("resize scroll",function(){s(e.$newElement)});this.$element.on("hide.bs.select",function(){e.$menu.data("height",e.$menu.height());i.detach()})},setSelected:function(e,t,i){if(!i){var i=this.findLis().eq(this.liObj[e])}i.toggleClass("selected",t)},setDisabled:function(e,t,i){if(!i){var i=this.findLis().eq(this.liObj[e])}if(t){i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1)}else{i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)}},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;if(this.isDisabled()){this.$newElement.addClass("disabled");this.$button.addClass("disabled").attr("tabindex",-1)}else{if(this.$button.hasClass("disabled")){this.$newElement.removeClass("disabled");this.$button.removeClass("disabled")}if(this.$button.attr("tabindex")==-1&&!this.$element.data("tabindex")){this.$button.removeAttr("tabindex")}}this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){if(this.$element.is("[tabindex]")){this.$element.data("tabindex",this.$element.attr("tabindex"));this.$button.attr("tabindex",this.$element.data("tabindex"))}},clickListener:function(){var v=this,t=k(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()});t.data("spaceSelect",false);this.$button.on("keyup",function(e){if(/(32)/.test(e.keyCode.toString(10))&&t.data("spaceSelect")){e.preventDefault();t.data("spaceSelect",false)}});this.$newElement.on("click",function(){v.setSize();v.$element.on("shown.bs.select",function(){if(!v.options.liveSearch&&!v.multiple){v.$menu.find(".selected a").focus()}else if(!v.multiple){var e=v.liObj[v.$element[0].selectedIndex];if(typeof e!=="number"||v.options.size===false)return;var t=v.$lis.eq(e)[0].offsetTop-v.$menuInner[0].offsetTop;t=t-v.$menuInner[0].offsetHeight/2+v.sizeInfo.liHeight/2;v.$menuInner[0].scrollTop=t}})});this.$menu.on("click","li a",function(e){var t=k(this),i=t.parent().data("originalIndex"),n=v.$element.val(),a=v.$element.prop("selectedIndex");if(v.multiple){e.stopPropagation()}e.preventDefault();if(!v.isDisabled()&&!t.parent().hasClass("disabled")){var s=v.$element.find("option"),r=s.eq(i),o=r.prop("selected"),l=r.parent("optgroup"),d=v.options.maxOptions,u=l.data("maxOptions")||false;if(!v.multiple){s.prop("selected",false);r.prop("selected",true);v.$menu.find(".selected").removeClass("selected");v.setSelected(i,true)}else{r.prop("selected",!o);v.setSelected(i,!o);t.blur();if(d!==false||u!==false){var c=d<s.filter(":selected").length,h=u<l.find("option:selected").length;if(d&&c||u&&h){if(d&&d==1){s.prop("selected",false);r.prop("selected",true);v.$menu.find(".selected").removeClass("selected");v.setSelected(i,true)}else if(u&&u==1){l.find("option:selected").prop("selected",false);r.prop("selected",true);var f=t.parent().data("optgroup");v.$menu.find('[data-optgroup="'+f+'"]').removeClass("selected");v.setSelected(i,true)}else{var p=typeof v.options.maxOptionsText==="function"?v.options.maxOptionsText(d,u):v.options.maxOptionsText,m=p[0].replace("{n}",d),g=p[1].replace("{n}",u),_=k('<div class="notify"></div>');if(p[2]){m=m.replace("{var}",p[2][d>1?0:1]);g=g.replace("{var}",p[2][u>1?0:1])}r.prop("selected",false);v.$menu.append(_);if(d&&c){_.append(k("<div>"+m+"</div>"));v.$element.trigger("maxReached.bs.select")}if(u&&h){_.append(k("<div>"+g+"</div>"));v.$element.trigger("maxReachedGrp.bs.select")}setTimeout(function(){v.setSelected(i,false)},10);_.delay(750).fadeOut(300,function(){k(this).remove()})}}}}if(!v.multiple){v.$button.focus()}else if(v.options.liveSearch){v.$searchbox.focus()}if(n!=v.$element.val()&&v.multiple||a!=v.$element.prop("selectedIndex")&&!v.multiple){v.$element.triggerNative("change");v.$element.trigger("changed.bs.select",[i,r.prop("selected"),o])}}});this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(e){if(e.currentTarget==this){e.preventDefault();e.stopPropagation();if(v.options.liveSearch&&!k(e.target).hasClass("close")){v.$searchbox.focus()}else{v.$button.focus()}}});this.$menu.on("click","li.divider, li.dropdown-header",function(e){e.preventDefault();e.stopPropagation();if(v.options.liveSearch){v.$searchbox.focus()}else{v.$button.focus()}});this.$menu.on("click",".popover-title .close",function(){v.$button.click()});this.$searchbox.on("click",function(e){e.stopPropagation()});this.$menu.on("click",".actions-btn",function(e){if(v.options.liveSearch){v.$searchbox.focus()}else{v.$button.focus()}e.preventDefault();e.stopPropagation();if(k(this).hasClass("bs-select-all")){v.selectAll()}else{v.deselectAll()}v.$element.triggerNative("change")});this.$element.change(function(){v.render(false)})},liveSearchListener:function(){var n=this,t=k('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){n.$menuInner.find(".active").removeClass("active");if(!!n.$searchbox.val()){n.$searchbox.val("");n.$lis.not(".is-hidden").removeClass("hidden");if(!!t.parent().length)t.remove()}if(!n.multiple)n.$menuInner.find(".selected").addClass("active");setTimeout(function(){n.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()});this.$searchbox.on("input propertychange",function(){if(n.$searchbox.val()){var e=n.$lis.not(".is-hidden").removeClass("hidden").children("a");if(n.options.liveSearchNormalize){e=e.not(":a"+n._searchStyle()+'("'+y(n.$searchbox.val())+'")')}else{e=e.not(":"+n._searchStyle()+'("'+n.$searchbox.val()+'")')}e.parent().addClass("hidden");n.$lis.filter(".dropdown-header").each(function(){var e=k(this),t=e.data("optgroup");if(n.$lis.filter("[data-optgroup="+t+"]").not(e).not(".hidden").length===0){e.addClass("hidden");n.$lis.filter("[data-optgroup="+t+"div]").addClass("hidden")}});var i=n.$lis.not(".hidden");i.each(function(e){var t=k(this);if(t.hasClass("divider")&&(t.index()===i.eq(0).index()||t.index()===i.last().index()||i.eq(e+1).hasClass("divider"))){t.addClass("hidden")}});if(!n.$lis.not(".hidden, .no-results").length){if(!!t.parent().length){t.remove()}t.html(n.options.noneResultsText.replace("{0}",'"'+l(n.$searchbox.val())+'"')).show();n.$menuInner.append(t)}else if(!!t.parent().length){t.remove()}}else{n.$lis.not(".is-hidden").removeClass("hidden");if(!!t.parent().length){t.remove()}}n.$lis.filter(".active").removeClass("active");if(n.$searchbox.val())n.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus();k(this).focus()})},_searchStyle:function(){var e="icontains";switch(this.options.liveSearchStyle){case"begins":case"startsWith":e="ibegins";break;case"contains":default:break}return e},val:function(e){if(typeof e!=="undefined"){this.$element.val(e);this.render();return this.$element}else{return this.$element.val()}},selectAll:function(){this.findLis();this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",true);this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").addClass("selected");this.render(false)},deselectAll:function(){this.findLis();this.$element.find("option:enabled").not("[data-divider], [data-hidden]").prop("selected",false);this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").removeClass("selected");this.render(false)},keydown:function(e){var t=k(this),i=t.is("input")?t.parent().parent():t.parent(),n,a=i.data("this"),s,r,o,l,d,u,c,h,f=":not(.disabled, .hidden, .dropdown-header, .divider)",p={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(a.options.liveSearch)i=t.parent().parent();if(a.options.container)i=a.$menu;n=k("[role=menu] li a",i);h=a.$menu.parent().hasClass("open");if(!h&&(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90)){if(!a.options.container){a.setSize();a.$menu.parent().addClass("open");h=true}else{a.$newElement.trigger("click")}a.$searchbox.focus()}if(a.options.liveSearch){if(/(^9$|27)/.test(e.keyCode.toString(10))&&h&&a.$menu.find(".active").length===0){e.preventDefault();a.$menu.parent().removeClass("open");if(a.options.container)a.$newElement.removeClass("open");a.$button.focus()}n=k("[role=menu] li:not(.disabled, .hidden, .dropdown-header, .divider)",i);if(!t.val()&&!/(38|40)/.test(e.keyCode.toString(10))){if(n.filter(".active").length===0){n=a.$newElement.find("li");if(a.options.liveSearchNormalize){n=n.filter(":a"+a._searchStyle()+"("+y(p[e.keyCode])+")")}else{n=n.filter(":"+a._searchStyle()+"("+p[e.keyCode]+")")}}}}if(!n.length)return;if(/(38|40)/.test(e.keyCode.toString(10))){s=n.index(n.filter(":focus"));o=n.parent(f).first().data("originalIndex");l=n.parent(f).last().data("originalIndex");r=n.eq(s).parent().nextAll(f).eq(0).data("originalIndex");d=n.eq(s).parent().prevAll(f).eq(0).data("originalIndex");u=n.eq(r).parent().prevAll(f).eq(0).data("originalIndex");if(a.options.liveSearch){n.each(function(e){if(!k(this).hasClass("disabled")){k(this).data("index",e)}});s=n.index(n.filter(".active"));o=n.first().data("index");l=n.last().data("index");r=n.eq(s).nextAll().eq(0).data("index");d=n.eq(s).prevAll().eq(0).data("index");u=n.eq(r).prevAll().eq(0).data("index")}c=t.data("prevIndex");if(e.keyCode==38){if(a.options.liveSearch)s-=1;if(s!=u&&s>d)s=d;if(s<o)s=o;if(s==c)s=l}else if(e.keyCode==40){if(a.options.liveSearch)s+=1;if(s==-1)s=0;if(s!=u&&s<r)s=r;if(s>l)s=l;if(s==c)s=o}t.data("prevIndex",s);if(!a.options.liveSearch){n.eq(s).focus()}else{e.preventDefault();if(!t.hasClass("dropdown-toggle")){n.removeClass("active").eq(s).addClass("active").children("a").focus();t.focus()}}}else if(!t.is("input")){var m=[],g,_;n.each(function(){if(!k(this).parent().hasClass("disabled")){if(k.trim(k(this).text().toLowerCase()).substring(0,1)==p[e.keyCode]){m.push(k(this).parent().index())}}});g=k(document).data("keycount");g++;k(document).data("keycount",g);_=k.trim(k(":focus").text().toLowerCase()).substring(0,1);if(_!=p[e.keyCode]){g=1;k(document).data("keycount",g)}else if(g>=m.length){k(document).data("keycount",0);if(g>m.length)g=1}n.eq(m[g-1]).focus()}if((/(13|32)/.test(e.keyCode.toString(10))||/(^9$)/.test(e.keyCode.toString(10))&&a.options.selectOnTab)&&h){if(!/(32)/.test(e.keyCode.toString(10)))e.preventDefault();if(!a.options.liveSearch){var v=k(":focus");v.click();v.focus();e.preventDefault();k(document).data("spaceSelect",true)}else if(!/(32)/.test(e.keyCode.toString(10))){a.$menu.find(".active a").click();t.focus()}k(document).data("keycount",0)}if(/(^9$|27)/.test(e.keyCode.toString(10))&&h&&(a.multiple||a.options.liveSearch)||/(27)/.test(e.keyCode.toString(10))&&!h){a.$menu.parent().removeClass("open");if(a.options.container)a.$newElement.removeClass("open");a.$button.focus()}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);if(this.options.container)this.$menu.hide()},refresh:function(){this.$lis=null;this.liObj={};this.reloadLi();this.render();this.checkDisabled();this.liHeight(true);this.setStyle();this.setWidth();if(this.$lis)this.$searchbox.trigger("propertychange");this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()}};function t(e,t){var s=arguments;var r=e,o=t;[].shift.apply(s);var l;var i=this.each(function(){var e=k(this);if(e.is("select")){var t=e.data("selectpicker"),i=typeof r=="object"&&r;if(!t){var n=k.extend({},d.DEFAULTS,k.fn.selectpicker.defaults||{},e.data(),i);e.data("selectpicker",t=new d(this,n,o))}else if(i){for(var a in i){if(i.hasOwnProperty(a)){t.options[a]=i[a]}}}if(typeof r=="string"){if(t[r]instanceof Function){l=t[r].apply(t,s)}else{l=t.options[r]}}}});if(typeof l!=="undefined"){return l}else{return i}}var e=k.fn.selectpicker;k.fn.selectpicker=t;k.fn.selectpicker.Constructor=d;k.fn.selectpicker.noConflict=function(){k.fn.selectpicker=e;return this};k(document).data("keycount",0).on("keydown",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',d.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(e){e.stopPropagation()});k(window).on("load.bs.select.data-api",function(){k(".selectpicker").each(function(){var e=k(this);t.call(e,e.data())})})})(jQuery)});(function(o){o.widget("ech.notify",{options:{speed:500,expires:5e3,stack:"below",custom:false,queue:false},_create:function(){var i=this;this.templates={};this.keys=[];this.element.addClass("ui-notify").children().addClass("ui-notify-message ui-notify-message-style").each(function(e){var t=this.id||e;i.keys.push(t);i.templates[t]=o(this).removeAttr("id").wrap("<div></div>").parent().html()}).end().empty().show()},create:function(e,t,i){if(typeof e==="object"){i=t;t=e;e=null}var n=this.templates[e||this.keys[0]];if(i&&i.custom){n=o(n).removeClass("ui-notify-message-style").wrap("<div></div>").parent().html()}this.openNotifications=this.openNotifications||0;return new o.ech.notify.instance(this)._create(t,o.extend({},this.options,i),n)}});o.extend(o.ech.notify,{instance:function(e){this.__super=e;this.isOpen=false}});o.extend(o.ech.notify.instance.prototype,{_create:function(i,e,t){this.options=e;var n=this,a=t.replace(/#(?:\{|%7B)(.*?)(?:\}|%7D)/g,function(e,t){return t in i?i[t]:""}),s=this.element=o(a),r=s.find(".ui-notify-close");if(typeof this.options.click==="function"){s.addClass("ui-notify-click").bind("click",function(e){n._trigger("click",e,n)})}if(r.length){r.bind("click",function(){n.close();return false})}this.__super.element.queue("notify",function(){n.open();if(typeof e.expires==="number"&&e.expires>0){setTimeout(o.proxy(n.close,n),e.expires)}});if(!this.options.queue||this.__super.openNotifications<=this.options.queue-1){this.__super.element.dequeue("notify")}return this},close:function(){var e=this.options.speed;this.element.fadeTo(e,0).slideUp(e,o.proxy(function(){this._trigger("close");this.isOpen=false;this.element.remove();this.__super.openNotifications-=1;this.__super.element.dequeue("notify")},this));return this},open:function(){if(this.isOpen||this._trigger("beforeopen")===false){return this}var e=this;this.__super.openNotifications+=1;this.element[this.options.stack==="above"?"prependTo":"appendTo"](this.__super.element).css({display:"none",opacity:""}).fadeIn(this.options.speed,function(){e._trigger("open");e.isOpen=true});return this},widget:function(){return this.element},_trigger:function(e,t,i){return this.__super._trigger.call(this,e,t,i)}})})(jQuery);!function(e){"use strict";var n=function(e,t){var i=/[^\w\-\.:]/.test(e)?new Function(n.arg+",tmpl","var _e=tmpl.encode"+n.helper+",_s='"+e.replace(n.regexp,n.func)+"';return _s;"):n.cache[e]=n.cache[e]||n(n.load(e));return t?i(t,n):function(e){return i(e,n)}};n.cache={},n.load=function(e){return document.getElementById(e).innerHTML},n.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,n.func=function(e,t,i,n,a,s){return t?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[t]||"\\"+t:i?"="===i?"'+_e("+n+")+'":"'+("+n+"==null?'':"+n+")+'":a?"';":s?"_s+='":void 0},n.encReg=/[<>&"'\x00]/g,n.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},n.encode=function(e){return(null==e?"":""+e).replace(n.encReg,function(e){return n.encMap[e]||""})},n.arg="o",n.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return n}):e.tmpl=n}(this);!function(e){"use strict";var y=function(e,i,t){var n,a,s=document.createElement("img");if(s.onerror=i,s.onload=function(){!a||t&&t.noRevoke||y.revokeObjectURL(a),i&&i(y.scale(s,t))},y.isInstanceOf("Blob",e)||y.isInstanceOf("File",e))n=a=y.createObjectURL(e),s._type=e.type;else{if("string"!=typeof e)return!1;n=e,t&&t.crossOrigin&&(s.crossOrigin=t.crossOrigin)}return n?(s.src=n,s):y.readFile(e,function(e){var t=e.target;t&&t.result?s.src=t.result:i&&i(e)})},t=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;y.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},y.transformCoordinates=function(){},y.getTransformedOptions=function(e,t){var i,n,a,s,r=t.aspectRatio;if(!r)return t;i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i.crop=!0,a=e.naturalWidth||e.width,s=e.naturalHeight||e.height,a/s>r?(i.maxWidth=s*r,i.maxHeight=s):(i.maxWidth=a,i.maxHeight=a/r),i},y.renderImageToCanvas=function(e,t,i,n,a,s,r,o,l,d){return e.getContext("2d").drawImage(t,i,n,a,s,r,o,l,d),e},y.hasCanvasOption=function(e){return e.canvas||e.crop||e.aspectRatio},y.scale=function(e,t){t=t||{};var i,n,a,s,r,o,l,d,u,c=document.createElement("canvas"),h=e.getContext||y.hasCanvasOption(t)&&c.getContext,f=e.naturalWidth||e.width,p=e.naturalHeight||e.height,m=f,g=p,_=function(){var e=Math.max((a||m)/m,(s||g)/g);e>1&&(m*=e,g*=e)},v=function(){var e=Math.min((i||m)/m,(n||g)/g);1>e&&(m*=e,g*=e)};return h&&(t=y.getTransformedOptions(e,t),l=t.left||0,d=t.top||0,t.sourceWidth?(r=t.sourceWidth,void 0!==t.right&&void 0===t.left&&(l=f-r-t.right)):r=f-l-(t.right||0),t.sourceHeight?(o=t.sourceHeight,void 0!==t.bottom&&void 0===t.top&&(d=p-o-t.bottom)):o=p-d-(t.bottom||0),m=r,g=o),i=t.maxWidth,n=t.maxHeight,a=t.minWidth,s=t.minHeight,h&&i&&n&&t.crop?(m=i,g=n,u=r/o-i/n,0>u?(o=n*r/i,void 0===t.top&&void 0===t.bottom&&(d=(p-o)/2)):u>0&&(r=i*o/n,void 0===t.left&&void 0===t.right&&(l=(f-r)/2))):((t.contain||t.cover)&&(a=i=i||a,s=n=n||s),t.cover?(v(),_()):(_(),v())),h?(c.width=m,c.height=g,y.transformCoordinates(c,t),y.renderImageToCanvas(c,e,l,d,r,o,0,0,m,g)):(e.width=m,e.height=g,e)},y.createObjectURL=function(e){return t?t.createObjectURL(e):!1},y.revokeObjectURL=function(e){return t?t.revokeObjectURL(e):!1},y.readFile=function(e,t,i){if(window.FileReader){var n=new FileReader;if(n.onload=n.onerror=t,i=i||"readAsDataURL",n[i])return n[i](e),n}return!1},"function"==typeof define&&define.amd?define(function(){return y}):e.loadImage=y}(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(v){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var y=v.renderImageToCanvas;v.detectSubsampling=function(e){var t,i;return e.width*e.height>1048576?(t=document.createElement("canvas"),t.width=t.height=1,i=t.getContext("2d"),i.drawImage(e,-e.width+1,0),0===i.getImageData(0,0,1,1).data[3]):!1},v.detectVerticalSquash=function(e,t){var i,n,a,s,r,o=e.naturalHeight||e.height,l=document.createElement("canvas"),d=l.getContext("2d");for(t&&(o/=2),l.width=1,l.height=o,d.drawImage(e,0,0),i=d.getImageData(0,0,1,o).data,n=0,a=o,s=o;s>n;)r=i[4*(s-1)+3],0===r?a=s:n=s,s=a+n>>1;return s/o||1},v.renderImageToCanvas=function(e,t,i,n,a,s,r,o,l,d){if("image/jpeg"===t._type){var u,c,h,f,p=e.getContext("2d"),m=document.createElement("canvas"),g=1024,_=m.getContext("2d");if(m.width=g,m.height=g,p.save(),u=v.detectSubsampling(t),u&&(i/=2,n/=2,a/=2,s/=2),c=v.detectVerticalSquash(t,u),u||1!==c){for(n*=c,l=Math.ceil(g*l/a),d=Math.ceil(g*d/s/c),o=0,f=0;s>f;){for(r=0,h=0;a>h;)_.clearRect(0,0,g,g),_.drawImage(t,i,n,a,s,-h,-f,a,s),p.drawImage(m,0,0,g,g,r,o,l,d),h+=g,r+=l;f+=g,o+=d}return p.restore(),e}}return y(e,t,i,n,a,s,r,o,l,d)}}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(r){"use strict";var t=r.hasCanvasOption,o=r.transformCoordinates,l=r.getTransformedOptions;r.hasCanvasOption=function(e){return t.call(r,e)||e.orientation},r.transformCoordinates=function(e,t){o.call(r,e,t);var i=e.getContext("2d"),n=e.width,a=e.height,s=t.orientation;if(s&&!(s>8))switch(s>4&&(e.width=a,e.height=n),s){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,a),i.rotate(Math.PI);break;case 4:i.translate(0,a),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-a);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-a),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-n,0)}},r.getTransformedOptions=function(e,t){var i,n,a=l.call(r,e,t),s=a.orientation;if(!s||s>8||1===s)return a;i={};for(n in a)a.hasOwnProperty(n)&&(i[n]=a[n]);switch(a.orientation){case 2:i.left=a.right,i.right=a.left;break;case 3:i.left=a.right,i.top=a.bottom,i.right=a.left,i.bottom=a.top;break;case 4:i.top=a.bottom,i.bottom=a.top;break;case 5:i.left=a.top,i.top=a.left,i.right=a.bottom,i.bottom=a.right;break;case 6:i.left=a.top,i.top=a.right,i.right=a.bottom,i.bottom=a.left;break;case 7:i.left=a.bottom,i.top=a.right,i.right=a.top,i.bottom=a.left;break;case 8:i.left=a.bottom,i.top=a.left,i.right=a.top,i.bottom=a.right}return a.orientation>4&&(i.maxWidth=a.maxHeight,i.maxHeight=a.maxWidth,i.minWidth=a.minHeight,i.minHeight=a.minWidth,i.sourceWidth=a.sourceHeight,i.sourceHeight=a.sourceWidth),i}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(p){"use strict";var e=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);p.blobSlice=e&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},p.metaDataParsers={jpeg:{65505:[]}},p.parseMetaData=function(e,u,c){c=c||{};var h=this,t=c.maxMetaDataSize||262144,f={},i=!(window.DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&p.blobSlice);(i||!p.readFile(p.blobSlice.call(e,0,t),function(e){if(e.target.error)return console.log(e.target.error),void u(f);var t,i,n,a,s=e.target.result,r=new DataView(s),o=2,l=r.byteLength-4,d=o;if(65496===r.getUint16(0)){for(;l>o&&(t=r.getUint16(o),t>=65504&&65519>=t||65534===t);){if(i=r.getUint16(o+2)+2,o+i>r.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(n=p.metaDataParsers.jpeg[t])for(a=0;a<n.length;a+=1)n[a].call(h,r,o,i,f,c);o+=i,d=o}!c.disableImageHead&&d>6&&(f.imageHead=s.slice?s.slice(0,d):new Uint8Array(s).subarray(0,d))}else console.log("Invalid JPEG file: Missing JPEG marker.");u(f)},"readAsArrayBuffer"))&&u(f)}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],e):e(window.loadImage)}(function(f){"use strict";f.ExifMap=function(){return this},f.ExifMap.prototype.map={Orientation:274},f.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},f.getExifThumbnail=function(e,t,i){var n,a,s;if(!i||t+i>e.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(n=[],a=0;i>a;a+=1)s=e.getUint8(t+a),n.push((16>s?"0":"")+s.toString(16));return"data:image/jpeg,%"+n.join("%")},f.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}},f.exifTagTypes[7]=f.exifTagTypes[1],f.getExifValue=function(e,t,i,n,a,s){var r,o,l,d,u,c,h=f.exifTagTypes[n];if(!h)return void console.log("Invalid Exif data: Invalid tag type.");if(r=h.size*a,o=r>4?t+e.getUint32(i+8,s):i+8,o+r>e.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===a)return h.getValue(e,o,s);for(l=[],d=0;a>d;d+=1)l[d]=h.getValue(e,o+d*h.size,s);if(h.ascii){for(u="",d=0;d<l.length&&(c=l[d],"\0"!==c);d+=1)u+=c;return u}return l},f.parseExifTag=function(e,t,i,n,a){var s=e.getUint16(i,n);a.exif[s]=f.getExifValue(e,t,i,e.getUint16(i+2,n),e.getUint32(i+4,n),n)},f.parseExifTags=function(e,t,i,n,a){var s,r,o;if(i+6>e.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(s=e.getUint16(i,n),r=i+2+12*s,r+4>e.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(o=0;s>o;o+=1)this.parseExifTag(e,t,i+2+12*o,n,a);return e.getUint32(r,n)},f.parseExifData=function(e,t,i,n,a){if(!a.disableExif){var s,r,o,l=t+10;if(1165519206===e.getUint32(t+4)){if(l+8>e.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==e.getUint16(t+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(e.getUint16(l)){case 18761:s=!0;break;case 19789:s=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==e.getUint16(l+2,s))return void console.log("Invalid Exif data: Missing TIFF marker.");r=e.getUint32(l+4,s),n.exif=new f.ExifMap,r=f.parseExifTags(e,l,l+r,s,n),r&&!a.disableExifThumbnail&&(o={exif:{}},r=f.parseExifTags(e,l,l+r,s,o),o.exif[513]&&(n.exif.Thumbnail=f.getExifThumbnail(e,l+o.exif[513],o.exif[514]))),n.exif[34665]&&!a.disableExifSub&&f.parseExifTags(e,l,l+n.exif[34665],s,n),n.exif[34853]&&!a.disableExifGps&&f.parseExifTags(e,l,l+n.exif[34853],s,n)}}},f.metaDataParsers.jpeg[65505].push(f.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,i=e.tags,n=e.map;for(t in i)i.hasOwnProperty(t)&&(n[i[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,i={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e],t&&(i[t]=this.getText(t)));return i}});!function(e){"use strict";var n=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,o=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),l=o&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),d=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,a=(o||d)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,i,n,a,s,r;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),i=new ArrayBuffer(t.length),n=new Uint8Array(i),a=0;a<t.length;a+=1)n[a]=t.charCodeAt(a);return s=e.split(",")[0].split(":")[1].split(";")[0],o?new Blob([l?n:i],{type:s}):(r=new d,r.append(i),r.getBlob(s))};e.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(e,t,i){i&&n.toDataURL&&a?e(a(this.toDataURL(t,i))):e(this.mozGetAsFile("blob",t))}:n.toDataURL&&a&&(n.toBlob=function(e,t,i){e(a(this.toDataURL(t,i)))})),"function"==typeof define&&define.amd?define(function(){return a}):e.dataURLtoBlob=a}(this);(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(window.jQuery)}})(function(l){"use strict";var n=0;l.ajaxTransport("iframe",function(a){if(a.async){var s=a.initialIframeSrc||"javascript:false;",r,o,t;return{send:function(e,i){r=l('<form style="display:none;"></form>');r.attr("accept-charset",a.formAcceptCharset);t=/\?/.test(a.url)?"&":"?";if(a.type==="DELETE"){a.url=a.url+t+"_method=DELETE";a.type="POST"}else if(a.type==="PUT"){a.url=a.url+t+"_method=PUT";a.type="POST"}else if(a.type==="PATCH"){a.url=a.url+t+"_method=PATCH";a.type="POST"}n+=1;o=l('<iframe src="'+s+'" name="iframe-transport-'+n+'"></iframe>').bind("load",function(){var n,t=l.isArray(a.paramName)?a.paramName:[a.paramName];o.unbind("load").bind("load",function(){var t;try{t=o.contents();if(!t.length||!t[0].firstChild){throw new Error}}catch(e){t=undefined}i(200,"success",{iframe:t});l('<iframe src="'+s+'"></iframe>').appendTo(r);window.setTimeout(function(){r.remove()},0)});r.prop("target",o.prop("name")).prop("action",a.url).prop("method",a.type);if(a.formData){l.each(a.formData,function(e,t){l('<input type="hidden"/>').prop("name",t.name).val(t.value).appendTo(r)})}if(a.fileInput&&a.fileInput.length&&a.type==="POST"){n=a.fileInput.clone();a.fileInput.after(function(e){return n[e]});if(a.paramName){a.fileInput.each(function(e){l(this).prop("name",t[e]||a.paramName)})}r.append(a.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");a.fileInput.removeAttr("form")}r.submit();if(n&&n.length){a.fileInput.each(function(e,t){var i=l(n[e]);l(t).prop("name",i.prop("name")).attr("form",i.attr("form"));i.replaceWith(t)})}});r.append(o).appendTo(document.body)},abort:function(){if(o){o.unbind("load").prop("src",s)}if(r){r.remove()}}}}});l.ajaxSetup({converters:{"iframe text":function(e){return e&&l(e[0].body).text()},"iframe json":function(e){return e&&l.parseJSON(l(e[0].body).text())},"iframe html":function(e){return e&&l(e[0].body).html()},"iframe xml":function(e){var t=e&&e[0];return t&&l.isXMLDoc(t)?t:l.parseXML(t.XMLDocument&&t.XMLDocument.xml||l(t.body).html())},"iframe script":function(e){return e&&l.globalEval(l(e[0].body).text())}}})});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],e)}else{e(window.jQuery)}})(function(_){"use strict";_.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))"+"|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)"+"|(w(eb)?OSBrowser)|(webOS)"+"|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||_('<input type="file">').prop("disabled"));_.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);_.support.xhrFormDataFileUpload=!!window.FormData;_.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function e(i){var n=i==="dragover";return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=e.dataTransfer;if(t&&_.inArray("Files",t.types)!==-1&&this._trigger(i,_.Event(i,{delegatedEvent:e}))!==false){e.preventDefault();if(n){t.dropEffect="copy"}}}}_.widget("blueimp.fileupload",{options:{dropZone:_(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(i,e){i=this.messages[i]||i.toString();if(e){_.each(e,function(e,t){i=i.replace("{"+e+"}",t)})}return i},formData:function(e){return e.serializeArray()},add:function(e,t){if(e.isDefaultPrevented()){return false}if(t.autoUpload||t.autoUpload!==false&&_(this).fileupload("option","autoUpload")){t.process().done(function(){t.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:_.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.loaded=0;this.bitrate=0;this.getBitrate=function(e,t,i){var n=e-this.timestamp;if(!this.bitrate||!i||n>i){this.bitrate=(t-this.loaded)*(1e3/n)*8;this.loaded=t;this.timestamp=e}return this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&_.support.xhrFileUpload||_.support.xhrFormDataFileUpload)},_getFormData:function(e){var i;if(_.type(e.formData)==="function"){return e.formData(e.form)}if(_.isArray(e.formData)){return e.formData}if(_.type(e.formData)==="object"){i=[];_.each(e.formData,function(e,t){i.push({name:e,value:t})});return i}return[]},_getTotal:function(e){var i=0;_.each(e,function(e,t){i+=t.size||1});return i},_initProgressObject:function(e){var t={loaded:0,total:0,bitrate:0};if(e._progress){_.extend(e._progress,t)}else{e._progress=t}},_initResponseObject:function(e){var t;if(e._response){for(t in e._response){if(e._response.hasOwnProperty(t)){delete e._response[t]}}}else{e._response={}}},_onProgress:function(e,t){if(e.lengthComputable){var i=Date.now?Date.now():(new Date).getTime(),n;if(t._time&&t.progressInterval&&i-t._time<t.progressInterval&&e.loaded!==e.total){return}t._time=i;n=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0);this._progress.loaded+=n-t._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,t.bitrateInterval);t._progress.loaded=t.loaded=n;t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(i,n,t.bitrateInterval);this._trigger("progress",_.Event("progress",{delegatedEvent:e}),t);this._trigger("progressall",_.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(i){var n=this,e=i.xhr?i.xhr():_.ajaxSettings.xhr();if(e.upload){_(e.upload).bind("progress",function(e){var t=e.originalEvent;e.lengthComputable=t.lengthComputable;e.loaded=t.loaded;e.total=t.total;n._onProgress(e,i)});i.xhr=function(){return e}}},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(i){var n=this,a,e=i.files[0],t=i.multipart||!_.support.xhrFileUpload,s=_.type(i.paramName)==="array"?i.paramName[0]:i.paramName;i.headers=_.extend({},i.headers);if(i.contentRange){i.headers["Content-Range"]=i.contentRange}if(!t||i.blob||!this._isInstanceOf("File",e)){i.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'}if(!t){i.contentType=e.type||"application/octet-stream";i.data=i.blob||e}else if(_.support.xhrFormDataFileUpload){if(i.postMessage){a=this._getFormData(i);if(i.blob){a.push({name:s,value:i.blob})}else{_.each(i.files,function(e,t){a.push({name:_.type(i.paramName)==="array"&&i.paramName[e]||s,value:t})})}}else{if(n._isInstanceOf("FormData",i.formData)){a=i.formData}else{a=new FormData;_.each(this._getFormData(i),function(e,t){a.append(t.name,t.value)})}if(i.blob){a.append(s,i.blob,e.name)}else{_.each(i.files,function(e,t){if(n._isInstanceOf("File",t)||n._isInstanceOf("Blob",t)){a.append(_.type(i.paramName)==="array"&&i.paramName[e]||s,t,t.uploadName||t.name)}})}}i.data=a}i.blob=null},_initIframeSettings:function(e){var t=_("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||"");e.formData=this._getFormData(e);if(e.redirect&&t&&t!==location.host){e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})}},_initDataSettings:function(e){if(this._isXHRUpload(e)){if(!this._chunkedUpload(e,true)){if(!e.data){this._initXHRData(e)}this._initProgressListener(e)}if(e.postMessage){e.dataType="postmessage "+(e.dataType||"")}}else{this._initIframeSettings(e)}},_getParamName:function(e){var t=_(e.fileInput),n=e.paramName;if(!n){n=[];t.each(function(){var e=_(this),t=e.prop("name")||"files[]",i=(e.prop("files")||[1]).length;while(i){n.push(t);i-=1}});if(!n.length){n=[t.prop("name")||"files[]"]}}else if(!_.isArray(n)){n=[n]}return n},_initFormSettings:function(e){if(!e.form||!e.form.length){e.form=_(e.fileInput.prop("form"));if(!e.form.length){e.form=_(this.options.fileInput.prop("form"))}}e.paramName=this._getParamName(e);if(!e.url){e.url=e.form.prop("action")||location.href}e.type=(e.type||_.type(e.form.prop("method"))==="string"&&e.form.prop("method")||"").toUpperCase();if(e.type!=="POST"&&e.type!=="PUT"&&e.type!=="PATCH"){e.type="POST"}if(!e.formAcceptCharset){e.formAcceptCharset=e.form.attr("accept-charset")}},_getAJAXSettings:function(e){var t=_.extend({},this.options,e);this._initFormSettings(t);this._initDataSettings(t);return t},_getDeferredState:function(e){if(e.state){return e.state()}if(e.isResolved()){return"resolved"}if(e.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(e){e.success=e.done;e.error=e.fail;e.complete=e.always;return e},_getXHRPromise:function(e,t,i){var n=_.Deferred(),a=n.promise();t=t||this.options.context||a;if(e===true){n.resolveWith(t,i)}else if(e===false){n.rejectWith(t,i)}a.abort=n.promise;return this._enhancePromise(a)},_addConvenienceMethods:function(e,i){var n=this,a=function(e){return _.Deferred().resolveWith(n,e).promise()};i.process=function(e,t){if(e||t){i._processQueue=this._processQueue=(this._processQueue||a([this])).pipe(function(){if(i.errorThrown){return _.Deferred().rejectWith(n,[i]).promise()}return a(arguments)}).pipe(e,t)}return this._processQueue||a([this])};i.submit=function(){if(this.state()!=="pending"){i.jqXHR=this.jqXHR=n._trigger("submit",_.Event("submit",{delegatedEvent:e}),this)!==false&&n._onSend(e,this)}return this.jqXHR||n._getXHRPromise()};i.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";n._trigger("fail",null,this);return n._getXHRPromise(false)};i.state=function(){if(this.jqXHR){return n._getDeferredState(this.jqXHR)}if(this._processQueue){return n._getDeferredState(this._processQueue)}};i.processing=function(){return!this.jqXHR&&this._processQueue&&n._getDeferredState(this._processQueue)==="pending"};i.progress=function(){return this._progress};i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(s,e){s.uploadedBytes=s.uploadedBytes||0;var r=this,t=s.files[0],o=t.size,l=s.uploadedBytes,i=s.maxChunkSize||o,d=this._blobSlice,u=_.Deferred(),n=u.promise(),c,h;if(!(this._isXHRUpload(s)&&d&&(l||i<o))||s.data){return false}if(e){return true}if(l>=o){t.error=s.i18n("uploadedBytes");return this._getXHRPromise(false,s.context,[null,"error",t.error])}h=function(){var n=_.extend({},s),a=n._progress.loaded;n.blob=d.call(t,l,l+i,t.type);n.chunkSize=n.blob.size;n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+o;r._initXHRData(n);r._initProgressListener(n);c=(r._trigger("chunksend",null,n)!==false&&_.ajax(n)||r._getXHRPromise(false,n.context)).done(function(e,t,i){l=r._getUploadedBytes(i)||l+n.chunkSize;if(a+n.chunkSize-n._progress.loaded){r._onProgress(_.Event("progress",{lengthComputable:true,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n)}s.uploadedBytes=n.uploadedBytes=l;n.result=e;n.textStatus=t;n.jqXHR=i;r._trigger("chunkdone",null,n);r._trigger("chunkalways",null,n);if(l<o){h()}else{u.resolveWith(n.context,[e,t,i])}}).fail(function(e,t,i){n.jqXHR=e;n.textStatus=t;n.errorThrown=i;r._trigger("chunkfail",null,n);r._trigger("chunkalways",null,n);u.rejectWith(n.context,[e,t,i])})};this._enhancePromise(n);n.abort=function(){return c.abort()};h();return n},_beforeSend:function(e,t){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer;this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(t);this._initProgressObject(t);t._progress.loaded=t.loaded=t.uploadedBytes||0;t._progress.total=t.total=this._getTotal(t.files)||1;t._progress.bitrate=t.bitrate=0;this._active+=1;this._progress.loaded+=t.loaded;this._progress.total+=t.total},_onDone:function(e,t,i,n){var a=n._progress.total,s=n._response;if(n._progress.loaded<a){this._onProgress(_.Event("progress",{lengthComputable:true,loaded:a,total:a}),n)}s.result=n.result=e;s.textStatus=n.textStatus=t;s.jqXHR=n.jqXHR=i;this._trigger("done",null,n)},_onFail:function(e,t,i,n){var a=n._response;if(n.recalculateProgress){this._progress.loaded-=n._progress.loaded;this._progress.total-=n._progress.total}a.jqXHR=n.jqXHR=e;a.textStatus=n.textStatus=t;a.errorThrown=n.errorThrown=i;this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(e,t){if(!t.submit){this._addConvenienceMethods(e,t)}var a=this,i,n,s,r,o=a._getAJAXSettings(t),l=function(){a._sending+=1;o._bitrateTimer=new a._BitrateTimer;i=i||((n||a._trigger("send",_.Event("send",{delegatedEvent:e}),o)===false)&&a._getXHRPromise(false,o.context,n)||a._chunkedUpload(o)||_.ajax(o)).done(function(e,t,i){a._onDone(e,t,i,o)}).fail(function(e,t,i){a._onFail(e,t,i,o)}).always(function(e,t,i){a._onAlways(e,t,i,o);a._sending-=1;a._active-=1;if(o.limitConcurrentUploads&&o.limitConcurrentUploads>a._sending){var n=a._slots.shift();while(n){if(a._getDeferredState(n)==="pending"){n.resolve();break}n=a._slots.shift()}}if(a._active===0){a._trigger("stop")}});return i};this._beforeSend(e,o);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(this.options.limitConcurrentUploads>1){s=_.Deferred();this._slots.push(s);r=s.pipe(l)}else{this._sequence=this._sequence.pipe(l,l);r=this._sequence}r.abort=function(){n=[undefined,"abort","abort"];if(!i){if(s){s.rejectWith(o.context,n)}return l()}return i.abort()};return this._enhancePromise(r)}return l()},_onAdd:function(n,a){var s=this,r=true,e=_.extend({},this.options,a),t=a.files,i=t.length,o=e.limitMultiFileUploads,l=e.limitMultiFileUploadSize,d=e.limitMultiFileUploadSizeOverhead,u=0,c=this._getParamName(e),h,f,p,m,g=0;if(l&&(!i||t[0].size===undefined)){l=undefined}if(!(e.singleFileUploads||o||l)||!this._isXHRUpload(e)){p=[t];h=[c]}else if(!(e.singleFileUploads||l)&&o){p=[];h=[];for(m=0;m<i;m+=o){p.push(t.slice(m,m+o));f=c.slice(m,m+o);if(!f.length){f=c}h.push(f)}}else if(!e.singleFileUploads&&l){p=[];h=[];for(m=0;m<i;m=m+1){u+=t[m].size+d;if(m+1===i||u+t[m+1].size+d>l||o&&m+1-g>=o){p.push(t.slice(g,m+1));f=c.slice(g,m+1);if(!f.length){f=c}h.push(f);g=m+1;u=0}}}else{h=c}a.originalFiles=t;_.each(p||t,function(e,t){var i=_.extend({},a);i.files=p?t:[t];i.paramName=h[e];s._initResponseObject(i);s._initProgressObject(i);s._addConvenienceMethods(n,i);r=s._trigger("add",_.Event("add",{delegatedEvent:n}),i);return r});return r},_replaceFileInput:function(e){var i=e.fileInput,n=i.clone(true);e.fileInputClone=n;_("<form></form>").append(n)[0].reset();i.after(n).detach();_.cleanData(i.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(e,t){if(t===i[0]){return n[0]}return t});if(i[0]===this.element[0]){this.element=n}},_handleFileTreeEntry:function(t,i){var n=this,a=_.Deferred(),s=function(e){if(e&&!e.entry){e.entry=t}a.resolve([e])},r=function(e){n._handleFileTreeEntries(e,i+t.name+"/").done(function(e){a.resolve(e)}).fail(s)},o=function(){e.readEntries(function(e){if(!e.length){r(l)}else{l=l.concat(e);o()}},s)},e,l=[];i=i||"";if(t.isFile){if(t._file){t._file.relativePath=i;a.resolve(t._file)}else{t.file(function(e){e.relativePath=i;a.resolve(e)},s)}}else if(t.isDirectory){e=t.createReader();o()}else{a.resolve([])}return a.promise()},_handleFileTreeEntries:function(e,t){var i=this;return _.when.apply(_,_.map(e,function(e){return i._handleFileTreeEntry(e,t)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var t=e.items;if(t&&t.length&&(t[0].webkitGetAsEntry||t[0].getAsEntry)){return this._handleFileTreeEntries(_.map(t,function(e){var t;if(e.webkitGetAsEntry){t=e.webkitGetAsEntry();if(t){t._file=e.getAsFile()}return t}return e.getAsEntry()}))}return _.Deferred().resolve(_.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=_(e);var t=e.prop("webkitEntries")||e.prop("entries"),i,n;if(t&&t.length){return this._handleFileTreeEntries(t)}i=_.makeArray(e.prop("files"));if(!i.length){n=e.prop("value");if(!n){return _.Deferred().resolve([]).promise()}i=[{name:n.replace(/^.*\\/,"")}]}else if(i[0].name===undefined&&i[0].fileName){_.each(i,function(e,t){t.name=t.fileName;t.size=t.fileSize})}return _.Deferred().resolve(i).promise()},_getFileInputFiles:function(e){if(!(e instanceof _)||e.length===1){return this._getSingleFileInputFiles(e)}return _.when.apply(_,_.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(t){var i=this,n={fileInput:_(t.target),form:_(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(e){n.files=e;if(i.options.replaceFileInput){i._replaceFileInput(n)}if(i._trigger("change",_.Event("change",{delegatedEvent:t}),n)!==false){i._onAdd(t,n)}})},_onPaste:function(e){var t=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,n={files:[]};if(t&&t.length){_.each(t,function(e,t){var i=t.getAsFile&&t.getAsFile();if(i){n.files.push(i)}});if(this._trigger("paste",_.Event("paste",{delegatedEvent:e}),n)!==false){this._onAdd(e,n)}}},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,e=t.dataTransfer,n={};if(e&&e.files&&e.files.length){t.preventDefault();if(t.type==="drop"&&window.checkIfUserExceedsStorageLimits&&window.checkIfUserExceedsStorageLimits()){return null}this._getDroppedFiles(e).always(function(e){n.files=e;if(i._trigger("drop",_.Event("drop",{delegatedEvent:t}),n)!==false){i._onAdd(t,n)}})}},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave});this._on(this.options.pasteZone,{paste:this._onPaste})}if(_.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(e,t){var i=_.inArray(e,this._specialOptions)!==-1;if(i){this._destroyEventHandlers()}this._super(e,t);if(i){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var e=this.options;if(e.fileInput===undefined){e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else if(!(e.fileInput instanceof _)){e.fileInput=_(e.fileInput)}if(!(e.dropZone instanceof _)){e.dropZone=_(e.dropZone)}if(!(e.pasteZone instanceof _)){e.pasteZone=_(e.pasteZone)}},_getRegExp:function(e){var t=e.split("/"),i=t.pop();t.shift();return new RegExp(t.join("/"),i)},_isRegExpOption:function(e,t){return e!=="url"&&_.type(t)==="string"&&/^\/.*\/[igm]{0,3}$/.test(t)},_initDataAttributes:function(){var n=this,a=this.options,s=_(this.element[0].cloneNode(false));_.each(s.data(),function(e,t){var i="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(s.attr(i)){if(n._isRegExpOption(e,t)){t=n._getRegExp(t)}a[e]=t}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;if(!t||this.options.disabled){return}if(t.fileInput&&!t.files){this._getFileInputFiles(t.fileInput).always(function(e){t.files=e;i._onAdd(null,t)})}else{t.files=_.makeArray(t.files);this._onAdd(null,t)}},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i=this,n=_.Deferred(),e=n.promise(),a,s;e.abort=function(){s=true;if(a){return a.abort()}n.reject(null,"abort","abort");return e};this._getFileInputFiles(t.fileInput).always(function(e){if(s){return}if(!e.length){n.reject();return}t.files=e;a=i._onSend(null,t);a.then(function(e,t,i){n.resolve(e,t,i)},function(e,t,i){n.reject(e,t,i)})});return this._enhancePromise(e)}t.files=_.makeArray(t.files);if(t.files.length){return this._onSend(null,t)}}return this._getXHRPromise(false,t&&t.context)}})});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],e)}else{e(window.jQuery)}})(function(r){"use strict";var n=r.blueimp.fileupload.prototype.options.add;r.widget("blueimp.fileupload",r.blueimp.fileupload,{options:{processQueue:[],add:function(e,t){var i=r(this);t.process(function(){return i.fileupload("process",t)});n.call(this,e,t)}},processActions:{},_processFile:function(e,n){var a=this,t=r.Deferred().resolveWith(a,[e]),s=t.promise();this._trigger("process",null,e);r.each(e.processQueue,function(e,t){var i=function(e){if(n.errorThrown){return r.Deferred().rejectWith(a,[n]).promise()}return a.processActions[t.action].call(a,e,t)};s=s.pipe(i,t.always&&i)});s.done(function(){a._trigger("processdone",null,e);a._trigger("processalways",null,e)}).fail(function(){a._trigger("processfail",null,e);a._trigger("processalways",null,e)});return s},_transformProcessQueue:function(a){var t=[];r.each(a.processQueue,function(){var i={},e=this.action,n=this.prefix===true?e:this.prefix;r.each(this,function(e,t){if(r.type(t)==="string"&&t.charAt(0)==="@"){i[e]=a[t.slice(1)||(n?n+e.charAt(0).toUpperCase()+e.slice(1):e)]}else{i[e]=t}});t.push(i)});a.processQueue=t},processing:function(){return this._processing},process:function(n){var a=this,s=r.extend({},this.options,n);if(s.processQueue&&s.processQueue.length){this._transformProcessQueue(s);if(this._processing===0){this._trigger("processstart")}r.each(n.files,function(e){var t=e?r.extend({},s):s,i=function(){if(n.errorThrown){return r.Deferred().rejectWith(a,[n]).promise()}return a._processFile(t,n)};t.index=e;a._processing+=1;a._processingQueue=a._processingQueue.pipe(i,i).always(function(){a._processing-=1;if(a._processing===0){a._trigger("processstop")}})})}return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=r.Deferred().resolveWith(this).promise()}})});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],e)}else{e(window.jQuery,window.loadImage)}})(function(o,l){"use strict";o.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:true,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"});o.widget("blueimp.fileupload",o.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:false,imageCrop:false,disableImageResize:true,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:true,previewThumbnail:true,previewCrop:false,previewCanvas:true},processActions:{loadImage:function(t,e){if(e.disabled){return t}var i=this,n=t.files[t.index],a=o.Deferred();if(o.type(e.maxFileSize)==="number"&&n.size>e.maxFileSize||e.fileTypes&&!e.fileTypes.test(n.type)||!l(n,function(e){if(e.src){t.img=e}a.resolveWith(i,[t])},e)){return t}return a.promise()},resizeImage:function(t,i){if(i.disabled||!(t.canvas||t.img)){return t}i=o.extend({canvas:true},i);var n=this,a=o.Deferred(),s=i.canvas&&t.canvas||t.img,e=function(e){if(e&&(e.width!==s.width||e.height!==s.height||i.forceResize)){t[e.getContext?"canvas":"img"]=e}t.preview=e;a.resolveWith(n,[t])},r;if(t.exif){if(i.orientation===true){i.orientation=t.exif.get("Orientation")}if(i.thumbnail){r=t.exif.get("Thumbnail");if(r){l(r,e,i);return a.promise()}}if(t.orientation){delete i.orientation}else{t.orientation=i.orientation}}if(s){e(l.scale(s,i));return a.promise()}return t},saveImage:function(t,e){if(!t.canvas||e.disabled){return t}var i=this,n=t.files[t.index],a=o.Deferred();if(t.canvas.toBlob){t.canvas.toBlob(function(e){if(!e.name){if(n.type===e.type){e.name=n.name}else if(n.name){e.name=n.name.replace(/\..+$/,"."+e.type.substr(6))}}if(n.type!==e.type){delete t.imageHead}t.files[t.index]=e;a.resolveWith(i,[t])},e.type||n.type,e.quality)}else{return t}return a.promise()},loadImageMetaData:function(t,e){if(e.disabled){return t}var i=this,n=o.Deferred();l.parseMetaData(t.files[t.index],function(e){o.extend(t,e);n.resolveWith(i,[t])},e);return n.promise()},saveImageMetaData:function(e,t){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob&&!t.disabled)){return e}var i=e.files[e.index],n=new Blob([e.imageHead,this._blobSlice.call(i,20)],{type:i.type});n.name=i.name;e.files[e.index]=n;return e},setImage:function(e,t){if(e.preview&&!t.disabled){e.files[e.index][t.name||"preview"]=e.preview}return e},deleteImageReferences:function(e,t){if(!t.disabled){delete e.img;delete e.canvas;delete e.preview;delete e.imageHead}return e}}})});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload-process"],e)}else{e(window.jQuery)}})(function(r){"use strict";r.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:true,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});r.widget("blueimp.fileupload",r.blueimp.fileupload,{options:{getNumberOfFiles:r.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(e,t){if(t.disabled){return e}var i=r.Deferred(),n=this.options,a=e.files[e.index],s;if(t.minFileSize||t.maxFileSize){s=a.size}if(r.type(t.maxNumberOfFiles)==="number"&&(n.getNumberOfFiles()||0)+e.files.length>t.maxNumberOfFiles){a.error=n.i18n("maxNumberOfFiles")}else if(t.acceptFileTypes&&!(t.acceptFileTypes.test(a.type)||t.acceptFileTypes.test(a.name))){a.error=n.i18n("acceptFileTypes")}else if(s>t.maxFileSize){a.error=n.i18n("maxFileSize")}else if(r.type(s)==="number"&&s<t.minFileSize){a.error=n.i18n("minFileSize")}else{delete a.error}if(a.error||e.files.error){e.files.error=true;i.rejectWith(this,[e])}else{i.resolveWith(this,[e])}return i.promise()}}})});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],e)}else{e(window.jQuery,window.tmpl)}})(function(l,t){"use strict";l.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");l.widget("blueimp.fileupload",l.blueimp.fileupload,{options:{autoUpload:false,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:false,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(e){if(e.result&&l.isArray(e.result.files)){return e.result.files}return[]},add:function(e,i){if(e.isDefaultPrevented()){return false}var t=l(this),n=t.data("blueimp-fileupload")||t.data("fileupload"),a=n.options;i.context=n._renderUpload(i.files).data("data",i).addClass("processing");a.filesContainer[a.prependFiles?"prepend":"append"](i.context);n._forceReflow(i.context);n._transition(i.context);i.process(function(){return t.fileupload("process",i)}).always(function(){i.context.each(function(e){l(this).find(".size").text(n._formatFileSize(i.files[e].size))}).removeClass("processing");n._renderPreviews(i)}).done(function(){i.context.find(".start").prop("disabled",false);if(n._trigger("added",e,i)!==false&&(a.autoUpload||i.autoUpload)&&i.autoUpload!==false){i.submit()}}).fail(function(){if(i.files.error){i.context.each(function(e){var t=i.files[e].error;if(t){l(this).find(".error").text(t)}})}})},send:function(e,t){if(e.isDefaultPrevented()){return false}var i=l(this).data("blueimp-fileupload")||l(this).data("fileupload");if(t.context&&t.dataType&&t.dataType.substr(0,6)==="iframe"){t.context.find(".progress").addClass(!l.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%")}return i._trigger("sent",e,t)},done:function(i,n){if(i.isDefaultPrevented()){return false}var a=l(this).data("blueimp-fileupload")||l(this).data("fileupload"),e=n.getFilesFromResponse||a.options.getFilesFromResponse,s=e(n),r,o;if(n.context){n.context.each(function(e){var t=s[e]||{error:"Empty file upload result"};o=a._addFinishedDeferreds();a._transition(l(this)).done(function(){var e=l(this);r=a._renderDownload([t]).replaceAll(e);a._forceReflow(r);a._transition(r).done(function(){n.context=l(this);a._trigger("completed",i,n);a._trigger("finished",i,n);o.resolve()})})})}else{r=a._renderDownload(s)[a.options.prependFiles?"prependTo":"appendTo"](a.options.filesContainer);a._forceReflow(r);o=a._addFinishedDeferreds();a._transition(r).done(function(){n.context=l(this);a._trigger("completed",i,n);a._trigger("finished",i,n);o.resolve()})}},fail:function(i,n){if(i.isDefaultPrevented()){return false}var a=l(this).data("blueimp-fileupload")||l(this).data("fileupload"),s,r;if(n.context){n.context.each(function(e){if(n.errorThrown!=="abort"){var t=n.files[e];t.error=t.error||n.errorThrown||n.i18n("unknownError");r=a._addFinishedDeferreds();a._transition(l(this)).done(function(){var e=l(this);s=a._renderDownload([t]).replaceAll(e);a._forceReflow(s);a._transition(s).done(function(){n.context=l(this);a._trigger("failed",i,n);a._trigger("finished",i,n);r.resolve()})})}else{r=a._addFinishedDeferreds();a._transition(l(this)).done(function(){l(this).remove();a._trigger("failed",i,n);a._trigger("finished",i,n);r.resolve()})}})}else if(n.errorThrown!=="abort"){n.context=a._renderUpload(n.files)[a.options.prependFiles?"prependTo":"appendTo"](a.options.filesContainer).data("data",n);a._forceReflow(n.context);r=a._addFinishedDeferreds();a._transition(n.context).done(function(){n.context=l(this);a._trigger("failed",i,n);a._trigger("finished",i,n);r.resolve()})}else{a._trigger("failed",i,n);a._trigger("finished",i,n);a._addFinishedDeferreds().resolve()}},progress:function(e,t){if(e.isDefaultPrevented()){return false}var i=Math.floor(t.loaded/t.total*100);if(t.context){t.context.each(function(){l(this).find(".progress").attr("aria-valuenow",i).children().first().css("width",i+"%")})}},progressall:function(e,t){if(e.isDefaultPrevented()){return false}var i=l(this),n=Math.floor(t.loaded/t.total*100),a=i.find(".fileupload-progress"),s=a.find(".progress-extended");if(s.length){s.html((i.data("blueimp-fileupload")||i.data("fileupload"))._renderExtendedProgress(t))}a.find(".progress").attr("aria-valuenow",n).children().first().css("width",n+"%")},start:function(e){if(e.isDefaultPrevented()){return false}var t=l(this).data("blueimp-fileupload")||l(this).data("fileupload");t._resetFinishedDeferreds();t._transition(l(this).find(".fileupload-progress")).done(function(){t._trigger("started",e)})},stop:function(e){if(e.isDefaultPrevented()){return false}var t=l(this).data("blueimp-fileupload")||l(this).data("fileupload"),i=t._addFinishedDeferreds();l.when.apply(l,t._getFinishedDeferreds()).done(function(){t._trigger("stopped",e)});t._transition(l(this).find(".fileupload-progress")).done(function(){l(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");l(this).find(".progress-extended").html("&nbsp;");i.resolve()})},processstart:function(e){if(e.isDefaultPrevented()){return false}l(this).addClass("fileupload-processing")},processstop:function(e){if(e.isDefaultPrevented()){return false}l(this).removeClass("fileupload-processing")},destroy:function(e,t){if(e.isDefaultPrevented()){return false}var i=l(this).data("blueimp-fileupload")||l(this).data("fileupload"),n=function(){i._transition(t.context).done(function(){l(this).remove();i._trigger("destroyed",e,t)})};if(t.url){t.dataType=t.dataType||i.options.dataType;l.ajax(t).done(n).fail(function(){i._trigger("destroyfailed",e,t)})}else{n()}}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(e){if(!e){e=l.Deferred()}this._finishedUploads.push(e);return e},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var e=l(this),t=e.prop("href"),i=e.prop("download"),n="application/octet-stream";e.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[n,i,t].join(":"))}catch(e){}})},_formatFileSize:function(e){if(typeof e!=="number"){return""}if(e>=1e9){return(e/1e9).toFixed(2)+" GB"}if(e>=1e6){return(e/1e6).toFixed(2)+" MB"}return(e/1e3).toFixed(2)+" KB"},_formatBitrate:function(e){if(typeof e!=="number"){return""}if(e>=1e9){return(e/1e9).toFixed(2)+" Gbit/s"}if(e>=1e6){return(e/1e6).toFixed(2)+" Mbit/s"}if(e>=1e3){return(e/1e3).toFixed(2)+" kbit/s"}return e.toFixed(2)+" bit/s"},_formatTime:function(e){var t=new Date(e*1e3),i=Math.floor(e/86400);i=i?i+"d ":"";return i+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)},_formatPercentage:function(e){return(e*100).toFixed(2)+" %"},_renderExtendedProgress:function(e){return this._formatBitrate(e.bitrate)+" | "+this._formatTime((e.total-e.loaded)*8/e.bitrate)+" | "+this._formatPercentage(e.loaded/e.total)+" | "+this._formatFileSize(e.loaded)+" / "+this._formatFileSize(e.total)},_renderTemplate:function(e,t){if(!e){return l()}var i=e({files:t,formatFileSize:this._formatFileSize,options:this.options});if(i instanceof l){return i}return l(this.options.templatesContainer).html(i).children()},_renderPreviews:function(i){i.context.find(".preview").each(function(e,t){l(t).append(i.files[e].preview)})},_renderUpload:function(e){return this._renderTemplate(this.options.uploadTemplate,e)},_renderDownload:function(e){return this._renderTemplate(this.options.downloadTemplate,e).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(e){e.preventDefault();var t=l(e.currentTarget),i=t.closest(".template-upload"),n=i.data("data");t.prop("disabled",true);if(n&&n.submit){n.submit()}},_cancelHandler:function(e){e.preventDefault();var t=l(e.currentTarget).closest(".template-upload,.template-download"),i=t.data("data")||{};i.context=i.context||t;if(i.abort){i.abort()}else{i.errorThrown="abort";this._trigger("fail",e,i)}},_deleteHandler:function(e){e.preventDefault();var t=l(e.currentTarget);this._trigger("destroy",e,l.extend({context:t.closest(".template-download"),type:"DELETE"},t.data()))},_forceReflow:function(e){return l.support.transition&&e.length&&e[0].offsetWidth},_transition:function(t){var i=l.Deferred();if(l.support.transition&&t.hasClass("fade")&&t.is(":visible")){t.bind(l.support.transition.end,function(e){if(e.target===t[0]){t.unbind(l.support.transition.end);i.resolveWith(t)}}).toggleClass("in")}else{t.toggleClass("in");i.resolveWith(t)}return i},_initButtonBarEventHandlers:function(){var t=this.element.find(".fileupload-buttonbar"),i=this.options.filesContainer;this._on(t.find(".start"),{click:function(e){e.preventDefault();i.find(".start").click()}});this._on(t.find(".cancel"),{click:function(e){e.preventDefault();i.find(".cancel").click()}});this._on(t.find(".delete"),{click:function(e){e.preventDefault();i.find(".toggle:checked").closest(".template-download").find(".delete").click();t.find(".toggle").prop("checked",false)}});this._on(t.find(".toggle"),{change:function(e){i.find(".toggle").prop("checked",l(e.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",true).parent().addClass("disabled")},_initTemplates:function(){var e=this.options;e.templatesContainer=this.document[0].createElement(e.filesContainer.prop("nodeName"));if(t){if(e.uploadTemplateId){e.uploadTemplate=t(e.uploadTemplateId)}if(e.downloadTemplateId){e.downloadTemplate=t(e.downloadTemplateId)}}},_initFilesContainer:function(){var e=this.options;if(e.filesContainer===undefined){e.filesContainer=this.element.find(".files")}else if(!(e.filesContainer instanceof l)){e.filesContainer=l(e.filesContainer)}},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();if(!l.support.fileInput){this._disableFileInputButton()}},enable:function(){var e=false;if(this.options.disabled){e=true}this._super();if(e){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton()}this._super()}})});LIVEVALIDATION={};LIVEVALIDATION.wrongLengthMessage=gclang&&gclang.js.wrongLengthMessage||"Must be __A1_ characters long!";LIVEVALIDATION.tooShortMessage=gclang&&gclang.js.tooShortMessage||"Must not be less than __A1_ characters long!";LIVEVALIDATION.tooLongMessage=gclang&&gclang.js.tooLongMessage||"Must not be more than __A1_ characters long!";LIVEVALIDATION.invalidEmail=gclang&&gclang.js.invalidEmail||"Must be a valid email address!";LIVEVALIDATION.notValid=gclang&&gclang.js.notValid||"Not valid!";LIVEVALIDATION.notEmpty=gclang&&gclang.js.notEmpty||"Can't be empty!";LIVEVALIDATION.inTheList=gclang&&gclang.js.inTheList||"Must be included in the list!";LIVEVALIDATION.notInTheList=gclang&&gclang.js.notInTheList||"Must not be included in the list!";LIVEVALIDATION.notMatch=gclang&&gclang.js.notMatch||"Does not match!";LIVEVALIDATION.mustAccepted=gclang&&gclang.js.mustAccepted||"Must be accepted!";LIVEVALIDATION.notANumberMessage=gclang&&gclang.js.notANumberMessage||"Must be a number!";LIVEVALIDATION.notAnIntegerMessage=gclang&&gclang.js.notAnIntegerMessage||"Must be an integer!";LIVEVALIDATION.wrongNumberMessage=gclang&&gclang.js.wrongNumberMessage||"Must be __A1_!";LIVEVALIDATION.tooLowMessage=gclang&&gclang.js.tooLowMessage||"Must not be less than __A1_!";LIVEVALIDATION.tooHighMessage=gclang&&gclang.js.tooHighMessage||"Must not be more than __A1_!";var LiveValidation=function(e,t){this.initialize(e,t)};LiveValidation.VERSION="1.3 standalone";LiveValidation.TEXTAREA=1;LiveValidation.TEXT=2;LiveValidation.PASSWORD=3;LiveValidation.CHECKBOX=4;LiveValidation.SELECT=5;LiveValidation.FILE=6;LiveValidation.massValidate=function(e){var t=true;for(var i=0,n=e.length;i<n;++i){var a=e[i].validate();if(t)t=a}return t};LiveValidation.prototype={validClass:"LV_valid",invalidClass:"LV_invalid",messageClass:"LV_validation_message",validFieldClass:"LV_valid_field",invalidFieldClass:"LV_invalid_field",initialize:function(e,t){var i=this;if(!e)throw new Error("LiveValidation::initialize - No element reference or element id has been provided!");this.element=e.nodeName?e:document.getElementById(e);if(!this.element)throw new Error("LiveValidation::initialize - No element with reference or id of '"+e+"' exists!");this.validations=[];this.elementType=this.getElementType();this.form=this.element.form;var n=t||{};this.validMessage=n.validMessage||"";var a=n.insertAfterWhatNode||this.element;this.insertAfterWhatNode=a.nodeType?a:document.getElementById(a);this.onValid=n.onValid||function(){this.insertMessage(this.createMessageSpan());this.addFieldClass()};this.onInvalid=n.onInvalid||function(){this.insertMessage(this.createMessageSpan());this.addFieldClass()};this.onlyOnBlur=n.onlyOnBlur||false;this.wait=n.wait||0;this.onlyOnSubmit=n.onlyOnSubmit||false;if(this.form){this.formObj=LiveValidationForm.getInstance(this.form);this.formObj.addField(this)}this.oldOnFocus=this.element.onfocus||function(){};this.oldOnBlur=this.element.onblur||function(){};this.oldOnClick=this.element.onclick||function(){};this.oldOnChange=this.element.onchange||function(){};this.oldOnKeyup=this.element.onkeyup||function(){};this.element.onfocus=function(e){i.doOnFocus(e);return i.oldOnFocus.call(this,e)};if(!this.onlyOnSubmit){switch(this.elementType){case LiveValidation.CHECKBOX:this.element.onclick=function(e){i.validate();return i.oldOnClick.call(this,e)};case LiveValidation.SELECT:case LiveValidation.FILE:this.element.onchange=function(e){i.validate();return i.oldOnChange.call(this,e)};break;default:if(!this.onlyOnBlur)this.element.onkeyup=function(e){i.deferValidation();return i.oldOnKeyup.call(this,e)};this.element.onblur=function(e){i.doOnBlur(e);return i.oldOnBlur.call(this,e)}}}},destroy:function(){if(this.formObj){this.formObj.removeField(this);this.formObj.destroy()}this.element.onfocus=this.oldOnFocus;if(!this.onlyOnSubmit){switch(this.elementType){case LiveValidation.CHECKBOX:this.element.onclick=this.oldOnClick;case LiveValidation.SELECT:case LiveValidation.FILE:this.element.onchange=this.oldOnChange;break;default:if(!this.onlyOnBlur)this.element.onkeyup=this.oldOnKeyup;this.element.onblur=this.oldOnBlur}}this.validations=[];this.removeMessageAndFieldClass()},add:function(e,t){this.validations.push({type:e,params:t||{}});return this},remove:function(e,t){var i=false;for(var n=0,a=this.validations.length;n<a;n++){if(this.validations[n].type==e){if(this.validations[n].params==t){i=true;break}}}if(i)this.validations.splice(n,1);return this},deferValidation:function(e){if(this.wait>=300)this.removeMessageAndFieldClass();var t=this;if(this.timeout)clearTimeout(t.timeout);this.timeout=setTimeout(function(){t.validate()},t.wait)},doOnBlur:function(e){this.focused=false;this.validate(e)},doOnFocus:function(e){this.focused=true;this.removeMessageAndFieldClass()},getElementType:function(){switch(true){case this.element.nodeName.toUpperCase()=="TEXTAREA":return LiveValidation.TEXTAREA;case this.element.nodeName.toUpperCase()=="INPUT"&&this.element.type.toUpperCase()=="TEXT":return LiveValidation.TEXT;case this.element.nodeName.toUpperCase()=="INPUT"&&this.element.type.toUpperCase()=="PASSWORD":return LiveValidation.PASSWORD;case this.element.nodeName.toUpperCase()=="INPUT"&&this.element.type.toUpperCase()=="CHECKBOX":return LiveValidation.CHECKBOX;case this.element.nodeName.toUpperCase()=="INPUT"&&this.element.type.toUpperCase()=="FILE":return LiveValidation.FILE;case this.element.nodeName.toUpperCase()=="SELECT":return LiveValidation.SELECT;case this.element.nodeName.toUpperCase()=="INPUT":throw new Error("LiveValidation::getElementType - Cannot use LiveValidation on an "+this.element.type+" input!");default:throw new Error("LiveValidation::getElementType - Element must be an input, select, or textarea!")}},doValidations:function(){this.validationFailed=false;for(var e=0,t=this.validations.length;e<t;++e){var i=this.validations[e];switch(i.type){case Validate.Presence:case Validate.Confirmation:case Validate.Acceptance:this.displayMessageWhenEmpty=true;this.validationFailed=!this.validateElement(i.type,i.params);break;default:this.validationFailed=!this.validateElement(i.type,i.params);break}if(this.validationFailed)return false}this.message=this.validMessage;return true},validateElement:function(e,t){var i=this.elementType==LiveValidation.SELECT?this.element.options[this.element.selectedIndex].value:this.element.value;if(e==Validate.Acceptance){if(this.elementType!=LiveValidation.CHECKBOX)throw new Error("LiveValidation::validateElement - Element to validate acceptance must be a checkbox!");i=this.element.checked}var n=true;try{e(i,t)}catch(e){if(e instanceof Validate.Error){if(i!==""||i===""&&this.displayMessageWhenEmpty){this.validationFailed=true;this.message=e.message;n=false}}else{throw e}}finally{return n}},validate:function(){if(!this.element.disabled){var e=this.doValidations();if(e){this.onValid(this,this.message);return true}else{this.onInvalid(this,this.message);return false}}else{return true}},enable:function(){this.element.disabled=false;return this},disable:function(){this.element.disabled=true;this.removeMessageAndFieldClass();return this},createMessageSpan:function(){var e=document.createElement("span");var t=document.createTextNode(this.message);e.appendChild(t);return e},insertMessage:function(e){this.removeMessage();if(this.displayMessageWhenEmpty&&(this.elementType==LiveValidation.CHECKBOX||this.element.value=="")||this.element.value!=""){var t=this.validationFailed?this.invalidClass:this.validClass;e.className+=" "+this.messageClass+" "+t;if(this.insertAfterWhatNode.nextSibling){this.insertAfterWhatNode.parentNode.insertBefore(e,this.insertAfterWhatNode.nextSibling)}else{this.insertAfterWhatNode.parentNode.appendChild(e)}}},addFieldClass:function(){this.removeFieldClass();if(!this.validationFailed){if(this.displayMessageWhenEmpty||this.element.value!=""){if(this.element.className.indexOf(this.validFieldClass)==-1)this.element.className+=" "+this.validFieldClass}}else{if(this.element.className.indexOf(this.invalidFieldClass)==-1)this.element.className+=" "+this.invalidFieldClass}},removeMessage:function(){var e;var t=this.insertAfterWhatNode;while(t.nextSibling){if(t.nextSibling.nodeType===1){e=t.nextSibling;break}t=t.nextSibling}if(e&&e.className.indexOf(this.messageClass)!=-1)this.insertAfterWhatNode.parentNode.removeChild(e)},removeFieldClass:function(){if(this.element.className.indexOf(this.invalidFieldClass)!=-1)this.element.className=this.element.className.split(this.invalidFieldClass).join("");if(this.element.className.indexOf(this.validFieldClass)!=-1)this.element.className=this.element.className.split(this.validFieldClass).join(" ")},removeMessageAndFieldClass:function(){this.removeMessage();this.removeFieldClass()}};var LiveValidationForm=function(e){this.initialize(e)};LiveValidationForm.instances={};LiveValidationForm.getInstance=function(e){var t=Math.random()*Math.random();if(!e.id)e.id="formId_"+t.toString().replace(/\./,"")+(new Date).valueOf();if(!LiveValidationForm.instances[e.id])LiveValidationForm.instances[e.id]=new LiveValidationForm(e);return LiveValidationForm.instances[e.id]};LiveValidationForm.prototype={initialize:function(e){this.name=e.id;this.element=e;this.fields=[];this.oldOnSubmit=this.element.onsubmit||function(){};var t=this;this.element.onsubmit=function(e){return LiveValidation.massValidate(t.fields)?t.oldOnSubmit.call(this,e||window.event)!==false:false}},addField:function(e){this.fields.push(e)},removeField:function(e){var t=[];for(var i=0,n=this.fields.length;i<n;i++){if(this.fields[i]!==e)t.push(this.fields[i])}this.fields=t},destroy:function(e){if(this.fields.length!=0&&!e)return false;this.element.onsubmit=this.oldOnSubmit;LiveValidationForm.instances[this.name]=null;return true}};var Validate={Presence:function(e,t){var t=t||{};var i=t.failureMessage||LIVEVALIDATION.notEmpty;if(e===""||e===null||e===undefined){Validate.fail(i)}return true},Numericality:function(e,t){var i=e;var e=Number(e);var t=t||{};var n=t.minimum||t.minimum==0?t.minimum:null;var a=t.maximum||t.maximum==0?t.maximum:null;var s=t.is||t.is==0?t.is:null;var r=t.notANumberMessage||LIVEVALIDATION.notANumberMessage;var o=t.notAnIntegerMessage||LIVEVALIDATION.notAnIntegerMessage;var l=t.wrongNumberMessage||LIVEVALIDATION.wrongNumberMessage.replace("__A1_",s);var d=t.tooLowMessage||LIVEVALIDATION.tooLowMessage.replace("__A1_",n);var u=t.tooHighMessage||LIVEVALIDATION.tooHighMessage.replace("__A1_",a);if(!isFinite(e))Validate.fail(r);if(t.onlyInteger&&(/\.0+$|\.$/.test(String(i))||e!=parseInt(e)))Validate.fail(o);switch(true){case s!==null:if(e!=Number(s))Validate.fail(l);break;case n!==null&&a!==null:Validate.Numericality(e,{tooLowMessage:d,minimum:n});Validate.Numericality(e,{tooHighMessage:u,maximum:a});break;case n!==null:if(e<Number(n))Validate.fail(d);break;case a!==null:if(e>Number(a))Validate.fail(u);break}return true},Format:function(e,t){var e=String(e);var t=t||{};var i=t.failureMessage||LIVEVALIDATION.notValid;var n=t.pattern||/./;var a=t.negate||false;if(!a&&!n.test(e))Validate.fail(i);if(a&&n.test(e))Validate.fail(i);return true},Email:function(e,t){var t=t||{};var i=t.failureMessage||LIVEVALIDATION.invalidEmail;Validate.Format(e,{failureMessage:i,pattern:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i});return true},Length:function(e,t){var e=String(e);var t=t||{};var i=t.minimum||t.minimum==0?t.minimum:null;var n=t.maximum||t.maximum==0?t.maximum:null;var a=t.is||t.is==0?t.is:null;var s=t.wrongLengthMessage||LIVEVALIDATION.wrongLengthMessage.replace("__A1_",a);var r=t.tooShortMessage||LIVEVALIDATION.tooShortMessage.replace("__A1_",i);var o=t.tooLongMessage||LIVEVALIDATION.tooLongMessage.replace("__A1_",n);switch(true){case a!==null:if(e.length!=Number(a))Validate.fail(s);break;case i!==null&&n!==null:Validate.Length(e,{tooShortMessage:r,minimum:i});Validate.Length(e,{tooLongMessage:o,maximum:n});break;case i!==null:if(e.length<Number(i))Validate.fail(r);break;case n!==null:if(e.length>Number(n))Validate.fail(o);break;default:throw new Error("Validate::Length - Length(s) to validate against must be provided!")}return true},Inclusion:function(e,t){var t=t||{};var i=t.failureMessage||LIVEVALIDATION.inTheList;var n=t.caseSensitive===false?false:true;if(t.allowNull&&e==null)return true;if(!t.allowNull&&e==null)Validate.fail(i);var a=t.within||[];if(!n){var s=[];for(var r=0,o=a.length;r<o;++r){var l=a[r];if(typeof l=="string")l=l.toLowerCase();s.push(l)}a=s;if(typeof e=="string")e=e.toLowerCase()}var d=false;for(var u=0,o=a.length;u<o;++u){if(a[u]==e)d=true;if(t.partialMatch){if(e.indexOf(a[u])!=-1)d=true}}if(!t.negate&&!d||t.negate&&d)Validate.fail(i);return true},Exclusion:function(e,t){var t=t||{};t.failureMessage=t.failureMessage||LIVEVALIDATION.notInTheList;t.negate=true;Validate.Inclusion(e,t);return true},Confirmation:function(e,t){if(!t.match)throw new Error("Validate::Confirmation - Error validating confirmation: Id of element to match must be provided!");var t=t||{};var i=t.failureMessage||LIVEVALIDATION.notMatch;var n=t.match.nodeName?t.match:document.getElementById(t.match);if(!n)throw new Error("Validate::Confirmation - There is no reference with name of, or element with id of '"+t.match+"'!");if(e!=n.value){Validate.fail(i)}return true},Acceptance:function(e,t){var t=t||{};var i=t.failureMessage||LIVEVALIDATION.mustAccepted;if(!e){Validate.fail(i)}return true},Custom:function(e,t){var t=t||{};var i=t.against||function(){return true};var n=t.args||{};var a=t.failureMessage||LIVEVALIDATION.notValid;if(!i(e,n))Validate.fail(a);return true},now:function(e,t,i){if(!e)throw new Error("Validate::now - Validation function must be provided!");var n=true;try{e(t,i||{})}catch(e){if(e instanceof Validate.Error){n=false}else{throw e}}finally{return n}},fail:function(e){throw new Validate.Error(e)},Error:function(e){this.message=e;this.name="ValidationError"}};!function(r){var o={attr:function(e,t,i){var n,a={},s=new RegExp("^"+t,"i");if("undefined"===typeof e||"undefined"===typeof e[0])return{};for(var r in e[0].attributes){n=e[0].attributes[r];if("undefined"!==typeof n&&null!==n&&n.specified&&s.test(n.name)){if("undefined"!==typeof i&&new RegExp(i+"$","i").test(n.name))return true;a[this.camelize(n.name.replace(t,""))]=this.deserializeValue(n.value)}}return"undefined"===typeof i?a:false},setAttr:function(e,t,i,n){e[0].setAttribute(this.dasherize(t+i),String(n))},get:function(e,t){var i=0,n=(t||"").split(".");while(this.isObject(e)||this.isArray(e)){e=e[n[i++]];if(i===n.length)return e}return undefined},hash:function(e){return String(Math.random()).substring(2,e?e+2:9)},isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},isObject:function(e){return e===Object(e)},deserializeValue:function(t){var e;try{return t?t=="true"||(t=="false"?false:t=="null"?null:!isNaN(e=Number(t))?e:/^[\[\{]/.test(t)?r.parseJSON(t):t):t}catch(e){return t}},camelize:function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},dasherize:function(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},noMessage:"NO_MESSAGE"};var a={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:true,uiEnabled:true,validationThreshold:3,focus:"first",trigger:false,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(e){},errorsContainer:function(e){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"};var s=function(){};s.prototype={asyncSupport:false,actualizeOptions:function(){this.options=this.parsleyInstance.OptionsFactory.get(this);return this},validateThroughValidator:function(e,t,i){return window.ParsleyValidator.validate.apply(window.ParsleyValidator,[e,t,i])},subscribe:function(e,t){r.listenTo(this,e.toLowerCase(),t);return this},unsubscribe:function(e){r.unsubscribeTo(this,e.toLowerCase());return this},reset:function(){if("ParsleyForm"!==this.__class__)return r.emit("parsley:field:reset",this);for(var e=0;e<this.fields.length;e++)r.emit("parsley:field:reset",this.fields[e]);r.emit("parsley:form:reset",this)},destroy:function(){if("ParsleyForm"!==this.__class__){r.emit("parsley:field:destroy",this);this.$element.removeData("Parsley");return}for(var e=0;e<this.fields.length;e++)this.fields[e].destroy();r.emit("parsley:form:destroy",this);this.$element.removeData("Parsley")}};(function(){var e={};var l=function(e){this.__class__="Validator";this.__version__="1.2.3";this.options=e||{};this.bindingKey=this.options.bindingKey||"_validatorjsConstraint"};l.prototype={constructor:l,validate:function(e,t,i){if("string"!==typeof e&&"object"!==typeof e)throw new Error("You must validate an object or a string");if("string"===typeof e||c(e))return this._validateString(e,t,i);if(this.isBinded(e))return this._validateBindedObject(e,t);return this._validateObject(e,t,i)},bind:function(e,t){if("object"!==typeof e)throw new Error("Must bind a Constraint to an object");e[this.bindingKey]=new o(t);return this},unbind:function(e){if("undefined"===typeof e._validatorjsConstraint)return this;delete e[this.bindingKey];return this},isBinded:function(e){return"undefined"!==typeof e[this.bindingKey]},getBinded:function(e){return this.isBinded(e)?e[this.bindingKey]:null},_validateString:function(e,t,i){var n,a=[];if(!c(t))t=[t];for(var s=0;s<t.length;s++){if(!(t[s]instanceof r))throw new Error("You must give an Assert or an Asserts array to validate a string");n=t[s].check(e,i);if(true!==n)a.push(n)}return a.length?a:true},_validateObject:function(e,t,i){if("object"!==typeof t)throw new Error("You must give a constraint to validate an object");if(t instanceof r)return t.check(e,i);if(t instanceof o)return t.check(e,i);return new o(t).check(e,i)},_validateBindedObject:function(e,t){return e[this.bindingKey].check(e,t)}};l.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var o=function(t,e){this.__class__="Constraint";this.options=e||{};this.nodes={};if(t){try{this._bootstrap(t)}catch(e){throw new Error("Should give a valid mapping object to Constraint",e,t)}}};o.prototype={constructor:o,isRequired:function(e,t,i){var n=this.get(e);var a=c(n)?n:[n];for(var s=a.length-1;s>=0;s--){n=a[s];if("Required"===n.__class__){if(a[s].requiresValidation(t)){return true}}if(i){if("Collection"===n.__class__){n=n.constraint}if(n instanceof o){n.options.deepRequired=i;for(var r in n.nodes){if(n.isRequired(r,t,i)){return true}}}}}return false},check:function(e,t){var i,n={};for(var a in this.nodes){var s=this.isRequired(a,t,this.options.deepRequired);if(!this.has(a,e)&&!this.options.strict&&!s){continue}try{if(!this.has(a,this.options.strict||s?e:undefined)){(new r).HaveProperty(a).validate(e)}i=this._check(a,e[a],t);if(c(i)&&i.length>0||!c(i)&&!u(i)){n[a]=i}}catch(e){n[a]=e}}return u(n)?true:n},add:function(e,t){if(t instanceof r||c(t)&&t[0]instanceof r){this.nodes[e]=t;return this}if("object"===typeof t&&!c(t)){this.nodes[e]=t instanceof o?t:new o(t,this.options);return this}throw new Error("Should give an Assert, an Asserts array, a Constraint",t)},has:function(e,t){t="undefined"!==typeof t?t:this.nodes;return"undefined"!==typeof t[e]},get:function(e,t){return this.has(e)?this.nodes[e]:t||null},remove:function(e){var t=[];for(var i in this.nodes)if(i!==e)t[i]=this.nodes[i];this.nodes=t;return this},_bootstrap:function(e){if(e instanceof o)return this.nodes=e.nodes;for(var t in e)this.add(t,e[t])},_check:function(e,t,i){if(this.nodes[e]instanceof r)return this._checkAsserts(t,[this.nodes[e]],i);if(c(this.nodes[e]))return this._checkAsserts(t,this.nodes[e],i);if(this.nodes[e]instanceof o)return this.nodes[e].check(t,i);throw new Error("Invalid node",this.nodes[e])},_checkAsserts:function(e,t,i){var n,a=[];for(var s=0;s<t.length;s++){n=t[s].check(e,i);if("undefined"!==typeof n&&true!==n)a.push(n)}return a}};var d=function(e,t,i){this.__class__="Violation";if(!(e instanceof r))throw new Error("Should give an assertion implementing the Assert interface");this.assert=e;this.value=t;if("undefined"!==typeof i)this.violation=i};d.prototype={show:function(){var e={assert:this.assert.__class__,value:this.value};if(this.violation)e.violation=this.violation;return e},__toString:function(){var e="";if("undefined"!==typeof this.violation){this.violation=this.getViolation().constraint+" expected was "+this.getViolation().expected;e=", "+this.violation}return this.assert.__class__+' assert failed for "'+this.value+'"'+e},getViolation:function(){var e,t;for(e in this.violation)t=this.violation[e];return{constraint:e,expected:t}}};var r=function(e){this.__class__="Assert";this.__parentClass__=this.__class__;this.groups=[];if("undefined"!==typeof e)this.addGroup(e)};r.extend=function(e){if("object"!==typeof e)throw new Error("Invalid parameter: `asserts` should be an object");if(0===Object.keys(e).length)throw new Error("Invalid parameter: `asserts` should have at least one property");function t(){r.apply(this,arguments)}t.prototype=Object.create(r.prototype);t.prototype.constructor=t;for(var i in e){if("function"!==typeof e[i])throw new Error("The extension assert must be a function");t.prototype[i]=e[i]}return t};r.prototype={construct:r,element:null,requiresValidation:function(e){if(e&&!this.hasGroup(e))return false;if(!e&&this.hasGroups())return false;return true},domElement:function(e){if(e){this.element=e}},check:function(e,t){if(!this.requiresValidation(t))return true;try{return this.validate(e,t)}catch(e){return e}},hasGroup:function(e){if(c(e))return this.hasOneOf(e);if("Any"===e)return true;if(!this.hasGroups())return"Default"===e;return-1!==this.groups.indexOf(e)},hasOneOf:function(e){for(var t=0;t<e.length;t++)if(this.hasGroup(e[t]))return true;return false},hasGroups:function(){return this.groups.length>0},addGroup:function(e){if(c(e))return this.addGroups(e);if(!this.hasGroup(e))this.groups.push(e);return this},removeGroup:function(e){var t=[];for(var i=0;i<this.groups.length;i++)if(e!==this.groups[i])t.push(this.groups[i]);this.groups=t;return this},addGroups:function(e){for(var t=0;t<e.length;t++)this.addGroup(e[t]);return this},HaveProperty:function(e){this.__class__="HaveProperty";this.node=e;this.validate=function(e){if("undefined"===typeof e[this.node])throw new d(this,e,{value:this.node});return true};return this},Blank:function(){this.__class__="Blank";this.validate=function(e){if("string"!==typeof e)throw new d(this,e,{value:l.errorCode.must_be_a_string});if(""!==e.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,e);return true};return this},Callback:function(e){this.__class__="Callback";this.arguments=Array.prototype.slice.call(arguments);if(1===this.arguments.length)this.arguments=[];else this.arguments.splice(0,1);if("function"!==typeof e)throw new Error("Callback must be instanciated with a function");this.fn=e;this.validate=function(t){var e;try{e=this.fn.apply(this,[t].concat(this.arguments))}catch(e){throw new d(this,t,{error:e})}if(true!==e)throw new d(this,t,{result:e});return true};return this},Choice:function(e){this.__class__="Choice";if(!c(e)&&"function"!==typeof e)throw new Error("Choice must be instanciated with an array or a function");this.list=e;this.validate=function(e){var t="function"===typeof this.list?this.list():this.list;for(var i=0;i<t.length;i++)if(e===t[i])return true;throw new d(this,e,{choices:t})};return this},Collection:function(e){this.__class__="Collection";this.constraint=t(e)?new o(e):e;this.validate=function(e,t){var i,n=new l,a=0,s={},r=this.groups.length?this.groups:t;if(!c(e))throw new d(this,e,{value:l.errorCode.must_be_an_array});for(var o=0;o<e.length;o++){i=this.constraint?n.validate(e[o],this.constraint,r):n.validate(e[o],r);if(!u(i))s[a]=i;a++}return!u(s)?s:true};return this},Count:function(e){this.__class__="Count";this.count=e;this.validate=function(e){if(!c(e))throw new d(this,e,{value:l.errorCode.must_be_an_array});var t="function"===typeof this.count?this.count(e):this.count;if(isNaN(Number(t)))throw new Error("Count must be a valid interger",t);if(t!==e.length)throw new d(this,e,{count:t});return true};return this},Email:function(){this.__class__="Email";this.validate=function(e){var t=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!==typeof e)throw new d(this,e,{value:l.errorCode.must_be_a_string});if(!t.test(e))throw new d(this,e);return true};return this},EqualTo:function(e){this.__class__="EqualTo";if("undefined"===typeof e)throw new Error("EqualTo must be instanciated with a value or a function");this.reference=e;this.validate=function(e){var t="function"===typeof this.reference?this.reference(e):this.reference;if(t!==e)throw new d(this,e,{value:t});return true};return this},GreaterThan:function(e){this.__class__="GreaterThan";if("undefined"===typeof e)throw new Error("Should give a threshold value");this.threshold=e;this.validate=function(e){if(""===e||isNaN(Number(e)))throw new d(this,e,{value:l.errorCode.must_be_a_number});if(this.threshold>=e)throw new d(this,e,{threshold:this.threshold});return true};return this},GreaterThanOrEqual:function(e){this.__class__="GreaterThanOrEqual";if("undefined"===typeof e)throw new Error("Should give a threshold value");this.threshold=e;this.validate=function(e){if(""===e||isNaN(Number(e)))throw new d(this,e,{value:l.errorCode.must_be_a_number});if(this.threshold>e)throw new d(this,e,{threshold:this.threshold});return true};return this},InstanceOf:function(e){this.__class__="InstanceOf";if("undefined"===typeof e)throw new Error("InstanceOf must be instanciated with a value");this.classRef=e;this.validate=function(e){if(true!==e instanceof this.classRef)throw new d(this,e,{classRef:this.classRef});return true};return this},IsString:function(){this.__class__="IsString";this.validate=function(e){if(!i(e))throw new d(this,e,{value:l.errorCode.must_be_a_string});return true};return this},Length:function(e){this.__class__="Length";if(!e.min&&!e.max)throw new Error("Length assert must be instanciated with a { min: x, max: y } object");this.min=parseInt(e.min);this.max=parseInt(e.max);this.validate=function(e){if("string"!==typeof e&&!c(e))throw new d(this,e,{value:l.errorCode.must_be_a_string_or_array});if("undefined"!==typeof this.min&&this.min===this.max&&e.length!==this.min)throw new d(this,e,{min:this.min,max:this.max});if("undefined"!==typeof this.max&&e.length>this.max)throw new d(this,e,{max:this.max});if("undefined"!==typeof this.min&&e.length<this.min)throw new d(this,e,{min:this.min});return true};return this},LessThan:function(e){this.__class__="LessThan";if("undefined"===typeof e)throw new Error("Should give a threshold value");this.threshold=e;this.validate=function(e){if(""===e||isNaN(Number(e)))throw new d(this,e,{value:l.errorCode.must_be_a_number});if(this.threshold<=e)throw new d(this,e,{threshold:this.threshold});return true};return this},LessThanOrEqual:function(e){this.__class__="LessThanOrEqual";if("undefined"===typeof e)throw new Error("Should give a threshold value");this.threshold=e;this.validate=function(e){if(""===e||isNaN(Number(e)))throw new d(this,e,{value:l.errorCode.must_be_a_number});if(this.threshold<e)throw new d(this,e,{threshold:this.threshold});return true};return this},NotNull:function(){this.__class__="NotNull";this.validate=function(e){if(null===e||"undefined"===typeof e)throw new d(this,e);return true};return this},NotBlank:function(){this.__class__="NotBlank";this.validate=function(e){if("string"!==typeof e)throw new d(this,e,{value:l.errorCode.must_be_a_string});if(""===e.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,e);return true};return this},NotEqualTo:function(e){this.__class__="NotEqualTo";if("undefined"===typeof e)throw new Error("NotEqualTo must be instanciated with a value or a function");this.reference=e;this.validate=function(e){var t="function"===typeof this.reference?this.reference(e):this.reference;if(t===e)throw new d(this,e,{value:t});return true};return this},Null:function(){this.__class__="Null";this.validate=function(e){if(null!==e)throw new d(this,e);return true};return this},Range:function(e,t){this.__class__="Range";if("undefined"===typeof e||"undefined"===typeof t)throw new Error("Range assert expects min and max values");this.min=e;this.max=t;this.validate=function(t){try{if("string"===typeof t&&isNaN(Number(t))||c(t))(new r).Length({min:this.min,max:this.max}).validate(t);else(new r).GreaterThanOrEqual(this.min).validate(t)&&(new r).LessThanOrEqual(this.max).validate(t);return true}catch(e){throw new d(this,t,e.violation)}return true};return this},Regexp:function(e,t){this.__class__="Regexp";if("undefined"===typeof e)throw new Error("You must give a regexp");this.regexp=e;this.flag=t;this.validate=function(e){if("string"!==typeof e)throw new d(this,e,{value:l.errorCode.must_be_a_string});if(!new RegExp(this.regexp,this.flag).test(e))throw new d(this,e,{regexp:this.regexp,flag:this.flag});return true};return this},Required:function(){this.__class__="Required";this.validate=function(t){if("undefined"===typeof t)throw new d(this,t);try{if("string"===typeof t)(new r).NotNull().validate(t)&&(new r).NotBlank().validate(t);else if(true===c(t))(new r).Length({min:1}).validate(t)}catch(e){throw new d(this,t)}return true};return this},Unique:function(e){this.__class__="Unique";if("object"===typeof e)this.key=e.key;this.validate=function(e){var t,i=[];if(!c(e))throw new d(this,e,{value:l.errorCode.must_be_an_array});for(var n=0;n<e.length;n++){t="object"===typeof e[n]?e[n][this.key]:e[n];if("undefined"===typeof t)continue;if(-1!==i.indexOf(t))throw new d(this,e,{value:t});i.push(t)}return true};return this}};e.Assert=r;e.Validator=l;e.Violation=d;e.Constraint=o;if(!Array.prototype.indexOf)Array.prototype.indexOf=function(e){"use strict";if(this===null){throw new TypeError}var t=Object(this);var i=t.length>>>0;if(i===0){return-1}var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0}else if(n!==0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n))}}if(n>=i){return-1}var a=n>=0?n:Math.max(i-Math.abs(n),0);for(;a<i;a++){if(a in t&&t[a]===e){return a}}return-1};var u=function(e){for(var t in e)return false;return true};var c=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var t=function(e){return typeof e==="object"&&Object.getPrototypeOf(e)===Object.prototype};var i=function(e){return Object.prototype.toString.call(e)==="[object String]"};if(typeof define==="function"&&define.amd){define("vendors/validator.js/dist/validator",[],function(){return e})}else if(typeof module!=="undefined"&&module.exports){module.exports=e}else{window["undefined"!==typeof validatorjs_ns?validatorjs_ns:"Validator"]=e}})();var e=function(e,t){this.__class__="ParsleyValidator";this.Validator=Validator;this.locale="en";this.init(e||{},t||{})};e.prototype={init:function(e,t){this.catalog=t;for(var i in e)this.addValidator(i,e[i].fn,e[i].priority);r.emit("parsley:validator:init")},setLocale:function(e){if("undefined"===typeof this.catalog[e])throw new Error(e+" is not available in the catalog");this.locale=e;return this},addCatalog:function(e,t,i){if("object"===typeof t)this.catalog[e]=t;if(true===i)return this.setLocale(e);return this},addMessage:function(e,t,i){if(undefined===typeof this.catalog[e])this.catalog[e]={};this.catalog[e][t.toLowerCase()]=i;return this},validate:function(e,t,i){return(new this.Validator.Validator).validate.apply(new Validator.Validator,arguments)},addValidator:function(e,t,i){this.validators[e.toLowerCase()]=function(e){return r.extend((new Validator.Assert).Callback(t,e),{priority:i})};return this},updateValidator:function(e,t,i){return addValidator(e,t,i)},removeValidator:function(e){delete this.validators[e];return this},getErrorMessage:function(e){var t;if("type"===e.name){t=this.catalog[this.locale][e.name][e.requirements]}else{t=this.catalog[this.locale][e.name];if(t!==o.noMessage){t=this.formatMesssage(this.catalog[this.locale][e.name],e.requirements)}else{t=null}}return""!==t?t:this.catalog[this.locale].defaultMessage},formatMesssage:function(e,t){if("object"===typeof t){for(var i in t)e=this.formatMesssage(e,t[i]);return e}return"string"===typeof e?e.replace(new RegExp("%s","i"),t):""},validators:{notblank:function(){return r.extend((new Validator.Assert).NotBlank(),{priority:2})},required:function(){return r.extend((new Validator.Assert).Required(),{priority:512})},type:function(e){var t;switch(e){case"email":t=(new Validator.Assert).Email();break;case"number":t=(new Validator.Assert).Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":t=(new Validator.Assert).Regexp("^-?\\d+$");break;case"digits":t=(new Validator.Assert).Regexp("^\\d+$");break;case"alphanum":t=(new Validator.Assert).Regexp("^\\w+$","i");break;case"url":t=(new Validator.Assert).Regexp("(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)","i");break;default:throw new Error("validator type `"+e+"` is not supported")}return r.extend(t,{priority:256})},pattern:function(e){var t="";if(!!/^\/.*\/(?:[gimy]*)$/.test(e)){t=e.replace(/.*\/([gimy]*)$/,"$1");e=e.replace(new RegExp("^/(.*?)/"+t+"$"),"$1")}return r.extend((new Validator.Assert).Regexp(e,t),{priority:64})},minlength:function(e){return r.extend((new Validator.Assert).Length({min:e}),{priority:30,requirementsTransformer:function(){return"string"===typeof e&&!isNaN(e)?parseFloat(e):e}})},maxlength:function(e){return r.extend((new Validator.Assert).Length({max:e}),{priority:30,requirementsTransformer:function(){return"string"===typeof e&&!isNaN(e)?parseFloat(e):e}})},length:function(e){return r.extend((new Validator.Assert).Length({min:e[0],max:e[1]}),{priority:32})},mincheck:function(e){return this.minlength(e)},maxcheck:function(e){return this.maxlength(e)},check:function(e){return this.length(e)},min:function(e){return r.extend((new Validator.Assert).GreaterThanOrEqual(e),{priority:30,requirementsTransformer:function(){return"string"===typeof e&&!isNaN(e)?parseFloat(e):e}})},max:function(e){return r.extend((new Validator.Assert).LessThanOrEqual(e),{priority:30,requirementsTransformer:function(){return"string"===typeof e&&!isNaN(e)?parseFloat(e):e}})},range:function(t){return r.extend((new Validator.Assert).Range(t[0],t[1]),{priority:32,requirementsTransformer:function(){for(var e=0;e<t.length;e++)t[e]="string"===typeof t[e]&&!isNaN(t[e])?parseFloat(t[e]):t[e];return t}})},equalto:function(e){return r.extend((new Validator.Assert).EqualTo(e),{priority:256,requirementsTransformer:function(){return r(e).length?r(e).val():e}})}}};var t=function(e){this.__class__="ParsleyUI"};t.prototype={listen:function(){r.listen("parsley:form:init",this,this.setupForm);r.listen("parsley:field:init",this,this.setupField);r.listen("parsley:field:validated",this,this.reflow);r.listen("parsley:form:validated",this,this.focus);r.listen("parsley:field:reset",this,this.reset);r.listen("parsley:form:destroy",this,this.destroy);r.listen("parsley:field:destroy",this,this.destroy);return this},reflow:function(e){if("undefined"===typeof e._ui||false===e._ui.active)return;var t=this._diff(e.validationResult,e._ui.lastValidationResult);e._ui.lastValidationResult=e.validationResult;e._ui.validatedOnce=true;this.manageStatusClass(e);this.manageErrorsMessages(e,t);this.actualizeTriggers(e);if((t.kept.length||t.added.length)&&"undefined"===typeof e._ui.failedOnce)this.manageFailingFieldTrigger(e)},manageStatusClass:function(e){if(true===e.validationResult)this._successClass(e);else if(e.validationResult.length>0)this._errorClass(e);else this._resetClass(e)},manageErrorsMessages:function(e,t){if("undefined"!==typeof e.options.errorsMessagesDisabled)return;if("undefined"!==typeof e.options.errorMessage){if(t.added.length||t.kept.length){if(0===e._ui.$errorsWrapper.find(".parsley-custom-error-message").length)e._ui.$errorsWrapper.append(r(e.options.errorTemplate).addClass("parsley-custom-error-message"));e._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(e.options.errorMessage)}else{e._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove()}return}for(var i=0;i<t.removed.length;i++)this.removeError(e,t.removed[i].assert.name,true);for(i=0;i<t.added.length;i++)this.addError(e,t.added[i].assert.name,undefined,t.added[i].assert,true);for(i=0;i<t.kept.length;i++)this.updateError(e,t.kept[i].assert.name,undefined,t.kept[i].assert,true)},addError:function(e,t,i,n,a){e._ui.$errorsWrapper.addClass("filled").append(r(e.options.errorTemplate).addClass("parsley-"+t).html(i||this._getErrorMessage(e,n)));if(true!==a)this._errorClass(e)},updateError:function(e,t,i,n,a){e._ui.$errorsWrapper.addClass("filled").find(".parsley-"+t).html(i||this._getErrorMessage(e,n));if(true!==a)this._errorClass(e)},removeError:function(e,t,i){e._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+t).remove();if(true!==i)this.manageStatusClass(e)},focus:function(e){if(true===e.validationResult||"none"===e.options.focus)return e._focusedField=null;e._focusedField=null;for(var t=0;t<e.fields.length;t++)if(true!==e.fields[t].validationResult&&e.fields[t].validationResult.length>0&&"undefined"===typeof e.fields[t].options.noFocus){if("first"===e.options.focus){e._focusedField=e.fields[t].$element;return e._focusedField.focus()}e._focusedField=e.fields[t].$element}if(null===e._focusedField)return null;return e._focusedField.focus()},_getErrorMessage:function(e,t){var i=t.name+"Message";if("undefined"!==typeof e.options[i])return e.options[i];return window.ParsleyValidator.getErrorMessage(t)},_diff:function(e,t,i){var n=[],a=[];for(var s=0;s<e.length;s++){var r=false;for(var o=0;o<t.length;o++)if(e[s].assert.name===t[o].assert.name){r=true;break}if(r)a.push(e[s]);else n.push(e[s])}return{kept:a,added:n,removed:!i?this._diff(t,e,true).added:[]}},setupForm:function(e){e.$element.on("submit.Parsley",false,r.proxy(e.onSubmitValidate,e));if(false===e.options.uiEnabled)return;e.$element.attr("novalidate","")},setupField:function(e){var t={active:false};if(false===e.options.uiEnabled)return;t.active=true;e.$element.attr(e.options.namespace+"id",e.__id__);t.$errorClassHandler=this._manageClassHandler(e);t.errorsWrapperId="parsley-id-"+("undefined"!==typeof e.options.multiple?"multiple-"+e.options.multiple:e.__id__);t.$errorsWrapper=r(e.options.errorsWrapper).attr("id",t.errorsWrapperId);t.lastValidationResult=[];t.validatedOnce=false;t.validationInformationVisible=false;e._ui=t;this._insertErrorWrapper(e);this.actualizeTriggers(e)},_manageClassHandler:function(e){if("string"===typeof e.options.classHandler&&r(e.options.classHandler).length)return r(e.options.classHandler);var t=e.options.classHandler(e);if("undefined"!==typeof t&&t.length)return t;if("undefined"===typeof e.options.multiple||e.$element.is("select"))return e.$element;return e.$element.parent()},_insertErrorWrapper:function(e){var t;if("string"===typeof e.options.errorsContainer)if(r(e.options.errorsContainer+"").length)return r(e.options.errorsContainer).append(e._ui.$errorsWrapper);else if(window.console&&window.console.warn)window.console.warn("The errors container `"+e.options.errorsContainer+"` does not exist in DOM");if("function"===typeof e.options.errorsContainer)t=e.options.errorsContainer(e);if("undefined"!==typeof t&&t.length)return t.append(e._ui.$errorsWrapper);return"undefined"===typeof e.options.multiple?e.$element.after(e._ui.$errorsWrapper):e.$element.parent().after(e._ui.$errorsWrapper)},actualizeTriggers:function(e){var t=this;if(e.options.multiple)r("["+e.options.namespace+'multiple="'+e.options.multiple+'"]').each(function(){r(this).off(".Parsley")});else e.$element.off(".Parsley");if(false===e.options.trigger)return;var i=e.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,"");if(""===i)return;if(e.options.multiple)r("["+e.options.namespace+'multiple="'+e.options.multiple+'"]').each(function(){r(this).on(i.split(" ").join(".Parsley ")+".Parsley",false,r.proxy("function"===typeof e.eventValidate?e.eventValidate:t.eventValidate,e))});else e.$element.on(i.split(" ").join(".Parsley ")+".Parsley",false,r.proxy("function"===typeof e.eventValidate?e.eventValidate:this.eventValidate,e))},eventValidate:function(e){if(new RegExp("key").test(e.type))if(!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold)return;this._ui.validatedOnce=true;this.validate()},manageFailingFieldTrigger:function(e){e._ui.failedOnce=true;if(e.options.multiple)r("["+e.options.namespace+'multiple="'+e.options.multiple+'"]').each(function(){if(!new RegExp("change","i").test(r(this).parsley().options.trigger||""))return r(this).on("change.ParsleyFailedOnce",false,r.proxy(e.validate,e))});if(e.$element.is("select"))if(!new RegExp("change","i").test(e.options.trigger||""))return e.$element.on("change.ParsleyFailedOnce",false,r.proxy(e.validate,e));if(!new RegExp("keyup","i").test(e.options.trigger||""))return e.$element.on("keyup.ParsleyFailedOnce",false,r.proxy(e.validate,e))},reset:function(e){if("undefined"===typeof e._ui)return;e.$element.off(".Parsley");e.$element.off(".ParsleyFailedOnce");if("ParsleyForm"===e.__class__)return;e._ui.$errorsWrapper.children().each(function(){r(this).remove()});this._resetClass(e);e._ui.validatedOnce=false;e._ui.lastValidationResult=[];e._ui.validationInformationVisible=false},destroy:function(e){if("undefined"===typeof e._ui)return;this.reset(e);if("ParsleyForm"===e.__class__)return;e._ui.$errorsWrapper.remove();delete e._ui},_successClass:function(e){e._ui.validationInformationVisible=true;e._ui.$errorClassHandler.removeClass(e.options.errorClass).addClass(e.options.successClass)},_errorClass:function(e){e._ui.validationInformationVisible=true;e._ui.$errorClassHandler.removeClass(e.options.successClass).addClass(e.options.errorClass)},_resetClass:function(e){e._ui.$errorClassHandler.removeClass(e.options.successClass).removeClass(e.options.errorClass)}};var l=function(e,t,i,n){this.__class__="OptionsFactory";this.__id__=o.hash(4);this.formOptions=null;this.fieldOptions=null;this.staticOptions=r.extend(true,{},e,t,i,{namespace:n})};l.prototype={get:function(e){if("undefined"===typeof e.__class__)throw new Error("Parsley Instance expected");switch(e.__class__){case"Parsley":return this.staticOptions;case"ParsleyForm":return this.getFormOptions(e);case"ParsleyField":case"ParsleyFieldMultiple":return this.getFieldOptions(e);default:throw new Error("Instance "+e.__class__+" is not supported")}},getFormOptions:function(e){this.formOptions=o.attr(e.$element,this.staticOptions.namespace);return r.extend({},this.staticOptions,this.formOptions)},getFieldOptions:function(e){this.fieldOptions=o.attr(e.$element,this.staticOptions.namespace);if(null===this.formOptions&&"ParsleyForm"===e.parsleyInstance.__proxy__)this.formOptions=getFormOptions(e.parsleyInstance);return r.extend({},this.staticOptions,this.formOptions,this.fieldOptions)}};var d=function(e,t){this.__class__="ParsleyForm";this.__id__=o.hash(4);if("Parsley"!==o.get(t,"__class__"))throw new Error("You must give a Parsley instance");this.parsleyInstance=t;this.$element=r(e)};d.prototype={init:function(){this.validationResult=null;this.options=this.parsleyInstance.OptionsFactory.get(this);this._bindFields();return this},onSubmitValidate:function(e){this.validate(undefined,undefined,e);if(false===this.validationResult&&e instanceof r.Event){e.stopImmediatePropagation();e.preventDefault()}return this},validate:function(e,t,i){this.submitEvent=i;this.validationResult=true;var n=[];this._refreshFields();r.emit("parsley:form:validate",this);for(var a=0;a<this.fields.length;a++){if(e&&e!==this.fields[a].options.group)continue;n=this.fields[a].validate(t);if(true!==n&&n.length>0&&this.validationResult)this.validationResult=false}r.emit("parsley:form:validated",this);return this.validationResult},isValid:function(e,t){this._refreshFields();for(var i=0;i<this.fields.length;i++){if(e&&e!==this.fields[i].options.group)continue;if(false===this.fields[i].isValid(t))return false}return true},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var t=this;this.fields=[];this.fieldsMappedById={};this.$element.find(this.options.inputs).each(function(){var e=new window.Parsley(this,{},t.parsleyInstance);if(("ParsleyField"===e.__class__||"ParsleyFieldMultiple"===e.__class__)&&!e.$element.is(e.options.excluded))if("undefined"===typeof t.fieldsMappedById[e.__class__+"-"+e.__id__]){t.fieldsMappedById[e.__class__+"-"+e.__id__]=e;t.fields.push(e)}});return this}};var u=function(e,t,i,n,a){if(!new RegExp("ParsleyField").test(o.get(e,"__class__")))throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");if("function"!==typeof window.ParsleyValidator.validators[t]&&"Assert"!==window.ParsleyValidator.validators[t](i).__parentClass__)throw new Error("Valid validator expected");var s=function(e,t){if("undefined"!==typeof e.options[t+"Priority"])return e.options[t+"Priority"];return o.get(window.ParsleyValidator.validators[t](i),"priority")||2};n=n||s(e,t);if("function"===typeof window.ParsleyValidator.validators[t](i).requirementsTransformer)i=window.ParsleyValidator.validators[t](i).requirementsTransformer();return r.extend(window.ParsleyValidator.validators[t](i),{name:t,requirements:i,priority:n,groups:[n],isDomConstraint:a||o.attr(e.$element,e.options.namespace,t)})};var c=function(e,t){this.__class__="ParsleyField";this.__id__=o.hash(4);if("Parsley"!==o.get(t,"__class__"))throw new Error("You must give a Parsley instance");this.parsleyInstance=t;this.$element=r(e);this.options=this.parsleyInstance.OptionsFactory.get(this)};c.prototype={init:function(){this.constraints=[];this.constraintsByName={};this.validationResult=[];this.bindConstraints();return this},validate:function(e){this.value=this.getValue();r.emit("parsley:field:validate",this);r.emit("parsley:field:"+(this.isValid(e,this.value)?"success":"error"),this);r.emit("parsley:field:validated",this);return this.validationResult},getConstraintsSortedPriorities:function(){var e=[];for(var t=0;t<this.constraints.length;t++)if(-1===e.indexOf(this.constraints[t].priority))e.push(this.constraints[t].priority);e.sort(function(e,t){return t-e});return e},isValid:function(e,t){this.refreshConstraints();var i=this.getConstraintsSortedPriorities();t=t||this.getValue();if(0===t.length&&!this.isRequired()&&"undefined"===typeof this.options.validateIfEmpty&&true!==e)return this.validationResult=[];if(false===this.options.priorityEnabled)return true===(this.validationResult=this.validateThroughValidator(t,this.constraints,"Any"));for(var n=0;n<i.length;n++)if(true!==(this.validationResult=this.validateThroughValidator(t,this.constraints,i[n])))return false;return true},isRequired:function(){if("undefined"===typeof this.constraintsByName.required)return false;return false!==this.constraintsByName.required.requirements},getValue:function(){var e;if("undefined"!==typeof this.options.value)e=this.options.value;else e=this.$element.val();if(true===this.options.trimValue)return e.replace(/^\s+|\s+$/g,"");return e},refreshConstraints:function(){this.actualizeOptions().bindConstraints();return this},bindConstraints:function(){var e=[];for(var t=0;t<this.constraints.length;t++)if(false===this.constraints[t].isDomConstraint)e.push(this.constraints[t]);this.constraints=e;for(var i in this.options)this.addConstraint(i,this.options[i]);return this.bindHtml5Constraints()},bindHtml5Constraints:function(){if(this.$element.hasClass("required")||this.$element.attr("required"))this.addConstraint("required",true,undefined,true);if("string"===typeof this.$element.attr("pattern"))this.addConstraint("pattern",this.$element.attr("pattern"),undefined,true);if("undefined"!==typeof this.$element.attr("min")&&"undefined"!==typeof this.$element.attr("max"))this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],undefined,true);else if("undefined"!==typeof this.$element.attr("min"))this.addConstraint("min",this.$element.attr("min"),undefined,true);else if("undefined"!==typeof this.$element.attr("max"))this.addConstraint("max",this.$element.attr("max"),undefined,true);var e=this.$element.attr("type");if("undefined"===typeof e)return this;if("number"===e)return this.addConstraint("type","integer",undefined,true);else if(new RegExp(e,"i").test("email url range"))return this.addConstraint("type",e,undefined,true)},addConstraint:function(e,t,i,n){e=e.toLowerCase();if("function"===typeof window.ParsleyValidator.validators[e]){var a=new u(this,e,t,i,n);if("undefined"!==this.constraintsByName[a.name])this.removeConstraint(a.name);if(a.domElement&&this.$element){a.domElement(this.$element)}this.constraints.push(a);this.constraintsByName[a.name]=a}return this},removeConstraint:function(e){for(var t=0;t<this.constraints.length;t++)if(e===this.constraints[t].name){this.constraints.splice(t,1);break}return this},updateConstraint:function(e,t,i){return this.removeConstraint(e).addConstraint(e,t,i)}};var h=function(){this.__class__="ParsleyFieldMultiple"};h.prototype={init:function(e){this.$elements=[this.$element];this.options.multiple=e;return this},addElement:function(e){this.$elements.push(e);return this},refreshConstraints:function(){var e;this.constraints=[];if(this.$element.is("select")){this.actualizeOptions().bindConstraints();return this}for(var t=0;t<this.$elements.length;t++){e=this.$elements[t].data("ParsleyFieldMultiple").refreshConstraints().constraints;for(var i=0;i<e.length;i++)this.addConstraint(e[i].name,e[i].requirements,e[i].priority,e[i].isDomConstraint)}return this},getValue:function(){if("undefined"!==typeof this.options.value)return this.options.value;if(this.$element.is("input[type=radio]"))return r("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').val()||"";if(this.$element.is("input[type=checkbox]")){var e=[];r("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').each(function(){e.push(r(this).val())});return e.length?e:[]}if(this.$element.is("select"))return null===this.$element.val()?[]:this.$element.val()}};var f=r({}),p={};r.listen=function(e){if("undefined"===typeof p[e])p[e]=[];if("function"===typeof arguments[1])return p[e].push({fn:arguments[1]});if("object"===typeof arguments[1]&&"function"===typeof arguments[2])return p[e].push({fn:arguments[2],ctxt:arguments[1]});throw new Error("Wrong parameters")};r.listenTo=function(e,t,i){if("undefined"===typeof p[t])p[t]=[];if(!(e instanceof c)&&!(e instanceof d))throw new Error("Must give Parsley instance");if("string"!==typeof t||"function"!==typeof i)throw new Error("Wrong parameters");p[t].push({instance:e,fn:i})};r.unsubscribe=function(e,t){if("undefined"===typeof p[e])return;if("string"!==typeof e||"function"!==typeof t)throw new Error("Wrong arguments");for(var i=0;i<p[e].length;i++)if(p[e][i].fn===t)return p[e].splice(i,1)};r.unsubscribeTo=function(e,t){if("undefined"===typeof p[t])return;if(!(e instanceof c)&&!(e instanceof d))throw new Error("Must give Parsley instance");for(var i=0;i<p[t].length;i++)if("undefined"!==typeof p[t][i].instance&&p[t][i].instance.__id__===e.__id__)return p[t].splice(i,1)};r.unsubscribeAll=function(e){if("undefined"===typeof p[e])return;delete p[e]};r.emit=function(e,t){if("undefined"===typeof p[e])return;for(var i=0;i<p[e].length;i++){if("undefined"===typeof p[e][i].instance){p[e][i].fn.apply("undefined"!==typeof p[e][i].ctxt?p[e][i].ctxt:f,Array.prototype.slice.call(arguments,1));continue}if(!(t instanceof c)&&!(t instanceof d))continue;if(p[e][i].instance.__id__===t.__id__){p[e][i].fn.apply(f,Array.prototype.slice.call(arguments,1));continue}if(p[e][i].instance instanceof d&&t instanceof c)for(var n=0;n<p[e][i].instance.fields.length;n++)if(p[e][i].instance.fields[n].__id__===t.__id__){p[e][i].fn.apply(f,Array.prototype.slice.call(arguments,1));continue}}};r.subscribed=function(){return p};window.ParsleyConfig=window.ParsleyConfig||{};window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{};window.ParsleyConfig.i18n.en=r.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."});if("undefined"!==typeof window.ParsleyValidator)window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,true);var i=function(e,t,i){this.__class__="Parsley";this.__version__="2.0.0-rc5";this.__id__=o.hash(4);if("undefined"===typeof e)throw new Error("You must give an element");return this.init(r(e),t,i)};i.prototype={init:function(e,t,i){if(!e.length)throw new Error("You must bind Parsley on an existing element.");this.$element=e;if(this.$element.data("Parsley")){var n=this.$element.data("Parsley");if("undefined"!==typeof i&&"ParsleyField"===n.parsleyInstance.__proxy__)n.parsleyInstance=i;return n}this.OptionsFactory=new l(a,o.get(window,"ParsleyConfig")||{},t,this.getNamespace(t));this.options=this.OptionsFactory.get(this);if(this.$element.is("form")||o.attr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs))return this.bind("parsleyForm",i);else if(this.$element.is(this.options.inputs)&&!this.$element.is(this.options.excluded))return this.isMultiple()?this.handleMultiple(i):this.bind("parsleyField",i);return this},isMultiple:function(){return this.$element.is("input[type=radio], input[type=checkbox]")&&"undefined"===typeof this.options.multiple||this.$element.is("select")&&"undefined"!==typeof this.$element.attr("multiple")},handleMultiple:function(e){var t=this,i,n,a;this.options=r.extend(this.options,o.attr(this.$element,this.options.namespace));if(this.options.multiple){n=this.options.multiple}else if("undefined"!==typeof this.$element.attr("name")&&this.$element.attr("name").length){n=i=this.$element.attr("name")}else if("undefined"!==typeof this.$element.attr("id")&&this.$element.attr("id").length){n=this.$element.attr("id")}if(this.$element.is("select")&&"undefined"!==typeof this.$element.attr("multiple")){return this.bind("parsleyFieldMultiple",e,n||this.__id__)}else if("undefined"===typeof n){if(window.console&&window.console.warn)window.console.warn("To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element);return this}n=n.replace(/(:|\.|\[|\]|\$)/g,"");if("undefined"!==typeof i)r('input[name="'+i+'"]').each(function(){if(r(this).is("input[type=radio], input[type=checkbox]"))r(this).attr(t.options.namespace+"multiple",n)});if(r("["+this.options.namespace+"multiple="+n+"]").length)for(var s=0;s<r("["+this.options.namespace+"multiple="+n+"]").length;s++)if("undefined"!==typeof r(r("["+this.options.namespace+"multiple="+n+"]").get(s)).data("Parsley")){a=r(r("["+this.options.namespace+"multiple="+n+"]").get(s)).data("Parsley");if(!this.$element.data("ParsleyFieldMultiple")){a.addElement(this.$element);this.$element.attr(this.options.namespace+"id",a.__id__)}break}this.bind("parsleyField",e,n,true);return a||this.bind("parsleyFieldMultiple",e,n)},getNamespace:function(e){if("undefined"!==typeof this.$element.data("parsleyNamespace"))return this.$element.data("parsleyNamespace");if("undefined"!==typeof o.get(e,"namespace"))return e.namespace;if("undefined"!==typeof o.get(window,"ParsleyConfig.namespace"))return window.ParsleyConfig.namespace;return a.namespace},bind:function(e,t,i,n){var a;switch(e){case"parsleyForm":a=r.extend(new d(this.$element,t||this),new s,window.ParsleyExtend).init();break;case"parsleyField":a=r.extend(new c(this.$element,t||this),new s,window.ParsleyExtend).init();break;case"parsleyFieldMultiple":a=r.extend(new c(this.$element,t||this).init(),new s,new h,window.ParsleyExtend).init(i);break;default:throw new Error(e+"is not a supported Parsley type")}if("undefined"!==typeof i)o.setAttr(this.$element,this.options.namespace,"multiple",i);if("undefined"!==typeof n){this.$element.data("ParsleyFieldMultiple",a);return a}if(new RegExp("ParsleyF","i").test(a.__class__)){this.$element.data("Parsley",a);this.__proxy__=a.__class__;r.emit("parsley:"+("parsleyForm"===e?"form":"field")+":init",a)}return a}};r.fn.parsley=r.fn.psly=function(e){if(this.length>1){var t=[];this.each(function(){t.push(r(this).parsley(e))});return t}if(!r(this).length){if(window.console&&window.console.warn)window.console.warn("You must bind Parsley on an existing element.");return}return new i(this,e)};window.ParsleyUI="function"===typeof o.get(window,"ParsleyConfig.ParsleyUI")?(new window.ParsleyConfig.ParsleyUI).listen():(new t).listen();if("undefined"===typeof window.ParsleyExtend)window.ParsleyExtend={};if("undefined"===typeof window.ParsleyConfig)window.ParsleyConfig={};window.Parsley=window.psly=i;window.ParsleyUtils=o;window.ParsleyValidator=new e(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);if(false!==o.get(window,"ParsleyConfig.autoBind"))r(document).ready(function(){if(r("[data-parsley-validate]").length)r("[data-parsley-validate]").parsley()})}(window.jQuery);window.ParsleyValidator.addValidator("notequalto",function(e,t){return e!==$(t).val()},32).addMessage("en","notequalto","This value should not be the same.");window.ParsleyValidator.addValidator("gt",function(e,t){return parseFloat(e)>parseFloat($(t).val())},32).addMessage("en","gt","This value should be greater");window.ParsleyValidator.addValidator("ge",function(e,t){return parseFloat(e)>=parseFloat($(t).val())},32).addMessage("en","ge","This value should be greater or equal");window.ParsleyValidator.addValidator("lt",function(e,t){return parseFloat(e)<parseFloat($(t).val())},32).addMessage("en","lt","This value should be less");window.ParsleyValidator.addValidator("le",function(e,t){return parseFloat(e)<=parseFloat($(t).val())},32).addMessage("en","le","This value should be less or equal");(function(e){var f=function(){if(!f.cache.hasOwnProperty(arguments[0])){f.cache[arguments[0]]=f.parse(arguments[0])}return f.format.call(null,f.cache[arguments[0]],arguments)};f.format=function(e,t){var i=1,n=e.length,a="",s,r=[],o,l,d,u,c,h;for(o=0;o<n;o++){a=p(e[o]);if(a==="string"){r.push(e[o])}else if(a==="array"){d=e[o];if(d[2]){s=t[i];for(l=0;l<d[2].length;l++){if(!s.hasOwnProperty(d[2][l])){throw f('[sprintf] property "%s" does not exist',d[2][l])}s=s[d[2][l]]}}else if(d[1]){s=t[d[1]]}else{s=t[i++]}if(/[^s]/.test(d[8])&&p(s)!="number"){throw f("[sprintf] expecting number but found %s",p(s))}switch(d[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=d[7]?s.toExponential(d[7]):s.toExponential();break;case"f":s=d[7]?parseFloat(s).toFixed(d[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&d[7]?s.substring(0,d[7]):s;break;case"u":s=s>>>0;break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase();break}s=/[def]/.test(d[8])&&d[3]&&s>=0?"+"+s:s;c=d[4]?d[4]=="0"?"0":d[4].charAt(1):" ";h=d[6]-String(s).length;u=d[6]?m(c,h):"";r.push(d[5]?s+u:u+s)}}return r.join("")};f.cache={};f.parse=function(e){var t=e,i=[],n=[],a=0;while(t){if((i=/^[^\x25]+/.exec(t))!==null){n.push(i[0])}else if((i=/^\x25{2}/.exec(t))!==null){n.push("%")}else if((i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))!==null){if(i[2]){a|=1;var s=[],r=i[2],o=[];if((o=/^([a-z_][a-z_\d]*)/i.exec(r))!==null){s.push(o[1]);while((r=r.substring(o[0].length))!==""){if((o=/^\.([a-z_][a-z_\d]*)/i.exec(r))!==null){s.push(o[1])}else if((o=/^\[(\d+)\]/.exec(r))!==null){s.push(o[1])}else{throw"[sprintf] huh?"}}}else{throw"[sprintf] huh?"}i[2]=s}else{a|=2}if(a===3){throw"[sprintf] mixing positional and named placeholders is not (yet) supported"}n.push(i)}else{throw"[sprintf] huh?"}t=t.substring(i[0].length)}return n};var t=function(e,t,i){i=t.slice(0);i.splice(0,0,e);return f.apply(null,i)};function p(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function m(e,t){for(var i=[];t>0;i[--t]=e){}return i.join("")}e.sprintf=f;e.vsprintf=t})(typeof exports!="undefined"?exports:window);"use strict";var XBBCODE=function(){var e={},n=/^(?:https?|file|c):(?:\/{1,3}|\\{1})[-a-zA-Z0-9:;@#%&()~_?\+=\/\\\.]*$/,a=/^(?:red|green|blue|orange|yellow|black|white|brown|gray|silver|purple|maroon|fushsia|lime|olive|navy|teal|aqua)$/,s=/^#?[a-fA-F0-9]{6}$/,r=/[^\s@]+@[^\s@]+\.[^\s@]+/,o=/^([a-z][a-z0-9_]+|"[a-z][a-z0-9_\s]+")$/i,m,g,l=[],_,d,u,c,h;m={b:{openTag:function(e,t){return'<span class="xbbcode-b">'},closeTag:function(e,t){return"</span>"}},bbcode:{openTag:function(e,t){return""},closeTag:function(e,t){return""}},center:{openTag:function(e,t){return'<span class="xbbcode-center">'},closeTag:function(e,t){return"</span>"}},code:{openTag:function(e,t){return'<span class="xbbcode-code">'},closeTag:function(e,t){return"</span>"},noParse:true},color:{openTag:function(e,t){var i=e.substr(1)||"black";a.lastIndex=0;s.lastIndex=0;if(!a.test(i)){if(!s.test(i)){i="black"}else{if(i.substr(0,1)!=="#"){i="#"+i}}}return'<span style="color:'+i+'">'},closeTag:function(e,t){return"</span>"}},email:{openTag:function(e,t){var i;if(!e){i=t.replace(/<.*?>/g,"")}else{i=e.substr(1)}r.lastIndex=0;if(!r.test(i)){return"<a>"}return'<a href="mailto:'+i+'">'},closeTag:function(e,t){return"</a>"}},face:{openTag:function(e,t){var i=e.substr(1)||"inherit";o.lastIndex=0;if(!o.test(i)){i="inherit"}return'<span style="font-family:'+i+'">'},closeTag:function(e,t){return"</span>"}},font:{openTag:function(e,t){var i=e.substr(1)||"inherit";o.lastIndex=0;if(!o.test(i)){i="inherit"}return'<span style="font-family:'+i+'">'},closeTag:function(e,t){return"</span>"}},i:{openTag:function(e,t){return'<span class="xbbcode-i">'},closeTag:function(e,t){return"</span>"}},img:{openTag:function(e,t){var i=t;n.lastIndex=0;if(!n.test(i)){i=""}return'<img src="'+i+'" />'},closeTag:function(e,t){return""},displayContent:false},justify:{openTag:function(e,t){return'<span class="xbbcode-justify">'},closeTag:function(e,t){return"</span>"}},large:{openTag:function(e,t){var e=e||"";var i=e.substr(1)||"inherit";a.lastIndex=0;s.lastIndex=0;if(!a.test(i)){if(!s.test(i)){i="inherit"}else{if(i.substr(0,1)!=="#"){i="#"+i}}}return'<span class="xbbcode-size-36" style="color:'+i+'">'},closeTag:function(e,t){return"</span>"}},left:{openTag:function(e,t){return'<span class="xbbcode-left">'},closeTag:function(e,t){return"</span>"}},li:{openTag:function(e,t){return"<li>"},closeTag:function(e,t){return"</li>"},restrictParentsTo:["list","ul","ol"]},list:{openTag:function(e,t){return"<ul>"},closeTag:function(e,t){return"</ul>"},restrictChildrenTo:["*","li"]},noparse:{openTag:function(e,t){return""},closeTag:function(e,t){return""},noParse:true},ol:{openTag:function(e,t){return"<ol>"},closeTag:function(e,t){return"</ol>"},restrictChildrenTo:["*","li"]},php:{openTag:function(e,t){return'<span class="xbbcode-code">'},closeTag:function(e,t){return"</span>"},noParse:true},quote:{openTag:function(e,t){return'<blockquote class="xbbcode-blockquote">'},closeTag:function(e,t){return"</blockquote>"}},right:{openTag:function(e,t){return'<span class="xbbcode-right">'},closeTag:function(e,t){return"</span>"}},s:{openTag:function(e,t){return'<span class="xbbcode-s">'},closeTag:function(e,t){return"</span>"}},size:{openTag:function(e,t){var i=parseInt(e.substr(1),10)||0;if(i<4||i>40){i=14}return'<span class="xbbcode-size-'+i+'">'},closeTag:function(e,t){return"</span>"}},small:{openTag:function(e,t){var e=e||"";var i=e.substr(1)||"inherit";a.lastIndex=0;s.lastIndex=0;if(!a.test(i)){if(!s.test(i)){i="inherit"}else{if(i.substr(0,1)!=="#"){i="#"+i}}}return'<span class="xbbcode-size-10" style="color:'+i+'">'},closeTag:function(e,t){return"</span>"}},sub:{openTag:function(e,t){return"<sub>"},closeTag:function(e,t){return"</sub>"}},sup:{openTag:function(e,t){return"<sup>"},closeTag:function(e,t){return"</sup>"}},table:{openTag:function(e,t){return'<table class="xbbcode-table">'},closeTag:function(e,t){return"</table>"},restrictChildrenTo:["tbody","thead","tfoot","tr"]},tbody:{openTag:function(e,t){return"<tbody>"},closeTag:function(e,t){return"</tbody>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},tfoot:{openTag:function(e,t){return"<tfoot>"},closeTag:function(e,t){return"</tfoot>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},thead:{openTag:function(e,t){return'<thead class="xbbcode-thead">'},closeTag:function(e,t){return"</thead>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},td:{openTag:function(e,t){return'<td class="xbbcode-td">'},closeTag:function(e,t){return"</td>"},restrictParentsTo:["tr"]},th:{openTag:function(e,t){return'<th class="xbbcode-th">'},closeTag:function(e,t){return"</th>"},restrictParentsTo:["tr"]},tr:{openTag:function(e,t){return'<tr class="xbbcode-tr">'},closeTag:function(e,t){return"</tr>"},restrictChildrenTo:["td","th"],restrictParentsTo:["table","tbody","tfoot","thead"]},u:{openTag:function(e,t){return'<span class="xbbcode-u">'},closeTag:function(e,t){return"</span>"}},ul:{openTag:function(e,t){return"<ul>"},closeTag:function(e,t){return"</ul>"},restrictChildrenTo:["*","li"]},url:{openTag:function(e,t){var i;if(!e){i=t.replace(/<.*?>/g,"")}else{i=e.substr(1)}n.lastIndex=0;if(!n.test(i)){i="#"}return'<a href="'+i+'">'},closeTag:function(e,t){return"</a>"}},"*":{openTag:function(e,t){return"<li>"},closeTag:function(e,t){return"</li>"},restrictParentsTo:["list","ul","ol"]}};function i(){g=[];var e,t,i;for(e in m){if(m.hasOwnProperty(e)){if(e==="*"){g.push("\\"+e)}else{g.push(e);if(m[e].noParse){l.push(e)}}m[e].validChildLookup={};m[e].validParentLookup={};m[e].restrictParentsTo=m[e].restrictParentsTo||[];m[e].restrictChildrenTo=m[e].restrictChildrenTo||[];i=m[e].restrictChildrenTo.length;for(t=0;t<i;t++){m[e].validChildLookup[m[e].restrictChildrenTo[t]]=true}i=m[e].restrictParentsTo.length;for(t=0;t<i;t++){m[e].validParentLookup[m[e].restrictParentsTo[t]]=true}}}_=new RegExp("<bbcl=([0-9]+) ("+g.join("|")+")([ =][^>]*?)?>((?:.|[\\r\\n])*?)<bbcl=\\1 /\\2>","gi");d=new RegExp("\\[("+g.join("|")+")([ =][^\\]]*?)?\\]([^\\[]*?)\\[/\\1\\]","gi");u=new RegExp("\\[("+l.join("|")+")([ =][^\\]]*?)?\\]([\\s\\S]*?)\\[/\\1\\]","gi");(function(){var e=[];for(var t=0;t<g.length;t++){if(g[t]!=="\\*"){e.push("/"+g[t])}}c=new RegExp("(\\[)((?:"+g.join("|")+")(?:[ =][^\\]]*?)?)(\\])","gi");h=new RegExp("(\\[)("+e.join("|")+")(\\])","gi")})()}i();function v(e,t,i,n,a,s,r){r=r||[];i++;var o=new RegExp("(<bbcl="+i+" )("+g.join("|")+")([ =>])","gi"),l=new RegExp("(<bbcl="+i+" )("+g.join("|")+")([ =>])","i"),d=s.match(o)||[],u,c,h,f,p=m[e]||{};o.lastIndex=0;if(!d){s=""}for(h=0;h<d.length;h++){l.lastIndex=0;f=d[h].match(l)[2].toLowerCase();if(p&&p.restrictChildrenTo&&p.restrictChildrenTo.length>0){if(!p.validChildLookup[f]){c='The tag "'+f+'" is not allowed as a child of the tag "'+e+'".';r.push(c)}}u=m[f]||{};if(u.restrictParentsTo.length>0){if(!u.validParentLookup[e]){c='The tag "'+e+'" is not allowed as a parent of the tag "'+f+'".';r.push(c)}}}s=s.replace(_,function(e,t,i,n,a){r=v(i,e,t,i,n,a,r);return e});return r}function f(e){e=e.replace(/\<([^\>][^\>]*?)\>/gi,function(e,t){var i=t.match(/^bbcl=([0-9]+) /);if(i===null){return"<bbcl=0 "+t+">"}else{return"<"+t.replace(/^(bbcl=)([0-9]+)/,function(e,t,i){return t+(parseInt(i,10)+1)})+">"}});return e}function p(e){return e.replace(/<bbcl=[0-9]+ \/\*>/gi,"").replace(/<bbcl=[0-9]+ /gi,"&#91;").replace(/>/gi,"&#93;")}var y=function(e,t,i,n,a){i=i.toLowerCase();var s=m[i].noParse?p(a):a.replace(_,y),r=m[i].openTag(n,s),o=m[i].closeTag(n,s);if(m[i].displayContent===false){s=""}return r+s+o};function b(e){var t=e.text;t=t.replace(_,y);return t}function w(e){e=e.replace(/\[(?!\*[ =\]]|list([ =][^\]]*)?\]|\/list[\]])/gi,"<");e=e.replace(/\[(?=list([ =][^\]]*)?\]|\/list[\]])/gi,">");while(e!==(e=e.replace(/>list([ =][^\]]*)?\]([^>]*?)(>\/list])/gi,function(e,t,i){var n=e;while(n!==(n=n.replace(/\[\*\]([^\[]*?)(\[\*\]|>\/list])/i,function(e,t,i){if(i===">/list]"){i="</*]</list]"}else{i="</*][*]"}var n="<*]"+t+i;return n})));n=n.replace(/>/g,"<");return n})));e=e.replace(/</g,"[");return e}function M(e){while(e!==(e=e.replace(d,function(e,t,i,n){e=e.replace(/\[/g,"<");e=e.replace(/\]/g,">");return f(e)})));return e}e.tags=function(){return m};e.addTags=function(e){var t;for(t in e){m[t]=e[t]}i()};e.process=function(e){var t={html:"",error:false},i=[];e.text=e.text.replace(/</g,"&lt;");e.text=e.text.replace(/>/g,"&gt;");e.text=e.text.replace(c,function(e,t,i,n){return"<"+i+">"});e.text=e.text.replace(h,function(e,t,i,n){return"<"+i+">"});e.text=e.text.replace(/\[/g,"&#91;");e.text=e.text.replace(/\]/g,"&#93;");e.text=e.text.replace(/</g,"[");e.text=e.text.replace(/>/g,"]");while(e.text!==(e.text=e.text.replace(u,function(e,t,i,n){n=n.replace(/\[/g,"&#91;");n=n.replace(/\]/g,"&#93;");i=i||"";n=n||"";return"["+t+i+"]"+n+"[/"+t+"]"})));e.text=w(e.text);e.text=M(e.text);i=v("bbcode",e.text,-1,"","",e.text);t.html=b(e);if(t.html.indexOf("[")!==-1||t.html.indexOf("]")!==-1){i.push("Some tags appear to be misaligned.")}if(e.removeMisalignedTags){t.html=t.html.replace(/\[.*?\]/g,"")}if(e.addInLineBreaks){t.html='<div style="white-space:pre;">'+t.html+"</div>"}t.html=t.html.replace("&#91;","[");t.html=t.html.replace("&#93;","]");t.error=i.length===0?false:true;t.errorQueue=i;return t};return e}();var gcLayerTree=new giscloud.blja.Class({Extends:omModule,options:{editLayerOnDblClick:true,lockLayerSelection:false,multipleSelection:true,forprint:false,url:fno.liveSite+"modules_gc/layer/clayer.php",module:"layer",parentDiv:"#gc_layers_box"},initialize:function(e,t,i){this.setOptions(i);this.container=typeof e=="string"?$("#"+e):e;this.treecontainer=this.container.find(".tree-container");this.last_selected_lid=null;this.gclayer=t;giscloud.ui.map.bind("loaded",this.initLayerList.bind(this)).bind("reloaded",this.initLayerList.bind(this));var n;if(this.options.forprint){this.container.find(".gcheader").hide();this.treecontainer.css("height","inherit")}else{n=this.container.find(".gcheader");if(n){var a=this.container.find(".gcheader .gc-add-layer");if(a){a.click(function(){if(gcapp.checkAndWarnForLogin()&&$("div[id^='filemanager']").length===0)t.throttledNewLayerButton()});var s=this.container.find(".gcheader .gc-remove-layer");s.click(this.deleteLayer.bind(this));this.container.find(".gcheader .gc-add-folder").click(this.newFolder.bind(this));this.container.find(".gcheader .gc-share-layer").click(this.shareLayerDts.bind(this))}this.container.find(".gcheader .gc-zoom-to-layer").click(this.zoomToLayer.bind(this))}}if(n){var r=this.container.find(".gcheader .layer_eye");var o=this.container.find(".gcheader .lockicon");if(r.length&&o.length){r.click(this.onGlobalEyeClick.bind(this));o.click(this.onGlobalLockClick.bind(this))}}this.loader=this.container.find(".overlay")},toolbar:function(e,t){if(!e||!e.length)return;var i=this.container.find(".gcheader .gc-add-layer"),n=this.container.find(".gcheader .gc-share-layer"),a=this.container.find(".gcheader .gc-add-folder"),s=this.container.find(".gcheader .gc-remove-layer");if(e.contains("addlayer")&&i.length)if(t)i.show();else i.hide();if(e.contains("addfolder")&&i.length)if(t)a.show();else a.hide();if(e.contains("deletelayer")&&i.length)if(t)s.show();else s.hide();if(e.contains("sharelayer")&&i.length)if(t)n.show();else n.hide()},onOrderChange:function(e,t,i,n){if(i!=n){this.changeParent(t,i,function(){this.orderChange(e,t,i,n)})}else{this.orderChange(e,t,i,n)}},orderChange:function(e,t,i,n){if(fnm.isVisible()){var a=[],s=[],r=[],o=0,l,d=fnl.getLayerById(t);for(var u=0;u<e.length;u++){var c=fnl.getLayerById(e[u].id);if(c.id){a.push(c.id)}if(c.type=="folder"||c.render_method==5){continue}if(c.grp>=1){l="layer_group_"+c.grp}else if(c.raster!="t"&&c.id){l="layer"+c.id;if(c.styles){for(var h=0;h<c.styles.length;h++){if(c.styles[h].labelfield||c.styles[h].textfield){r.push(c.id);break}}}}else{continue}if(fnw.getLayerByName(l)){s.push(e[u])}}if(!d||d.source.type!="gcmap"){fnw.setLayersOrder(s.map(function(e){return e.id}))}var f=this;if(user.id>=0){this.tttree.loader("show");fnl.saveOrder(a.join(),currentMapID,d,function(e){if(!d||d.source.type==="gcmap"){giscloud.ui.map&&giscloud.ui.map.loading.done(function(){giscloud.ui.map.reloadMap()})}f.tttree.loader("hide")})}}},serialize:function(){var i=[];if(!this.tttree)return i;var e=this.tttree.layersOrder();$.each(e,function(e,t){i.push(t.id)});return i},getLayers:function(i){var n=[];if(!this.tttree)return n;var e=this.tttree.layers();if(!e)return[];var a=["buffer","raster","wms","wmts"];if(!i||i&&!i.tile){a.push("tile")}$.each(e,function(e,t){if(t&&t.type&&!($.inArray(t.type,a)>-1||$.inArray(t.type,["feature"])>-1||$.inArray(t.type,["folder"])>-1||t.raster=="t")&&(!(i&&i.pgOnly)||t.source&&t.source.type=="pg")&&(!(i&&i.tmsOnly)||t.source&&t.source.type=="tile")){n.push(t)}});return n},onChangeParentComplete:function(e){this.hideLoader();if(!e){om.showError("There was an error.");return}if(e.result=="yes"){}else{om.showError(e.msg)}},changeParent:function(e,t,i){if(!editable){return}var n={module:this.options.module,task:"savestate",property:"parent",value:t,lid:e};this.showLoader();this.call(n,"savestate",function(){this.onChangeParentComplete.apply(this,arguments);if(typeof i==="function"){i.apply(this,arguments)}}.bind(this))},onLoad:function(e){this.hideLoader()},onToggle:function(e,t){if(!e)return;var i=fn.getMap(),n=layerList.getLayerById(e);if(i.owner.toString()===user.id.toString()&&n.mapId.toString()===i.mid.toString()){if(!layerStateAID[e])layerStateAID[e]={};clearInterval(layerStateAID[e].intOpenedID);layerStateAID[e].intOpenedID=this.gclayer.saveLayerState.delay(1e3,this,[e,"opened",t])}else{if(n){n.opened=t?"t":"f"}this.saveLayersStates()}var a=fnl.getLayerById(e);this.fireEvent("toggle",{target:this,data:a,opened:t})},load:function(e){this.showLoader()},expand:function(){this.tttree.expandAll()},hideLoader:function(){this.loader.hide()},showLoader:function(){this.loader.show();if(this.loader.showLoader)this.loader.showLoader()},unselect:function(e){if(!this.options.lockLayerSelection){this.tttree.unselect();if(!e){gcconsole.log("gclayertree: firing event: 'unselect' ");this.fireEvent("unselect")}}},setSelection:function(e,t){if(!this.tttree)return;var i=e.length;if(!(i>0))return;var n=is_numeric(e[0]);if(!n&&typeof e[0]!="object")return;this.tttree.unselect();for(var a=0;a<i;a++){var s=e[a];if(n){this.tttree.select(e)}else if(s.data){var r=this.getNodeById(s.data.id)}}},saveLayersStates:function(){var e=fn.getMap(),r=e.mid.toString(),o=e.owner.toString()!=user.id.toString(),l={},d=false,t;if(user.id<0){return l}$.each(layerList.recursive(),function(e,t){var i=t.data,n=false,a,s;if(i){a=layerList.getLayerById(i.id),s=a.mapId.toString(),n=o||a.mapId!==r}if(n){d=true;if(i.type=="folder"){l[i.id]={v:a.visible==="t",o:t.state.opened}}else{l[i.id]={v:a.visible==="t",l:a.lock==="t",o:t.state.opened}}}});if(d){t=JSON.stringify(l);giscloud.options.create({resource:"users",id:user.id},{name:"MAP_"+currentMapID+"_LAYERS_STATES",value:t}).done(function(){user.options["MAP_"+currentMapID+"_LAYERS_STATES"]=t})}return l},selectByName:function(i,n){if(!this.tttree)return;this.unselect(true);var a=this;$.each(this.tttree.recursive(),function(e,t){if(!t.data)return;if(this.data&&this.data.title==i)a.tttree.select(this.data.id,n)})},selectByID:function(i,n){if(!this.tttree)return;this.unselect(true);var a=this;$.each(this.tttree.recursive(),function(e,t){if(!t.data)return;if(this.data&&this.data.id==i)a.tttree.select(this.data.id,n)})},getByName:function(i,e){if(!this.tttree)return;this.unselect(true);var t=this,n;$.each(this.tttree.recursive(),function(e,t){if(!t.data)return;if(this.data&&this.data.title==i)n=t});return n},getSelected:function(){if(!this.tttree)return;var e=this.tttree.selected();return e&&e.length>0?e[0]:null},getSelection:function(){if(!this.tttree)return;return this.tttree.selected()},getNodeById:function(e){return this.tttree?this.tttree.getNodeById(e):null},empty:function(e){if(this.tttree)this.tttree.destroy()},selectAll:function(){if(this.tttree)this.tttree.selectAll()},setSize:function(e,t){if(t&&this.treecontainer.length)this.treecontainer.css("height",t)},onSelect:function(e,t,i,n){if(!n)return;var a=n,s,r;if(this.last_selected_lid==a.id)return;this.last_selected_lid=a.id;if(fnm.isVisible()){r=a.grp>=1?"layer_group_"+a.grp:"layer"+a.id;s=fnw.getLayerByName(r)}gcconsole.log("gclayertree: firing event: 'select' ");this.fireEvent("select",{layer:a,flayer:s})},onDblClick:function(e,t,i,n,a){if(this.options.editLayerOnDblClick&&jQuery.inArray(t,["folder","giscloud"])==-1){if(user.id>0)this.gclayer.editLayerByID(n.id,a);else this.zoomToLayer(n.id)}if(t=="folder"){this.rename(i)}gcconsole.log("gclayertree: firing event: 'dblclick' ");this.fireEvent("dblclick",n)},onLockClick:function(e,t){var i=layerList.getLayerById(e);if(!layerStateAID[e])layerStateAID[e]={};clearInterval(layerStateAID[e].intLockID);var n=fn.getMap();if(n.owner===user.id.toString()&&i.mapId.toString()===n.mid.toString()){layerStateAID[e].intLockID=this.gclayer.saveLayerState.delay(1e3,null,[e,"lock",t])}else{this.saveLayersStates()}},onRenameComplete:function(e){this.hideLoader();if(!e){om.showError("There was an error.");return}if(e.result=="yes"){om.showConfirm(e.msg)}else{om.showError(e.msg)}},onRename:function(e,t,i){if(t==i)return;var n={module:this.options.module,task:"rename",newname:i,lid:e};this.showLoader();this.call(n,"rename",this.onRenameComplete.bind(this))},rename:function(e){if(!editable){alert(gclang.mmod.no_edit_permission);return}var t=this.getNodeById(e);if(t&&t.original&&t.original.belongsToGcMap){alert(gclang.You_can_not_edit_sublayer_s__of_the_included_GIS_Cloud_map+".");return}this.tttree.rename(e)},initDEMList:function(){if(fno.app_instance_type!=="mapeditor")return;var e=this.getLayers().filter(function(e){return e.type==="dem"}).sort(function(e,t){if(e.order<t.order){return 1}else return-1});if(!e.length){$("#customDemListContainer").hide();return}var i=this;var t=function(e){var t=e.visible==="t"?"f":"t";e.visible=e.visible==="t"?"f":"t";i.initDEMList();if(t==="t"){giscloud.ui.map.instance.getLayerById("layer"+e.id).enable()}else{giscloud.ui.map.instance.getLayerById("layer"+e.id).disable()}i.gclayer.saveLayerState.delay(100,null,[e.id,"visible",t,null])};var n=e.map(function(e){return $("<div/>",{class:"dem-row"}).append($("<div/>").append($("<i/>",{class:"gc-ll-icon gc-vicon gc-eye "+(e.visible==="t"?"gc-eye-visible":"")}).on("click",function(){t(e)}),$("<div/>",{class:"gc-icon-mountains"}),$("<div/>",{text:e.name})),$("<div/>",{class:"dropdown",id:"dem-dropdown-"+e.id}).append($("<div/>",{class:"dropdown-icon-container",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}).append($("<i/>",{class:"fa fa-ellipsis-v dropdown-toggle"})),$("<div/>",{class:"dropdown-menu dropdown-menu-right","aria-labelledb":"dropdownMenuButton"}).append($("<div/>",{class:"dropdown-item",href:"#",text:__("Zoom to DEM")}).on("click",function(){i.zoomToLayer(e.id)}).prepend($("<div/>",{class:"gc-icon-zoom"})),$("<div/>",{class:"dropdown-item",href:"#",text:__("Delete Local DEM"),onClick:"gcapp.gclayer.deleteLayer("+e.id+")"}).prepend($("<div/>",{class:"gc-icon-trash"})),$("<div/>",{class:"dropdown-item",href:"#",text:__("Open Map Properties"),onClick:"if (gcapp.checkAndWarnForLogin()) gcproject.editMap(undefined, 'threeD_options_tab');"}).prepend($("<i/>",{class:"fa fa-external-link"})))).on("show.bs.dropdown",function(){var e=window.innerHeight-$(this).offset().top;$(this).find(".dropdown-menu").css({position:"fixed",top:e>$(this).find(".dropdown-menu").outerHeight()?$(this).offset().top:$(this).offset().top-$(this).find(".dropdown-menu").outerHeight(),left:$(this).offset().left-$(this).find(".dropdown-menu").width()})}))});n.push($("<div/>",{class:"dem-row"}).append($("<div/>").append($("<i/>",{class:"gc-ll-icon gc-vicon gc-eye gc-eye-visible",style:"visibility: hidden"}),$("<div/>",{class:"gc-icon-world"}).append($("<div/>",{class:"path1"}),$("<div/>",{class:"path2"})),$("<div/>",{text:__("Default Terrain")})),$("<div/>",{class:"dropdown",id:"dem-dropdown-default-dem-layerlist"}).append($("<div/>",{class:"dropdown-icon-container",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}).append($("<i/>",{class:"fa fa-ellipsis-v dropdown-toggle"})),$("<div/>",{class:"dropdown-menu dropdown-menu-right","aria-labelledb":"dropdownMenuButton"}).append($("<div/>",{class:"dropdown-item",href:"#",text:__("Open Map Properties"),onClick:"if (gcapp.checkAndWarnForLogin()) gcproject.editMap(undefined, 'threeD_options_tab');"}).prepend($("<i/>",{class:"fa fa-external-link"})))).on("show.bs.dropdown",function(){var e=window.innerHeight-$(this).offset().top;$(this).find(".dropdown-menu").css({position:"fixed",top:e>$(this).find(".dropdown-menu").outerHeight()?$(this).offset().top:$(this).offset().top-$(this).find(".dropdown-menu").outerHeight(),left:$(this).offset().left-$(this).find(".dropdown-menu").width()})}).on("shown.bs.dropdown",function(){var e=fn.getMap();var t=e.options&&e.options.exaggeration||1})));$("#customDemList").empty().append(n);if(giscloud.ui.map.getMode()==="3D")$("#customDemListContainer").show()},initLayerList:function(e){if(window.layerList&&window.layerList.isDragging()){return false}$("#layer_list_parent").trigger("mouseup");var t=this.container.find(".gcheader .gc-add-layer"),i=this.container.find(".gcheader .gc-remove-layer"),n=this.container.find(".gcheader .gc-add-folder"),a=this.container.find(".gcheader .gc-share-layer"),s=!e,r=this.inViewerMode(),o={dropdownMenu:true,locks:true,propagateDblClick:true,selectable:true,dnd:true,responsive:fno.mobilebrowser};if(t&&t.length)if(!r)t.visibility(1);else t.visibility(0);if(i.length)if(!r)i.visibility(1);else i.visibility(0);if(n.length)if(!r)n.visibility(1);else n.visibility(0);if(a.length)if(!r)a.visibility(1);else a.visibility(0);this.tree=$("#layer_list_parent");if(this.tree.attr("gc-propagate-dblclick")==="false"){o.propagateDblClick=false}if(this.tree.attr("gc-lock")==="false"){o.locks=false}if(this.tree.attr("gc-right-menu")==="false"){o.dropdownMenu=false}if(this.tree.attr("gc-responsive")){o.responsive=true}if(this.tree.attr("gc-reorder")==="false"){o.dnd=false}if(this.tree.attr("gc-selectable")==="false"){o.selectable=false}if(o.responsive){$("#gc_layers_box .gcheader.gc-layer-list-menu").hide()}window.layerList=this.tttree=new giscloud.ui.LayerList(giscloud.ui.map,"layer_list_parent",s,o);$(window).on("afterResize",this.setLayerListSize.bind(this));this.tttree.bind("ready",this.setLayerListSize.bind(this));this.tttree.bind("afterOpen",this.setLayerListSize.bind(this));this.tttree.bind("afterClose",this.setLayerListSize.bind(this));this.tttree.bind("select",this.onSelect.bind(this));if(o.propagateDblClick){this.tttree.bind("dblclick",this.onDblClick.bind(this))}this.tttree.bind("orderchange",this.onOrderChange.bind(this));this.tttree.bind("open",this.onToggle.bind(this));this.tttree.bind("close",this.onToggle.bind(this));this.tttree.bind("visibility",this.onCheckBoxChange.bind(this));this.tttree.bind("lock",this.onLockClick.bind(this));this.tttree.bind("rename",this.onRename.bind(this));this.tttree.bind("expressionVisibilityChange",this.onExpressionVisibilityChange.bind(this));this.tttree.bind("menu_before",this.onMenuBefore.bind(this));this.tttree.bind("menu_action",this.onMenuAction.bind(this));this.tttree.bind("opacity",this.onOpacity.bind(this));this.tttree.bind("reload",this.onReload.bind(this));var l=this;$("#layerComponentsSlider").draggable({axis:"y",stop:function(){var e=$(this).position().top;l.setListsHeights(e)}});$("#dem-list-collapsable").on("shown.bs.collapse",function(){l.setDEMListSize()});if(this.tttree.initialized){this.onReload()}$(this.options.parentDiv).trigger("gc_layers_box.init");var d,u=fn.getMap()&&fn.getMap().options;d=u.LAYER_LIST_WIDTH?u.LAYER_LIST_WIDTH:user.options.LAYER_LIST_WIDTH?user.options.LAYER_LIST_WIDTH:undefined;if($.isNumeric(d*1)){$(this.options.parentDiv).css("min-width",d*1)}},setListsHeights:function(e){var t=this.tree.position().top;this.tree.height(e-t);$("#layerComponentsSlider").css({top:0});this.setLayerListSize()},setLayerListSize:function(){if($("#customDemListContainer").is(":hidden")){if(this.tree.css("height")){this.tree.css("height","")}}if(this.tree.actual("outerHeight")<this.tree.children().height()){this.tree.css({overflow:"hidden","overflow-y":"auto"})}else{this.tree.css({height:this.tree.actual("outerHeight"),overflow:"hidden"})}this.setDEMListSize()},setDEMListSize:function(){if($("#customDemListContainer").is(":hidden"))return;var e=$("#customDemList");if(!e||!e.children().length)return;if(e.actual("outerHeight")<$("#customDemList")[0].scrollHeight){e.css({overflow:"hidden","overflow-y":"auto","max-height":$("#customDemList")[0].scrollHeight})}else{e.css({height:"",overflow:"hidden","max-height":$("#customDemList")[0].scrollHeight})}var t=document.body.getBoundingClientRect().bottom;var i=$("#customDemList")[0].getBoundingClientRect().bottom;var n=$("#customDemList")[0].getBoundingClientRect().top;var a=i-t;if(a>0){e.css({height:e[0].scrollHeight,overflow:"hidden","overflow-y":"auto","max-height":i-a-n-20})}},onReload:function(){var e=fn.getMap();if(e&&e.options&&e.options.DEFAULT_SELECTED_LAYER_ID){this.tttree.select(e.options.DEFAULT_SELECTED_LAYER_ID)}else if(this.options.lastSelection){this.tttree.select(this.options.lastSelection);this.options.lastSelection=null}else if(gcapp.options.saveState){var t=localStorage["giscloud-last-selected-layer"+currentMapID];this.tttree.select(t)}if(this.options.zoomToLayer){if(this.options.zoomToLayer&&is_numeric(this.options.zoomToLayer)&&!this.tttree.getLayerById(this.options.zoomToLayer)){giscloud.layers.byId(parseInt(this.options.zoomToLayer)).done(function(e){this.zoomToLayer.bind(this)})}else{var i=this.tttree.getLayerById(this.options.zoomToLayer);if(!fnw.isSrcBasemap(i.source.src)){this.zoomToLayer(this.options.zoomToLayer)}}this.options.zoomToLayer=null}gcconsole.log("gclayertree: firing event 'reload'");this.fireEvent("reload",{target:this});this.initDEMList()},reload:function(e){this.initLayerList(e)},inViewerMode:function(){return fno.viewerSite==fno.liveSite||fno.app_instance_type=="mapviewer"||user.options.LAYER_MODULE_BUTTONS_HIDE==1||!editable},inRealViewerMode:function(){return fno.viewerSite==fno.liveSite||fno.app_instance_type=="mapviewer"||user.options.LAYER_MODULE_BUTTONS_HIDE==1},onMenuBefore:function(e,t){if(this.inRealViewerMode()){return}var i,n,a=false,s=false,r=false;i=this.tttree.getLayerById(t.data.id);a=gcapp.isEditable(i,true);if(jQuery.isArray(i.datasource.permissions)){s=jQuery.inArray("EXPORT",i.datasource.permissions.concat(fn.getMap().permissions))>-1;r=jQuery.inArray("SHARE",i.datasource.permissions)>-1;n=jQuery.inArray("OWNER",i.datasource.permissions)>-1}if(jQuery.inArray(t.data.type,["folder","giscloud"])==-1){if(n||a){e.push({action:"editlayer",text:gclang.Edit_Layer});e.push({action:"delete",text:gclang.Delete_Layer})}if(n||r){e.push({action:"sharelayer",text:gclang.Share_Layer})}if(n){e.push({action:"duplicate",text:gclang.Duplicate_Layer})}if(n||s){e.push({action:"export",text:gclang.Export_layer})}}else{if(n||a){e.push({action:"renamefolder",text:"Rename folder"});e.push({action:"delete",text:"Remove folder"})}}},onMenuAction:function(e,t){switch(e){case"newfolder":this.newFolder();break;case"newlayer":gcapp.gclayer.newLayer();break;case"editlayer":gcapp.gclayer.editLayerByID(t);break;case"renamefolder":this.tttree.rename(t);break;case"sharelayer":gcapp.gclayer.layerDatasourceShare(t);break;case"delete":gcapp.gclayer.deleteLayer(t);break;case"zoomtolayer":this.zoomToLayer(t);break;case"duplicate":gcapp.gclayer.duplicateLayer(t);break;case"export":gcapp.gclayer.exportLayer();break}},deleteLayer:function(){if(fnm.isVisible()){var e=fnl.getSelectedLayers(true);if(!e){alert(gclang.lmod.no_selection);return}if(gcApp.utils.isMdcpLayerOfCurrentMap(e.id)){alert("This layer is a part of an MDC project and cannot be deleted.");return}gcapp.gclayer.deleteLayer(e.id)}},onOpacity:function(e,t){if(fnm.isVisible()){var i=fnl.getLayerById(e);if(!i)return;if(editable){function s(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(n.id)t.push(n.id);if(n.type=="folder"){var a=fnl.getChildren(n.id);if(a.length)t=t.combine(s(a))}}return t}var n=s([i]),a=[],r=[],o=fn.getMap().mid.toString(),l,d,u;while(n.length>0){l=layerList.getLayerById(n[0]);if(l.prevAlpha===t){n.splice(0,1)}else if(l.mapId.toString()===o){a.push(n.splice(0,1))}else{r.push(n.splice(0,1))}l.prevAlpha=t}if(a.length>0){u=a.join();if(!layerStateAID[u]){layerStateAID[u]={}}clearInterval(layerStateAID[u].intAlphaID);layerStateAID[u].intAlphaID=this.gclayer.saveLayerState.delay(500,this,[u,"alpha",t,i.grp==2])}if(r.length>0){u=r.join();if(!layerStateAID[u]){layerStateAID[u]={}}clearInterval(layerStateAID[u].intAlphaID);layerStateAID[u].intAlphaID=this.saveLayersStates.delay(500,this)}}}},setData:function(e){if(!e)return;$.each($("#layerlist .mif-tree-checkbox"),function(e,t){$(t).attr("title",gclang.Show_hide_the_layer)});$.each($("#layerlist .mif-tree-icon2"),function(e,t){$(t).attr("title",gclang.Lock_unlock_the_layer)})},onCheckBoxChange:function(r,o){var l=this;window.layerList.layersLoading.done(function(){var e=window.layerList.getLayerById(r),t=e.mapId.toString(),i=fn.getMap(),n=i.mid.toString(),a=i.owner.toString(),s=user.id.toString();if(a===s&&t===n){if(!layerStateAID[r]){layerStateAID[r]={}}clearInterval(layerStateAID[r].intVisID);layerStateAID[r].intVisID=l.gclayer.saveLayerState.delay(1e3,null,[r,"visible",o,null,function(e){}])}else{l.saveLayersStates()}})},onExpressionVisibilityChange:function(r,o,l){window.layerList.layersLoading.done(function(){var e=window.layerList.getLayerById(r),t=e.mapId.toString(),i=fn.getMap(),n=i.mid.toString(),a=i.owner.toString(),s=user.id.toString();if(a===s&&t===n){e.styles[o].visible=l;e.update().then(function(){giscloud.maps.reset(n,null,{init:0})})}})},onVisibiltyIconClick:function(node,state,noSave){var that=this;if(fnm.isVisible()){node.recursive(function(){var node=this,lid,lids,layergrp,layername,layer,map,labellayer,value,data;if(node.children&&node.children.length>0&&(node.data.tip==="folder"||node.type.contains("rasterfolder"))){}else if(node.data.render_method===5){geomrenderer.visibility(node.data.id,state)}else if(node.type!=="folder"&&node.data.tip!=="folder"&&node.type[0]!=="feature"){layergrp=node.data.grp;layername=layergrp>=1?"layer_group_"+layergrp:"layer"+node.data.id;layer=fnw.getLayerByName(layername);labellayer=fnw.getLayerByName("l"+layername);if(state){if(layer)layer.enable();if(labellayer){labellayer.enable()}value=true}else{if(layer)layer.disable();if(labellayer){labellayer.disable()}value=false}if(layergrp!=null){lids=[];for(var i=0;i<fnl.getLayersNum();i++){data=fnl.getLayer(i);if(data.raster=="t"){lids.push(data.id)}}lid=lids.join()}else{lid=node.data.id}}if(!noSave&&lid){map=fn.getMap(),layer=layerList.getLayerById(lid);if(map.owner.toString()===user.id.toString&&layer.mapId.toString()===map.mid.toString()){if(!layerStateAID[lid]){layerStateAID[lid]={}}clearInterval(layerStateAID[lid].intVisID);layerStateAID[lid].intVisID=that.gclayer.saveLayerState.delay(1e3,null,[lid,"visible",value,null,function(evt){node.data["visible"]=eval(evt.newvalue)?"t":"f"}])}else{node.data["visible"]=value?"t":"f";that.saveLayersStates()}}})}},newFolder:function(){if(!editable){alert(gclang.mmod.no_edit_permission);return}var e="New Folder",t,i,n,a,s={module:this.options.module,task:"newfolder",newname:e,mid:currentMapID,plid:null};this.showLoader();this.call(s,"newfolder",this.onNewFolderComplete.bind(this))},onNewFolderComplete:function(e){this.hideLoader();if(!e){om.showError("There was an error.");return}giscloud.log.push("create_folder_in_layerlist",{username:user.username,mapid:giscloud.ui.map.mapId,layerid:e.lid});if(e.result=="yes"){this.reload(true);om.showConfirm(e.msg)}else{om.showError(e.msg)}},editLayer:function(e){var t=this.tttree.selected();if(t.length==0){alert(gclang.lmod.no_selection);return}this.gclayer.editLayerByID(t[0].id)},shareLayerDts:function(e){gcapp.gclayer.layerDatasourceShare()},visibility:function(e,t){var i=this.getNodeById(e),n=i.data;if(!i)return;i["switch"]=(t?"checked":"unchecked",true);i.data.visible=t?"t":"f";var a=n.grp==1?"layer_group_"+n.grp:"layer"+n.id;var s=fnw.getLayerByName(a);if(!s)return;if(t)s.enable();else s.disable()},toggle:function(e,t,i){if(!this.tttree)return;this.tttree.toggle(e,t)},lock:function(e,t){var i=this.getNodeById(e),n=i.data;if(!i)return;if(i.icon2Click){i.icon2Click(null,true,!t)}i.data.lock=t?"t":"f";var a=n.grp==1?"layer_group_"+n.grp:"layer"+n.id;var s=fnw.getLayerByName(a);if(!s)return;s.setSelectable(!t)},zoomToLayer:function(e){var t,a=this;if(!fnm.isVisible()){alert(gclang.mmod.not_visible);return}if(typeof e==="object"&&(!e.type||e.type!=="click")){t=e}else if(!is_numeric(e)){var i=fnl.getSelectedLayers(true);if(!i)return;e=i.id;t=this.tttree.getLayerById(e)}else{t=this.tttree.getLayerById(e)}if(!t){alert(gclang.lmod.no_selection);return}if(["folder","rasterfolder","basemapfolder","giscloud"].contains(t.type)){var n=1e9;var s={left:n,bottom:n,right:-n,top:-n};$.each(layerList.recursive(e),function(e,t){if(t.data&&t.data.type!="folder"&&t.data.id){var i=a.tttree.getLayerById(t.data.id);if(i){var n=i.bounds;if(n.left<s.left)s.left=n.left;if(n.bottom<s.bottom)s.bottom=n.bottom;if(n.right>s.right)s.right=n.right;if(n.top>s.top)s.top=n.top}}});if(s.left!=n)fnw.setViewBoundAnim(s.left,s.bottom,s.right,s.top);return}if(t.grp==2){fnw.setViewBoundAnim(t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top)}else{var r=t.grp==1?"layer_group_"+t.grp:"layer"+t.id;var t=fnw.getLayerByName(r);if(t){var s=t.getBound();fnw.setViewBoundAnim(s.xMin,s.yMin,s.xMax,s.yMax)}}},onGlobalEyeClick:function(e){if(!fnm.isVisible())return;var t=$(e.target).hasClass("unchecked");$(e.target).toggleClass("unchecked");var i;if(!t){i=false}else{i=true}var n=[];var a=this.serialize();$.each(layerList.recursive(),function(e,t){if(!t.data)return;n.push(t.data.id);if(i)layerList.show(t.data.id);else layerList.hide(t.data.id)});var s=fn.getMap();if(s.owner==user.id){var r=n.join();if(!layerStateAID[r])layerStateAID[r]={};clearInterval(layerStateAID[r].intVisID);layerStateAID[r].intVisID=this.gclayer.saveLayerState.delay(1e3,this,[r,"visible",i])}else{this.saveLayersStates()}},onGlobalLockClick:function(e){if(!fnm.isVisible())return;var t=$(e.target).hasClass("unchecked");$(e.target).toggleClass("unchecked");var i;if(!t){i=false}else{i=true}var n=[];var a=this.serialize();$.each(layerList.recursive(),function(e,t){if(!t.data)return;n.push(t.data.id);if(i)layerList.lock(t.data.id);else layerList.unlock(t.data.id)})}});(function(h,f,e,t){var i="nivoLightbox",n={effect:"fade",theme:"default",keyboardNav:true,clickOverlayToClose:true,onInit:function(){},beforeShowLightbox:function(){},afterShowLightbox:function(e){},beforeHideLightbox:function(){},afterHideLightbox:function(){},onPrev:function(e){},onNext:function(e){},errorMessage:"The requested content cannot be loaded. Please try again later."};function a(e,t){this.el=e;this.$el=h(this.el);this.options=h.extend({},n,t);this._defaults=n;this._name=i;this.init()}a.prototype={init:function(){var i=this;if(!h("html").hasClass("nivo-lightbox-notouch"))h("html").addClass("nivo-lightbox-notouch");if("ontouchstart"in e)h("html").removeClass("nivo-lightbox-notouch");this.$el.on("click",function(e){e.preventDefault();i.showLightbox()});if(this.options.keyboardNav){h("body").off("keyup").on("keyup",function(e){var t=e.keyCode?e.keyCode:e.which;if(t==27)i.destructLightbox();if(t==37)h(".nivo-lightbox-prev").trigger("click");if(t==39)h(".nivo-lightbox-next").trigger("click")})}this.options.onInit.call(this)},showLightbox:function(){var i=this;this.options.beforeShowLightbox.call(this);var e=this.constructLightbox();if(!e)return;var n=e.find(".nivo-lightbox-content");if(!n)return;var a=this.$el;h("body").addClass("nivo-lightbox-body-effect-"+this.options.effect);var t=a.attr("href");var s=t.match(".*/features/[0-9]+");var r=t.split("/")[9];if(f.location.protocol==="https:"&&t.indexOf(f.location.protocol)!==0){f.open(t,"_blank");i.destructLightbox();return}if(s&&r){h.getJSON(s,function(e,t){var i=t.data[e];if(i&&i.match("^___json*")){i=JSON.parse(i.replace("___json",""));this.processContent(n,a,i&&i[0].panorama)}else{this.processContent(n,a)}}.bind(this,r))}else{this.processContent(n,a)}if(this.$el.attr("data-lightbox-gallery")){var i=this,o=h('[data-lightbox-gallery="'+this.$el.attr("data-lightbox-gallery")+'"]');h(".nivo-lightbox-nav").show();h(".nivo-lightbox-prev").off("click").on("click",function(e){e.preventDefault();var t=o.index(a);a=o.eq(t-1);if(!h(a).length)a=o.last();i.processContent(n,a);i.options.onPrev.call(this,[a])});h(".nivo-lightbox-next").off("click").on("click",function(e){e.preventDefault();var t=o.index(a);a=o.eq(t+1);if(!h(a).length)a=o.first();i.processContent(n,a);i.options.onNext.call(this,[a])})}setTimeout(function(){e.addClass("nivo-lightbox-open");i.options.afterShowLightbox.call(this,[e])},1)},processContent:function(i,e,t){var n=this;var a=e.attr("href");var s=e&&e[0]&&e[0].text;i.html("").addClass("nivo-lightbox-loading");if(this.isHidpi()&&e.attr("data-lightbox-hidpi")){a=e.attr("data-lightbox-hidpi")}if(!t&&(a.match(/\.(jpeg|jpg|gif|png)$/i)!=null||s&&s.match(/\.(jpeg|jpg|gif|png)$/i)!==null)){var r=h("<img>",{src:a});r.one("load",function(){var e=h('<div class="nivo-lightbox-image" />');e.append(r);i.html(e).removeClass("nivo-lightbox-loading");e.css({"line-height":h(".nivo-lightbox-content").height()+"px",height:h(".nivo-lightbox-content").height()+"px"});h(f).resize(function(){e.css({"line-height":h(".nivo-lightbox-content").height()+"px",height:h(".nivo-lightbox-content").height()+"px"})})}).each(function(){if(this.complete)h(this).load()});r.error(function(){var e=h('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");i.html(e).removeClass("nivo-lightbox-loading")})}else if(video=a.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/)){var o="",l="nivo-lightbox-video";if(video[1]=="youtube"){o="http://www.youtube.com/v/"+video[4];l="nivo-lightbox-youtube"}if(video[1]=="youtu"){o="http://www.youtube.com/v/"+video[3];l="nivo-lightbox-youtube"}if(video[1]=="vimeo"){o="http://player.vimeo.com/video/"+video[3];l="nivo-lightbox-vimeo"}if(o){var d=h("<iframe>",{src:o,class:l,frameborder:0,vspace:0,hspace:0,scrolling:"auto"});i.html(d);d.load(function(){i.removeClass("nivo-lightbox-loading")})}}else if(e.attr("data-lightbox-type")=="ajax"){var n=this;h.ajax({url:a,cache:false,success:function(e){var t=h('<div class="nivo-lightbox-ajax" />');t.append(e);i.html(t).removeClass("nivo-lightbox-loading");if(t.outerHeight()<i.height()){t.css({position:"relative",top:"50%","margin-top":-(t.outerHeight()/2)+"px"})}h(f).resize(function(){if(t.outerHeight()<i.height()){t.css({position:"relative",top:"50%","margin-top":-(t.outerHeight()/2)+"px"})}})},error:function(){var e=h('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");i.html(e).removeClass("nivo-lightbox-loading")}})}else if(a.substring(0,1)=="#"){if(h(a).length){var u=h('<div class="nivo-lightbox-inline" />');u.append(h(a).clone().show());i.html(u).removeClass("nivo-lightbox-loading");if(u.outerHeight()<i.height()){u.css({position:"relative",top:"50%","margin-top":-(u.outerHeight()/2)+"px"})}h(f).resize(function(){if(u.outerHeight()<i.height()){u.css({position:"relative",top:"50%","margin-top":-(u.outerHeight()/2)+"px"})}})}else{var u=h('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");i.html(u).removeClass("nivo-lightbox-loading")}}else{var d=h("<iframe>",{src:a+(a.includes("?")?"":"?"),class:"nivo-lightbox-item",frameborder:0,vspace:0,hspace:0,scrolling:"auto"});i.html(d);d.load(function(){i.removeClass("nivo-lightbox-loading")})}if(e.attr("title")){var c=h("<span>",{class:"nivo-lightbox-title"});c.text(e.attr("title"));h(".nivo-lightbox-title-wrap").html(c)}else{h(".nivo-lightbox-title-wrap").html("")}},constructLightbox:function(){if(h(".nivo-lightbox-overlay").length)return h(".nivo-lightbox-overlay");var e=h("<div>",{class:"nivo-lightbox-overlay nivo-lightbox-theme-"+this.options.theme+" nivo-lightbox-effect-"+this.options.effect});var t=h("<div>",{class:"nivo-lightbox-wrap"});var i=h("<div>",{class:"nivo-lightbox-content"});var n=h('<a href="#" class="nivo-lightbox-nav nivo-lightbox-prev">Previous</a><a href="#" class="nivo-lightbox-nav nivo-lightbox-next">Next</a>');var a=h('<a href="#" class="nivo-lightbox-close" title="Close">Close</a>');var s=h("<div>",{class:"nivo-lightbox-title-wrap"});var r=0;if(r)e.addClass("nivo-lightbox-ie");t.append(i);t.append(s);e.append(t);e.append(n);e.append(a);h("body").append(e);var o=this;if(o.options.clickOverlayToClose){e.on("click",function(e){if(e.target===this||h(e.target).hasClass("nivo-lightbox-content")||h(e.target).hasClass("nivo-lightbox-image"))o.destructLightbox()})}a.on("click",function(e){e.preventDefault();o.destructLightbox()});return e},destructLightbox:function(){var e=this;this.options.beforeHideLightbox.call(this);h(".nivo-lightbox-overlay").removeClass("nivo-lightbox-open");h(".nivo-lightbox-nav").hide();h("body").removeClass("nivo-lightbox-body-effect-"+e.options.effect);var t=0;if(t){h(".nivo-lightbox-overlay iframe").attr("src"," ");h(".nivo-lightbox-overlay iframe").remove()}h(".nivo-lightbox-prev").off("click");h(".nivo-lightbox-next").off("click");h(".nivo-lightbox-content").empty();this.options.afterHideLightbox.call(this)},isHidpi:function(){var e="(-webkit-min-device-pixel-ratio: 1.5),\t\t\t\t\t\t\t  (min--moz-device-pixel-ratio: 1.5),\t\t\t\t\t\t\t  (-o-min-device-pixel-ratio: 3/2),\t\t\t\t\t\t\t  (min-resolution: 1.5dppx)";if(f.devicePixelRatio>1)return true;if(f.matchMedia&&f.matchMedia(e).matches)return true;return false}};h.fn[i]=function(e){return this.each(function(){if(!h.data(this,i)){h.data(this,i,new a(this,e))}})}})(jQuery,window,document);(function(d){d.cookie=function(e,t,i){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(t))||t===null||t===undefined)){i=d.extend({},i);if(t===null||t===undefined){i.expires=-1}if(typeof i.expires==="number"){var n=i.expires,a=i.expires=new Date;a.setDate(a.getDate()+n)}t=String(t);return document.cookie=[encodeURIComponent(e),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}i=t||{};var s=i.raw?function(e){return e}:decodeURIComponent;var r=document.cookie.split("; ");for(var o=0,l;l=r[o]&&r[o].split("=");o++){if(s(l[0])===e)return s(l[1]||"")}return null};d.fn.cookieBar=function(e){var t=d.extend({closeButton:"none",hideOnClose:true,secure:false,path:"/",domain:"",expires:30},e);return this.each(function(){var e=d(this);e.hide();if(t.closeButton=="none"){e.append('<a class="cookiebar-close">Continue</a>');d.extend(t,{closeButton:".cookiebar-close"})}if(d.cookie("cookiebar")!="hide"){e.show()}e.find(t.closeButton).click(function(){if(t.hideOnClose){e.hide()}d.cookie("cookiebar","hide",{path:t.path,secure:t.secure,domain:t.domain,expires:t.expires});e.trigger("cookieBar-close");return false})})};d.cookieBar=function(e){d("body").prepend('<div class="ui-widget"><div style="display: none;" class="cookie-message ui-widget-header blue"><p>By using this website you allow us to place cookies on your computer. They are harmless and never personally identify you.</p></div></div>');d(".cookie-message").cookieBar(e)}})(jQuery);var gcAnalysisModul=new giscloud.blja.Class({Extends:omModule,options:{id:"analysismodule"},initialize:function(e){this.setOptions(this.options,e)},newQuery:function(){if(!(currentMapID>=0)){alert(gclang.mmod.no_selection);return}if(!fnm.isVisible()){alert(gclang.mmod.not_visible);return}var e=gcapp.gclayer.llist.getSelected();if(e&&e.source.dbtype==="oracle"){giscloud.ui.alert.red("Not supported for Oracle layers yet.",3e3);return}formManager.close("ssf");querywizard=formManager.open({fid:"ssf",overlay:false,minimize:true,bootstrap:true,title:gclang.qyfrm.title,draggable:true,width:720,height:"auto",url:fno.liveSite+"feature/form_spatialselection",data:{mid:currentMapID},buttons:[{html:gclang.select,click:"spatialFilterOk();",class:"bluebutton"},{html:gclang.close,click:"spatialFilterCancel();"},{html:gclang.Clear,click:"spatialFilterClear();"}],onClose:function(){onQueryFormClose()}})}});gcanalysismodule=new gcAnalysisModul;var gcAnalysisType={BUFFER:{code:10,url:"/analysis/form_buffer",bootstrap:true,overlay:false,dragable:true,neededit:true,title:gclang.analysis.buffer_title},NEAR:{code:6,url:"/analysis/form_near",bootstrap:true,overlay:false,dragable:true,neededit:true,title:gclang.Near},INTERSECT:{code:8,url:"/analysis/form_intersect",bootstrap:true,overlay:false,dragable:true,title:gclang.analysis.intersect_title},HOTSPOT:{code:9,url:"/analysis/form_hotspot",bootstrap:true,overlay:false,dragable:true,neededit:true,title:gclang.analysis.hotspot_title},SPATIAL_FILTER:{code:6,url:"/analysis/form_spatial_filter",bootstrap:true,overlay:false,dragable:true,neededit:false,title:gclang.Spatial_filter},AREA:{code:7,url:"/analysis/form_gis_area",bootstrap:true,overlay:false,dragable:true,title:gclang.analysis.gis_area_title},LINEAR_REFERENCE:{code:11,width:150,url:"/analysis/form_linear_ref",bootstrap:true,overlay:false,dragable:true,title:"Linear Referencing Tool"}};var gcAnalysis=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"analysis/process",module:"analysis"},initialize:function(e){},open:function(e){var t;if(e==gcAnalysisType.RADIUSCOVERAGE){gcapp.html5MissingFunctionality();return false}t=gcapp.gclayer.llist.getSelected();if(t&&t.source.dbtype==="oracle"){giscloud.ui.alert.red("Not supported for Oracle layers yet.",3e3);return}if(this.form)this.form.close();if(e.neededit&&!editable){alert(gclang.mmod.no_edit_permission);return}var i=e.url,n;if(e.url==="/analysis/form_buffer"){if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}n=[{html:gclang.Show_Buffer,class:"bluebutton",id:"abf_create"},{html:gclang.Cancel,id:"abf_close"}]}else if(e.url==="/analysis/form_near"){n=[{html:gclang.Run,class:"bluebutton",id:"near_run"},{html:gclang.close,id:"near_close"}]}else if(e.url==="/analysis/form_gis_area"){n=[{html:gclang.Calculate_for_selection,class:"bluebutton",id:"area_calculate"},{html:gclang.close,id:"area_close"}]}else if(e.url==="/analysis/form_hotspot"){if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}n=[{html:__("Generate Heatmap"),class:"bluebutton",id:"ahs_create"},{html:gclang.Cancel,id:"ahs_close"}]}else{n=null}this.form=formManager.open({fid:"analysisform"+e.code,bootstrap:e.bootstrap,overlay:e.overlay,minimize:e.code===9?false:true,dragable:e.dragable,draggable:e.dragable,title:e.title,width:e.width?e.width:500,height:e.height?e.height:"auto",url:i,data:{mid:currentMapID,update:e.neededit?"yes":null},buttons:n});return this.form},edit:function(e){for(atip in gcAnalysisType){if(atip.toLowerCase()==e.analysis.type){this.open(gcAnalysisType[atip],true)}}},minmax:function(e,t,i){var n,a;if(!e){return false}n={attrib:t.attrib};if(t.proj4)n.proj4=t.proj4;a=fno.liveSite+"rest/1/layers/"+e+"/attributeops/minmax.json?"+$.param(n);giscloud.log.push("analysis_minmax",e);new RequestMootools.JSON({url:a,onComplete:i}).get()},analysis:function(e,t){if(!e){return false}e.module=this.options.module;e.task="analysis";giscloud.log.push("analysis_start",e);this.call(e,"analysis",t)},save:function(e,t){if(!e){return}e.module=this.options.module;e.task="saveanalysis";giscloud.log.push("analysis_save",e);this.call(e,"saveanalysis",t)}});gcanalysis=new gcAnalysis;var gcImport=new giscloud.blja.Class({Extends:omModule,options:{id:"analysismodule"},initialize:function(e){this.setOptions(this.options,e)},importData:function(e){if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}importwizard=formManager.open({fid:"csvimportform",overlay:false,bootstrap:true,oneInstance:true,title:gclang.Import_CSV_or_XLS,width:500,minimize:e&&e.geocoding?false:true,url:fno.liveSite+"layer/import_form",data:e,buttons:[{html:gclang.Import,class:"bluebutton",click:"gcapp.dataimport.startImport();"},{html:gclang.Close,click:"importwizard.close();"},{html:gclang.Back_to_upload,class:"",click:"gcapp.dataimport.backToUpload();"}]});return importwizard}});var gcimport=new gcImport;function onSaveUser(e){if(window.refreshUserList){window.refreshUserList()}window.userform.enable();om.hideLoader();om.showMessage(e.msg);if($('#userform [name="task"]').val()=="new"&&e.result=="yes"&&e.id){$('#userform [name="task"]').val("update");$('#userform [name="userid"]').val(e.id);if(window.refreshUserList)refreshUserList()}if(e.result=="yes"){window.userform.close()}else if(!e.msg){giscloud.ui.alert.red().show(__("errorMsgwithMail")+" "+JSON.stringify(e),5e3)}}function uf_RandomPasswordClick(e){$("#passwordform").attr("type","text");$("#passwordform2").attr("type","text");var t=getRandomString(8);$("#passwordform").val(t);$("#passwordform2").val(t)}function saveUser(){var e,t,i,a,n,s,a=[];if(!LiveValidation.massValidate([firstnameVal])){gcapp.userform.usrtabs.container.find('a[href="#prsForm"]').tab("show");return}if(!LiveValidation.massValidate([usernameVal,password2Val])){gcapp.userform.usrtabs.container.find('a[href="#lgnForm"]').tab("show");return}t=$("#passwordform");if(t.length&&t.val().length>0&&passwordVal&&!LiveValidation.massValidate([passwordVal])){gcapp.userform.usrtabs.container.find('a[href="#lgnForm"]').tab("show");return}n=om.getFormValues("userform");newuser=!n.userid;n.feature_count_limit=$("#user_featureslimit").val();n.storage_raster_limit=parseInt($("#user_rasterlimit").val())*1024*1024||0;n.premium1ts=gcapp.userform.premium1ts;n.premium2ts=gcapp.userform.premium2ts;n.module="user";if($("input[name='active']").is(":checked"))n.active="1";else n.active="0";if(user.id>0&&n.password&&n.password2&&n.password.length>0&&n.password2.length>0){if(!n.passwordc||!(n.passwordc.length>0)){alert("If you want to change your password please enter the current password as well.");return}}window.userform.disable();om.showLoader("Saving..");e=$(".gc-my-account-form-data-privacy-rows").children().not(".gc-my-account-form-data-privacy-row-check-all").not(".gc-my-account-form-data-privacy-hidden");e.each(function(e,t){var i=$(t).find(".gc-my-account-form-checkbox").val(),n=$(t).find(".gc-my-account-form-checkbox").is(":checked")?true:false;a.push(i+"="+n)});e=$(".gc-my-account-form-data-privacy-rows").children().not(".gc-my-account-form-data-privacy-row");e.each(function(e,t){var i=$(t).find(".gc-my-account-form-data-privacy-hidden");if(i){a.push($(t).val()+"="+true)}});if(a&&a.length>0){a=a.join("&");a=a.replace(/\+/g,"%2B");$.ajax({type:"post",url:"/consent/save",data:a})}if(newuser){giscloud.users.create({username:n.username,email:n.email,password:n.password,firstname:n.firstname,lastname:n.lastname}).done(function(e){giscloud.log.push("create_user_in_admin",{username:n.username,userid:e,owner:user.username});n.userid=e;if(!e){onSaveUser({result:"no",msg:"<span class='messages'>Failed creating user</span>"})}s=$.ajax({url:fno.liveSiteUser+"/user/update",dataType:"json",success:onSaveUser,error:onSaveUser,data:n})}).fail(function(){onSaveUser({result:"no",msg:"<span class='messages'>Failed creating user</span>"})})}else{s=$.ajax({url:fno.liveSiteUser+"/user/update",dataType:"json",success:onSaveUser,error:onSaveUser,data:n})}}function handleGisSolutions(e){function a(){var e=$.extend([],s);var t=e.indexOf("Other");if(t>-1&&t!==e.length-1){e.splice(t,1);e.push("Other")}if(t===-1&&n){e.push("Other")}var i=e.join(",");return i+n}var s=[];var n="";if(e){var t=e.indexOf("Other");if(t>-1){var i=e.slice(0,t+5);n=e.slice(t+5);s=i.split(",")}else{s=e.split(",")}}$("#checkedGisSolutionsAndOther").val(a());$(".gisSolutionInput").on("change",function(e){var t=e.target.name;var i=e.target.checked;if(i){s.push(t)}else{var n=s.indexOf(t);s.splice(n,1)}$("#checkedGisSolutionsAndOther").val(a())});$("#otherGisSolution").on("change",function(e){n=e.target.value;$("#checkedGisSolutionsAndOther").val(a())})}var gcCSV=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"modules_gc/layer/gcCSV.php",module:"csv"},initialize:function(e){},importCSV:function(e,t){if(!e)return;e.module=this.options.module;e.task="import";this.call(e,"import",t)},getData:function(e,t){if(!e)return;e.module=this.options.module;e.task="getdata";this.call(e,"getdata",t)}});var CSV=new gcCSV;var schema={$schema:"https://json-schema.org/draft/2020-12/schema",title:"Layer styles",description:"Definition of layer styles json object",type:"array",items:{type:"object",properties:{visible:{type:"boolean",description:"is the layer visible or not"},expression:{type:"string",description:"rule to classify features on the map. E.g. 'expression: \"latitude\">100'"},label:{type:["string","null"],description:"class name that's visible in the layer list"},showlabel:{type:"boolean",description:"show label in the layer list"},fontcolor:{type:"string",description:"color of the font"},url:{type:["string","null"],description:"url of the icon we want to display"},clustering:{type:["boolean","null"],description:"group densely points into the one point, depending of the zoom level"},iconsoverlap:{type:"number",enum:[1,2,3],description:"defaults to 2. 1 - Avoid symbol overlapping is the fastest method, 2 - Optimized, 3 - Show all symbols but it may affect performance."},symbol:{type:["object","null"],properties:{type:{type:"string",enum:["circle","box"],description:"type of the icon"},color:{type:"string",description:'string which represents a rgb value. For example "220,0,0"'},border:{type:"string",description:'string which represents a rgb value. For example "220,0,0"'},bw:{type:"string",description:"width of the border"},size:{type:"string",description:"icon size in pixels"}},required:["type"],additionalProperties:false},labelfield:{type:["string","array"],description:"feature's attribute to display"},fontsize:{type:["string","number"],description:"font size of the label"},labelplacement:{type:"string",enum:["B","T","R","L","BR","BL","TL","TR",""],description:"defines the position of the label in relation to the feature's geometry"},fontname:{type:"string",enum:["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Times New Roman","Trebuchet MS","Verdana","Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Lucida Console","Lucida Sans Unicode","Microsoft Sans Serif","MS Mincho","Palatino Linotype","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Brush Script MT","Capitals","Apple Chancery","Baskerville","Big Caslon","Charcoal","Chicago","Comic Sans MS","Copperplate","Courier","Courier New","Didot","Gadget","Georgia","Geneva","Gill Sans","Futura","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","Impact","Lucida Grande","Marker Felt","Monaco","New York","Optima","Papyrus","Sand","Skia","Techno","Textile","Times","Times New Roman","Trebuchet MS","Verdana","Zapfino"],description:'font of the label. Defaults to "Arial"'},color:{type:"string",description:'defines the fill color of the label, rgb color value, e.g. "147,137,83"'},outline:{type:"string",description:'defines the outline color of the label, rgb color value, e.g. "147,137,83"'},margin:{type:["number","string"],description:"defines offset between labels in pixels"},ldx:{type:["number","string"],description:"left and right offset in pixels"},ldy:{type:["number","string"],description:"up and down offset in pixels"},fromlevel:{type:["number","string"],description:"zoom level from which the geometry will be visible"},tolevel:{type:["number","string"],description:"zoom level until which the geometry will be visible"},bordercolor:{type:"string",description:'border color of the feature, rgb color value, e.g. "147,137,83"'},width:{type:["number","string"],description:"line width in pixels"},borderwidth:{type:["number","string"],description:"border width in pixels"},dashed:{type:"string",description:'two numbers representing pixels (dash px size, space px size). Sequence of dash/space/dash/space etc. When finished the sequence repeats itself to the end of the line. E.g. "2, 5"'},textfield:{type:["string","array","null"],description:"feature's attribute to display"},hatchGalleryUrl:{type:["string","null"],description:"url of the hatch icon we want to display if we are taking the icon from the GIS Cloud predefined icons"},hatchUrl:{type:["string","null"],description:"url of the hatch icon we want to display if the icon is uploaded to our GIS Cloud account or an icon from the web"},format:{type:"string",enum:["png","jpeg"],description:"output format for the raster on the map. Defaults to jpeg"},source_range:{type:"string",description:'source pixel range. For example "1 100"'},destination_range:{type:"string",description:'destination pixel range. For example "150 250"'},nodata:{type:"number",description:"rgb value. We don't display pixels with this rgb value."},cap:{type:"boolean",description:"dunno"},scale:{type:"boolean",description:"dunno"},lors:{type:"number",description:"dunno"},merged:{type:"string",description:"dunno"},featureclass:{type:"string",description:"dunno"},galleryUrl:{type:["string","null"],description:"dunno"},save:{type:"boolean",description:"dunno"},hatchSymbol:{type:["string","null"],description:"dunno"}},required:["visible"],additionalProperties:false}};function getLayerStyleSchema(){return schema}var gcdatagrid;var editmode=false;var gcDataGrid=new giscloud.blja.Class({Extends:omModule,options:{jqgrid:false,showRowEditColumn:true,memoryCache:true,defaultURL:fno.liveSite+"modules_gc/layer/clayer.php",url:fno.liveSite+"modules_gc/layer/clayer.php",qsParams:{},position:true,where:null,currentMapID:null,filtering:!(jQuery.browser.msie&&jQuery.inArray(jQuery.browser.version,["8.0","9.0"])>-1),selection_filter:false,contextMenu:true,lightbox:true,showThumbs:false,sortOn:null,sortBy:"ASC"},initialize:function(e){this.setOptions(this.options,e);this.__filters={};gcapp.addEvent("ready",this.appReady.bind(this));$(this.domReady.bind(this))},domReady:function(){},appReady:function(){if(gcapp.dataPanel){gcapp.dataPanel.addEvent("onExpand",this.onParentPanelExpand.bind(this))}this.datagridpad=$("#datagrid_pad");if(!this.datagridpad.length)return;this.datagridpad.empty();if(this.options.jqgrid){var e=new giscloud.blja.Element("table",{id:"layerdata_table"});e.inject(this.datagridpad)}else{var t=new giscloud.blja.Element("div",{id:"layerdata_table"});t.inject(this.datagridpad)}var i=this;if(gcapp.selo){gcapp.selo.addEvent("change",function(){if(i.options.filtering&&i.options.selection_filter){i.showLayerData(null,true)}})}this.initDataGrid();gcproject.addEvent("getmapdata",function(){if($("#datagrid_map_sync").length){$("#datagrid_map_sync").prop("checked",false);i.selectionFilterChange()}})},refresh:function(e){if(this.options.currentMapID!=currentMapID||this.datagrid.inlineeditmode)return;if(this.datagrid){this.datagrid.options.columnModel=null;this.datagrid.refresh(e)}},getSelectedIndices:function(){if(!this.datagrid)return;return this.datagrid.getSelectedIndices()},getDataByRow:function(e){if(!this.datagrid)return;return this.datagrid.getDataByRow(e)},setPerPage:function(e){if(!this.datagrid)return;this.datagrid.options.perPage=e},setOption:function(e,t){if(!this.datagrid)return;this.datagrid.options[e]=t},addDataGridEvent:function(e,t){if(!this.datagrid)return;this.datagrid.addEvent(e,t)},setURL:function(e){if(!this.datagrid)return;this.datagrid.options.url=e},setColumnModel:function(e){if(!this.datagrid)return;if(e)this.datagrid.setColumnModel(e);else this.datagrid.options.columnModel=null},removeAll:function(e){this.currentsrchash=null;this.last_req_params=null;this.removeAllFilters(true);if(this.datagrid)this.datagrid.removeAll(e)},onParentPanelExpand:function(e){if(gcapp&&gcapp.gclayer){gcapp.gclayer.showLayerData()}},selectOnDatagrid:function(e){if(this.datagrid)this.datagrid.setRowsSelection(e.fids)},featuresSelect:function(e){var i=[],t=fnl.getSelectedLayers(true);$.each(e.rowsdata,function(e,t){i.push(t.__id)});console.log("featuresSelect",e,i);if(e.checked){gcapp.selo.addFeatureToSelection(i,t.id)}else{gcapp.selo.removeFeatureToSelection(i,t.id)}},featureSelect:function(e){var t=fnl.getSelectedLayers(true);console.log("featureSelect",e);if(e.checked){gcapp.selo.addFeatureToSelection([e.rowdata.__id],t.id)}else{gcapp.selo.removeFeatureToSelection([e.rowdata.__id],t.id)}},layerDataClick:function(){if(!fnm.isVisible()||!this.datagrid)return;var e=this.datagrid.getSelectedIndices();if(e.length==0)return;var t=this.datagrid.getDataByRow(e[0]);if(this.options.position){fnw.setViewBoundAnim(t.__xmin,t.__ymin,t.__xmax,t.__ymax)}var i=this.options.currentLayerData;if(i){var n=getSourceObject(i.source);var a=t.__id;var s="layer"+i.id+"||"+a;var r={fids:[a],lid:i.id};if(!this.options.selection_filter){}var o=null;gcapp.selo.clearSelection();gcapp.selo.selectOnMap(r,true,o,this.options.selection_filter);if(gcapp.gcmap.marker.clear)gcapp.gcmap.marker.clear();var l={__id:a,__created:t.__created,__modified:t.__modified,__owner:t.__owner,__owner_username:t.__owner_username,__xmin:t.__xmin,__ymin:t.__ymin,__xmax:t.__xmax,__ymax:t.__ymax,data:{},meta:{columns:[]}};var d=this.datagrid.options.columnModel;var u;for(var c=0;c<d.length;c++){if(!d[c].hidden&&d[c].dataIndex){u=d[c].dataIndex;switch(u){case"__id":case"FID":l.meta.columns.push({field:"FID",alias:d[c].header});break;case"__owner":case"OWNER":l.meta.columns.push({field:"OWNER",alias:d[c].header});break;case"__created":case"CREATED":l.meta.columns.push({field:"CREATED",alias:d[c].header});break;case"__modified":case"MODIFIED":l.meta.columns.push({field:"MODIFIED",alias:d[c].header});break;default:l.data[d[c].header]=t[u];l.meta.columns.push({field:u,alias:d[c].header,render:d[c].render})}}}if(this.getActiveLayerOption("RELATIONS")){gcapp.gcmap.poiClick({lid:i.id,fid:a})}else{gcapp.selo.showRecordInfo(l,true)}}},getActiveLayerOption:function(i){if(!this.options.currentLayerData||!this.options.currentLayerData.options||!this.options.currentLayerData.options.length){return}var n;$.each(this.options.currentLayerData.options,function(e,t){if(t.option_name.toUpperCase()==i){n=t.option_value}});return n},layerDataDoubleClick:function(e){var t,i,n=e.row,a=n!=null&&this.datagrid.getDataByRow(n),s=a&&(a.__id!=null?a.__id:a.FID);if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}if(s!=null){i=this.options.currentLayerData;if(i.source.type==="pg"&&i.useInfoWindow==="t"&&gcapp.isEditable(i)){giscloud.ui.customForm.open({layerId:i.id,featureId:s}).done(function(e){e.on({"submitStart.gc-custom-form":giscloud.ui.customForm.disable,"submitSuccess.gc-custom-form":function(){var e={};if(user&&user.options&&user.options.CLEAR_MAP_CACHE_CASCADE==="1"||giscloud.ui.map&&giscloud.ui.map.options&&giscloud.ui.map.options.CLEAR_MAP_CACHE_CASCADE==="1"){e.cascade=true}giscloud.layers.reset(giscloud.ui.map.mapId,[i.id],e).done(function(){giscloud.ui.map.reloadMap();gcdatagrid.refresh()},giscloud.ui.customForm.close)},"submitFailure.gc-custom-form":giscloud.ui.customForm.enable})})}}},lydata_onEditAttribute:function(e,t){if(!e){om.showError("There was an error.");return}if(e.result=="yes"){om.showConfirm(e.msg);if(t)this.datagrid.refresh()}else{om.showError(e.msg);this.datagrid.refresh()}},lydata_beforeEdit:function(e){if(e.value&&e.value.toString().indexOf("fn.showMedia")>0){e.preventEdit();alert("Can't edit media fields use attach file option instead.");var t=e.value.match(/(?=\[')(.*?)(?=\s*'\])/gi);t=t[0].substr(2).split(",")}},lydata_onEditComplete:function(e){var n=e.columnModel.dataIndex,t=this.datagrid.getDataByRow(e.row),a=t[n],i=e.oldvalue,s=layerList.selected()[0].form.definition.items?layerList.selected()[0].form.definition.items:[],r,o,l,d,u=true;$.each(s,function(e,t,i){r=i.mode||i.type;if(a===""&&i.name===n&&i.type==="numeric"){a=null}else if(i.name===n&&i.type==="datetime"&&(!i.mode||i.mode!=="time")){o=giscloud.app?giscloud.app[r==="mdcLocationTime"?"datetimeSecondsFormat":r+"Format"]:"";l=e.match(/\((.*?)\)/)&&e.match(/\((.*?)\)/)[1];d=a.match(/\((.*?)\)/)&&a.match(/\((.*?)\)/)[1];defaultTimezone=d;if(d!==l){giscloud.ui.alert.color("red").show(__("Edit not saved: the option to change a timezone is not activated for this user. To activate the option, contact GIS Cloud support."),5e3);a=e;defaultTimezone=l;u=false}if(defaultTimezone){a=a.split(" ("+defaultTimezone+")")[0]}if(moment(a,o,true).isValid()){a=moment(a,o,true).format("")}else if(moment(a).isValid()){a=moment(a).format("")}else{giscloud.ui.alert.color("red").show(__("Edit not saved: you entered an incorrect date and time format."),5e3);u=false}if(defaultTimezone&&u){defaultTimezone=moment.duration(defaultTimezone.replace("UTC","")).asMinutes();a=moment(a).utcOffset(defaultTimezone,true).format("")}}}.bind(this,i));if(u){this.editAttribute(e.row,n,a)}else{gcdatagrid.refresh()}},editAttribute:function(e,t,i,n){var a=this.options.currentLayerData,s=this.datagrid.getDataByRow(e),r=this,o={};if(!gcapp.isEditable(a)){alert("You do not have enough permissions to edit this map.");return}o[t]=i;giscloud.features.update(a.id,s.__id!==undefined?s.__id:s.id,{data:o}).done(function(e){var t={};if(user&&user.options&&user.options.CLEAR_MAP_CACHE_CASCADE==="1"||giscloud.ui.map&&giscloud.ui.map.options&&giscloud.ui.map.options.CLEAR_MAP_CACHE_CASCADE==="1"){t.cascade=true}giscloud.layers.reset(giscloud.ui.map.mapId,[a.id],t).done(function(){giscloud.ui.map.reloadMap();gcdatagrid.refresh()});r.lydata_onEditAttribute({result:"yes",msg:gclang.geom.updated},n)}).fail(function(e,t,i){msg=e==404?"You do not have sufficient permissions to edit this resource":"There was an error in the value you entered";r.lydata_onEditAttribute({result:"no",msg:msg})})},processAPIData:function(t){var i,e,n,a,s,r,o,l=giscloud.ui.map;try{gcconsole.log("processAPIData method, data: ",JSON.parse(JSON.stringify(t)))}catch(e){gconsole.log("processAPIData method, error with the data",t,e)}if(!t){gcconsole.log("processAPIData: not data defined! Exiting function.");return}if(!this.options.currentLayerData){gcconsole.log("processAPIData: not currentLayerData defined! ");this.options.currentLayerData={}}gcconsole.log("processAPIData method, currrentLayerData: ",this.options.currentLayerData);if(!t.meta){gcconsole.log("processAPIData: no data.meta defined. Let auto defined it! ");var d=parseInt(this.options.currentLayerData.id);if(l){var u=giscloud.ui.map.layerById(d);if(u){columns=$.map(u.columns,function(e,t){if(u.hideFields&&u.hideFields.indexOf(t)>-1){return}return $.extend({field:t},e)});columns.unshift({field:"FID"});t.meta={columns:columns}}}}for(i=0;i<t.length;i++){n=t[i];a=n.data;delete n.data;if(t.meta&&t.meta.columns){for(e=0;e<t.meta.columns.length;e++){s=t.meta.columns[e];if(s.field==="OWNER"){n.__owner=n.__owner_username}else if(s.field==="CREATED"){o=isNaN(n.__created)?n.__created:window.formatDateTime(n.__created*1e3,"datetimeSeconds");n.__created=o}else if(s.field==="MODIFIED"){o=isNaN(n.__modified)?n.__modified:window.formatDateTime(n.__modified*1e3,"datetimeSeconds");n.__modified=o}else if(s.alias){n[s.field]=a[s.alias]}else{n[s.field]=a[s.field]}}}else{$.extend(n,a)}t[i]=n}if(t.meta&&t.meta.columns){var c={};if(this.datagrid.options.columnModel){var h=this.datagrid.options.columnModel;for(var i=0;i<h.length;i++){c[h[i].dataIndex]=h[i]}}this.datagrid.options.columnModel=[];u=this.options.currentLayerData;for(i=0;i<t.meta.columns.length;i++){var f=true,p=null;if(u.hideFields&&u.hideFields.indexOf(t.meta.columns[i].field)>-1){continue}if(t.meta.columns[i].field==="FID"){this.datagrid.options.columnModel.push({header:t.meta.columns[i].alias||"FID",dataIndex:"__id",editable:false,noDropDown:true,sort:c["__id"]?c["__id"].sort:null,filtered:c["__id"]?c["__id"].filtered:null})}else if(t.meta.columns[i].field==="OWNER"){this.datagrid.options.columnModel.push({header:t.meta.columns[i].alias||"OWNER",dataIndex:"__owner",editable:false,sort:c["__owner"]?c["__owner"].sort:null,filtered:c["__owner"]?c["__owner"].filtered:null})}else if(t.meta.columns[i].field==="CREATED"){this.datagrid.options.columnModel.push({header:t.meta.columns[i].alias||"CREATED",dataIndex:"__created",editable:false,sort:c["__created"]?c["__created"].sort:null,filtered:c["__created"]?c["__created"].filtered:null})}else if(t.meta.columns[i].field==="MODIFIED"){this.datagrid.options.columnModel.push({header:t.meta.columns[i].alias||"MODIFIED",dataIndex:"__modified",editable:false,sort:c["__modified"]?c["__modified"].sort:null,filtered:c["__modified"]?c["__modified"].filtered:null})}else{if(u.form&&u.form.definition&&u.form.definition.items){u.form.definition.items.forEach(function(e){if(e.name===t.meta.columns[i].field){p=e.mode;if(e.type==="mdcLocationTime"){f=false}}})}this.datagrid.options.columnModel.push({header:t.meta.columns[i].alias||t.meta.columns[i].field,dataIndex:t.meta.columns[i].field,render:user.options.COLUMN_RENDER==1&&t.meta.columns[i].render?t.meta.columns[i].render:null,editable:f,sort:c[t.meta.columns[i].field]?c[t.meta.columns[i].field].sort:null,filtered:c[t.meta.columns[i].field]?c[t.meta.columns[i].field].filtered:null,type:p})}}}this.datagrid.setColumnProperty("__id","noDropDown",true);this.addEditColumn();this.addSelectionColumn();var m=this.options.currentLayerData;for(var i in this.datagrid.options.columnModel){if(!this.datagrid.options.columnModel[i].labelFunction){this.datagrid.options.columnModel[i].labelFunction=function(e,t,i){return GISCLOUD.FileFormats.formatRecordValue(e[i.dataIndex],m.id,{featureId:e.__id,featureData:e,render:i.render,dataIndex:i.dataIndex,thumb:gcdatagrid.options.showThumbs,lightbox:gcdatagrid.options.lightbox})}}}delete t.meta;return t},beforeGridRender:function(e){if(!e||!e.data){if(this.datagrid.options&&this.datagrid.options.showNoData&&this.datagrid.overlayText){this.datagrid.overlayText(__("Error getting data"))}return}if(!e.data.length&&e.data.code&&e.data.msg){if(this.datagrid.options&&this.datagrid.options.showNoData&&this.datagrid.overlayText){var t=[__(e.data.message||"Error getting data"),__(e.data.nested&&e.data.nested.msg||"")].join("</br>");this.datagrid.overlayText(t)}return}this.datagrid.options.data=this.processAPIData(this.datagrid.options.data);if(e.cmu==null){e.cmu=this.datagrid.options.columnModel}},lydata_onLoadData:function(e){var u=this.options.currentLayerData,n="#layerdata_table .td",a;if(!u){return}u.pkey=e.pkey;if(gcapp.selo.selection&&gcapp.selo.selection.fids&&gcapp.selo.selection.lid==u.id){this.datagrid.setRowsSelection(gcapp.selo.selection.fids)}gcApp.utils.initLightbox();this.datagrid.setColumnProperty("__id","editable",false);this.datagrid.setColumnProperty("ogc_fid","editable",false);this.datagrid.setColumnProperty("__xmin","editable",false);this.datagrid.setColumnProperty("__ymin","editable",false);this.datagrid.setColumnProperty("__xmax","editable",false);this.datagrid.setColumnProperty("__ymax","editable",false);for(var t in this.datagrid.options.columnModel){if(!this.datagrid.options.columnModel[t].labelFunction){this.datagrid.options.columnModel[t].labelFunction=function(e,t,i){return GISCLOUD.FileFormats.formatRecordValue(e[i.dataIndex],u.id,{featureId:e.__id,thumb:gcdatagrid.options.showThumbs,lightbox:gcdatagrid.options.lightbox})}}}var c=this;if(this.options.contextMenu){if(this.datagrid.options.editable){u&&u.form&&u.form.definition.items&&u.form.definition.items.forEach(function(i,e){if(i.readOnly){this.datagrid.options.columnModel.forEach(function(e,t){if(e.header===i.name){n+=":not(:nth-child("+(t+1)+"))";if(!a){a="#layerdata_table .td:nth-child("+(t+1)+")"}else{a+=", #layerdata_table .td:nth-child("+(t+1)+")"}}})}}.bind(this));if(this.contextmenu){this.contextmenu.destroyAll()}var i={edit:{name:__("Edit")},attach:{name:__("Attach media file")},sep1:"---------",clear:{name:__("Clear")}};if(u.source&&u.source.h3){delete i.edit}this.contextmenu=new giscloud.contextMenu({selector:n,items:i});if(a&&a.length>1){this.contextMenuReadOnly=new giscloud.contextMenu({selector:a,className:"read-only",items:{readonly:{name:"Read only"}}})}$(this.contextmenu).click(function(e,t){var i=$(t.target).parent().data("row"),n=c.datagrid.getDataByRow(i),a=$(t.target).data("column_model"),s,r={expand:null},o=gcFileExt.Image.ext.split(","),l=gcFileExt.GTiff.ext.split(",");u=c.options.currentLayerData;switch(t.action){case"edit":c.datagrid.edit({row:i,dataIndex:a.dataIndex});break;case"attach":var d=formManager.fileBrowser({upload:true,selectmode:true,selectdirectory:true,extensions:[gcFileExt.Media,gcFileExt.All]});d.addEvent("close",function(e){if(!e||!e.files||!e.files.length)return;var t=e.files[0];c.datagrid.setDataByRowAndColumn(i,a.dataIndex,t.name);if(t.datasource_type=="directory"){c.editAttribute(i,a.dataIndex,"directory://"+t.relpath.substring(1),true)}else{if(o.indexOf(t.extension)>=0||l.indexOf(t.extension)>=0){r.expand="exif,xmp"}else{r.expand=null}giscloud.files.byPath(t.relpath,r).then(function(e){return e}).done(function(e){s="___json["+JSON.stringify({pathname:e.pathname,rid:e.resourceId,lid:u.id,fid:n.__id,field:a.dataIndex,title:t.name,ext:t.extension,panorama:e.xmp?e.xmp.panorama:false,isDir:e.isDir})+"]";c.editAttribute(i,a.dataIndex,s,true)})}});break;case"clear":if(confirm(__("Are you sure?"))){c.datagrid.setDataByRowAndColumn(i,a.dataIndex,"");c.editAttribute(i,a.dataIndex,null)}break}})}else{if(this.contextmenu)this.contextmenu.disable();if(this.contextMenuReadOnly)this.contextMenuReadOnly.destroy()}}var s=this.options.currentLayerData;this.export_menu&&this.export_menu.destroy&&this.export_menu.destroy();if(s&&s.source&&s.source.dbtype!=="oracle"&&gcapp.canExport(s)){$("#datagrid_export_csv").show();this.export_menu=new giscloud.contextMenu({selector:"#datagrid_export_csv",trigger:"left",items:{view:{name:"Export current view only"},all:{name:"Export all features"}}});jQuery(this.export_menu).click(function(e,t){c.downloadCSV(t.action==="all")})}},lydata_onAutoColumModel:function(e){this.datagrid.setColumnProperty("__id","header","FID");this.datagrid.setColumnProperty("__id","width",40);e.target.setColumnProperty("__created","hidden",true);e.target.setColumnProperty("__modified","hidden",true);e.target.setColumnProperty("_layerid","hidden",true);e.target.setColumnProperty("__owner","hidden",true);e.target.setColumnProperty("__id_a","hidden",true);e.target.setColumnProperty("__id_b","hidden",true);e.target.setColumnProperty("__xmin","hidden",true);e.target.setColumnProperty("__ymin","hidden",true);e.target.setColumnProperty("__xmax","hidden",true);e.target.setColumnProperty("__ymax","hidden",true);e.target.setColumnProperty("__so*","hidden",true);var n=this.options.currentLayerData;for(var t in e.columnModel){if(!e.columnModel[t].labelFunction)e.columnModel[t].labelFunction=function(e,t,i){return GISCLOUD.FileFormats.formatRecordValue(e[i.dataIndex],n.id,{dataIndex:i.dataIndex,featureId:e.__id,thumb:gcdatagrid.options.showThumbs,lightbox:gcdatagrid.options.lightbox})}}this.addEditColumn();this.addSelectionColumn()},addEditColumn:function(){if(this.datagrid.options.editable&&this.options.showRowEditColumn&&this.datagrid.options.columnModel){var e=this.datagrid.options.columnModel[0],a=this.options.currentLayerData;if(e&&e.index!="__editcolumn"){var t=70;if($(".gc-portal.container-fluid").length>0){t=80}this.datagrid.options.columnModel.splice(0,0,{header:"",width:t,index:"__editcolumn",sortDisabled:true,noDropDown:true,labelFunction:function(e,t,i){var n="";if(gcapp.canDelete(a))n+='<a class="deletebutton small" onclick="return gcapp.deleteMe('+t+', event)" >'+gclang.Delete+"</a> ";if(gcapp.canUpdate(a))n+='<a class="linkbutton small marginleft5" onclick="return gcapp.editRowInfo('+t+', event)">'+gclang.Edit+"</a>";return n}})}}},addSelectionColumn:function(){if(this.datagrid.options.columnModel){var e=this.datagrid.options.columnModel[0],t=this.options.currentLayerData;if(e&&!e.selectionColumn){this.datagrid.options.columnModel.splice(0,0,{selectionColumn:true,dataType:"checkbox"})}}},initDataGrid:function(e){if(!this.datagrid){if(this.options.jqgrid){}else{var t=fno.gcinit_auth.logged?'<div id="datagrid_export_csv" class="gc-icon12 gc-pointer gc-download12" title="'+__("Export attribute data to CSV")+'" ></div></div>':'<div id="datagrid_export_csv" class="gc-icon12 gc-pointer gc-download12" style="display: none;" title="'+__("Export attribute data to CSV")+'" ></div></div>';var i=this.options.filtering?'<div class="btnseparator"></div><div class="datagrid_bottom_menu" ></div>'+t+'<label><input onchange="gcdatagrid.selectionFilterChange();" style="margin:4px 0 0 4px;" id="datagrid_map_sync" type="checkbox" /> '+gclang.Show_only_selected+"</label>":"";this.datagrid=new omniGrid("layerdata_table",{method:"post",perPage:100,showNoData:true,columnHeaderDropdown:this.options.filtering,multipleSelection:false,showHeader:true,sortHeader:true,alternaterows:false,pagination:true,editondblclick:false,filterInput:false,outerBorder:false,smartRefresh:true,width:"100%",height:"100%",bottomHtml:i});if(this.options.showThumbs)$("#layerdata_table").addClass("gc-omnigrid-thumbs");this.datagrid.md5=giscloud.md5;this.datagrid.addEvent("click",this.layerDataClick.bind(this));this.datagrid.addEvent("dblclick",this.layerDataDoubleClick.bind(this));this.datagrid.addEvent("rowselect",this.featureSelect.bind(this));this.datagrid.addEvent("rowsselect",this.featuresSelect.bind(this));this.datagrid.addEvent("loaddata",this.lydata_onLoadData.bind(this));this.datagrid.addEvent("beforerender",this.beforeGridRender.bind(this));this.datagrid.addEvent("autocolummodel",this.lydata_onAutoColumModel.bind(this));this.datagrid.addEvent("beforeedit",this.lydata_beforeEdit.bind(this));this.datagrid.addEvent("editcomplete",this.lydata_onEditComplete.bind(this));this.datagrid.addEvent("dropdown-show",this.datagridDropdownOpen.bind(this));var n=this;this.datagrid.addEvent("beforerequest",function(e){var t=n.options.currentLayerData;if(gcapp.selo.selection&&n.options.selection_filter){e.data.fids=gcapp.selo.selection.fids.join()}if(n.options.where){e.data.where=n.options.where}if(t&&t.source&&t.source.dbtype==="oracle"){$("#datagrid_export_csv").hide();n.datagrid.options.columnHeaderDropdown=false}else if(!gcapp.canExport(t)){$("#datagrid_export_csv").hide()}else{n.datagrid.options.columnHeaderDropdown=n.options.filtering}if(e.data.sorton&&e.data.sortby){e.data.order_by=e.data.sorton+":"+e.data.sortby;delete e.data.sorton;delete e.data.sortby}n.last_req_params=e.data})}}gcconsole.log("gcdatagrid: firing event: 'init' ");this.fireEvent("init",this.datagrid)},downloadCSV:function(e,r){var o=this.options.currentLayerData;if(!this.last_req_params||!o)return;this.last_req_params._method="GET";this.last_req_params.format="yes";if(e){delete this.last_req_params.perpage}else{this.last_req_params.perpage=this.datagrid.options.perPage}var l=this;(function(e){var t="/rest/1/layers/"+o.id+"/features.csv?format";var i=l.last_req_params;var n=layerList.selected()[0].form&&layerList.selected()[0].form.definition&&layerList.selected()[0].form.definition.items?layerList.selected()[0].form.definition.items:null;var a;var s=giscloud.app.utcOffset*60;if(r&&r.mailto){i.mailto=r.mailto}if(i.datetime){i.datetime=[]}if(n&&n.length>0){if(!i.datetime){i.datetime=[]}n.forEach(function(e){if(e.type==="datetime"||e.type==="mdcLocationTime"){a=e.mode||(e.type==="mdcLocationTime"?"mdcLocationTime":"date");i.datetime.push({name:e.name,type:e.type,mode:a,format:giscloud.app[e.type==="mdcLocationTime"?"phpDatetimeSecondsFormat":"php"+a.charAt(0).toUpperCase()+a.slice(1)+"Format"],offset:s})}});i.datetime.push({name:"__created",mode:"datetime",format:giscloud.app["phpDatetimeSecondsFormat"],offset:s},{name:"__modified",mode:"datetime",format:giscloud.app["phpDatetimeSecondsFormat"],offset:s})}e.fileDownload(t,{data:i,httpMethod:"POST"})})(jQuery)},datagridDropdownOpen:function(e){var i=e.columnModel.dataIndex,n=this,t=this.options.currentLayerData;giscloud.ui.columns.filterDropdown(e.dropdown,{layer_id:t.id,column:i}).one("done",function(){n.datagrid.positionDropDown()}).one("item-click",function(e,t){if(t.value!=null&&t.value!=undefined&&typeof t.value==="object"){n.removeFilter(i,true);n.addFilter(i,t.value.text,{itemId:giscloud.ui.id()},n.options.selection_filter)}else{n.removeFilter(i)}})},addField:function(e,t){if(!e||!t)return;this.__filters[t]={layer_id:e,fieldOnly:true};this.applyFilters(true,true)},removeField:function(e,t){var i;if(!e||!t)return;for(i in this.__filters){filter=this.__filters[i];if(filter.fieldOnly&&filter.layer_id==e&&i===t){delete this.__filters[i];break}}this.applyFilters(true,true)},removeAllFields:function(){for(column in this.__filters){filter=this.__filters[column];if(filter.fieldOnly){delete this.__filters[column]}}this.applyFilters(false,true)},addFilter:function(e,t,i,n){if(!e)return;if(typeof e!=="string")e='"'+e+'"';if(!i||!i.itemId){if(!i)i={};i.itemId=giscloud.ui.id()}if(!this.__filters[e]){this.__filters[e]={value:t,options:i}}else{if(!$.isArray(this.__filters[e])){this.__filters[e]=[this.__filters[e]]}this.__filters[e].push({value:t,options:i})}this.applyFilters(null,n)},isFilterAdded:function(e,t,i){var n,a;n=this.__filters[e];if(!$.isArray(n)){n=n?[n]:[]}if(!i.itemId){throw"option itemId is undefined"}a=$.grep(n,function(e){if(e.options&&e.options.itemId==i.itemId){return true}return false});return a.length>0?true:false},removeFIlterByColumnAndValue:function(e,t,i,n){filters=this.__filters[e];if(!$.isArray(filters)){filters=filters?[filters]:[]}if(!i.itemId){throw"option itemId is undefined"}this.__filters[e]=$.grep(filters,function(e){var t=true;if(e.options&&e.options.itemId==i.itemId){return false}return t});if(n){this.applyFilters()}return this.__filters[e]},removeFilter:function(e,t){if(!e)return;delete this.__filters[e];if(!t)this.applyFilters(null,this.options.selection_filter)},removeAllFilters:function(e){var t,i={target:this};this.fireEvent("removeallfilters",i);if(i.preventDefault)return;for(t in this.__filters){filter=this.__filters[t];if(!filter.fieldOnly){delete this.__filters[t]}}if(e){if(this.datagrid){this.datagrid.removeColumnFilterClass();this.options.where=null}}else{this.applyFilters(null,gcdatagrid.options.selection_filter)}},applyFilters:function(e,t){var i,n,a,s,r,o,l,d,u,c,h=window.layerList;if(!this.options.filtering){return}var i=this.datagridpad?this.options.currentLayerData:fnl.getSelectedLayers(1);if(!i&&h&&h.layers()[0]){h.select(h.layers()[0]);i=fnl.getSelectedLayers(1)}if(!i&&!e){return}n={};s="";d=false;l=this;for(c in this.__filters){u=null;o=this.__filters[c];c=c.replace(/['"]+/g,"");if(!$.isArray(o)){o=[o]}$.map(o,function(e){if(e.layer_id)u=e.layer_id});if(!u){u=i.id}if(!n[u])n[u]=[];n[u].push(c);c='"'+c+'"';$.map(o,function(e){if(!e.fieldOnly){if(typeof e.value=="object"){if(e.options&&e.options.distinct){if(e.value.length>0){s+="(";for(r=0;r<e.value.length;r++){if(e.value[r]==null){s+=c+" IS NULL OR "}else{s+=c+"='"+e.value[r]+"' OR "}}s=s.substr(0,s.length-3)}}else if(e.options&&e.options.datetime){if(e.options.operator){s+="(";var t=e.value[0].toLocaleDateString();switch(e.options.operator){case"after":s+="'"+t+"' > "+c+"::date";break;case"onorafter":s+="'"+t+"' >= "+c+"::date";break;case"before":s+="'"+t+"' < "+c+"::date";break;case"onorbefore":s+="'"+t+"' <= "+c+"::date";break}}}else if(e.value===null){s+="("+c+" IS NULL"}else{s+="( ("+c+">="+e.value[0]+" AND "+c+"<="+e.value[1]+")";if(e.value.length===3){s+=" OR "+c+"="+e.value[2]}}s+=s?") AND ":""}else{s+=c+"="+"'"+e.value+"' AND "}}else{d=true}})}if(s||!e){if(this.datagrid)this.datagrid.removeColumnFilterClass();this.options.where=s?s.substr(0,s.length-5):null;if(this.datagrid){for(c in this.__filters){filter=this.__filters[c];if(filter.fieldOnly)continue;this.datagrid.setColumnFilterClass(c,true)}}}if(t){if(Object.keys(n).length){for(u in n){a=n[u];var f={attributes:a.join()};if(this.options.selection_filter&&i&&u==i.id){f.context=l.__filters;f.filter=function(e,t){for(c in t){o=t[c];if(!Array.isArray(o)){o=[o]}for(var i=0;i<o.length;i++){var n=o[i];if(n.fieldOnly)continue;if(n.value&&typeof n.value=="object"){if(n.options&&n.options.distinct){var a=false;for(var i=0;i<n.value.length;i++){if(e[c]==n.value[i]){a=true;break}}if(!a)return false}else{if(e[c]<n.value[0]||e[c]>n.value[1]){if(n.value.length==3&&e[c]==n.value[2]){}else return false}}}else{if(e[c]!=n.value)return false}}}return true}}giscloud.ui.map.filterFeatures(u,f)}}else{giscloud.ui.map.filterFeatures(i.id,null)}}if(this.datagrid&&(s||!e)){this.datagrid.options.page=1;this.refresh()}this.fireEvent("applyfilters",{target:this})},selectionFilterChange:function(e){var t=$("#datagrid_map_sync");if(!t.length)return;this.options.selection_filter=t.is(":checked");if(!e)this.applyFilters(null,true)},lydata_onExpandPanel:function(){},lydata_onPanelResize:function(){if(this.datagrid){this.datagrid.refreshHeight()}this.fireEvent("resize",{target:this})},showLayerData:function(e,t){if(!e)e=fnl.getSelectedLayers(true);if(!e)return;if(gcapp.dataPanel&&!gcapp.dataPanel.isOpen()||!this.datagrid)return;if(gcapp.canExport(e)){$("#datagrid_export_csv").show()}else{$("#datagrid_export_csv").hide()}var i=getSourceObject(e.source);var n=giscloud.md5(i.type+i.src+e.id);gcconsole.log("datagrid.js >> showLayerData() >> src: ",i,", srchash: ",n,", currentsrchash: ",this.currentsrchash);if(this.currentsrchash==n&&!t)return;this.currentsrchash=n;this.datagrid.options.columnModel=null;this.options.currentLayerData=e;this.removeAllFilters(true);this.options.currentMapID=currentMapID;var a={target:this,layerdata:e};this.fireEvent("beforeshowdata",a);gcconsole.log("gcdatagrid: firing event: 'beforeshowdata', event data: ",a);if(a.preventDefault)return;if(i.type=="pg"&&!e.error){if(this.datagrid){this.datagrid.options.sortOn=this.options.sortOn?this.options.sortOn:null;this.datagrid.options.sortBy=this.options.sortBy?this.options.sortBy:null;this.datagrid.options.url=this.prepareDataURL(i,e);this.datagrid.options.editable=i.dbtype!=="oracle"&&gcapp.isEditable(e);this.datagrid.options.page=1;this.datagrid.refresh()}}else if(["file","wfs"].contains(i.type)&&e.tip!="raster"){if(this.datagrid){this.datagrid.options.filterInput=false;this.datagrid.options.sortOn=this.options.sortOn?this.options.sortOn:null;this.datagrid.options.sortBy=this.options.sortBy?this.options.sortBy:null;this.datagrid.options.url=this.prepareDataURL(i,e,true);this.datagrid.options.editable=false;this.datagrid.options.page=1;this.datagrid.refresh()}}else{if(this.datagrid){this.datagrid.options.url=null;this.removeAll(true)}}},prepareDataURL:function(e,t,i){if(this.options.qsParams){this.options.qsParams.src=JSON.stringify(e);this.options.qsParams.proj4=fn.getMap().proj4;this.options.qsParams.lid=t.id;this.options.qsParams.mid=currentMapID;this.options.qsParams.layerid=e.layerid;if(!this.options.memoryCache)this.options.qsParams.cache=false;if(t.encoding&&t.encoding.length>0)this.options.qsParams.enc=t.encoding}var n=this.options.qsParams?"?"+$.param(this.options.qsParams):"";return this.options.url+n},getAutoColumnModel:function(e){if(!e||!(e.length>0))return;var t=[];for(var i in e[0]){var n=typeof e[0][i]=="number"?"number":"string";t.push({name:i,index:i,jsonmap:i,dataType:n,editable:true})}return t}});(function(s){giscloud.contextMenu=function(i){var n=this;var e=function(){n.menu=s.contextMenu({selector:i.selector,trigger:i.trigger?i.trigger:"right",callback:function(e,t){a(n.last,e)},build:function(e,t){n.last=t.currentTarget;return true},items:i.items,className:i.className||""});n.options=i},t=function(){e();return n},a=function(e,t){s(n).trigger("click",{action:t,target:e})};n.disable=function(){var e=s(i.selector),t=s(i.selector+".context-menu-active");if(e.length)e.contextMenu(false);if(t.length)t.contextMenu("hide")};n.enable=function(){var e=s(i.selector);if(e.length)e.contextMenu(true)};n.destroy=function(){s.contextMenu("destroy",this.options.selector);s(this.options.selector).removeClass("context-menu-active");return this};n.destroyAll=function(){s.contextMenu("destroy");return this};return t()}})(jQuery);var fnw=null;var __FIRSTINIT=false;var safeLoadMapData=null;var gcFlashMap=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"",module:"",form:null,preventXMLLoad:false,showMouseCoordinates:true,dontShowInfo:false},initialize:function(e){this.setOptions(this.options,e);this.layersColor={};$(this.domReady.bind(this))},domReady:function(){var e=this,t={userLayerStates:window.user&&window.user.id>-1,graphicScalebar:user.options.GRAPHIC_SCALE==1,offscreenRendering:true,mode:"2D",flashnavigatorInclude:"slider,scalebar,marker,canvas,tooltip,printer,bitmap"},i;if(!$("#flashcontent").length){this.fireEvent("ready",{target:this,viewer:false});return}if(formManager.hasOverlay()){formManager.hideFlashContent()}giscloud.ui.map=new giscloud.Viewer("flashcontent",null,t);giscloud.ui.map.initializing.done(this.mapReady.bind(this));giscloud.ui.map.addLayersExpandParam("form","datasource","analysis","options")},onMapProjectionSelect:function(t){if(!t||!t.proj4)return;var e=fn.getMap();e.units_proj4=t.proj4;this.updateProj4();giscloud.maps.byId(currentMapID).done(function(e){e.units_proj4=t.proj4;e.update()});gcapp.gctoolbar.coordInline.set("")},showMessage:function(e){var t=$("<div/>");t.addClass("gc-map-overlay-text");t.html(e);$("#mapPanel").append(t)},getCurrentLevel:function(e){var t=fnw.getLayerByName("layer"+e);if(t)return t.getCurrentLevel();var t=fnw.getLayerByName("llayer"+e);if(t)return t.getCurrentLevel();return"-1"},getLevelResolution:function(e){var t=fnw.getLayerByName("layer"+e);if(!t)return;return t.getLevelResolution(lev)},wmsInitialize:function(l){l.globalToLocal=function(e,t,i){var n=e.offset();return{x:Math.floor(t-n.left),y:Math.floor(i-n.top)}};l.fn.globalToLocal=function(e,t){return l.globalToLocal(this.first(),e,t)};if(giscloud.ui.map&&giscloud.ui.map.mouseDown){var d=null;l("#flashcontent").mousedown(function(e){d={x:e.screenX,y:e.screenY}});l("#flashcontent").mouseup(function(e){var t=fnl.getSelectedLayers(true);if(!t||t.type!="wms"||t.lock=="t"){return}if(e.screenX!=d.x||e.screenY!=d.y){return}var i=l("#flashcontent").globalToLocal(e.pageX,e.pageY),n=giscloud.ui.map.bounds(),a=n.bottom+","+n.left+","+n.top+","+n.right,s=l("#flashcontent").width(),r=l("#flashcontent").height(),o={bbox:a,width:s,height:r,info_format:"text/html",i:i.x,j:i.y};if(l("#infotable").length){l("#infotable").empty();l("#infotable").showLoader()}if(gcapp.selo)gcapp.selo.hideCloseButton();om.showLoader();giscloud.datasources.wms.getFeatureInfo(t.id,o).always(function(e){om.hideLoader();if(l("#infotable").length){if(e==null){e="No features at this position found."}l("#infotable").hideLoader();gcapp.rpanel.show();if(gcapp.selo)gcapp.selo.showCloseButton();l("#infotable").addClass("gc-info-popup").html("<div class='wms-infotable' >"+e+"</div>").show();if(!gcapp.options.mochaui){l("#gc_infotable_box").show()}}})})}},mapReady:function(){if(!gcapp.isReady()){this.mapReady.delay(50);return}giscloud.ui.map.flashnavigator.exposeLegacyObjectsInto(window);this.wmsInitialize(jQuery);if(1){fnw=giscloud.ui.map.instance;jQuery(".leaflet-control-zoom").hide();tooltip=giscloud.ui.map.instance.plugins.tooltip;this.slider=new fnSlider(fnw);this.marker=fnw.plugins.marker;if(fno.gcinit_renderingmode)fnw.renderingMode(fno.gcinit_renderingmode);if(fno.gcinit_animatemap)fnw.disableAnimation;fnw.addEventListener("load",this.onLoad.bind(this));fnw.addEventListener("error",this.onError.bind(this));fnw.addEventListener("reload",this.onReload.bind(this));fnw.addEventListener("areaselection",this.onAreaSelection.bind(this));fnw.addEventListener("mousedown",this.onFnwMouseDown.bind(this));giscloud.ui.map.bind("reloaded",this.setLayersStates.bind(this));fnw.addEventListener("object_click",this.objectClick.bind(this));fnw.addEventListener("object_dblclick",this.objectDblClick.bind(this));fnw.addEventListener("object_over",this.objectOver.bind(this));fnw.addEventListener("object_out",this.objectOut.bind(this));if(this.options.showMouseCoordinates)this.toggleMouseCoordinates(null,true);if(!fno.mobilephone)fnw.addEventListener("scalechange",this.onScaleChange.bind(this));if(fno.fnwdebug)fnw.addEventListener("debug",function(e){console.log(e.msg)});__FIRSTINIT=true}if(safeLoadMapData){fn.showMap(safeLoadMapData.callback,true);safeLoadMapData=null}this.fireEvent("ready",{target:this,viewer:fnw,flash:true})},onAreaSelection:function(e){if(gcapp.selo)gcapp.selo.onAreaSelection(e)},onScaleChange:function(e){var t=Math.round(fnw.convertScale(e.zoom));e.scale=t;var i=$("#scale");if(i.length){$("#scale").text("1:"+t)}this.fireEvent("scalechange",e)},onMouseMove:function(e){if(!gcapp.gctoolbar||!gcapp.gctoolbar.coordInline)return;var t;if(!gcapp.gctoolbar.coordInline.isEdit()&&this.options.showMouseCoordinates){if(this.proj_src&&this.proj_dest&&this.proj_src!=this.proj_dest){t=giscloud.proj4(this.proj_src,this.proj_dest,{x:e.x,y:e.y})}else{t={x:e.x,y:e.y}}gcapp.gctoolbar.coordInline.set(Format.round(t.x,4)+", "+Format.round(t.y,4))}},toggleMouseCoordinates:function(e,t){if(this.options.showMouseCoordinates&&!t){if(this.onMouseMoveBind)fnw.removeEventListener("mousemove",this.onMouseMoveBind);gcapp.gctoolbar.coordInline.set("");this.options.showMouseCoordinates=false}else{this.onMouseMoveBind=this.onMouseMove.bind(this);fnw.addEventListener("mousemove",this.onMouseMoveBind);this.options.showMouseCoordinates=true}},modifyObject:function(e,t,i,n){giscloud.ui.map.selection.clear(i);giscloud.ui.map.selection.add(e,i)},poiClick:function(i){var e=i&&i.originalEvent,n=e&&e.object&&e.object.cl,t=n&&e.bounds;if(gcapp.gctoolbar.active=="SelectTool")return;if(this.options.dontShowInfo){return}var a=fnl.getLayerById(i.lid);if(!a)return;var s=getSourceObject(a.source);if($("#infotable").length){$("#infotable").html("").hideLoader();$("#infotable").showLoader()}var r=null;var o=fn.getMap();if(o&&o.proj4&&o.proj4.length>4)r=o.proj4;var l={target:this,lid:i.lid,fid:i.fid,source:s,layerdata:a,proj4:r,originalEvent:i};this.fireEvent("beforegetfeatureinfo",l);if(l.preventDefault)return;function d(){var e;if(!d.value){e=$("<div/>",{style:"width: 1mm; display: none"}).appendTo($("body"));d.value=e.width();e.remove()}return d.value}var u=function(e){var t=a&&["polygon","line"].indexOf(a.type)!=-1?i:null;gcapp.selo.showRecordInfo(e,false,t,n)};getFeatureData=function(){if(s.type=="pg"){var e=a.encoding?a.encoding:"utf-8";fnl.getPostGISRecord(a.source,i.fid,r,e,i.lid,currentMapID,null,u)}else{var t=s.type=="file"?fno.resources+s.src:s.url;fnm.getFeatureInfo(i.lid,t,s.layerid,i.fid,r,a.encoding,null,s.primary_key,u);$("exportresult").hide()}};showFeaturesData=function(e){if(!e||e.length<=1){getFeatureData()}else{om.hideLoader();gcapp.selo.showRecordsInfo.call(gcapp.selo,e,i.x,i.y,n)}};if(n&&t){t=new giscloud.Bounds(t.xmin,t.ymin,t.xmax,t.ymax);if(!t.valid()){return}giscloud.features.byBounds(i.lid,t,{format:true}).done(showFeaturesData);return}om.showLoader();if(i.x&&i.y&&fn.getMap().options.TRUE_INFO_TOOL==1){var c="GC_MAP_CURRENT",h="EPSG:4326",f=giscloud.ui.map.bounds(),p={x:f.left,y:i.y},m={x:f.right,y:i.y},g=giscloud.proj4(c,h,{x:i.x,y:i.y}),_=giscloud.proj4(c,h,p),v=giscloud.proj4(c,h,m),y=(v.x-_.x)/giscloud.ui.map.width()*d();giscloud.geoutils.featuresAtPoint(new giscloud.LonLat(g.x,g.y),[i.lid],{srid:4326,buffer:y}).done(showFeaturesData).fail(getFeatureData)}else{getFeatureData()}},setLayersStates:function(e){var t=user.options["MAP_"+currentMapID+"_LAYERS_STATES"];t=t?$.parseJSON(t):null;var i=fnl.getLayers();for(var n in t){if(!n)continue;var a=t[n];var s=fnl.getLayerById(n);if(!s)continue;if(a){if(!["folder","giscloud"].contains(s.type)){gcapp.gclayer.llist.visibility(s.id,a.v);gcapp.gclayer.llist.lock(s.id,a.l)}gcapp.gclayer.llist.toggle(s.id,a.o,true)}}},onError:function(){giscloud.ui.alert.red().show("Error processing data in the map engine. This is typically caused by a broken map initialization process or a faulty layer. Please retry initialization, possibly without the most recently added layer.<br/>If this message persists, please contact <a href='mailto: support@giscloud.com' >support@giscloud.com</a>")},onLoad:function(e){giscloud.ui.alert.hide();fn.setMap(fn.currentMap);fnm.activemapid=e&&e.id?e.id:null;if(giscloud.ui&&giscloud.ui.map&&giscloud.ui.map.graphic)giscloud.ui.map.graphic.clear();printer=new fnPrinter(fnw);bitmap=new fnBitmap(fnw);fnw.disableSelection();var t=fn.getMap();if(gcapp.gclayer){var i=fnl.getLayers(null,true);for(var n=0;n<i.length;n++){var a=i[n],s;if(a&&a.type=="fleet")continue;if(a.render_method==5){continue}var r=fnl.getLayerById(a.id);if(!r)continue;if(t.owner==user.id){}}}if(gcapp.gctoolbar){var o=gcapp.gctoolbar.active;gcapp.gctoolbar.setTool(o,true)}if(gcapp.gctoolbar)gcapp.gctoolbar.setTool("InfoTool");this.fireEvent("loadmap",{target:this})},updateProj4:function(e){var t=fn.getMap();if(t&&t.units_proj4){this.proj_dest=t.units_proj4}else{this.proj_dest=null}if(t&&t.proj4){giscloud.proj4.defs("EPSG:CURRENT",t.proj4);this.proj_src=t.proj4}else{this.proj_src=null}},onReload:function(e){var t=fnl.getLayers(null,true),i=fn.getMap();for(var n=0;n<t.length;n++){var a=t[n];if(a&&a.type=="fleet")continue;if(a.render_method==5){continue}var s=fnl.getLayerById(a.id);if(!s)continue;if(i.owner==user.id){}}if(window.gcdatagrid){}this.fireEvent("reloadmap",{target:this})},newGeometry:function(){var e=map.canvas.addGeometry("line");map.canvas.setAttributeGeometry(e,"color","0xFF00FF");map.canvas.editGeometry(e)},onFnwMouseDown:function(e){this.last_mousedown_x=e.x;this.last_mousedown_y=e.y;this.fireEvent("mapclick",{target:this,x:e.x,y:e.y})},objectDblClick:function(e){var t=e.id.split("||");var i={lid:t[0].substring(5),fid:t[1]};if(is_numeric(this.last_mousedown_x)&&is_numeric(this.last_mousedown_y)){fnw.setLocation(this.last_mousedown_x,this.last_mousedown_y)}var n={target:this,lid:i.lid,fid:i.fid,originalEvent:e};this.fireEvent("objectdblclick",n)},objectClick:function(e){var t=e.id.split("||");var i={lid:t[0].substring(5),fid:t[1]*1,x:isNaN(e.x)?this.last_mousedown_x:e.x,y:isNaN(e.y)?this.last_mousedown_y:e.y,originalEvent:e};var n={target:this,lid:i.lid,fid:i.fid,originalEvent:e};this.fireEvent("objectclick",n);if(gcapp.gctoolbar.active=="SelectTool"||gcapp.gctoolbar.active=="InfoTool"&&fnw._currentTool!="editmode"){if(gcapp.gclayer&&gcapp.gclayer.llist&&gcapp.gclayer.llist.setSelection){gcapp.gclayer.llist.setSelection([i.lid])}if(fnw){fnw.lastSelection=i}e.ctrlKey=e.key==17;gcapp.selo.multipleSelectionLogic(e,i);this.poiClick(i);var a=false;gcapp.selo.selectOnMap(gcapp.selo.selection,true,e.gid,a);if(!gcapp.config||!gcapp.config.newDatagrid){gcdatagrid.selectOnDatagrid(gcapp.selo.selection)}}},objectOver:function(){},objectOut:function(){},onTileStartLoading:function(){if($("tileloader"))$("tileloader").showLoader()},onTileStopLoading:function(){if($("tileloader"))$("tileloader").hideLoader()},unload:function(){if(fnw)fnw.unload()},reloadMap:function(e){giscloud.ui.map.reloadMap();giscloud.ui.map.layersLoading.always(e)},loadMap:function(t,i){var e,n,a,s;if(this.options.preventXMLLoad)return;if(!window.open_feature||!window.open_feature.layer_id)return giscloud.ui.map.loadMap(t,i);n=open_feature.layer_id;e=open_feature.feature_id;gcapp.gclayer.llist.selectByID(n);om.showLoader("Positioning...");if(window.open_feature.attribute){a=open_feature.attribute_type!=="text"?open_feature.feature_id:"'"+open_feature.feature_id+"'";s=giscloud.features.byLayer(n,{where:open_feature.attribute+"="+a}).then(function(e){var t;if(!e||e.length===0)return $.Deferred().reject();if(e.length===1){window.open_feature.feature_id=e[0].id;t=e[0].bounds.clone()}else{t=giscloud.Bounds.fromBounds($.map(e,function(e){return e.bounds}))}if(!t||!t.valid())return $.Deferred().reject();return t})}else{s=giscloud.features.byId(n,e).then(function(e){if(!e||!e.bounds||!e.bounds.valid())return $.Deferred.reject();return e.bounds.clone()})}s.always(function(){om.hideLoader()}).fail(function(){giscloud.ui.map.loadMap(t,i)}).done(function(e){giscloud.ui.map.loadMap(t,i,e)});return giscloud.ui.map}});$(function(){if(!window.giscloud)return;giscloud.ui.streetView=function(){var e=this,t,i;function n(){}e.activate=function(){if(e.isActive){return}e.isActive=true;e.mapClickBind=a.bind(e);giscloud.ui.map.select(false);giscloud.ui.map.bind("mouseUp",e.mapClickBind);giscloud.ui.alert.green().show(__("Click anywhere on the map to see Street view"))};e.deactivate=function(){e.isActive=false;giscloud.ui.alert.green().hide();$("#gc_streetview").remove();t=i=null;giscloud.ui.map.unbind("mouseUp",e.mapClickBind)};function a(e){var t,i=800,n=600,a=screen.width/2-i/2,s=screen.height/2-n/2,r=fn.getMap().epsg*1?fn.getMap().epsg*1:900913;e.transform(r,4326);if(fno.streetview_portal_url.indexOf("google.")){t=sprintf(fno.streetview_portal_url,e.lat,e.lon,giscloud.ui.map.scale())}else{t=fno.streetview_portal_url+"?lat="+e.lat+"&lng="+e.lon+"&zoom="+giscloud.ui.map.scale()}window.open(t,"GIS Cloud Streetview","height="+n+",width="+i+",top="+s+",left="+a)}n()}});$(function(){if(!window.giscloud)return;giscloud.ui.legend=function(e,t){if(!e||!t||!Array.isArray(t)){return}this.options={selector:e,layers:t,layersInList:[]};function i(e){var t=parseInt($(this).attr("id"))||parseInt($(this).parents("li").attr("id")),i=parseInt($(this).attr("index")),n;e.stopImmediatePropagation();e.preventDefault();if(i||i===0){n=giscloud.ui.map.layerById(t);n.expressionVisible(i,!$(this).hasClass("visible"))}else{$(this).hasClass("visible")?giscloud.ui.map.hideLayer(t):giscloud.ui.map.showLayer(t)}$(this).toggleClass("visible")}function o(e,t){var i="/assets/icon.php?type=";i+=e==="point"?"circle":e;i+=t.color?"&color="+t.color:t.symbol&&t.symbol.color?"&color="+t.symbol.color:"&color=220,0,0";i+="&size=10";return i}$.each(this.options.layers,function(e,t){if(t.type&&(t.type==="point"||t.type==="line"||t.type==="polygon")){var i=[],n=window.location.protocol=="https:"?"https:":"http:",a=t.type,s,r;if(t.styles&&t.styles.length>1){s=fno.assetsSite+"assets/images/layertree/color_swatch.gif";$.each(t.styles,function(e,t){r=o(a,t);i.push({name:t.label,index:e,visible:t.visible?"visible":"",icon:giscloud_config.apiHost().replace("http:",n)+r})})}else if(t.styles){s=o(a,t.styles[0])}this.options.layersInList.push({name:t.name,id:t.id,visible:t.visible&&t.visible==="t"?"visible":"",expressions:i,icon:giscloud_config.apiHost().replace("http:",n)+s})}}.bind(this));this.show=function(){$(this.options.selector).load("/legend/form",function(){var e=Handlebars.compile($("#gc_legend_template").html());$(this.options.selector).empty().append(e({layers:this.options.layersInList}));$(".gc-legend-layer").on("click",i)}.bind(this))};this.hide=function(){$(".gc-legend-layer").off("click",i);$(this.options.selector).empty()};return this}});function parseFeatureInfoData(e,t,n,a,s,r){var o=null,l,d,u;var c={},h={},f;if(s.meta&&s.meta.columns){for(i=0;i<s.meta.columns.length;i++){if(s.meta.columns[i].field==="FID"){o={alias:s.meta.columns[i].alias,order:i}}else{l=s.meta.columns[i].field;d=s.meta.columns[i].alias;render=s.meta.columns[i].render;if(d){c[d]=l}if(render){h[l]=render}if(s.format){s.data2=s.data2||{};s.data2[d||l]=s.data[l]}if(l==="OWNER"){s.data[d||l]=s.__owner_username||s.__owner}else if(l==="CREATED"){u=isNaN(s.__created)?s.__created:window.formatDateTime?window.formatDateTime(s.__created*1e3,"datetimeSeconds"):s.__created*1e3;s.data[d||l]=u}else if(l==="MODIFIED"){u=isNaN(s.__modified)?s.__modified:window.formatDateTime?window.formatDateTime(s.__modified*1e3,"datetimeSeconds"):s.__modified*1e3;s.data[d||l]=u}}}}else{a.push({fieldName:"id",name:"FID",value:is_numeric(s.__id)?s.__id:s.id})}if(s.format){s.data=s.data2||s.data}var p={};$.each(s.data,function(e,t){var i=c[e]?c[e]:e;p[i]=t});for(i in s.data){if(!s.data.hasOwnProperty(i))continue;if(i!="wkb_geometry"){f=c[i]||i;render=h[f];var m,g=s.data[i],_={featureData:p,dataIndex:f,featureId:e,render:user.options.COLUMN_RENDER==1&&render?render:null,thumb:gcdatagrid&&gcdatagrid.options&&gcdatagrid.options.showThumbs||false,lightbox:gcapp.config&&gcapp.config.newDatagrid||gcdatagrid&&gcdatagrid.options&&gcdatagrid.options.lightbox||false};if(!g&&r){m=null}else if(r){m=giscloud.xssSafe(g.toString())}else{m=GISCLOUD.FileFormats.formatRecordValue(g,t,_)}if(n==1){if(f!=""){columnData={fieldName:f,name:i,value:m};columnData.render=user.options.COLUMN_RENDER==1&&render?render:null;a.push(columnData)}}}}if(o){a.splice(o.order||0,0,{fieldName:"FID",name:o.alias||"FID",value:is_numeric(s.__id)?s.__id:s.id})}}var info_table_cmu=[{header:"Field name",dataIndex:"fieldName",dataType:"string",hidden:true},{header:gclang.general.attribute,dataIndex:"name",dataType:"string",width:90},{header:gclang.general.value,dataIndex:"value",dataType:"string",width:155,editable:true,labelFunction:null}];var createFeatureItemRecord=function(e){var t=e.name||e.fieldName,i=e.value,n,a,s=/^\s*mailto\:\s*([\S]+)\s*$/i,r=/^(((\S+)?)(@|mailto\:|(news|(ht|f)tp(s?))\:\/\/)\S+)$/i,o=/^<a href=['"]javascript:;['"] onclick=['"]fn\.showMedia\(\{url:\[['"][\w:\/.]+['"]\][\w, :]+\}\);return false;["']\s+>[\w<> ='"-\/]+<\/a>$/i,l=/<[a-z][\s\S]*>|&nbsp;/i,d=this.options.classes;if((e.name==="undefined"||e.fieldName==="undefined")&&e.value===undefined){return null}t=t==null?"null":t;i=i==null?"null":i;if(o.test(i)){return $("<tr/>").append($("<td/>",{class:d.keyClass,title:t}).text(t),$("<td/>",{class:d.valueClass}).append($(i)))}else{n=i;a=l.test(i)?"":i;if(n===i){return $("<tr/>").append($("<td/>",{class:d.keyClass,title:t}).text(t),$("<td/>",{class:d.valueClass,title:a}).html(i))}else{return $("<tr/>").append($("<td/>",{class:d.keyClass,title:t}).text(t),$("<td/>",{class:d.valueClass,title:a}).html(n))}}};var createFeatureRecord=function(e){return $.map(e,createFeatureItemRecord.bind(this))};var gcSelection=new giscloud.blja.Class({Extends:omModule,options:{module:"",form:null,editable:true,showGISFields:false,visibleFields:null,parentColumn:null,classes:{tableClass:"gc-info-popup-content-table",valueClass:"gc-info-value-cell",keyClass:"gc-info-key-cell",editLinkClass:"gc-info-edit-link"},aggregateFunc:function(e,t){return e+t}},initialize:function(e){this.setOptions(e);this.clearSelectionNumbers()},onResize:function(){},onInvertSelection:function(e){var t;if(!e){giscloud.log.push("layer_selection_invert_completed",{error:"Unknown error"});return}if(e.lid&&e.fids)giscloud.log.push("layer_selection_invert_completed",{mid:currentMapID,lid:e.lid,count:e.fids.length});else giscloud.log.push("layer_selection_invert_completed",{mid:currentMapID});if(giscloud.ui&&giscloud.ui.map){t=new giscloud.ViewerSelection(giscloud.ui.map);t.clear()}this.selectOnMap(e,true)},emailSelection:function(){if(fnm.isVisible()){this.emailform=formManager.open({title:gclang.Email_selected_features,fid:"email_feature_form",bootstrap:true,overlay:false,oneInstance:true,minimize:true,width:600,height:"auto",url:fno.liveSite+"feature/form_email",buttons:[{html:__("Close"),onclick:"gcapp.emailseloform.close();",class:"button"}]})}},invertSelection:function(){if(fnm.isVisible()){if(!this.selection||this.selection.length==0){alert(gclang.lmod.no_feature_selection);return}giscloud.log.push("layer_selection_invert",{mid:currentMapID,lid:this.selection.lid,count:this.selection.fids.length});fnl.invertSelection(JSON.stringify(this.selection),this.onInvertSelection.bind(this))}},clearSelection:function(e){if(fnm.isVisible()){fnw.modifyObject("",{color:16760576,orig_color:13421772},"",true);this.selection=null;if(!gcapp.config||!gcapp.config.newDatagrid){gcdatagrid.selectOnDatagrid({fids:[]})}else if(gcapp.dataGridActions){gcapp.dataGridActions.deselectAllFeatures("[default]")}this.clearSelectionNumbers()}this.fireEvent("clear");var t=gcapp.gctoolbar?gcapp.gctoolbar.numselfeatures:null;if(t)t.html("");this.hideInfoTable(e)},clearSelectionNumbers:function(){this.selection_minx=1e15;this.selection_maxx=-1e15;this.selection_miny=1e15;this.selection_maxy=-1e15;this.selectionfullinfo={};if(gcapp.gctoolbar)gcapp.gctoolbar.setSelectionInfo()},getAllSelectionInfo:function(){var e={},t,i;e.minx=1e15;e.miny=1e15;e.maxx=-1e15;e.maxy=-1e15;var n=this.selectionCount();if(n<1){return null}for(t in this.selectionfullinfo){if(!this.selectionfullinfo.hasOwnProperty(t)){continue}var a=this.selectionfullinfo[t];if(!a||!this.selection.fids.contains(t)){continue}for(i in a){if(a.hasOwnProperty(i)&&i!=="xmin"&&i!=="ymin"&&i!=="xmax"&&i!=="ymax"){if(e[i]==null){e[i]=a[i]}else{e[i]=this.options.aggregateFunc(e[i],a[i])}}}e.minx=Math.min(a.xmin,e.minx);e.maxx=Math.max(a.xmax,e.maxx);e.miny=Math.min(a.ymin,e.miny);e.maxy=Math.max(a.ymax,e.maxy)}var s=[];s.push({fieldName:"objects",name:gclang.nrFeatures,value:n});for(i in e){if(e.hasOwnProperty(i)&&i!=="minx"&&i!=="miny"&&i!=="maxx"&&i!=="maxy"){s.push({fieldName:i,name:i,value:e[i]})}}s.push({fieldName:"xmin",name:"xmin",value:e.minx});s.push({fieldName:"ymin",name:"ymin",value:e.miny});s.push({fieldName:"xmax",name:"xmax",value:e.maxx});s.push({fieldName:"ymax",name:"ymax",value:e.maxy});return s},selectOnMap:function(e,t,i,n){gcapp.gctoolbar.setSelectionInfo(gclang.tools.selected_objects+": "+e.fids.length);if(this.reference_form&&this.reference_form.list){this.reference_form.list()}gcapp.gcmap.modifyObject(e.fids,t,e.lid,i);if(!gcapp.config||!gcapp.config.newDatagrid){gcdatagrid.selectOnDatagrid(e)}else if(gcapp.dataGridActions){gcapp.dataGridActions.setSelectedFeatures("[default]",e.fids)}if(!n){this.selection=e;this.fireEvent("change",{selection:this.selection})}},selectionCount:function(){return this.selection&&this.selection.fids?this.selection.fids.length:0},showQuerySelection:function(e){if(e.result!="yes"||!e.data){om.hideLoader();return}var t=e.data[0].fids;if(!t||t.length==0){om.showMessage("There are no selected objects.");return}this.selectOnMap(e.data[0],true);om.hideLoader()},showRecordInfo:function(t,e,i,n){var a,s;if(gcapp.gcmap.options.dontShowInfo){return}if($("#infotable").length){$("infotable").hideLoader()}om.hideLoader();if(!t)return;if(t.code>0){om.showError(t.msg);return}function r(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}var o=[],l,d=t.count?t.count:this.selectionCount(),u={};d=d?d:1;u.uid=t.__id;u.xmin=t.__xmin;u.ymin=t.__ymin;u.xmax=t.__xmax;u.ymax=t.__ymax;var c,h=t.data;for(c in h){if(h.hasOwnProperty(c)&&typeof h[c]==="number"){u[c]=h[c]}}var f=fnl.getSelectedLayers(true);var p=false;var m;if(t.layerId){m=t.layerId}else if(f){var g=getSourceObject(f.source);if(g.type=="pg"&&g.dbtype!=="oracle"){p=gcapp.isEditable(f)}m=f.id||f[0].id}else{m=fnw&&fnw.lastSelection&&fnw.lastSelection.lid}var _=is_numeric(t.__id)?t.__id:t.id;giscloud.log.push("show_feature_info",{mid:currentMapID,lid:m||"?",fid:_});p=this.options.editable&&p&&d<=1;this.selectionfullinfo[t.__id]=u;var v=fnl.getLayerById(m);var y=gcapp.options.forceInfotoolPopup||v.useInfoWindow!=="f"||fn.getMap().options.FORCE_INFO_WINDOW==1||user.options.FORCE_INFO_WINDOW==1;if(d>1){o=this.getAllSelectionInfo()}else{var b;if(this.options.visibleFields){var w;var M=this.options.visibleFields.length;for(b=0;b<M;b++){var k=this.options.visibleFields[b];var L=k.dataIndex=="id"?t[k.dataIndex]:t.data[k.dataIndex];if(typeof k.labelFunction=="function"){L=k.labelFunction(L,t)}o.push({name:k.header,value:L})}}else{parseFeatureInfoData(_,m,d,o,t,y)}if(this.options.showGISFields){o.push({name:"LEFT",value:t.__xmin});o.push({name:"RIGHT",value:t.__xmax});o.push({name:"TOP",value:t.__ymax});o.push({name:"BOTTOM",value:t.__ymin})}}var S={target:this,preventDefault:false,data:t,tabledata:o,layername:v&&v.name||"",lid:m,fid:t.__id,fromDatagrid:e,editable:p},T=t.relations&&t.relations.length?t.relations:null;this.fireEvent("beforeshowrecordinfo",S);t=S.data;o=S.tabledata;isEditable=S.editable;var x=S.content||this.getPopupContent(o,y&&gcapp.canUpdate(v),v,_,false,T);if(S.preventDefault)return;if(d&&v){if(y){var D,C,I;var _=t.__id&&t.__id>=0?t.__id:t.id;if(fnw&&fnw.lastSelection&&_&&fnw.lastSelection.fid===_.toString()&&fnw.lastSelection.lid===v.id){D=fnw.lastSelection.x;C=fnw.lastSelection.y}else if(i){D=i.x;C=i.y}else{D=(t.__xmin+t.__xmax)/2;C=(t.__ymin+t.__ymax)/2}if(isNaN(D)||isNaN(C)){if(!fnw||!fnw.lastSelection||isNaN(fnw.lastSelection.x))return;D=fnw.lastSelection.x;C=fnw.lastSelection.y}I=p?{layerId:v.id,featureId:_}:false;gcapp.rpanel.close();gcapp.gcmap.marker.clear();if(D+1===D||C+1===C){console.warn("showRecordInfo: these seem like invalid coordinates.",[D,C]);return false}gcapp.gcmap.marker.add(D,C,null,v&&v.name+(n>0?": "+(n+1):"")||"",o,null,true,_,v,t,f,true);return}}else{}if(!$("#infotable").length){return}var E=p&&gcapp.canUpdate(f);if(E){var O=this;var Y=false;if(v.source&&v.source.h3){Y=true}$("#infotab_formeditlink").empty().append($("<a/>",{class:"btn btn-default",href:"javascript:;",text:gclang["Edit_attributes"],click:function(){if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}window.lastAttrEdit="infopanel";giscloud.ui.customForm.editFeature(m,t.__id).done(function(){var e="layers/"+m+"/features/"+t.__id+".json";giscloud.rest.get(e,{format:true}).done(function(e){gcdatagrid&&gcdatagrid.refresh();O.showRecordInfo(e)})})}}),!Y?$("<a/>",{class:"btn btn-default",href:"javascript:;",text:gclang["Edit_geometry"],click:function(){if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}gcapp.rpanel.close();giscloud.ui.edit.editFeature({layerId:m,featureId:t.__id}).done(function(){})}}):"",!Y?$("<a/>",{class:"btn btn-danger btn-default",href:"javascript:;",text:gclang["Delete"],click:function(){if(confirm("Do you really want to delete selected feature?")){giscloud.ui.alert.color("green").show(gclang["PleaseWait"]);giscloud.features.remove(m,t.__id).done(function(){var e={};giscloud.log.push("feature_delete",{layerid:m,featureid:t.__id,count:1,app:gcapp&&gcapp.name&&gcapp.name(),url:window.location.href});if(user&&user.options&&user.options.CLEAR_MAP_CACHE_CASCADE==="1"||giscloud.ui.map&&giscloud.ui.map.options&&giscloud.ui.map.options.CLEAR_MAP_CACHE_CASCADE==="1"){e.cascade=true}giscloud.layers.reset(giscloud.ui.map.mapId,[m],e).done(function(){giscloud.ui.map.reloadMap();gcdatagrid&&gcdatagrid.refresh();gcapp.rpanel.toggle();gcapp.selo.clearSelection();giscloud.ui.alert.color("green").hide()})})}}}):"")}else{this.hideCloseButton()}this.showCloseButton();if($("#infotable").length){$("#infotable").addClass("gc-info-popup").html(x).show();if(!gcapp.options.mochaui){$("#gc_infotable_box").show()}}this.initFeatureReport(giscloud.ui.map.mapId,v,t.__id);this.initAttachments(m,t,f,true);this.initRelations(t);if(gcapp.options.mochaui){$("resultcount").html("&nbsp");om.show("gc_attachments")}gcApp.utils.initLightbox();if(gcapp.gctoolbar.active=="InfoTool"&&gcapp.options.mochaui){if(this.options.parentColumn){this.options.parentColumn.expand();this.options.parentColumn.columnExpand()}gcapp.rpanel.show()}if(fno.richmedia&&gcapp.options.mochaui)om.show("infotabtools");a=0;s=$("#infotab_formeditlink");s.children().each(function(){a=a+$(this).width()});if(a>s.width()){$(s.children()[2]).before("<br/>");s.height("70px")}this.fireEvent("showrecordinfo",{target:this,datagrid:this.info_table,data:t,lid:m})},showRecordsInfo:function(e,t,i,n){var a,s,r,o,l=giscloud.exposeJQuery(),d=this,u,c=fnw&&fnw.lastSelection&&fnw.lastSelection.lid,h=fnl.getLayerById(c),f=[];featuresToShow=[],getFeatureId=function(e){var t=l(e).filter(function(e,t){if(t.name==="FID"){return t.value||t.value===0}})[0];t=t?t.value:null;return t};if(!e||e.length===0){return}else if(!Array.isArray(e)&&typeof e==="object"){e=[e]}u=gcapp.options.forceInfotoolPopup||h.useInfoWindow!=="f"||fn.getMap().options.FORCE_INFO_WINDOW==1||user&&user.options&&user.options.FORCE_INFO_WINDOW==1;e.forEach(function(t){var i=[],e=(t.id||t.id===0?t.id:null)||(t._id||t._id===0?t._id:null)||(t.__id||t.__id===0?t.__id:null);if(e||e===0){f.push(e);i.push({name:"FID",value:e})}if(t.data){Object.keys(t.data).forEach(function(e){i.push({name:e,value:t.data[e]})})}featuresToShow.push(i)});gcapp.selo.clearSelection();gcapp.selo.selectOnMap({lid:c,fids:f});o=l("<table/>",{class:"gc-info-popup-content-table"});s=l('<thead class="gc-visually-hidden"><tr><th scope="col">Attribute</th><th scope="col">Value</th></tr></thead>');r=l("<tbody/>");a=l("<div/>").append(o.append(s).append(r));l.map(featuresToShow,function(e){var t=getFeatureId(e),i=l("<tr colspan=2 style='background-color: white' />").append(l("<td colspan=2 style='border: none' />").append(l("<a />",{class:d.options.classes.editLinkClass,style:"margin-left: auto; margin-right: auto; width: 10%;",title:gclang["Select"],text:gclang["Select"],href:"javascript:;",featureId:t,layerId:c,click:function(e){gcapp.selo.clearSelection();gcapp.selo.selectOnMap({lid:c,fids:[e]});var t="layers/"+c+"/features/"+e+".json";giscloud.rest.get(t,{format:true}).done(function(e){gcdatagrid&&gcdatagrid.refresh();gcapp.selo.showRecordInfo(e)}).fail(function(e){console.log(e)})}.bind(d,t)}))),n=l("<tr/>").css({height:15,"background-color":"white"});r.append(i);r.append.apply(o,createFeatureRecord.call(d,e));r.append(n)});if(u){gcapp.gcmap.marker.clear();var p=h.name+": "+(n>0?n+1:featuresToShow.length);gcapp.gcmap.marker.add(t,i,"#006BFF",p,featuresToShow,null,true,f,h,null,null,true);return}l("#infotab_formeditlink").empty();d.showCloseButton();if(l("#infotable").length){l("#infotable").addClass("gc-info-popup").html(a).show();if(!gcapp.options.mochaui){l("#gc_infotable_box").show()}}if(gcapp.gctoolbar.active=="InfoTool"&&(gcapp.options.mochaui||window.fno&&fno.app_instance_type=="mapportal")){if(d.options.parentColumn){d.options.parentColumn.expand();d.options.parentColumn.columnExpand()}gcapp.rpanel.show()}if(fno.richmedia&&gcapp.options.mochaui){om.show("infotabtools")}},hideCloseButton:function(){$("#infotab_formeditlink").hide().empty()},showCloseButton:function(){if($(".btn-right-panel-close").length){$(".btn-right-panel-close").show();return}$("#infotab_formeditlink").css("display","block").append($("<a/>",{class:"btn-right-panel-close btn btn-default",href:"javascript:;",title:"Hide panel",html:"<i class='fa fa-times' ></i> "+gclang.Close,click:gcapp.rpanel.toggle}))},getFeatureReportOption:function(e){var t=fn.getMap().options["REPORT_FEATURE_TEMPLATE_"+e.id];if(t)return t;var i=GOptions.get("REPORT_FEATURE_TEMPLATE_"+e.id);if(i)return i;var n=gcApp.utils.getLayerOption(e.options,"REPORT_FEATURE_TEMPLATE");if(n)return n.option_value;return null},initFeatureReport:function(i,n,a){var s=n.id;var r=this.getFeatureReportOption(n),e=$("#gc_feature_report_bt");e.click(function(){var e="/pdfreport/generate?feature_id="+a+"&map_id="+i+"&layer_id="+s+"&template="+r;var t=gcApp.utils.getLayerOption(n.options,"REPORT_OUTPUT_FORMAT");if(t)e+="&output_format="+t.option_value;window.open(e)})},initRelations:function(a){$(".gc-relations .gc-relation-btn").click(function(e){e=$(e.target);var t=e.attr("data-relation"),i=e.attr("data-feature-id"),n=a.relations&&a.relations.length?a.relations[t]:null;giscloud.ui.fullScreen({id:"fp_relation",url:"/page/relations",data:{relation:n,featureId:i},closeButton:true})})},initAttachments:function(n,e,a,t){var s=e.__id;(function(e){var t=gcapp.canUpdate(a,true);e("#gc-popup-attachments").empty();var i=new gcReferences({editable:t,featureId:s,layerId:n,container:"gc-popup-attachments"})})(giscloud.exposeJQuery());if(t&&this.options.responsiveLayout&&gcapp.rpanel){gcapp.rpanel.open();om.show("gc_attachments")}},getPopupContent:function(e,t,i,n,a,s){var r=giscloud.exposeJQuery(),o,l,d,u,c=this.options.classes,h=this;o=r("<div/>"),d=r("<tbody/>"),u=r('<thead class="gc-visually-hidden"><tr><th scope="col">Attribute</th><th scope="col">Value</th></tr></thead>'),l=r("<table/>",{class:c.tableClass}).append(u).append(d).appendTo(o);d.append.apply(l,createFeatureRecord.call(h,e));if(t){o.append(r("<input/>",{type:"hidden",name:"edit-layer-id",val:i.id}),r("<input/>",{type:"hidden",name:"edit-feature-id",val:n}),r("<a/>",{class:c.editLinkClass,title:gclang["Edit"],text:gclang["Edit"],href:"javascript:;"}))}var f=this.getFeatureReportOption(i);if(f&&!a){r('<div class="gc-infotable-report" ><button id="gc_feature_report_bt" class="btn btn-primary btn-sm" >Report</button></div>').appendTo(o)}if(GOptions.is("RESOURCE_LINKING",1)&&!a){var p=r('<div id="gc_attachments" class="gc-attachments" ><button id="gc_attach_bt" class="btn btn-primary btn-sm gc-btn-attach" >Attach File</button><div id="gc-popup-attachments" style="margin-top:20px;" class="omranges" ></div></div>').appendTo(o)}this.renderRelatedTables(o,s,n);return o.html()},renderRelatedTables:function(e,t,i){if(t&&t.length){var l=this,n=$('<div id="gc_relations" class="gc-relations" ></div>').appendTo(e);$.each(t,function(e,s){var r=s.rows,t=$('<div style="margin-bottom: 20px" ><h4>'+s.name+"</h4></div>").appendTo(n);if(r&&r.type=="error"){$('<p class="small error" >ERROR: '+r.message+"</p>").appendTo(t);return}if(!r||!r.data||!r.data[0]){$('<p class="small" >No data</p>').appendTo(t);return}var o="";$.each(r.data,function(e,t){var i=[],n=s.relation.layer_id,a=t.__id;t.meta=r.meta;parseFeatureInfoData(a,n,1,i,t);o+="<br/>"+l.getPopupContent(i,false,{id:n},a)});$(o+'<button class="linkbutton small gc-relation-btn" data-relation="'+e+'" data-feature-id="'+i+'" >Show table</button><span style="font-size: 10px; line-height: 25px; margin-left: 15px" >'+r.data.length+" of "+s.rows.total+"</span>").appendTo(t)})}},hideInfoTable:function(e){if(!gcapp.options.mochaui){$("#gc_infotable_box").hide()}if(gcapp.rpanel)gcapp.rpanel.close();if(this.options.responsiveLayout&&gcapp.rpanel){if(!e||!e.stayOpen)gcapp.rpanel.close()}om.hide("infotable");om.hide("exportresult");$("#infotab_formeditlink").hide();om.hide("gc_attachments");if(fno.richmedia)om.hide("infotabtools");if(fnm.isVisible()){fnw.modifyObject("",{color:16760576,orig_color:13421772},"",true)}},onGetFeaturesByBoundComplete:function(e,t){if(!t||!t.ctrlKey&&!t.metaKey){this.clearSelection()}if(!e){giscloud.log.push("layer_select_by_bound_completed",{error:"Unknown error"});return}if(e.result=="no"){giscloud.log.push("layer_select_by_bound_completed",{error:e.msg});om.showError(e.msg);return}if(e.fids){var i=e.fids.split(",");giscloud.log.push("layer_select_by_bound_completed",{count:i.length,lid:e.lid});for(var n=0;n<i.length;n++){this.multipleSelectionLogic(t,{lid:e.lid,fid:i[n]*1},true)}gcapp.selo.selectOnMap(gcapp.selo.selection,true)}},multipleSelectionLogic:function(e,t,i){if(!gcapp.selo.selection||!i&&!e.ctrlKey||gcapp.selo.selection&&gcapp.selo.selection.lid!=t.lid){gcapp.selo.clearSelection({stayOpen:true});gcapp.selo.selection={fids:[t.fid],lid:t.lid}}else{var n=false;for(var a=0,s=gcapp.selo.selection.fids.length;a<s;a++){if(gcapp.selo.selection.fids[a]===t.fid){if(!i){gcapp.selo.selection.fids.splice(a,1);delete gcapp.selo.selectionfullinfo[t.fid]}n=true}}if(!n){gcapp.selo.selection.fids.push(t.fid*1)}}},addFeatureToSelection:function(e,t){if(!gcapp.selo.selection||gcapp.selo.selection.lid!=t){var i=fnl.getSelectedLayers(true);gcapp.selo.selection={fids:e,lid:i.id}}else{$.each(e,function(e,t){if($.inArray(t,gcapp.selo.selection.fids)==-1){gcapp.selo.selection.fids.push(t*1)}})}var n=$.extend({},gcapp.selo.selection);gcapp.selo.clearSelection();gcapp.selo.selectOnMap(n,true)},removeFeatureToSelection:function(e,t){if(gcapp.selo.selection){$.each(e,function(e,t){var i=$.inArray(t,gcapp.selo.selection.fids);if(i>=0){gcapp.selo.selection.fids.splice(i,1)}})}var i=$.extend({},gcapp.selo.selection);gcapp.selo.clearSelection();gcapp.selo.selectOnMap(i,true)},onAreaSelection:function(t){var e,i;if(gcapp.gctoolbar.active==="AreaSelection"){e=fnl.getSelectedLayers();if(e.length>0){i=e[0].id}else{giscloud.ui.alert.red(__("Please select layer first"),2e3);return}var n=e[0];if(n.lock=="t"){giscloud.ui.alert.red(__("The currently selected layer is locked"),2e3);return}if(n.visible!="t"){giscloud.ui.alert.red(__("The currently selected layer is not visible"),2e3);return}if(n.source&&n.source.dbtype==="oracle"){giscloud.ui.alert.red("Area selection is not supported for Oracle layers yet.",3e3);return}var a={lid:i,bound:{xMin:t.xMin<t.xMax?t.xMin:t.xMax,yMin:t.yMin<t.yMax?t.yMin:t.yMax,xMax:t.xMax>t.xMin?t.xMax:t.xMin,yMax:t.yMax>t.yMin?t.yMax:t.yMin}};var s=this;giscloud.log.push("layer_select_by_bound",a);fnl.getFeaturesByBound(a,function(e){s.onGetFeaturesByBoundComplete(e,t.originalEvent)})}}});var fn,fnm,fnl,geoprocess;(function(o){var s=this;s.mapChange=function(e,t){var i,n,a,s,r;if(window.gcdatagrid){window.gcdatagrid.options.selection_filter=true}if(!o.isArray(t)){t=t?[t]:[]}for(var n=0;n<t.length;n++){if(t[n][giscloud.ui.map.mapId]){r=t[n][giscloud.ui.map.mapId];e.getPanelEl().addClass("filter");s=new giscloud.ui.LayerFilterForm(e.content(),{filterDef:r,gcdatagrid:window.gcdatagrid,viewer:giscloud.ui.map})}}if(!s){e.content("<div>No filters definition found for this map.</div>")}};s.buildPanels=function(){o.map(giscloud.app.panels,function(e){if(e.filters){e.empty();s.mapChange(e,e.filters)}})};s.loadPanels=function(){var i;o.each(giscloud.app.config.panels,function(e,t){if(t.logged_in&&!giscloud.app.user){return}i=new giscloud.ui.Panel(t);giscloud.app.panels.push(i);t.listId=e;giscloud.ui.ready.done(function(){giscloud.ui.map.loading.done(function(){if(t.filters){giscloud.app.panels[t.listId].filters=t.filters}giscloud.ui.map.bind("loaded",s.buildPanels);s.buildPanels();if(giscloud.app.option("MODULE_HOMEPAGE")&&giscloud.app.option("MODULE_HOMEPAGE")===1){giscloud.ui.homepage.on("shown.gc-ui-homepage",function(){o.map(giscloud.app.panels,function(e){e.close()})})}})})})};giscloud.ready(function(){if(giscloud.app){giscloud.app.panels=giscloud.app.panels||[];if(giscloud.app.config.panels){s.loadPanels()}}o(window).on("form-save.gc-filter-manager-builder",function(e,t){var i,n;var a=o.map(t.config.panels,function(e){if(e.filters){return o.grep(e.filters,function(e){if(e[giscloud.ui.map.mapId]){return true}return false})[0]}})[0];if(!a){return}giscloud.app.config.panels=o.extend(giscloud.app.config.panels,t.config.panels);o.map(giscloud.app.panels,function(e){i=o.map(e.filters,function(e){if(e[giscloud.ui.map.mapId]){e[giscloud.ui.map.mapId]=a[giscloud.ui.map.mapId]}return e});if(e.filters){n=e.content().is(":visible");e.filters=i;e.close();e.empty();s.mapChange(e,e.filters);if(n){e.show()}}});if(window.gcdatagrid){window.gcdatagrid.removeAllFilters()}});setTimeout(function(){if(giscloud.browserSupportsGL()){giscloud.prefetchAsset("script",giscloud_config.assetsSite()+"libs/mapbox-gl/mapbox-gl.js");giscloud.prefetchAsset("script",giscloud_config.assetsSite()+"libs/mapbox-gl/mapbox-gl-draw.js");giscloud.prefetchAsset("style",giscloud_config.assetsSite()+"libs/mapbox-gl/mapbox-gl.css");giscloud.prefetchAsset("style",giscloud_config.assetsSite()+"assets/api/1/viewer/mapbox/viewer.mapbox.css")}},1e3)})})(jQuery);var gcApp=new giscloud.blja.Class({Extends:omModule,options:{mochaui:true,ribbon:true,setRibbonState:true,saveState:function(){try{return"localStorage"in window&&window["localStorage"]!==null}catch(e){return false}}(),loginCheckInterval:6e4},initialize:function(e){this.setOptions(this.options,e);this.modules=[];this.modulesCount=0;this.modulesPositionCount={left:0};this.__ready=true;this.panels={loading:0,loaded:0,events:[],dfds:[]}},domReady:function(){this.options.mochaui=$(".gc-theme-mochaui").length>0;fn=new fnApplication;fnm=new fnMap;fnl=new fnLayer;geoprocess=new gcGeoprocessing;if(window.globalNoInterface)return;if(this.options.ribbon&&$("#ribbon").length>0){this.ribbonMenu=new omniRibbon("ribbon",{minimized:fno.mobilebrowser});this.ribbonMenu.addEvent("change",this.ribbonMenuTabChange.bind(this))}gcconsole.log("gcApp firing event: 'domReady' ");this.fireEvent("domready");this.initUserInterface();if(fno.gcinit_auth.logged>0){this.startPeriodicalLoginCheck()}if(showOldIEWarning)showOldIEWarning();if(fno.gcinit_richmedia){}jQuery("#signupcombo .popup").on("click",function(e){e.stopPropagation()}).find("input[type=text], input[type=password]").on("click",function(e){e.stopPropagation()});if(fno.mobilebrowser)jQuery("#rightpanel_wrapper").addClass("rightpanel-mobile");if(user.options.GISCLOUD_EDITOR&&user.id>0){if(!user.options.__GC_APP_EDITOR_FIRST_TIME){giscloud.options.create({resource:"users",id:user.id},{type:50,name:"__GC_APP_EDITOR_FIRST_TIME",value:1,resource_id:user.resource_id})}}},openLink:function(e){var t=$(e.currentTarget);giscloud.log.push("link_click",{href:t.attr("href"),target:t.attr("target")})},setAppState:function(){},ribbonMenuTabChange:function(e){},showAdmin:function(){gcapp.myAppsForm=formManager.open({overlay:false,bootstrap:true,fid:"myapps",dragable:true,title:gclang["My_Apps"],width:660,height:"auto",url:fno.liveSite+"user/form_administration"});gcapp.administration.refresh()},administration:new function(s){function a(e,i){var n=e.app_instance.app.domain||e.app_instance.domain;var a={class:"linkbutton",href:"http://"+n+fn.getPermalinkPath()};if(!i){a.target="_blank"}var t=s("<a/>",a);if(i){t.click(function(e){e.stopPropagation();var t=jQuery("<form>",{action:(fno.forceSSLForUserData?"https://":"http://")+n+"/assets/switch-app",method:"POST"}).append(jQuery("<input>",{name:"sid",value:i,type:"hidden"})).append(jQuery("<input>",{name:"url",value:a.href,type:"hidden"}));t.appendTo(document.body);t.submit();return false})}return s("<tr/>").append(s("<td/>").text(e.id),s("<td/>").text(e.app_instance.name),s("<td/>").text(new Date(e.created*1e3).toLocaleDateString()),s("<td/>").append(t.text(n)))}function e(e){var t=document.cookie.match(/PHPSESSID=[^;]+/);if(t&&t[0]){t=t[0].replace("PHPSESSID=","")}else{t=null}for(var i=0,n=e.data.length;i<n;i++){s("#admin-apps-table tbody").append(a(e.data[i],t))}s("#admin-apps-table").trigger("center.bs.modal")}this.refresh=function(){s("#admin-apps-table tbody").html("");om.rest("users/current/subscriptions",{expand:"app_instance,payment",order_by:"created"}).done(e)}}(giscloud.exposeJQuery()),startPeriodicalLoginCheck:function(){this.checkIsLogged.periodical(this.options.loginCheckInterval,this)},checkIsLogged:function(){om.rest("session",null,this.onCheckLogin.bind(this),{noloader:true})},onCheckLogin:function(e){if(e&&e.exists!==true){window.location=window.location}},initUserInterface:function(e){if(this.options.mochaui&&$("desktop")){}$("#ribb_custom_report_btn").hide();gcconsole.log("gcApp firing event: 'uiinit' ");this.fireEvent("uiinit",{target:this})},maximize:function(){this.ribbonMenu.maximize();this.ribbonMenu.enable()},minimize:function(){this.ribbonMenu.minimize();this.ribbonMenu.disable()},showReferenceManager:function(e){if(this.formreferences)this.formreferences.close();this.formreferences=formManager.open({title:"Reference Manager",width:300,height:"auto",url:fno.liveSite+"feature/form_references",data:{},buttons:[{html:"Close",click:"gcapp.formreferences.close();"}]})},dispatchModuleEvent:function(e){for(var t=0;t<this.modulesCount;t++){var i=this.modules[t];var n=i[e];if(n){var a=n.bind(i);a()}}},loadPanel:function(n){if(n.onContentLoaded)this.panels.events.push(n.onContentLoaded);n.onContentLoaded=function(e,t){this.panels.loading--;this.panels.loaded++;console.log("loadedPanel ","loading ",this.panels.loading,"loaded ",this.panels.loaded,"id ",n.id);if(this.panels.loading==0){for(var i=0;i<this.panels.events.length;i++){var e=this.panels.events[i];if(typeof e=="function")e()}this.__ready=true;this.fireEvent("ready")}}.bind(this);this.panels.loading++;if(this.options.mochaui){var e={url:n.contentURL,id:n.id,open:1};if(n.onContentLoaded){e.contentLoad=n.onContentLoaded}if(n.column=="leftColumn"){$("#layers-panel_pad").load(n.contentURL,n.onContentLoaded)}else if(n.column=="rightColumn"){$("#rightpanel_pad").load(n.contentURL,n.onContentLoaded)}else if(n.column=="mainColumn"){$("#mapPanel").load(n.contentURL,n.onContentLoaded)}}else{var t=$("#"+n.id);if(t.length){this.panels.dfds.push(t.load(n.contentURL,n.onContentLoaded.bind(this)))}}},isReady:function(){return this.__ready},isModuleReady:function(e){return e&&e.isReady()},registerModule:function(e){if(!this.isModuleRegistered(e)){this.modules.push(e);this.modulesCount++;this.modulesPositionCount[e.options.position]++}},isModuleRegistered:function(e){var t=this.modules.length;for(var i=0;i<t;i++)if(this.modules[i]==e)return true;return false},resize:function(){for(var e=0;e<this.modulesCount;e++){var t=this.modules[e];if(t.resize){var i=this.modulesPositionCount[t.options.position];var n=t.resize.bind(t)}}},tabChange:function(e){if(e.tab==2){var t=gcapp.selo.selection;if(t&&t.fids&&t.fids.length==1){poiClick({fid:t.fids[0],lid:t.lid})}}},loadHomeWorkspace:function(e){if(!jQuery("#signupcombo").length)return;if(fno.mobilephone){jQuery("#signupcombo").removeClass("signupcombo-mobile");jQuery("#signupcombo div.combolabel").removeClass("combolabel-mobile")}if(this.signupcombo&&this.signupcombo.close)this.signupcombo.close();this.homepage.refresh();if(this.headerToolbarActions){gcapp.headerToolbarActions.setTab("home_tab")}else if(this.ribbonMenu&&$("#home_tab").length){this.ribbonMenu.tabs.showTab(0);gcapp.homepage&&gcapp.homepage.show()}formManager.isflashvisible=false;formManager.hideFlashContent()},gotoMapView:function(e){this.ribbonMenu.tabs.showTab(1);this.loadMapWorkspace()},loadMapWorkspace:function(e){formManager.isflashvisible=true;if(formManager.hasOverlay()){formManager.hideFlashContent()}else{formManager.showFlashContent()}this.homepage.hide()},onResize:function(){if(fnw&&fnw.invalidateSize)fnw.invalidateSize();this.fireEvent("resize",{target:this})},html5MissingFunctionality:function(){if(confirm("Sorry this option is temporarly unvailable in HTML5 map mode. Do you want to switch to standard mode?")){$.cookie("gc-html5","off",{duration:365});location.href=fn.getPermalink()}},logout:function(){if(window.user.info_source&&window.user.info_source.indexOf("ciamlogin.com")!==-1){window.location.href="/app?logreq=logout";return}jQuery.post("/app",{logreq:"logout"},function(e){window.location.href=window.location.href})},isUserLoggedIn:function(){return fno&&fno.gcinit_auth.logged},checkAndWarnForLogin:function(e){var e=e||[];if(!gcapp.isUserLoggedIn()&&$.inArray("PUBLIC",e)==-1){alert("To use this feature please log in");return false}return true},refreshDatasources:function(){(function(e){var t=e(".gc-layer-add"),i=t.find(".popup").empty().loader();i.loader("hide");i.addClass("gc-hidden");t.find(".arrow").addClass("gc-hidden");t.find(".omnicombo").attr("onclick",t.find(".gc-ribbon-32").parent().attr("onclick"))})(jQuery)},isPayment:function(){if(user.options.PAYMENT){var e=JSON.parse(user.options.PAYMENT);if($.isArray(e)){e=$.map(e,function(e){return e*1});return $.inArray(1,e)!=-1&&fno.payment}else{return parseInt(user.options.PAYMENT)==1&&fno.payment}}else{return fno.payment}},showTitleBar:function(e){setTimeout(function(){if(e){$("#desktopTitlebarWrapper").show();$("#homepage-container").css("top","73px")}else{$("#desktopTitlebarWrapper").hide();$("#homepage-container").css("top","50px")}$(window).trigger("resize")},0)}});var gcapp=new gcApp;gcapp.addEvent("ready",function(){gcapp.getSubscriptionsForCurrentAppInstance=function(){var e=jQuery.grep(user.subscriptions,function(e){if(gcapp.isCustomEditor()){return e.app_instance_id==fno.gcinit_editor_id}else if(gcapp.isCustomViewer()){return e.app_instance_id==fno.gcinit_editor_id||e.app_instance_id==fno.gcinit_viewer_id}return e.app_instance_id===fno.app_instance_id});if(!e.length&&fno.app_instance_id==fno.gcinit_mdc_portal_id){e=jQuery.grep(user.subscriptions,function(e){return e.app_instance_id==fno.gcinit_editor_id})}return e};gcapp.isCustomEditor=function(){return fno.app_instance_type==="mapeditor"&&fno.app_instance_id!=fno.gcinit_editor_id};gcapp.isCustomViewer=function(){return fno.app_instance_type==="mapviewer"&&fno.app_instance_id!=fno.gcinit_viewer_id};gcapp.setSubscriptionType=function(e){var t={user_id:user.id,owner_id:user.id,app_instance_id:fno.app_instance_id,begins:Math.round(jQuery.now()/1e3),ends:null,type:e};return om.rest("users/current/subscriptions",t,null,{method:"POST",sessid:giscloud.sessid()}).fail(function(){alert("An error occured trying to set your subscription options. The GIS Cloud app needs to reload. "+"If the problam persists, please contact info@giscloud.com.")}).always(function(){gcapp.check_subscription()})};if(fno.app_instance_id!=null&&fno.giscloud&&user.id>0){if(!user.agreed){if(fno.app_instance_id!=null&&fno.giscloud&&fno.app_instance_id==fno.gcinit_manager_id){window.open("/consent","_self")}showWelcomeForm();giscloud.log.push("first_log_in",{app_instance_id:fno.app_instance_id})}else{var e=gcapp.getSubscriptionsForCurrentAppInstance();if(e&&e.length){user.active_subscription=e[0];if(user.active_subscription&&user.active_subscription.warn_only){var t=user.active_subscription.restriction_end?moment(user.active_subscription.restriction_end).toDate().getTime()/1e3:user.active_subscription.ends;var i=+new Date;var n=t*1e3-i;var a=Math.ceil(n/1e3/60/60/24);if(a<1){a+=8;$("#desktopTitlebarWrapper").html("<div class='gc-status-msg'><a href='javascript:;' onclick='showSubscription(3); return false;'>"+__("We were unable to charge your credit card. Please contact our support and proceed with payment within")+" "+a+" "+__("day(s) to continue using the app.")+"</a></div>");this.showTitleBar(true)}}}}}gcapp.name=function(){switch(fno.app_instance_id*1){case fno.gcinit_editor_id:return"Map Editor";break;case fno.gcinit_viewer_id:return"Map Viewer";break;default:return fno.app_instance_id}};gcapp.subscriptionName=function(){if(!(user.id*1>0))return"Not logged in";if(!user.active_subscription)return"No active";switch(user.active_subscription.type*1){case 25:return"Premium Full";break;case 23:return"Premium Bonus Period";break;case 20:return"Premium Trial";break;case 10:return"Free";break;case 30:return"Free Beta";break;default:return"Unknown"}};gcapp.calculateLimits=function(){if(!user.subscriptions)return;var e=user.active_subscription=gcapp.getSubscriptionsForCurrentAppInstance()[0];if(!e)return;function t(e,t){var i=parseInt(e,10);if(isNaN(i))i=e;if(typeof t==="undefined"){t=0}return i===0?0:i||t}var i=t(user.feature_count_limit),n=t(user.file_feature_count)+t(user.db_feature_count),a=t(user.storage_raster),s=t(user.storage_raster_limit);if(e.type*1==10){user.active_subscription.over_limits=!(n<=i&&a<=s&&!(user.private_maps&&user.private_maps.length>0))}else{user.active_subscription.over_limits=!(n<=i&&a<=s)}};gcapp.overlay=function(e){if(e){var t="Please check your subscription plan <br/>to continue using our service.";if($("gc-content")){$("gc-content").overlay(true,false,t)}else{$("mapPanel").overlay(true,false,t);$("mapPanel").setStyle("overflow","hidden");if($("datagrid_pad"))$("datagrid_pad").overlay(true)}if(gcdatagrid){window.app_overlay_resize=function(){gcapp.overlay(true)};gcapp.addEvent("resize",window.app_overlay_resize)}}else{if($("gc-content")){$("gc-content").overlay(false)}else{if($("mapPanel"))$("mapPanel").overlay(false);if($("datagrid"))$("datagrid").overlay(false)}if(window.app_overlay_resize){gcapp.removeEvent("resize",window.app_overlay_resize)}}};gcapp.check_subscription=function(e){if(!window.user||user.id==0||user.id==-1)return-1;var t;if(user.options.GISCLOUD_EDITOR){t=function(){if(formManager.isFullpageOpen("subscription")&&!formManager.isFullpageOpen("gc-dashboard")){showSubscription()}else{return}if(e){e()}}}giscloud.includeJs(fno.liveSite+"user/usage?_="+Date.now(),t,true)};gcapp.check_subscription.periodical(12e4);gcapp.check_subscription();gcapp.setBoundsToAddedLayers=function(t){var i;giscloud.ui.map.layers.forEach(function(e){if(t[e.id]){if(!i){i={left:e.bounds.left,top:e.bounds.top,right:e.bounds.right,bottom:e.bounds.bottom}}else{if(e.bounds.left<i.left){i.left=e.bounds.left}if(e.bounds.top<i.top){i.top=e.bounds.top}if(e.bounds.right>i.right){i.right=e.bounds.right}if(e.bounds.bottom>i.bottom){i.bottom=e.bounds.bottom}}}});if(i){giscloud.ui.map.bounds(i,true)}};showNamePrefix()});(function(s,e,t){Permissions={has:function(e){return s.inArray(e,user.permissions)!=-1}};GOptions={is:function(i,n){var a=false;s.each(user.options,function(e,t){if(e==i){if(s.isArray(t)){s.each(t,function(e,t){if(n==t||s.isNumeric(t)&&t*1==n){a=true;return false}})}else if(n==t||s.isNumeric(t)&&t*1==n){a=true;return false}}});return a},get:function(e){return user.options[e]}}})(jQuery,window,window.document);giscloud.ui=giscloud.ui||{};giscloud.ui.Window=function(e){formManager.open({fid:e.id?e.id:"abtf",dragable:e.dragable!=undefined?e.dragable:true,title:e.title,width:e.width,height:e.height||"auto",html:e.html,url:e.url,overlay:e.overlay!=undefined?e.overlay:false})};(function(v,e){giscloud.ui.popup=function(e){var t=v("body").find(".gc-popover"),i=e.content;function n(e){if(e.hasClass("gc-popover-overlay"))om.hideOverlay();e.remove()}n(t);if(e.closeButton){i+="<br><p class='text-center' ><button class='gc-popover-button btn btn-default btn-sm' >Got it!</button></p>"}var a="<div class='gc-popover popover bottom "+(e.overlay?"gc-popover-overlay":"")+"' >                         <div class='arrow'></div>                         <h3 class='popover-title'>"+e.title+"</h3>                         <div class='popover-content'>                           <p>"+i+"</p>                         </div>                       </div>";var s=v(a).appendTo(v("body")).fadeIn().css("z-index",2e6);s.find(".gc-popover-button").click(function(){n(s)});var r=e.offset_x||"0",o=e.offset_y||"10";offset=e.offset||r+" "+o;if(e.overlay||e.modal)om.showOverlay(true);var l={my:"center top",at:"center bottom",collision:"none",offset:offset};s.position(jQuery.extend({of:e.element},l));return s};giscloud.ui.modal=function(l){var e,a,s,t=[],i="";default_options={escClose:false,footer:true,phoneFullSc:false,savePosition:false,closeButton:true,allowHide:false,maxHeight:"auto",minOffset:20,extraClass:"",show:true};l=v.extend(default_options,l);if(l.width==="auto"){i=" hidden"}if(l.height!=null){t.push("height: "+(typeof l.height==="number"?l.height+"px":l.height))}e=l.content||"";a="<div class='modal fade gc-modal"+i+" "+l.extraClass+"' data-backdrop='static' tabindex='-1' role='dialog' aria-hidden='true'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-header'>";if(l.closeButton){if(l.closeButtonCallback){a+="<button type='button' class='close' onclick='"+l.closeButtonCallback+"' aria-hidden='true'></button>"}else{a+="<button type='button' class='close' data-dismiss='modal' aria-hidden='true'></button>"}}a+="<h3>"+(l.title?l.title:"&nbsp;")+"</h3>"+"</div>"+"<div class='modal-body"+(l.noPadding?" no-padding":"")+"' style='"+t.join("; ")+"'>"+e+" </div>";if(l.footer){a+="<div class='modal-footer'>";if(l.buttons){v.each(l.buttons.reverse(),function(e,t){var i,n=t["id"]?t["id"]:giscloud.uuid();if(t["class"]){i=t["class"]=="bluebutton"?"btn btn-primary":t["class"]}else{i=""}t["id"]=n;if((t.html===gclang.close||t.html===gclang.cancel)&&!l.privateButtons){if(l.fid!=null){a+="<button class='btn btn-default' onclick=\"formManager.close('"+l.fid+"');\" aria-hidden='true'>"}else{a+="<button class='btn btn-default' data-dismiss='modal' aria-hidden='true'>"}a+=t.html+"</button>"}else{a+="<button class='btn btn-default "+i+"' id='"+n+"'>"+t.html+"</button>"}})}else{a+="<button class='btn btn-default' data-dismiss='modal' aria-hidden='true'>"+__("Close")+"</button>"}a+="</div>"}a+="</div></div></div>";a+="<div></div>";var d=v(a).appendTo(v("body")),n=d.find(".modal-dialog");if(default_options.animation){d.addClass("fade")}d=d.modal({backdrop:l.overlay,keyboard:l.escClose,show:l.show}).filter(".gc-modal");v.each(l.buttons||[],function(e,t){var i=t["id"]?t["id"]:"";if(i&&t.clickGlobalScope==false){v("#"+i).on("click",t.click)}else{v("#"+i).attr("onclick",t.click)}});if((typeof l.width=="string"||l.width>500)&&l.width!=="auto"){d.css("width",l.width);n.css("width",l.width);d.css("left",(v(window).width()-d.width())/2+v(window).scrollLeft()+"px")}else if(l.width==="auto"&&v(window).width()>760){d.css("width","auto")}if(l.fid){d.attr("id",l.fid)}function r(){giscloud.ui.map.reloadMap();gcdatagrid&&gcdatagrid.refresh()}function o(){giscloud.ui.greenAlert("Data has been saved successfully...");giscloud.ui.customForm.disable()}function u(){var e=gcapp.gclayer.llist.getSelected(),t={};if(e&&e.source.type==="pg"){t={id:e.id,type:e.type}}giscloud.ui.greenAlert("Data has been saved successfully",2e3);giscloud.layers.reset(giscloud.ui.map.mapId,[t.id]).done(r,giscloud.ui.customForm.close)}function c(){giscloud.ui.redAlert("Error occured. Please check your input data.",2e3);giscloud.ui.customForm.enable()}function h(e,t,i){var n=l.maxHeight,a=0,s,r=l.phoneFullSc&&v(window).width()<768,o;if(t&&e.width()>0){e.css("left",v(window).width()/2-e.width()/2)}if(i&&e.height()>0&&!r){a=v(window).height()/2-e.height()/2;if(v(window).height()<900){a=a-d.find(".modal-footer").outerHeight(true)}if(a<l.minOffset&&!r){a=l.minOffset}}e.css("top",a);if(n==="auto"&&!r){s=setInterval(function(){if(e.find(".modal-body").offset().top>=a){o=e.find(".modal-footer").outerHeight(true);if(o===0&&v.browser.mozilla){o=Math.abs(e.find(".modal-footer").height())}n=v(window).height()-e.find(".modal-body").offset().top-o-default_options.minOffset;e.find(".modal-body").css("max-height",n);clearInterval(s);s=null}},200)}}function f(e){var t=d.find(".modal-dialog").outerWidth(),i=d.find(".modal-dialog").outerHeight(),n;d.removeClass("hidden");if(l.phoneFullSc&&v(window).width()<768){var a="auto",s="auto",r="auto";if(d.find(".modal-footer:visible").length>0){s=v(window).height()-d.find(".modal-footer").outerHeight(true)}if(d.find(".modal-header:visible").length>0){s=s-d.find(".modal-header").outerHeight(true)}d.find(".modal-body").css("height",s)}else{d.find(".modal-body").css("height","auto")}l.lastWidth=t;l.lastHeight=i;if(e&&this.lastFocus){n=d.find("input[id^='"+this.lastFocus+"']");if(v(".btn.crumb.item").length>0&&v(".btn.crumb.item[href$='"+n.parents(".tab-pane").attr("id")+"']").length>0){v(".btn.crumb.item[href$='"+n.parents(".tab-pane").attr("id")+"']").click()}n.focus()}h(d,!l.savePosition,l.height==="auto"&&!l.onTop);d.trigger("loaded")}function p(e,t){var i=v(".modal-body form .tab-content"),n={},a;if(e){if(i&&i.length>0&&i.find("input")&&i.find("input").length>0){i.find("input").each(function(e,t){var i=v(t).attr("name")||v(t).parents().find("div[name]").attr("name");n[i]=v(t).val()});window.featureNotSavedData=n;a=null}}else{window.featureNotSavedData=null}if(l.view){if(!giscloud.app||!giscloud.app.loadView){throw"giscloud.ui.modal: can't load view. Not a giscloud app environment."}if(v.isPlainObject(l.view)){s=v.extend(true,{target:d.find(".modal-body")},l.view)}else{s={name:l.view.toString(),data:l.viewData||{},target:d.find(".modal-body"),useGcLang:!!l.useGcLang}}giscloud.app.loadView(s.name,s.target,s.data,s.useGcLang).done(f.bind(this,t))}else if(l.url){d.find(".modal-body").load(l.url,l.data,f.bind(this,t))}else{d.find(".modal-body").append(l.html);d.removeClass("hidden");d.on("shown.bs.modal",f.bind(this,t))}}p.call(this);if(l.minimize){var m=v('<button type="button" class="gc-minimize-bt" >-</button>').click(function(){d.toggleClass("gc-minimized")});d.find(".modal-header button.close").after(m)}if(l.maximize){var g=v('<button type="button" class="gc-maximize-bt" ></button>').click(function(e){var t=v(d.find("form")),i=v._data(t.get(0),"events");e.preventDefault();d.toggleClass("gc-maximized");if(giscloud.ui.map&&giscloud.ui.map.options&&giscloud.ui.map.options.FEATURE_EDIT_FORM_HIDE_PAGINATION&&(giscloud.ui.map.options.FEATURE_EDIT_FORM_HIDE_PAGINATION==="1"||giscloud.ui.map.options.FEATURE_EDIT_FORM_HIDE_PAGINATION==="true")){d.toggleClass("-no-pagination")}else if(d.hasClass("-no-pagination")){d.removeClass("-no-pagination")}d.find("button.gc-maximize-bt").toggleClass("active");p.call(this,true,true);if(i&&!i.onFormSubmitStart){d.on({"submitStart.gc-custom-form":o,"submitSuccess.gc-custom-form":u,"submitFailure.gc-custom-form":c})}}.bind(this));d.find(".modal-header button.close").after(g)}if(l.draggable||l.dragable){d.addClass("gc-draggable").draggable({handle:".modal-header",containment:[-Math.Infinity,-30,Math.Infinity,Math.Infinity]})}if(l.data){d.data("gc-data",l.data)}d.on("hide.bs.modal",function(){v(".modal-backdrop").remove()});if(!l.allowHide){d.on("hidden.bs.modal",function(e){v(e.currentTarget).remove()})}if(l.closeOverlayClick){v(".modal-backdrop").click(function(){formManager.close(l.fid)})}if(l.savePosition){if(jQuery.cookie(l.fid+"_x")&&jQuery.cookie(l.fid+"_y")){var _={top:jQuery.cookie(l.fid+"_x"),left:jQuery.cookie(l.fid+"_y")};d.offset(_)}d.on("dragstop",function(e,t){jQuery.cookie(l.fid+"_x",d.offset().top);jQuery.cookie(l.fid+"_y",d.offset().left)})}if(l.phoneFullSc){d.addClass("smphone-fullsc");if(l.url.match(/\/rest\/\d+\/layers\/\d+\/(features\/\d+\/)?form\.html/i)){v(window).resize(function(){p.call(this,true,true)}.bind(this))}}d.on("center.bs.modal",function(){h(d,!l.savePosition,l.height==="auto")});d.focusin(function(e){if(e.srcElement&&e.srcElement.type==="text"){this.lastFocus=e.srcElement.id.split("_").slice(0,2).join("_")}else if(e.srcElement&&v(e.srcElement).hasClass("gc-modal")){this.lastFocus=false}}.bind(this));return d}})(jQuery,$);giscloud.ui.confirm=function(e,t){var i=new $.Deferred,t=t||{},n=t.fid||"__window"+Math.round(Math.random()*1e6),a=false,s=[],r,o,l,d;if(!t.hide_yes)s.push({clickGlobalScope:false,click:function(){a=true;r.close();i.resolve()},class:"bluebutton",html:t.yes_title||gclang.Yes});if(!t.hide_no)s.push({clickGlobalScope:false,click:function(){a=true;r.close();i.reject()},html:t.no_title||gclang.No});r=formManager.open({overlay:t.overlay||false,noclosebutton:true,dragable:true,bootstrap:true,fid:n,width:t.width||500,height:t.height||"auto",title:t.title||__("Confirm"),donthideall:t.donthideall||false,buttons:s,html:'<div style="padding-right:20px; line-height:18px; height: auto; width: auto; white-space: nowrap;" class="gc-window-text">'+e+"</div>"});i.always(function(){r.close()});r.addEvent("close",function(e){if(!a){i.reject()}});o=r.container.find(".gc-window-text");l=t.width?t.width:Math.max(o.width()+50,200);d=t.height?t.height:Math.max(o.height()+100,120);o.parent().css("padding","1.5em","important");r.yes=function(e){i.done(e);return this};r.no=function(e){i.fail(e);return this};r.whatever=function(e){i.always(e);return this};return r};(function(o){if(!window.gcapp)return;gcapp.beforeDatagridDelete=null;var i={},a=false;function n(){var e=gcapp.gclayer.llist.getSelected();if(e&&e.source.type==="pg"){return{id:e.id,type:e.type,dbtype:e.source.dbtype,external:e.source.connid!=null&&e.source.connid>-1}}return null}function s(){giscloud.ui.map.selection.clear();gcapp.selo.clearSelection()}function r(a){a=a.toUpperCase();o.each(giscloud.ui.map.layers,function(e,t){var i=t.type.toUpperCase();var n=fnl.getLayerById(t.id);t.selectable((i===a||i==="MULTI"+a)&&n.lock!="t")})}function l(){o.each(giscloud.ui.map.layers,function(e,t){i[t.id]=t.selectable()})}function d(){o.each(giscloud.ui.map.layers,function(e,t){t.selectable(i[t.id]||true)})}function u(){giscloud.ui.map.reloadMap();gcdatagrid&&gcdatagrid.refresh()}function c(){giscloud.ui.greenAlert("Data has been saved successfully...");giscloud.ui.customForm.disable()}function h(){giscloud.ui.greenAlert("Data has been saved successfully",2e3);giscloud.layers.reset(giscloud.ui.map.mapId,[currentLayer.id]).done(u,giscloud.ui.customForm.close)}function f(){giscloud.ui.redAlert("Error occured. Please check your input data.",2e3);giscloud.ui.customForm.enable()}function e(){var i,n;if(gcapp.selo.selectionCount()===0){gcapp.cancelClone();return}if(a&&gcapp.selo.selectionCount()>1){giscloud.ui.redAlert(gclang.Clone_feature_geometry_and_attributes_option_works_only_on_one_object_,3e3);gcapp.cancelClone(true);return}i=gcapp.selo.selection.lid;n=gcapp.selo.selection.fids;s();gcapp.gcmap.options.dontShowInfo=false;d();gcapp.addingFeature=false;giscloud.ui.greenAlert(gclang["PleaseWait"]);o.when(a&&giscloud.features.byId(i,n)||null,giscloud.ui.customForm.open({layerId:currentLayer.id})).always(giscloud.ui.alert.hide).done(function(e,t){if(a&&e){t.triggerHandler("setData",[e.data])}t.trigger("setFeatureGeometry.gc-custom-form",{feature_ids:n,layer_id:i}).trigger("setRestParams.gc-custom-form",{}).on({"submitStart.gc-custom-form":c,"submitSuccess.gc-custom-form":h,"submitFailure.gc-custom-form":f})})}function p(e,t){return giscloud.ui.alert.color("red").show(e,t)}function m(e,t){return giscloud.ui.alert.color("green").show(e,t)}gcapp.mergeFeatureGeom=function(e){var t=n();if(gcapp.addingFeature||gcapp.editingFeature){return}if(t){if(t.dbtype==="oracle"){giscloud.ui.redAlert("Oracle database layer don't support this yet.",3e3);return}currentLayer=t;if(gcapp.selo.selectionCount()===0){p(gclang.None_of_objects_on_the_map_is_selected,3e3);return}selectedObject={lid:gcapp.selo.selection.lid,fids:gcapp.selo.selection.fids,replaceGeometry:e};if(selectedObject.fids.length>1){p(gclang.On_the_map_is_selected_more_then_one_object__please_select_just_one_which_you_want_to_edit,3e3);return}m(gclang["clonefeaturegeom_message_"+t.type]+"<br/></br>"+"<a href='javascript:;' onclick='gcapp.acceptMerge(); return false;'>"+gclang.Accept+"</a>"+"<a href='javascript:;' onclick='gcapp.cancelMerge(); return false;'>"+gclang.Cancel+"</a>");gcapp.addingFeature=true;gcapp.gcmap.options.dontShowInfo=true;gcapp.gcmap.marker.clear();s();l();r(t.type)}else{p(gclang.None_of_layers_is_selected,3e3)}};gcapp.acceptMerge=function(){t()};gcapp.cancelMerge=function(){gcapp.cancelClone()};function t(){var e,t;if(gcapp.selo.selectionCount()===0){gcapp.cancelMerge();return}e=gcapp.selo.selection.lid;t=gcapp.selo.selection.fids;s();d();gcapp.addingFeature=false;m(gclang["PleaseWait"]);giscloud.features.update(selectedObject.lid,selectedObject.fids[0],{geometry:{layer_id:e,feature_ids:t,merge:!selectedObject.replaceGeometry}}).done(function(){m(gclang.Data_saved__Map_refreshing___);giscloud.layers.reset(giscloud.ui.map.mapId,[selectedObject.lid]).done(function(){giscloud.ui.alert.hide();u()}).fail(function(e,t,i,n,a){p(a||i,3e3)})}).fail(function(e,t,i,n,a){p(a||i,3e3)})}gcapp.cloneFeatureGeom=function(e){var t=n();a=e;if(gcapp.addingFeature||gcapp.editingFeature){return}if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}if(t){if(t.dbtype==="oracle"){giscloud.ui.redAlert("Oracle database layer don't support this yet.",3e3);return}window.currentLayer=t;giscloud.ui.greenAlert(gclang["clonefeaturegeom_message_"+t.type]+"<br/></br>"+"<a href='javascript:;' onclick='gcapp.acceptClone(); return false;'>"+gclang.Accept+"</a>"+"<a href='javascript:;' onclick='gcapp.cancelClone(); return false;'>"+gclang.Cancel+"</a>");gcapp.addingFeature=true;gcapp.gcmap.options.dontShowInfo=true;gcapp.gcmap.marker.clear();s();l();r(t.type)}else{giscloud.ui.redAlert(gclang["clonefeaturegeom_choose_layer_message"],3e3)}};gcapp.acceptClone=function(){e()};gcapp.cancelClone=function(e){if(!e)giscloud.ui.alert.hide();s();gcapp.addingFeature=false;gcapp.gcmap.options.dontShowInfo=false;d()};gcapp.deleteMe=function(e,t){if(t&&t.stopPropagation)t.stopPropagation();if(!confirm("Are you sure?")){return}var i;if(gcapp.config&&gcapp.config.newDatagrid){i=e}else{i=gcdatagrid.getDataByRow(e)}var n=i&&i.__id,a=gcapp.gclayer.llist.getSelected(),s=a&&a.id,r;if(n!=null&&s!=null){if(gcapp.beforeDatagridDelete){r=gcapp.beforeDatagridDelete(s,n);if(r===false){return false}else if(!r.state){r=(new o.Deferred).resolve()}}else{r=(new o.Deferred).resolve()}r.done(function(){var e={};if(user&&user.options&&user.options.CLEAR_MAP_CACHE_CASCADE==="1"||giscloud.ui.map&&giscloud.ui.map.options&&giscloud.ui.map.options.CLEAR_MAP_CACHE_CASCADE==="1"){e.cascade=true}gcapp.gcmap.marker.clear();gcapp.gcmap.options.dontShowInfo=true;giscloud.ui.alert.green().show(gclang["PleaseWait"]);var t=new giscloud.Queue([function(){return giscloud.features.remove(s,n)},function(){return giscloud.layers.reset(giscloud.ui.map.mapId,[s],e)}]);t.done(function(){giscloud.log.push("feature_delete",{layerid:s,featureid:n,count:1,app:gcapp.name(),url:window.location.href});giscloud.ui.alert.green().show(gclang["Successfully_deleted_"],3e3);gcapp.selo.clearSelection();gcdatagrid&&gcdatagrid.refresh();giscloud.ui.map.reloadMap();gcapp.gcmap.options.dontShowInfo=false})})}return false};gcapp.isEditable=function(e,t,i){var n,a,s,r,o;if(e){n=e.source.type||e.sourcetype||e.sourceType;s=fno.editable&&!e.gcmap_sublayer&&(i||n==="pg");r=editable&&e.mapId.toString()===fn.getMap().mid.toString()}else{s=false;r=editable}if(fno.viewerSite==fno.liveSite||fno.app_instance_type=="mapviewer"){return false}else if(e&&e.datasource&&e.datasource.id){if(fno.app_instance_id==fno.gcinit_mdc_portal_id&&fno.app_instance_id==user.active_subscription.app_instance_id&&!(e.datasource.owner_id==user.id||e.owner==user.id||jQuery.inArray("OWNER",e.datasource.permissions)>-1)){s=false}else{s=e.datasource.owner_id==user.id||e.owner==user.id||jQuery.inArray("OWNER",e.datasource.permissions)>-1||jQuery.inArray("EDIT",e.datasource.permissions)>-1||jQuery.inArray("UPDATE",e.datasource.permissions)>-1||jQuery.inArray("DELETE",e.datasource.permissions)>-1||jQuery.inArray("INSERT",e.datasource.permissions)>-1;if(!s&&(!e.datasource.permissions||e.datasource.permissions.length===0)){s=r}}}else{s=t?r:s&&r}a=fn.getMap();o=gcproject.isMapAccessibleByPlan(a,true);return s&&o};gcapp.isShareable=function(e){return e.owner==window.user.id||e.datasource&&e.datasource.permissions&&jQuery.inArray("SHARE",e.datasource.permissions)>-1};gcapp.canInsert=function(e){var t=gcapp.isEditable(e),i=e&&e.source&&e.source.dbtype==="oracle";return t&&!i&&(!e.datasource.permissions||e.datasource.permissions.length==0||jQuery.inArray("EDIT",e.datasource.permissions)>-1||jQuery.inArray("OWNER",e.datasource.permissions)>-1||jQuery.inArray("INSERT",e.datasource.permissions)>-1)};gcapp.canUpdate=function(e,t){var i=gcapp.isEditable(e,false,t),n=e&&e.source&&e.source.dbtype==="oracle";return i&&!n&&(!e.datasource.permissions||e.datasource.permissions.length==0||jQuery.inArray("EDIT",e.datasource.permissions)>-1||jQuery.inArray("OWNER",e.datasource.permissions)>-1||jQuery.inArray("UPDATE",e.datasource.permissions)>-1)};gcapp.canDelete=function(e){var t=gcapp.isEditable(e),i=e&&e.source&&e.source.dbtype==="oracle";if(e.source&&e.source.h3)return false;return t&&!i&&(!e.datasource.permissions||e.datasource.permissions.length==0||jQuery.inArray("EDIT",e.datasource.permissions)>-1||jQuery.inArray("OWNER",e.datasource.permissions)>-1||jQuery.inArray("DELETE",e.datasource.permissions)>-1)};gcapp.canExport=function(e){var t=e.datasource.owner_id==user.id,i=fn.getMap(),n=i&&jQuery.isArray(i.permissions)&&(jQuery.inArray("EXPORT",i.permissions)>-1||jQuery.inArray("OWNER",i.permissions)>-1),a=e.datasource.permissions&&e.datasource.permissions.length>0&&(jQuery.inArray("EXPORT",e.datasource.permissions)>-1||jQuery.inArray("OWNER",e.datasource.permissions)>-1);return t||n||a};gcapp.editRowInfo=function(e,t){if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}if(t&&t.stopPropagation){t.stopPropagation()}window.lastAttrEdit="datagrid";var i;if(gcapp.config&&gcapp.config.newDatagrid){i=e}else{i=gcdatagrid.getDataByRow(e)}featureId=i&&i.__id,layer=gcapp.gclayer.llist.getSelected(),layerId=layer&&layer.id;if(layerId!=null&&featureId!=null){giscloud.ui.customForm.editFeature(layerId,featureId).done(function(){gcapp.selo.clearSelection();gcapp.gcmap.marker.clear()})}};gcapp.restTablesToLegacyTables=function(s){return function e(t){var n,a,i;if(s&&s.ctype==="2"){i=s.connstr&&JSON.parse(s.connstr);n=i.user;a="oracle"}else{n=user.username}return o.map(t.data||[],function e(t){var i;if(s&&s.ctype==="2"){i=""}else{i=t.schema||"usrsch"+user.id}return{name:t.name,reccount:t.num_rows,geometry:t.geometry&&t.geometry.toLowerCase(),epsg:t.srid&&t.srid.toString(),schemaname:i,username:n,uid:user.id.toString(),isview:t.is_view,type:a,options:t.options}})}}})(giscloud.exposeJQuery());(function(s){var i=null,r,e,o;e=function(e,t){i=t;o.resolveWith(i,[i])};if(!window.gcapp)return;s(document).on("formReady.gc-custom-form",".gc-custom-form",e);gcapp.addEvent("ready",function(){if(!giscloud.ui.map){return}giscloud.ui.map.ready(function(){var e={edit:fno.gcinit_auth.type};if(user.options.TOOLBAR_ELEMENTS){var t=s.isArray(user.options.TOOLBAR_ELEMENTS)?user.options.TOOLBAR_ELEMENTS:user.options.TOOLBAR_ELEMENTS.split(",");if(t&&t.length>0)e.elements=t}gcapp.gctoolbar=new gcToolbar(e);gcapp.gctoolbar.setTool("InfoTool");if(window.open_feature){var i=open_feature.feature_id,n=open_feature.layer_id;gcapp.selo.selectOnMap({fids:[i],lid:n},true);window.open_feature=null}giscloud.ui.datagridDrawer.init().show();s(gcapp.gcmap.marker).on("gc-info-popup-edit-click",function(e,t){giscloud.ui.customForm.editFeature(t.layerId,t.featureId).done(function(){gcapp.gcmap.marker.clear()})})})});giscloud.ui.customForm={beforeOpen:null,open:function(e){var t,i,n,a;o=new s.Deferred;if(!e.layerId&&!e.tableName&&!e.formId){throw"You need to specify the layer id (layerId), form id (formId) or table name (tableName) at least."}if(r&&r.close){giscloud.ui.customForm.close()}if(e.tableName){t="/rest/1/tables/"+e.tableName+"/rows";if(e.featureId){t+="/"+e.featureId}if(e.formId){t+="/forms/"+e.formId+".html"}else{t+="/form.html"}}else if(e.datasourceId){t="/rest/1/datasources/"+e.datasourceId+"/data";if(e.featureId){t+="/"+e.featureId}if(e.formId){t+="/forms/"+e.formId+".html"}else{t+="/form.html"}}else if(e.layerId){t="/rest/1/layers/"+e.layerId;if(e.featureId){t+="/features/"+e.featureId}if(e.formId){t+="/forms/"+e.formId}else{t+="/form.html"}}else if(e.formId){t="/rest/1/forms/"+e.formId+".render.html"}t+="?buttons=none&r="+s.now();if(e.title!==null){a=e.title}else{a=e.featureId?gclang["Edit_feature"]:gclang["Add_feature"]}r=formManager.open({minimize:true,maximize:true,width:700,draggable:true,bootstrap:true,overlay:false,fid:"custom-form-window",title:a,url:t,extraClass:"gc-custom-attr",phoneFullSc:true,buttons:[{html:e.submitButtonText?e.submitButtonText:gclang["Save"],class:"bluebutton",click:"giscloud.ui.customForm.save(); return false;"},{html:gclang["Cancel"],click:"giscloud.ui.customForm.close(); return false;"}]});r.addEvent("close",function(){if(n){n.triggerHandler("close.gc-custom-form")}s(".gc-custom-form").remove();n=null});s("#custom-form-window").on("setTitle.gc-custom-form",function(e,t,i){n=s(e.target);if(i.title){if(typeof i.title=="string"){s("#custom-form-window .modal-header h3").text(i.title)}else{s("#custom-form-window .modal-header h3").text(i.title["default"]||i.title["en"])}i.title=null}});r.container.one("shown.bs.modal",function(){s(".gc-custom-form",this).find("input,textarea,select").first().focus()});o.done(function(){s(".selectpicker").on("show.bs.select",function(){if(s(this).closest(".modal-body")[0].scrollHeight>s(this).closest(".modal-body")[0].offsetHeight)return;s(".modal-body").css({"overflow-y":"visible"})});s(".selectpicker").on("hide.bs.select",function(){if(s(this).closest(".modal-body")[0].scrollHeight>s(this).closest(".modal-body")[0].offsetHeight)return;s(".modal-body").css({"overflow-y":"auto"})})});return o.promise()},editFeature:function(i,e){var n=new s.Deferred,t;if(giscloud.ui.customForm.beforeOpen){t=giscloud.ui.customForm.beforeOpen(i,e);if(t===false||t==null){return n.reject().promise()}else if(!t.state){t=new s.Deferred;t.resolve()}}else{t=new s.Deferred;t.resolve()}t.fail(n.reject).done(function(){giscloud.ui.customForm.open({layerId:i,featureId:e}).done(function(e){e.on({"submitStart.gc-custom-form":giscloud.ui.customForm.disable,"submitSuccess.gc-custom-form":function(){var e={};if(user&&user.options&&user.options.CLEAR_MAP_CACHE_CASCADE==="1"||giscloud.ui.map&&giscloud.ui.map.options&&giscloud.ui.map.options.CLEAR_MAP_CACHE_CASCADE==="1"){e.cascade=true}var t=giscloud.ui.map.layerById(i).options?giscloud.ui.map.layerById(i).options.filter(function(e){return e.option_name==="MAP_RECACHE_AFTER_EDIT"&&e.option_value=="0"}):[];if(t.length===1){gcdatagrid&&gcdatagrid.refresh();n.resolve();giscloud.ui.customForm.close();return}giscloud.layers.reset(giscloud.ui.map.mapId,[i],e).done(function(){giscloud.ui.map.reloadMap();gcdatagrid&&gcdatagrid.refresh()},n.resolve,giscloud.ui.customForm.close)},"submitFailure.gc-custom-form":function(e,t,i,n,a,s,r){giscloud.ui.customForm.handleError({status:t,code:a,description:r&&r.msg?r.msg:null});giscloud.ui.customForm.enable()}})});r.addEvent("close",function(){n.reject()})});return n.promise()},reset:function(){if(r){s(i).triggerHandler("reset.gc-custom-form")}},save:function(){if(r){s(i).triggerHandler("save.gc-custom-form")}},close:function(){if(r){s(i).triggerHandler("destroy.gc-custom-form");s(i).triggerHandler("close.gc-custom-form");s(".gc-custom-form").remove();r.close();i=null}},enable:function(){if(r){r.enable()}},disable:function(){if(r){r.disable()}},current:function(){return i},handleError:function(e){var t;if(e&&e.length>=3){t=e.description.match(/^Wrong data type for ([^ ]+): expected ([^ ,\(]+)/i);n("Wrong data type for field <i>"+t[1]+"</i>!<br/>Expecting "+t[2]+" type,<br/>check your form definition!",8e3)}else{n(__("errorMsgwithMail"))}}};function n(e,t){giscloud.ui.alert.red().show(e,t||4e3)}})(giscloud.exposeJQuery());function forgotPasswordClick(){$(".modal.gc-modal,.modal-backdrop").remove();giscloud.ui.modal({fid:"forgotpasswordform",overlay:true,title:"Forgot Your Password?",width:"auto",height:"auto",phoneFullSc:true,url:"/user/form_forgot_password"});return false}function showRegistrationForm(){return giscloud.ui.modal({title:"Registration",phoneFullSc:true,url:"/registration/form"})}function showNamePrefix(){if(window.fno&&fno.namePrefix&&fno.namePrefix.length){$("<div/>").addClass("gc-nameprefix").appendTo($("body")).text(fno.namePrefix)}}(function(e,r,t){gcapp.payment=gcapp.payment||{};var o,l=this;function d(e,a){var t=new r.Deferred;function i(){if(o.length==0){return}var n;r.each(o,function(e,t){var i=0;if(t.subscriptions){r.each(t.subscriptions,function(e,t){if(t.stripe_subscription_id!=null&&t.canceled==false){i++}})}if(i>=25){return}if(a&&t&&t.customer_id==null){n=t;return false}else if(!a&&t&&t.customer_id&&t.customer_id.length>10){n=t;return false}});return n}var n=true;if(!n&&o){t.resolve(i())}else{var s={expand:"subscriptions"};s.userId=e>0?e:null;giscloud.payment.customers.list(s).done(function(e){o=e;t.resolve(i())})}return t.promise()}function n(i){var n=new r.Deferred;giscloud.payment.plans.list().done(function(e){r.each(e,function(e,t){if(t.code==i){n.resolve(t);return}});n.reject()});return n.promise()}function a(e){return giscloud.payment.coupons.byId(e)}function i(s){if(!s){console.warn("Charge_Data not specified!");return}if(!(s.amount>0)&&!s.plan){console.warn("Amount and plan not specified!");return}function i(n,a){d().done(function(e){giscloud.ui.alert.hide();function t(){s.customer_id=e.id;if(n){l.details={plan:n,coupon:a,charge_data:s}}else{l.details={amount:s.amount,charge_data:s}}l.charge_data=s;gcapp.payment.showCards(e.id,true)}function i(){var e=function(e){s.stripeToken=e.id;u(s)};var t={key:fno.stripe_pkey,email:user.email,currency:"usd",token:e};r.extend(t,s);StripeCheckout.open(t)}if(e){giscloud.payment.cards.list(e.id).done(function(e){if(e.length){t()}else{i()}}).fail(function(){i()})}else{i()}})}if(s.plan){giscloud.ui.alert.green().show("Initializing...");n(s.plan).done(function(t){if(s.coupon_id){a(s.coupon_id).done(function(e){i(t,e)}).fail(function(){giscloud.ui.alert.hide();alert("Can not found the coupon specified.")})}else{i(t)}}).fail(function(){giscloud.ui.alert.hide();alert("Can not found the plan specified.")})}else if(s.amount){i()}}function u(e){if(gcapp.payment.cardModal)gcapp.payment.cardModal.disable();e=e?e:l.charge_data;if(!e){alert("Payment data is missing. Please contact our support at 'support@giscloud.com' to resolve the issue ASAP.");return}if(!fno.payment&&!user.options.PAYMENT){alert("Payment is disabled.");return}r("#plans_section").overlay(true,true);om.kcall("payment/charge",e,function(e){l.charge_data=null;r("#plans_section").overlay(false);var t="<div class='alert alert-danger' >We were unable to process your credit card payment. Please verify your card details and try again.  If the problem persists, contact us to complete your order.</div>";formManager.close("cardwindow");if(!e){formManager.alert("Payment error",t)}else if(e.result=="yes"){var i="<p class='lead' >Your payment has been successfully processed. Thank you for subscribing!</p><p class='lead alert alert-info' >To activate your new subscription you need to assign it to a specific user. For additional info please <a target='_blank' href='https://manual.giscloud.com/knowledge-base/how-to-assign-a-gis-cloud-license' ><u>click here</u></a>.</p>";formManager.alert("Payment completed",i)}else{if(e.msg)formManager.alert("Payment error",e.msg);else formManager.alert("Payment error",t)}if(gcapp.userManager)gcapp.userManager.subscriptionsRefresh()})}gcapp.payment={hasCustomer:d,buy:function(e){i(e)},showCards:function(e,t){formManager.close("cardwindow");var i={fid:"cardwindow",title:"Cards",url:"/card/form",data:{customer_id:e,details:l.details}};if(t){i.buttons=[{html:"Purchase",class:"bluebutton",id:"payment_charge_bt"},{html:"Close",click:"$('#cardwindow').remove(); $('.modal-backdrop').remove();"}];i.data.purchaseMode=true;i.privateButtons=true}gcapp.payment.cardModal=formManager.open(i);r("#payment_charge_bt").click(function(){u()});gcapp.payment.cardModal.disable()}}})(window,giscloud.exposeJQuery());(function(i,l,e){gcapp.view=gcapp.view||{};gcapp.view={setView:function(e){if(!giscloud.ui.map){return}var t=LZString.decompressFromBase64(e),i=new URLSearchParams(t),n=i.get("scale"),a=i.get("center"),s=i.get("visibility"),r=i.get("folders"),o,l,d=giscloud.ui.map;if(n||a){d.initializing.done(function(){if(a){o=parseFloat(a.split(",")[0]);l=parseFloat(a.split(",")[1]);d.center(new giscloud.LonLat(o,l),n)}else{d.scale(n)}})}this.setViewVisibility(s);this.setViewFolders(r)},setViewVisibility:function(t){var r=giscloud.ui.map;if(!t){return}r.loading.done(function(){var e=t.split(",");l.each(e,function(i,e){var t=e.split(" "),n=parseInt(t[0]),a=t[1],s=t[2];r.layers[i].visible(n?true:false);r.layers[i].opacity(a*100);if(s&&s!=="x"){s=s.split("");l.each(s,function(e,t){r.layers[i].expressionVisible(e,parseInt(t))})}})})},setViewFolders:function(t){var e=giscloud.ui.map;if(!t){return}e.loading.done(function(){e.bind("loaded",function(){if(i.layerList){layerList.layersLoading.done(function(){var e=t.split(",");l.each(e,function(e,t){var i=t.split(" "),n=parseInt(i[0]),a=parseInt(i[1]),s=parseInt(i[2]),r=layerList.getNodeById(n),o=l("#"+r.id+" > .gc-eye");layerList.visibility(n,a);if(a&&!o.hasClass("gc-eye-visible")||!a&&o.hasClass("gc-eye-visible")){o.toggleClass("gc-eye-visible")}layerList.toggle(layerList.layers().filter(function(e){return parseInt(e.id)===n})[0],s)})})}})})}}})(window,giscloud.exposeJQuery());(function(){window.__=function(e){if(!e||!e.replace)return e;if(!window.gclang)return e;langKeyR=e.replace(/[ ,.?!;:'\\+\-()]/g,"_");langKeyR=langKeyR.replace(/\&/g,"and");return langKeyR in gclang?gclang[langKeyR]:gclang.app&&e in gclang.app?gclang.app[e]:e}})(jQuery);(function(e,t,i,n){t.callWoopra=function(e,t){om.kcall("logs/woopra/search",{username:e},t)}})(jQuery,window,window.document,$);gcapp.addEvent("ready",function(){$("[data-type]").click(function(e){var t=$(this).attr("data-type"),i=$(this).attr("data-subtype");var n={type:t};if(i)n.subtype=i;giscloud.log.push("ui_click",n)});gcapp.showUILog=function(){function e(){$(".gc-ui-log-badge").remove();giscloud.logs.analytics.get().done(function(e){var t,i,n;$.each(e.data,function(e,i){if(i.event==1020){if(i.custom.subtype){t=$("[data-type='"+i.custom.type+"'][data-subtype='"+i.custom.subtype+"']")}else{t=$("[data-type='"+i.custom.type+"']:not([data-subtype])")}}else if(i.event==1019){t=$("[data-type='"+i.custom.tool+"']")}$.each(t,function(e,t){t=$(t);if(!t.is(":visible"))return;perc=i.count/i.total*100;n=$("<div/>").addClass("gc-ui-log-badge").attr("data-link",i.custom.type).html(Format.round(perc,1)+"%").appendTo($("body")).position({my:"left top",at:"left top",of:t});if(i.event==1019){n.addClass("small")}if(perc>75)n.addClass("lb-red");else if(perc>50)n.addClass("lb-orange");else if(perc>25)n.addClass("lb-yellow")})})})}$("body").click(e);e()}});(function(r,i,o){giscloud.dashboard=giscloud.dashboard||{};giscloud.dashboard.open=function(e){giscloud.dashboard.close();var t=formManager.fullpage({id:"gc-dashboard",url:"/dashboard",opacity:1,closeButton:fno.app_instance_id!=fno.gcinit_manager_id});t.done(function(){if(i.showCookieBar){showCookieBar()}if(typeof e=="string"){gcapp.userManager.showTab(e)}})};giscloud.dashboard.close=function(){formManager.closeFullpage("gc-dashboard")};giscloud.dashboard.openApp=function(e,t){var i,n,a,s;s=o.cookie.match(/PHPSESSID=[^;]+/);if(s&&s[0]){s=s[0].replace("PHPSESSID=","")}else{s=null}if(!t){i=l(e.app_url);n="https://"+i.domain}else{n=t}a=r("<form>",{action:n+"/assets/switch-app",method:"POST"}).append(r("<input>",{name:"sid",value:s,type:"hidden"})).append(r("<input>",{name:"url",value:e.app_url,type:"hidden"}));if(e.newWindow){a.attr("target","_blank")}a.appendTo(o.body);a.submit();return false};function l(e){parsed_url={};if(e==null||e.length===0){return parsed_url}protocol_i=e.indexOf("://");parsed_url.protocol=e.substr(0,protocol_i);remaining_url=e.substr(protocol_i+3,e.length);domain_i=remaining_url.indexOf("/");domain_i=domain_i==-1?remaining_url.length:domain_i;parsed_url.domain=remaining_url.substr(0,domain_i);parsed_url.path=domain_i==-1||domain_i+1==remaining_url.length?null:remaining_url.substr(domain_i+1,remaining_url.length);domain_parts=parsed_url.domain.split(".");switch(domain_parts.length){case 2:parsed_url.subdomain=null;parsed_url.host=domain_parts[0];parsed_url.tld=domain_parts[1];break;case 3:parsed_url.subdomain=domain_parts[0];parsed_url.host=domain_parts[1];parsed_url.tld=domain_parts[2];break;case 4:parsed_url.subdomain=domain_parts[0];parsed_url.host=domain_parts[1];parsed_url.tld=domain_parts[2]+"."+domain_parts[3];break}parsed_url.parent_domain=parsed_url.host+"."+parsed_url.tld;return parsed_url}})(jQuery,window,window.document);var gcSubscription=function(f,e){var i,n,a,s,r,o,l,d,u,c,h,p,m='<a class="linkbutton" href="mailto:sales@giscloud.com">sales@giscloud.com</a>';if(window.subscriptionTimeout){f("#refreshStorageBtn").addClass("disabled");f("#refreshStorageMsg").show()}f("#subscription .gc-full-page-close-btn").on("click",function(){if(window.subscriptionTimeout){clearTimeout(window.subscriptionTimeout);window.subscriptionTimeout=null}});parseDate=function(e){if(typeof e==="number"){return new Date(e*1e3)}var t=/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})\.\d*([+\-])(\d{2})/,i=e&&e.match&&e.match(t),n=i&&new Date(parseInt(i[1]),parseInt(i[2])-1,parseInt(i[3]),parseInt(i[4]),parseInt(i[5]),parseInt(i[6])),a=i&&(i[7]==="-"?-1:1)*parseInt(i[8]),s=a&&n&&a*60-n.getTimezoneOffset();if(s){n=new Date(n.getTime()+s*60*1e3)}return n},createProgressBar=function(e,t){return gcApp.utils.createProgressBar(e,t)};n=function(){return om.rest("users/current/subscriptions.json",{expand:"app_instance,payment",where:"active = true"}).pipe(function(e){return e.data})};a=function(e){user.subscriptions=e;gcapp.calculateLimits()};i=function(e){var t=e?e:user.active_subscription;if(!t){showNoActiveSubscription();console.log("No active subscription.");return}switch(t.type){case"10":r();break;case"20":o(t);break;case"23":showCommercialPendingSubscriptionText();break;case"25":l(t);break;case"30":c();break}s();switch(t.type){case"10":d();break;case"20":p(t);break;case"23":showTrialBonusText(t);break;case"25":showPremiumText(t);break;case"30":h();break;default:u()}if(t.type!=="20"){gcapp.showTitleBar(false)}};getDateString=function(e,t){if(t){e=e.replace("YYYY",t.getFullYear()).replace("MM",t.getMonth()+1).replace("DD",t.getDate())}else{e=e.replace("MM/DD/YYYY","...")}return e};showNoActiveSubscription=function(){f("#subscriptionText").html("You do not have active subscription.")};r=function(){f("#subscriptionText").html(gclang["Subscription_non_commercial"])};o=function(e){var t=parseDate(e.ends);f("#subscriptionText").html(getDateString(gclang["Subscription_commercial_trial"],t))};showCommercialPendingSubscriptionText=function(e){f("#subscriptionText").html(gclang["Subscription_commercial_pending"])};l=function(e){var t=parseDate(e.ends);f("#subscriptionText").html(getDateString(gclang["Subscription_commercial"],t))};d=function(){f("#usrform_subscription_change_text").html(gclang["Change_subscription_to_commercial"]);f("#usrform_subscription_submit").html(gclang["Start_a_free_14_day_trial"]);f("#usrform_subscription_submit").show()};u=function(){f("#usrform_subscription_change_text").html(gclang["Change_subscription_to_non_commercial"]);f("#usrform_subscription_submit").html(gclang["Switch_to_a_Non_Commercial_License"])};p=function(){f("#usrform_subscription_change_text").html(gclang["You_are_on_a_trial"]);f("#usrform_subscription_submit").html(gclang["Switch_to_a_Non_Commercial_License"]);f("#usrform_subscription_submit").hide()};showTrialBonusText=function(){f("#usrform_subscription_change_text").html(gclang["You_are_on_a_trial"]);f("#usrform_subscription_submit").html(gclang["Switch_to_a_Non_Commercial_License"])};showPremiumText=function(){f("#usrform_subscription_submit").hide()};c=function(){f("#subscriptionText").html(gclang["Subscription_free_beta"])};h=function(){f("#usrform_subscription_change_text").html(gclang["Free_beta_feedback_please"]);f("#usrform_subscription_change_title").html(gclang["Feedback"]);f("#usrform_subscription_submit").hide()};s=function(e){var t=e||user,i=gcApp.utils.getIntVal(t.file_feature_count)+gcApp.utils.getIntVal(t.db_feature_count),n=gcApp.utils.getIntVal(t.storage_raster),a=gcApp.utils.getIntVal(t.feature_count_limit),s=gcApp.utils.getIntVal(t.storage_raster_limit),r=Math.round(n/1024/1024),o=Math.round(s/1024/1024),l=Math.floor(i/a*100),d=Math.floor(n/s*100),u=Math.floor((l+d)/2);f("#nrFeaturesText").html(numeral(i).format("0,0")+" / "+numeral(a).format("0,0"));if(i>a){var c=numeral(i).format("0,0")+" / "+numeral(a).format("0,0");f("#nrFeaturesText").html("<div class='alert alert-danger' >"+c+" You are over limits. Please contact our "+m+".</div>")}else{f("#nrFeaturesText").html(numeral(i).format("0,0")+" / "+numeral(a).format("0,0"))}f("#rasterStorageText").html(r+" / "+o+"MB");if(r>o){var c=r+" / "+o;f("#rasterStorageText").html("<div class='alert alert-danger'>"+c+" You are over limits. Please contact our "+m+".</div>")}else{f("#rasterStorageText").html(r+" / "+o+"MB")}f("#user_featureslimit").val(a);f("#user_rasterlimit").val(o);createProgressBar("nrFeaturesProgressBar",l);createProgressBar("rasterStorageProgressBar",d);updatePrivateMapsInfo();if(user.active_subscription){var h=user.active_subscription.type*1;if(h==10&&user.active_subscription.over_limits){window.checkIfUserHasEditorLicence().done(function(e){if(e){f("#subsc_notification").html('<p class="lead lightred"  >Your account usage exceeds allowed limits. To assign your Premium license go to <a class="linkbutton" href="javascript:;" onclick="giscloud.dashboard.open(\'users\');"> Manager app </a> or continue using under free license with limited storage and without private map.</p><div style="margin:0;" class="" ></div>')}else{f("#subsc_notification").html('<p class="lead lightred"  >Your account usage exceeds allowed limits. Please upgrade your plan to a Premium license or continue using under free license with limited storage and without private map. </p><div style="margin:0;" class="" ></div>')}})}}};updatePrivateMapsInfo=function(){var e=f("#nrPrivateMaps");if(e&&user.private_maps){if(user.active_subscription.type!=10||!user.private_maps.length){e.removeClass("deletebutton").unbind("click")}else{e.addClass("deletebutton").click(function(){fnm.showUserPrivateMaps()})}e.html("You have "+user.private_maps.length+" private map(s).")}};this.justShowUsage=function(e){if(e!=null){return om.rest("users/"+e+".json").done(s)}};this.refresh=function(e,t){if(!f("#subscription").length)return;if(e){n().done(function(e){a(e);if(t)t(function(){i();f(window).on("closing.fullpage",function(){window.location.reload()})})})}else{i(user.active_subscription)}};this.submitSubcriptionChange=function(){var e=user.active_subscription,t={user_id:e.user_id,owner_id:e.owner_id,app_instance_id:e.app_instance_id,begins:Math.round(f.now()/1e3),ends:null},i=new Date,n=this;if(e.type==="10"){t.type=20}else{t.type=10}giscloud.log.push("subscription_change",{current:user.active_subscription.type,newsub:t.type,app_instance_id:e.app_instance_id});f("#usrform_subscription_submit").css("visibility","hidden");om.rest("users/current/subscriptions",t,null,{method:"POST"}).done(function(){f("#usrform_subscription_submit").css("visibility","visible");n.refresh(true,gcapp.check_subscription)}).fail(function(e){f("#usrform_subscription_submit").css("visibility","visible");if(e&&e.message&&e.code){if(e.code==="-23"){alert("You have used all of your Premium trial period. Please upgrade your plan to a Premium license or continue using under free license with limited storage and without private map.")}else if(e.code==="SUBSCRIPTION_CAN_ONLY_CONTINUE_FREE"){alert(gclang.Can_only_continue_non_commercial)}}})};if(fno.app_instance_id!=null&&user.type!=2&&user.active_subscription){if(parseInt(user.active_subscription.type)>=20){f("#usrform_subscription_submit").html(gclang["Switch_To_Non_Commercial_License"])}else{f("#usrform_subscription_submit").html(gclang["Switch_To_Commercial_License"])}f("#usrform_subscription_submit").click(f.proxy(this.submitSubcriptionChange,this))}checkIfShouldRefresh=function(e,t){if(e&&e.file_feature_count&&e.db_feature_count&&e.storage_raster&&e.storage_total&&t&&t.file_feature_count&&t.db_feature_count&&t.storage_raster&&t.storage_total&&e.file_feature_count.toString()===t.file_feature_count&&e.db_feature_count.toString()===t.db_feature_count&&e.storage_raster.toString()===t.storage_raster&&e.storage_total.toString()===t.storage_total){return true}return false};f("#refreshStorageBtn").click(f.proxy(function(){var e=window.user&&window.user.id,t=this,i=window.user;if(e&&e>-1){f("#refreshStorageBtn").addClass("disabled");f("#refreshStorageMsg").show();var n=function(){f.getJSON("/modules_gc/users/cuser.php?module=user&task=refreshdiskusage&userid="+e).always(function(){t.justShowUsage(window.user.id).then(function(e){if(checkIfShouldRefresh(i,e)){window.subscriptionTimeout=setTimeout(function(){n()},6e4)}else{clearTimeout(window.subscriptionTimeout);window.subscriptionTimeout=null;f("#refreshStorageMsg").hide();f("#refreshStorageBtn").removeClass("disabled")}})})};n()}},this))};var lastLayerHover=null;var layerStateAID={};var layerVisibilityID=null;var layerLockID=null;var layerform;var cm1=[{header:"Visible",dataIndex:"visible",type:"checkbox",width:5},{header:"Selectable",dataIndex:"selectable",type:"checkbox",width:5},{header:"ID",dataIndex:"id",hidden:true},{header:"Updated",dataIndex:"updated",hidden:true},{header:"Tip",dataIndex:"tip",hidden:true},{header:"Name",dataIndex:"name",type:"custom",labelFunction:function(e,t,i){return"43"}}];var gcLayerModul=new giscloud.blja.Class({Extends:omModule,options:{id:"layermodule",position:"left"},initialize:function(e){this.setOptions(this.options,e);gcapp.registerModule(this);gcapp.addEvent("ready",this.appReady.bind(this))},appReady:function(){if(!$("#gclayertree").length){this.__init=true;return}this.container=$(this.options.id);this.llist=new gcLayerTree("gclayertree",this);this.llist.addEvent("select",this.showLayerData.bind(this));this.llist.addEvent("unselect",this.unselectLayer.bind(this));this.__init=true;gcapp.selo.addEvent("change",this.selectionChange.bind(this));gcapp.selo.addEvent("clear",this.selectionClear.bind(this));this.fireEvent("init",{target:this})},isReady:function(){return this.__init},resize:function(e,t){if(t){this.container.setStyle("height",t);this.llist.setSize(e,t-70)}},layerDatasourceShare:function(e){if(formManager){formManager.close("mapsharingform");formManager.close("resourcepermissionform")}if(is_numeric(e))var t=fnl.getLayerById(e);else var t=fnl.getSelectedLayers(true);if(!t){alert(gclang.lmod.no_selection);return}if(!gcapp.isEditable(t,true)&&!gcapp.isShareable(t)){return giscloud.ui.alert.color("red").show(gclang.Only_the_datasource_owner_can_manage_sharing+".",4e3)}if((t.source.type=="pg"||t.source.type=="file")&&jQuery.inArray(t.datasource.type*1,[10,15,20,110])!=-1){if(t.datasource.owner_id!=user.id&&!gcapp.isShareable(t)){return giscloud.ui.alert.color("red").show(gclang.Only_the_datasource_owner_can_manage_sharing+".",4e3)}giscloud.ui.resources.permissionForm(t.datasource.resource_id,{mdc:true})}else{return giscloud.ui.alert.color("red").show(gclang.At_the_moment_only_database_and_file_datasources_can_be_shared_to_other_users+".",4e3)}},showSelectedLayer:function(){var e=fnl.getSelectedLayers(true);if(e)this.llist.zoomToLayer(e.id);else alert(gclang.lmod.no_selection)},editSelectedLayer:function(){var e=fnl.getSelectedLayers(true);if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}if(e)this.editLayerByID(e.id);else alert(gclang.lmod.no_selection)},editLayerByID:function(e,t){if(!is_numeric(e))return;var i=fnl.getLayerById(e);var n=this.llist.tttree.getNodeById(e);if(this.isEmbededLayer(n)){alert(gclang.You_can_not_edit_sublayer_s__of_the_included_GIS_Cloud_map+".");return}if(i.type=="folder"){this.llist.rename(i.id);return}if(i.type=="rasterfolder"){alert(gclang.Can_not_edit_this_node_type+".");return}this.editLayer(i.id,t)},editLayer:function(e,t){var i=fnl.getLayerById(e);if(!gcapp.isEditable(i,true)){alert(gclang.mmod.no_edit_permission);return}this.layerChange(e,t)},throttledNewLayerButton:function(){var e;var t=1e3;return function(){if(!e){this.newLayer();e=true;setTimeout(function(){e=false},t)}}}(),selectionChange:function(e){var t=e.selection;if(t&&t.fids&&t.fids.length){var i=this.getLayerOptionByName("REPORT_BUTTON_NAME");if(i){$("#ribb_custom_report_btn .ribbon-label").html(i);$("#ribb_custom_report_btn").show()}}else{this.selectionClear()}},selectionClear:function(){$("#ribb_custom_report_btn").hide()},newLayer:function(e){if(!fn.getMap()){alert(gclang.mmod.no_selection);return}if(!editable){alert(gclang.mmod.no_edit_permission);return}formManager.closeAll();if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}layerform=formManager.open({overlay:false,bootstrap:true,fid:"newlayerform",title:gclang.lfrm.title,width:740,url:fno.liveSite+"layer/form",data:{new:"yes",opentype:e},buttons:[{html:gclang.save,class:"bluebutton",click:"saveLayer();"},{html:gclang.cancel,click:"clayerform.cancel();"}],onClose:function(){}});layerform.container.hide();return layerform},addDEM:function(){var i=new $.Deferred;if(!editable){alert(gclang.mmod.no_edit_permission);return(new $.Deferred).resolve()}if(window.checkIfUserExceedsStorageLimits()){window.showStorageForbiddenMsg();return(new $.Deferred).resolve()}var e=formManager.fileBrowser({extensions:[gcFileExt.Spatial],multipleSelection:true,selectmode:true});var t=function(e){if(!e||!e.files)return(new $.Deferred).resolve();giscloud.ui.alert.show(gclang["PleaseWait"]).green();var t=e.files.map(function(e){return giscloud.layers.create({name:e.name,mid:giscloud.ui.map.mapId,source:'{"type":"file","src":"'+e.path+'","name":"'+e.name+'"}',styles:[{exaggeration:1}],type:"dem"})});return $.when.apply($,t).done(function(){gcapp.gcmap.reloadMap();giscloud.ui.alert.hide();i.resolve()}).fail(function(){giscloud.ui.alert.color("red").show(__("Error processing DEM!"),2e3)})};e.addEvent("close",t);return i},onDuplicateLayer:function(e){om.showMessage(e.msg);gcproject.showMap()},duplicateLayer:function(e){var t=this;var i=e?fnl.getLayerById(e):this.llist.getSelected();if(!gcapp.isEditable(null,true)){alert(gclang.mmod.no_edit_permission);return}if(!i){alert(gclang.lmod.no_selection);return}if(i.type=="folder"||i.type=="rasterfolder"||!i.id){alert(gclang.You_can_not_duplicate_this_item_);return}if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}if(i.type=="raster"){fnl.duplicateLayer(i.id,false,t.onDuplicateLayer.bind(t));return}gcapp.duplicatelayermodal=formManager.showWindow({fid:"duplicatelayermodal",bootstrap:true,overlay:false,title:gclang.Duplicate_data_source,width:300,height:"auto",text:gclang.Do_you_want_duplicate_this_layers_data_source_as_well+"?",buttons:[{click:function(){fnl.duplicateLayer(i.id,true,t.onDuplicateLayer.bind(t));gcapp.duplicatelayermodal.close()},class:"bluebutton",html:__("Yes"),clickGlobalScope:false},{click:function(){fnl.duplicateLayer(i.id,false,t.onDuplicateLayer.bind(t));gcapp.duplicatelayermodal.close()},html:__("No"),clickGlobalScope:false}]})},exportLayer:function(e,t){if(!fnm.isVisible()){alert(gclang.mmod.not_visible);return}var i=[];if(e){if(typeof e=="boolean"){var e=fnl.getLayers({});$.each(e,function(e,t){i.push(t.id)})}else if(typeof e=="number"){i.push(e)}else if(typeof e=="array"){i=e}}else{var n=fnl.getSelectedLayers();if(n.length==0){alert(gclang.lmod.no_selection);return}else if(n.length==1){var a=n[0];if(!a.exportable){alert(gclang.You_can_not_export_this_layer_because_it_has_been_disabled_by_the_owner_);return}if(a.source.type=="pg"||a.source.type=="file"||a.source.type=="wfs"){}else{alert(gclang.lmod.export_warning1);return}i.push(a.id)}else{$.each(n,function(e,t){i.push(t.id)})}}var s=[];$.each(i,function(e,t){var i=fnl.getLayerById(t);if(i.source.type=="pg"||i.source.type=="file"||i.source.type=="wfs"){s.push(t)}else{return}});if(window.exportwizardform)window.exportwizardform.close();var a={lid:s.join()};if(t){giscloud.ui.modal({url:fno.liveSite+"datasource/form_export?"+$.param(a),title:gclang.exportfrm.title})}else{exportwizardform=formManager.open({bootstrap:true,overlay:false,title:gclang.exportfrm.title,url:fno.liveSite+"datasource/form_export",data:a,buttons:[{html:gclang.close,click:"exportwizardform.close();"}]})}},layerReport:function(){var e;if(!fnm.isVisible()||!window.layerList){alert(gclang.mmod.not_visible);return}e=layerList.selected();if(!e||!e[0]){alert(gclang.lmod.no_selection);return}e=e[0];if(!e.exportable){alert(gclang.You_can_not_export_this_layer_because_it_has_been_disabled_by_the_owner_);return}if(!e.source||e.source.type!=="pg"&&e.source.type!=="file"){alert(gclang.lmod.export_warning1);return}giscloud.ui.reports.create(e.id)},getLayerOptionByName:function(e){var t=fnl.getSelectedLayers(true);if(!t)return;var i=gcApp.utils.getLayerOption(t.options,e);if(i)return i.option_value;return null},customReport:function(){var e,r=this;if(!fnm.isVisible()||!window.layerList){alert(gclang.mmod.not_visible);return}e=layerList.selected();if(!e||!e[0]){alert(gclang.lmod.no_selection);return}var o=gcapp.selo.selection;if(!o){om.showMessage("There is no selected features!");return}var t=fnl.getSelectedLayers(true),i=this.getLayerOptionByName("REPORT_FORM_ID");function n(e){var t=o.lid,i=o.fids.join(),n=giscloud.ui.map.mapId,a=r.getLayerOptionByName("REPORT_MULTIPLE_FEATURE_TEMPLATE");var s="/pdfreport/generate?feature_ids="+i+"&map_id="+n+"&layer_id="+t+"&template="+a;if(e){s+="&report_form_data="+JSON.stringify(e)}window.open(s)}if(i){giscloud.ui.customForm.open({title:"Radni nalog",formId:i,submitButtonText:"Report"}).done(function(e){e.on({"submitStart.gc-custom-form":function(e){console.log("submitStart",e,gcapp.selo.selection);giscloud.ui.customForm.close();n(e.featureData.data)}})})}else{n()}},onDeleteLayer:function(e,t){om.showMessage(e.msg);if(e.result=="yes"){gcapp.gcmap.reloadMap()}fnl.unselect()},deleteSelectedLayer:function(){var e=this.llist.getSelection();var s=false;function r(e){var t=[];for(var i=0;i<e.length;i++){var n=e[i];if(n.id)t.push(n.id);if(["giscloud","tile","wms","wmts"].contains(n.type))s=true;if(n.type=="folder"){var a=fnl.getChildren(n.id);if(a.length)t=t.combine(r(a))}}return t}var t=r(e);this.deleteLayer(t,s)},isEmbededLayer:function(e){return e&&e.original&&e.original.belongsToGcMap},deleteDEM:function(t){if(!gcapp.isEditable(null,true)){alert(gclang.mmod.no_edit_permission);return(new $.Deferred).resolve()}var e=confirm(gclang.confirm_continue);if(e!=true)return(new $.Deferred).resolve();var i=this;return giscloud.layers.remove(t.id).then(function(){var e=__(gclang.lmod.deleted1);om.showMessage(e.replace("__LAYER_NAME__",t.name));gcapp.gcmap.reloadMap()}).fail(function(){om.showMessage(__("An error occurred."))})},deleteLayer:function(e){if(jQuery.type(e)!="array")e=[e];var i=[];for(var t=0;t<e.length;t++){layer_id=e[t];if(gcApp.utils.isMdcpLayerOfCurrentMap(layer_id)){alert("This layer is a part of an MDC project and cannot be deleted.");return}var n=this.llist.tttree.getNodeById(layer_id),a=this;if(this.isEmbededLayer(n)){alert(gclang.You_can_not_delete_sublayer_s__of_the_included_GIS_Cloud_map_);return}$.each(layerList.recursive(layer_id,{excludeEmbededLayers:true}),function(e,t){if(t.data&&t.data.id){i.push(t.data.id)}})}if(i.length==0){alert(gclang.lmod.no_selection);return}if(!gcapp.isEditable(null,true)){alert(gclang.mmod.no_edit_permission);return}var s=confirm(gclang.confirm_continue);if(s!=true)return;var a=this;fnl.deleteLayer(i,function(e){a.onDeleteLayer(e)})},onSortComplete:function(){SaveLayersOrder(false)},showLayerData:function(e){var t=fnl.getSelectedLayers(true);if(t&&t.source){if(gcapp.options.saveState)localStorage["giscloud-last-selected-layer"+currentMapID]=t.id;if($("datagrid_map_sync"))$("datagrid_map_sync").checked=false;if(gcapp.config&&gcapp.config.newDatagrid){gcapp.dataGridActions.setLayerId("[default]",parseInt(t.id))}else{gcdatagrid.selectionFilterChange(true);gcdatagrid.showLayerData(t)}}},onloadLayerList:function(e){this.llist.hideLoader();if(user.options.LAYER_LIST_EXPAND_ALL||fn.getMap()&&fn.getMap().options.LAYER_LIST_EXPAND_ALL){this.llist.expand()}},saveLayerState:function(e,t,i,n,a){if(fno.gcinit_auth.type>0&&fno.gcinit_auth.fullaccess){if(!editable){return}fnl.saveState(e,t,i,n,a)}},unselectLayer:function(){if(gcdatagrid&&gcdatagrid.datagrid){gcdatagrid.removeAll(true)}},selectAllLayers:function(e){this.llist.selectAll()},onAlphaSliderChange:function(e,t){if(fnm.isVisible()){var i=this.llist.getSelected();if(!i)return;var n=i.data;if(!n)return;var a=n.grp?"layer_group_"+n.grp:"layer"+n.id;var s=fnw.getLayerByName(a);if(s)s.setAlpha(e);if(t){var r=n.id;if(n.grp==2&&i.children.length>0){r=[];for(var o=0;o<i.children.length;o++){var l=i.children[o].data;r.push(l.id)}r=r.join()}if(!layerStateAID[r])layerStateAID[r]={};clearInterval(layerStateAID[r].intAlphaID);layerStateAID[r].intAlphaID=this.saveLayerState.delay(500,this,[r,"alpha",e,n.grp==2])}}}});if(fno.gcinit_auth.type>0&&fno.gcinit_auth.fullaccess){gcLayerModul.prototype.onNewLayerFromSelection=function(e){om.showMessage(e.msg);if(e.result=="yes"&&currentMapID){gcapp.gctoolbar.setTool("InfoTool");gcproject.refreshMap()}};gcLayerModul.prototype.layerFromSelection=function(){var e,t;if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}if(!(currentMapID>=0)){alert(gclang.mmod.no_selection);return}if(!fnm.isVisible()){alert(gclang.mmod.not_visible);return}if(giscloud.ui.map){e=giscloud.ui.map.selection.selected&&giscloud.ui.map.selection.selected();if(e&&e.length>0){t={lid:e[0].layerId,fids:jQuery.map(e,function(e){return e.featureId.toString()})};fnl.newLayerFromSelection(t,this.onNewLayerFromSelection.bind(this))}else if(gcapp.selo.selection!=null){fnl.newLayerFromSelection(gcapp.selo.selection,this.onNewLayerFromSelection.bind(this))}else{alert(gclang.lmod.no_selection);return}}else{if(gcapp.selo.selection==null){alert(gclang.lmod.no_selection);return}fnl.newLayerFromSelection(gcapp.selo.selection,this.onNewLayerFromSelection.bind(this))}};gcLayerModul.prototype.layerChange=function(e,t){if(!(e>-1)){alert(gclang.lmod.no_selection);return}var i=fnl.getLayerById(e);if(i==null)return;currentLayerID=e;if(i.type=="analysis"){gcanalysis.edit(i);return}if(!gcapp.isEditable(i,true)){console.log("Layer is not editable.");return}formManager.closeAll();layerform=formManager.open({bootstrap:true,overlay:false,fid:"layerformmodal",draggable:true,minimize:true,title:gclang.lfrm.title,width:740,privateButtons:true,url:fno.liveSite+"layer/form?lid="+e+"&uiId="+giscloud.ui.id()+(t?"&tab="+t:""),buttons:[{html:__("Save"),class:"gc2022 green-button -save",click:"saveLayer();"},{html:__("Close"),class:"-close",click:"if(window.gcstyleform && window.gcstyleform.resetColors)window.gcstyleform.resetColors();formManager.close('layerformmodal')"}]});layerform.container.on("loaded",function(){var e=$("#layerformmodal .modal-body").prop("scrollWidth")-$("#layerformmodal .modal-body").width(),t=740+e;if(e>30){$("#layerformmodal").width(t);$("#layerformmodal .modal-dialog").width(t)}})};gcLayerModul.prototype.createMobileLayer=function(){this.mobilelayerform=formManager.open({overlay:true,title:"Mobile Datasource Form",width:500,height:"auto",url:fno.liveSite+"datasource/form_mobilelayer",buttons:[{html:gclang.Create,class:"bluebutton",click:"gcapp.mobiledatasource.save();"},{html:gclang.Cancel,click:"gcapp.gclayer.mobilelayerform.close();"}]});var e=this;this.mobilelayerform.addEvent("close",function(){})};gcLayerModul.prototype.createLayer=function(){if(!editable){alert(gclang.mmod.no_edit_permission);return}formManager.closeAll();if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}layercreateform=formManager.open({overlay:false,bootstrap:true,fid:"layercreateform",title:__("Create Layer"),width:720,url:fno.liveSite+"layer/create_layer_form",buttons:[{class:"bluebutton",html:gclang.create,click:"ccl.create();"},{html:gclang.cancel,click:"layercreateform.close();"}]});return layercreateform}}var CLayerForm=new giscloud.blja.Class({Implements:[giscloud.blja.Options,giscloud.blja.Events],options:{pkey:"ogc_fid"},initialize:function(e,t){this.setOptions(this.options,t);this.layerId=$("#layerid").val();this.attributes=[];this.brwsources=null;this.source=null;if(!["raster","tile"].contains(this.layerType)){this.columnsEditor.initialize();this.isMdcpLayer=gcApp.utils.isMdcpLayerOfCurrentMap(this.layerId);if(this.isMdcpLayer){this.columnsEditor.disable();$("#source_browse_bt").prop("disabled",true).wrap("<span/>").parent().css("display","inline-block").css("margin-right","3px").attr("title","This layer is a part of an MDC project and its source cannot be changed.").tooltip()}}var i=fnw.getLayerByName("layer"+this.layerId);if(i){var n=i.getRules();this.rulesBackup=[];for(var a=0;a<n.length;a++){this.rulesBackup[a]={};for(var s in n[a]){if(n[a].hasOwnProperty(s)){this.rulesBackup[a][s]=n[a][s]}}}}var r=$("#encoding"),o=getEncodingList();r.typeahead("destroy");r.typeahead({name:"encodings",source:o,autoSelect:true});$("#tab_list_label").click(function(){$(".modal-body").css("overflow-y","auto");$(".modal-open .modal").css("overflow-y","inherit");var e=setInterval(function(){if(!$("#tab_label").hasClass("active")){$(".modal-body").css("overflow-y","auto");$(".modal-open .modal").css("overflow-y","auto");clearInterval(e)}},200)});var l=$("#layerid").val();var d=$("#lyrfrm_resource_id").val();function u(){if(!l)return;var e=fnl.getLayerById(l);if(!e){layerform.close();return}var t=gcApp.utils.getLayerOption(e.options,"REPORT_FEATURE_TEMPLATE");if(t){$("#reports_single_delete_btn").show();$("#reports_single_delete_btn").click(function(){console.log("dlete rbtn");$("#tab_reports").loader("show").overlay(true);giscloud.options.remove(t.id).always(function(){console.log("Option removed!");gcproject.reload(true,false,false);$("#tab_reports").loader("hide").overlay(false);$("#reports_single_delete_btn").hide()})})}else{$("#reports_single_delete_btn").hide()}}u();$("#reports_single_setup_btn").click(function(){$("#tab_reports").loader("show").overlay(true);giscloud.options.create({resource:"resources",id:d},{name:"REPORT_FEATURE_TEMPLATE",value:"single"+d+".html"}).done(function(){gcproject.reload(false,true,false,null,function(){$("#tab_reports").loader("hide").overlay(false);console.log("Options saved");u()});var e=fno.reportBuilder+"/builder/single/"+d;console.log("Single Feature Report Clicked",e);window.open(e+"?sess_id="+gcApp.utils.getSessionID())})})},setLayerType:function(e){function t(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}$("#layer_info_more .layer-type").val(t(e))},getLayerType:function(){var e=$("#layer_info_more .layer-type").val()?$("#layer_info_more .layer-type").val():this.layerType;if(e){return e.toLowerCase()}else{return null}},cancel:function(){if(this.rulesBackup){var e=fnw.getLayerByName("layer"+$("#layerid").val());var t=e.getRules();for(var i=0;i<t.length;i++){for(var n in t[i]){if(t[i].hasOwnProperty(n)){t[i][n]=null}}if(this.rulesBackup[i]){for(var n in this.rulesBackup[i]){if(this.rulesBackup[i].hasOwnProperty(n)){t[i][n]=this.rulesBackup[i][n]}}}}e.redraw(true)}layerform.close()},onGetInfo:function(e,t,i,n,a,s,r,o){om.hideLoader();if(!o&&(!r||r.length<=6)){var l=this.getSource("object");if(newlayer&&l.type=="file"){if(confirm(gclang.lfrm.source_with_no_proj)){var d=showProjectionWizard({source:this.getSource()});d.addEvent("close",this.getInfo.bind(this));return}}}$("#srcinfo").html("");var e=fnl.getType(e);if(t==1&&!noGeometryTypeUpdate){clayerform.setLayerType(e);noGeometryTypeUpdate=false}else if(t==2){clayerform.setLayerType("raster")}lyrf_typeLayerChange({value:this.getLayerType()});var l=this.getSource();if(n>=0)$("#srcinfo").text(gclang.lfrm.objects_count+": "+n);if(s&&s.length>0){}$("#layerform [name='units']").val(s);var u=a?a:new Array;if($("#attributelist").length)$("#attributelist").empty();layerform.attributes=a;var c=[];for(var h=0;h<u.length;h++){var f=u[h];if(1){c.push(u[h].name)}}$("#tooltip").tagit({availableTags:c,caseSensitive:false,onlyFromAvailableTags:true});this.calculateTile(i);giveLayerNameBySource();if(newlayer){var p=explist.clist.getElement(0);explist.onStyleNewRange(p)}om.hideLoader();if(newlayer&&layerform_skipform&&i)saveLayer();if(clayerform.featurecount==0){$("#sectionswizardbt, #clearrangesbt").addClass("disabled");$("#sectionswizardbt").attr("title","No features to classify")}},onCGIGetInfo:function(e){layerform.enable();om.hideLoader();if(!e)return;if(e.code>0){var t=Array.isArray(e.msg)?e.msg.join("<br/>"):e.msg;giscloud.ui.modal({title:"Database Connection Warning",content:t,overlay:false});if(e.code==303){fnl.getInfo(this.getSource(),this.lyrf_onGetInfo303Error.bind(this));return}return}if(e.layers&&e.layers.length>1){sublayersform=formManager.open({overlay:true,title:"Sublayers list",width:400,height:"auto",url:fno.liveSite+"layer/form_sublayers",formdata:e,buttons:[{html:"Close",click:"msf_closeForm();"},{html:"Back",click:"sublayersform.close();"}]})}else{this.featurecount=e.featurecount;this.onGetInfo(e.type,e.driver,e.bound,e.featurecount,e.attributes,e.unit,e.proj4,e.skipAssigningProjection)}},lyrf_onGetInfo303Error:function(e){var t=this.getSource("object");if(!e){om.showMessage("onGetInfo303Error");return}if(e.code>0){om.showError(e.msg);return}if(!e.proj4||e.proj4.length<=6){if(t.type=="file"){if(confirm(gclang.lfrm.source_with_missing_proj)){var i=showProjectionWizard({source:this.getSource()});i.addEvent("close",this.getInfo.bind(this));return}else{var n=fn.getMap();if(n.proj4){this.setSource(null)}}}}},getInfo:function(e,t,i){var n=this.getSource("object");if(!n||!n.type)return;if(i){n.invalidateLayerInfo=true}$("#srcinfo").html("");noBoundUpdate=e;noGeometryTypeUpdate=t;if(n.type=="pg"||n.type=="wfs"){$("#wms_layer_mess").hide();$("#lyrf_maintabs").show();$("#querywizard-form").show();layerform.disable();om.showLoader();var a=0;var s=fn.getMap();if(s&&s.proj4&&s.proj4.length>4)a=s.proj4;fnl.getPostGISInfo(n,a,$("#encoding").val(),this.onCGIGetInfo.bind(this))}else if(n.type=="file"){$("#wms_layer_mess").hide();$("#lyrf_maintabs").show();$("#querywizard-form").show();var r=fno.resources+n.src;var a=null;var s=fn.getMap();if(s&&s.proj4&&s.proj4.length>4)a=s.proj4;if(1){om.showLoader();layerform.disable();fnl.getPostGISInfo(n,a,$("#encoding").val(),this.onCGIGetInfo.bind(this))}else alert(gclang.Application_is_not_connected_to_map_generator__Please_contact_server_administrator_)}else if(n.type=="raster"){$("#lyrf_maintabs").show();$("#querywizard-form").show();var a=null;var s=fn.getMap();if(s&&s.proj4&&s.proj4.length>4)a=s.proj4;fnl.getPostGISInfo(n,a,$("#encoding").val(),this.onCGIGetInfo.bind(this))}else if(n.type=="wms"){$("#wms_layer_mess").hide();$("#querywizard-form").hide();$("#lyrf_maintabs").show();if(newlayer&&layerform_skipform)saveLayer()}else if(n.type=="tile"){$("#querywizard-form").hide();$("#lyrf_maintabs").show();if(newlayer&&layerform_skipform)saveLayer()}else if(n.type=="gcmap"){$("#wms_layer_mess").hide();$("#querywizard-form").hide();$("#lyrf_maintabs").show();this.calculateTile({xmin:-1,xmax:1,ymin:-1,ymax:1});if(newlayer&&layerform_skipform)saveLayer()}},calculateTile:function(e,t){if(!e)return;if(!$("#xmin").val()||!$("#ymin").val()||!$("#xmax").val()||!$("#ymax").val()){if(!(t>0))t=5;$("#xmin").val(Format.round(e.xmin,t));$("#ymin").val(Format.round(e.ymin,t));$("#xmax").val(Format.round(e.xmax,t));$("#ymax").val(Format.round(e.ymax,t))}},setSource:function(e){this.source=getSourceObject(e);var t=$("#source_type"),i=$("#source_location"),n;if(t){if(this.source){var a=this.source.type;if(a=="pg"||a=="raster"&&this.source.raster_subtype=="pg"){a=this.source.dbtype==="oracle"?"oracle":"postgis"}t.val("'"+(this.source.type==="raster"?"raster":a)+"'");n="'"+a+"'";if(this.source.type=="wms"){i.val("'"+this.source.url+"'"+", Layers: '"+this.source.layer+"'")}else if(this.source.type=="file"){var s=new String(this.source.src).substr(33);i.val("'"+s+"'")}else if(this.source.type=="wfs"){i.val(n+", Source: '"+this.source.url+"'"+", Layers: '"+this.source.layerid+"'")}else if(this.source.type=="pg"){var s=new String(this.source.src),r=new String(this.source.schema);s=s.substr(s.indexOf(".")+1);if(this.source.connid&&this.source.connid!=-1&&r!=""){i.val(n+", Table: '"+s+"', Schema: '"+r+"'")}else{i.val(n+", Table: '"+s+"'")}}else if(this.source.type=="raster"){if(this.source.raster_subtype=="pg"){var s=new String(this.source.src);s=s.substr(s.indexOf(".")+1);i.val(n+", Table: '"+s+"'")}else if(this.source.raster_subtype=="file"){var s=new String(this.source.src).substr(33);i.val(n+", Source: '"+s+"'")}}else{i.val(n+", Source: '"+this.source.src+"'")}if(this.source.datasource_id){i.val(i.val()+", Datasource ID: "+this.source.datasource_id)}}else{t.val("");i.val("")}}setRenderMethod(this.source)},getSource:function(e){if(!this.source)return null;var t=$("#driveroptions");if(t)this.source.driveroptions=t.val();return e=="object"?this.source:JSON.stringify(this.source)},createWMTSLayer:function(e,t,i,n,a,s,r){var o,l,d,u,c;if(t.tilematrix&&t.tilematrix[0]){u=t.tilematrix[0].width;c=t.tilematrix[0].height}if(e.WGS84BoundingBox){d=4326;o=e.WGS84BoundingBox.LowerCorner.split(" ");l=e.WGS84BoundingBox.UpperCorner.split(" ")}else if(e.BoundingBox){d=t.epsg;o=e.BoundingBox.LowerCorner.split(" ");l=e.BoundingBox.UpperCorner.split(" ")}var h="EPSG:"+d;var f="EPSG:"+t.epsg;var p={x:parseFloat(o[0]),y:parseFloat(o[1]+(c?(l[1]-o[1])*c:0))};var m={x:parseFloat(l[0]+(u?(l[0]-o[0])*u:0)),y:parseFloat(l[1])};var g=t.Left;var _=t.Top;if(g==90&&_==-180){_=90;g=-180}try{p=giscloud.proj4(h,f,p)}catch{if(g<0)p.x=g;else p.x=-g;if(_<0)p.y=_;else p.y=-_}try{m=giscloud.proj4(h,f,m)}catch{if(g<0)m.x=-g;else m.x=g;if(_<0)m.y=-_;else m.y=_}if(g>p.x&&g>m.x&&_<m.y&&_<m.y){g*=-1;_*=-1}if(p.x<g)p.x=g;if(m.y>_)m.y=_;if(!i)i=e.DefaultStyle;var v={type:"wmts",id:r,url:s.url,layer:e.Identifier,name:e.Title,tile0:{originx:g,originy:_,resolution:t.scale,wmts:"true"},epsg:t.epsg,tilematrix:t.Identifier,tilematrixPrefix:t.tilematrixPrefix,zoomOffset:t.zoomOffset||0,xmin:p.x,xmax:m.x,ymin:p.y,ymax:m.y,format:n,style:i};if(e.URLTemplate){var y={};if(e.URLTemplateFormat&&n){for(var b=0;b<e.URLTemplateFormat.length;b++){if(e.URLTemplateFormat[b]&&e.URLTemplateFormat[b]!==n){y[b]=true}}}v.URLTemplate=[];for(var b=0;b<e.URLTemplate.length;b++){if(y[b])continue;var w=new String(e.URLTemplate[b]);w=w.replace(/{TileMatrixSet}/gi,t.Identifier);w=w.replace(/{TileMatrix}/gi,(t.tilematrixPrefix?t.tilematrixPrefix:"")+"{z}");w=w.replace(/{ZoomOffset}/gi,t.zoomOffset||0);w=w.replace(/{TileRow}/gi,"{y}");w=w.replace(/{TileCol}/gi,"{x}");w=w.replace(/{Style}/gi,i);if(a){for(var M in a){w=w.replace(new RegExp("{"+M+"}","gi"),a[M])}}v.URLTemplate.push(w)}}this.onSelectSourceBrowser({files:[v]})},onSelectSourceBrowser:function(r){var o=this;if(!r||!r.files||!r.files.length){if(newlayer)layerform.close();return}r.files=r.files.filter(function(e){return e.datasource_type!=="directory"});if(!r.files.length){if(newlayer)layerform.close();return}layerform_skipform=r.skipform;if(r.files.length>1&&(r.type=="file"||r.type=="postgis")){msourcesform=formManager.open({overlay:false,title:__("Wizard for adding multiple layers"),bootstrap:true,width:400,height:"auto",draggable:true,url:fno.liveSite+"layer/form_multisources",formdata:r.files,closeButton:true,closeButtonCallback:"formManager.closeAll();",privateButtons:true,buttons:[{html:__("Close"),click:"formManager.closeAll();"},{html:__("Back"),click:"msourcesform.close(); window.clayerform && clayerform.onSelectSource.call(clayerform);"}]});return}var l=r.files[0],t=jQuery.Deferred();if(l.type=="datasources"&&l.datasource_type==40){var i=JSON.parse(l.params);var e=formManager.wmsInfo({url:i.url,version:i.version,token:i.token,referer:i.referer,select:true});e.addEvent("close",function(e){if(e&&e.layers&&e.layers.length>0){e.layers[0].type="wms";e.layers[0].id=l.id;o.onSelectSourceBrowser({files:e.layers})}});return}else if(l.type=="datasources"&&l.datasource_type==80){var i=$.parseJSON(l.params);var n=$("<div/>",{class:"big"}).append($("<div/>").text("Layer: ").append($("<select/>",{id:"wmts_layer_dropdown"}).append(i.layers.map(function(e){return $("<option/>",{text:e.Title,value:e.Identifier})})))).append($("<br/>")).append($("<div/>").text("Tileset: ").append($("<select/>",{id:"wmts_tileset_dropdown"}))).append($("<br/>")).append($("<div/>").text("Format: ").append($("<select/>",{id:"wmts_format_dropdown"}))).append($("<br/>")).append($("<div/>").text("Style: ").append($("<select/>",{id:"wmts_style_dropdown"}))).append($("<div/>",{id:"wmts_style_dimensions"})).prop("outerHTML");var a=null;var s=null;var d=null;var u=null;var c=null;giscloud.ui.confirm(n,{width:"400px",title:"Choose a WMTS layer",yes_title:"Ok",no_title:"Cancel"}).yes(function(){if(!giscloud.proj4.defs("EPSG:"+s.epsg)){giscloud.includeJs("/rest/1/geo_utils/epsg_to_proj4js?srid="+s.epsg,function(){o.createWMTSLayer(a,s,d,u,c,i,l.id)})}else{o.createWMTSLayer(a,s,d,u,c,i,l.id)}});$("#wmts_layer_dropdown").change(function(){var e=$("#wmts_layer_dropdown").val();for(var t=0;t<i.layers.length;t++){if(i.layers[t].Identifier==e){a=i.layers[t];break}}$("#wmts_tileset_dropdown").empty().append(a.TileMatrixSetLink.map(function(e){return $("<option/>",{text:e,value:e})}));$("#wmts_format_dropdown").empty().append(a.Format.map(function(e){return $("<option/>",{text:e,value:e})}));$("#wmts_style_dropdown").empty().append(a.Style.map(function(e){return $("<option/>",{text:e,value:e})}));$("#wmts_style_dimensions").html("");if(a.Dimension){c={};a.Dimension.forEach(function(e){var t="wmts_style_dimension_"+e.identifier;$("#wmts_style_dimensions").append($("<br/>")).append($("<div/>").text(e.identifier+": ").append($("<select/>",{id:t}).attr("wmts-dimension-identifier",e.identifier).append(e.values.map(function(e){return $("<option/>",{text:e,value:e})}))));$("#"+t).change(function(){c[$(this).attr("wmts-dimension-identifier")]=$(this).val()}).change()})}else{c=null}$("#wmts_tileset_dropdown").change();$("#wmts_format_dropdown").change();$("#wmts_style_dropdown").change()});$("#wmts_tileset_dropdown").change(function(){var e=$("#wmts_tileset_dropdown").val();for(var t=0;t<i.tilesets.length;t++){if(i.tilesets[t].Identifier==e){s=i.tilesets[t];break}}});$("#wmts_format_dropdown").change(function(){u=$("#wmts_format_dropdown").val()});$("#wmts_style_dropdown").change(function(){d=$("#wmts_style_dropdown").val()});$("#wmts_layer_dropdown").change();$("#wmts_tileset_dropdown").change();return}var h=fnm.isReprojectable(l.epsg),f;if(["wms","wmts","tile","gcmap"].contains(l.type)){var p=fn.getMap().epsg;if(is_numeric(p)&&h.length>0){f=fnm.getReprojectionConfirmMsg(h);giscloud.ui.confirm(f).yes(function(){var e=jQuery.map(h,function(e){return giscloud.layers.remove(e.id)});giscloud.ui.alert.green().show(gclang.PleaseWait);jQuery.when.apply(jQuery,e).always(function(){giscloud.maps.update(currentMapID,{epsg:l.epsg}).done(function(){giscloud.ui.alert.green().hide();gcproject.reload(true,false,false,null,function(){t.resolve()})})})}).no(function(){t.reject();if(newlayer)layerform.close()})}else if(fnm.isGoogleProj(l.epsg)===false&&p!=l.epsg){giscloud.ui.confirm(__("Spatial projection will be changed to EPSG:")+l.epsg+"."+__(" Do you want to proceed?")).yes(function(){giscloud.maps.update(currentMapID,{epsg:l.epsg}).done(function(){t.resolve()})}).no(function(){t.reject();if(newlayer){layerform.close()}})}else{t.resolve()}}else{t.resolve()}var o=this;t.done(function(){$("#layer_epsg").val(l.epsg);var e={type:l.type};switch(l.type){case"file":if(l.type.toLowerCase()!="directory"){if(l.geometry=="raster"){e.type="raster";e.raster_subtype="file";clayerform.setLayerType("raster");$("#layername").val(l.name)}else{e.type="file"}e.src=l.path}else alert(gclang.lfrm.no_dir_as_source);break;case"postgis":if(l.geometry=="raster"){e.type="raster";e.raster_subtype="pg";clayerform.setLayerType("raster");$("#layername").val(l.name)}else{e.type="pg"}if(l.datasource_type==="oracle"){e.dbtype="oracle";e.src=l.name}else{e.dbtype="pg";e.src=l.schemaname+"."+l.name}e.connid=l.connid;break;case"datasources":if(l.datasource_type==70){e.type="wfs";var t=$.parseJSON(l.params);e.url=t.url;e.layerid=t.layerid;e.geometry_type=t.geometry_type;if(t.primary_key){e.primary_key=t.primary_key}e.datasource_id=l.id;var i=l;clayerform.setLayerType(fnl.getType(t.geometry_type));$("#xmin").val(i.x_min);$("#ymin").val(i.y_min);$("#xmax").val(i.x_max);$("#ymax").val(i.y_max);$("#layername").val(l.name);if(newlayer){var n=explist.clist.getElement(0);explist.onStyleNewRange(n)}}else{e.type="pg";var t=$.parseJSON(l.params);e.src=t.src;e.datasource_id=l.id;e.connid=-1}break;case"wmts":clayerform.setLayerType("wmts");$("#layername").val(l.name);$("#xmin").val(l.xmin);$("#ymin").val(l.ymin);$("#xmax").val(l.xmax);$("#ymax").val(l.ymax);e={type:"tile",src:"wmts",layer:l.layer,format:l.format,style:l.style,tilematrix:l.tilematrix,tilematrixPrefix:l.tilematrixPrefix,zoomOffset:l.zoomOffset||0,tile0:l.tile0,url:l.url};$("#tab_display, a[href='#tab_display']").hide();e.datasource_id=l.id;if(l.URLTemplate){e.URLTemplate=l.URLTemplate}break;case"wms":e.datasource_id=l.id;e.url=l.url;e.style=l.style;if(l.srs)e.srs=l.srs;if(r.files.length>1){e.layer=[];for(var a=0;a<r.files.length;a++){e.layer.push(r.files[a].name)}e.layer=e.layer.join()}else e.layer=l.name;$("#layername").val(l.title);clayerform.setLayerType("wms");$("#srcinfo").html("");clearBound();if(!l.bound){alert(gclang.Can_not_find_bound_for_selected_WMS_layer_);return}if(!e.layer){alert(gclang.Can_not_find_layer_name_for_selected_WMS_layer_);return}if(l.tile0)e.tile0=l.tile0;o.calculateTile(l.bound,100);o.getInfo();$("#tab_display, a[href='#tab_display']").hide();break;case"tile":clayerform.setLayerType("tile");if(l.src=="tilejson"){$("#layername").val(l.name);e=l;$("#xmin").val(-20037508.3427892);$("#ymin").val(-20037508.3427892);$("#xmax").val(20037508.3427892);$("#ymax").val(20037508.3427892)}else{e={type:"tile",src:l.code,datasource_id:l.datasource_id};$("#layername").val(l.tileserver);$("#srcinfo").html("");clearBound();o.calculateTile(l.bound,100)}o.getInfo();break;case"gcmap":e.type="gcmap";e.src=l.name;e.mid=l.id;$("#layername").val(l.name);clayerform.setLayerType("giscloud");$("#xmin").val(-1);$("#ymin").val(-1);$("#xmax").val(1);$("#ymax").val(1);$("#srcinfo").html("");break}o.setSource(e);if(o.getSource()&&!["wmts","wms","tile","gcmap"].contains(l.type)&&!l.url){sourceChange()}var s=JSON.parse(JSON.stringify(e));if(s.src)s.src=s.src.substr(s.src.lastIndexOf("/")+1);giscloud.log.push("layer_form_source_change",s)}).fail(function(){if(newlayer)layerform.close()})},onSelectSource:function(e){e=e||this.opentype;this.opentype=e;var t={upload:true,selectmode:true,extensions:[gcFileExt.Spatial,gcFileExt.All],postgis:true,mobile:true,wms:true,tms:true,gcmap:true,datasources:true,arcmap:!!fno.showArcMapInSourceBrowser,mapbox:!!fno.showMapBoxInSourceBrowser,multipleSelection:true,opentype:e};if(!newlayer){var i=this.getSource("object");if(i&&i.type=="file"&&i.src2)t.dir=i.src2.replace("/"+i.name,"")}if(newlayer)t.skipform=true;ff=formManager.fileBrowser(t);ff.addEvent("close",this.onSelectSourceBrowser.bind(this))}});function validateGeometry(e){var t=JSON.parse(e.source);if(t.type=="raster")return true;if(e.directpgrender!="t"){var i=LiveValidation.massValidate([xmin,ymin,xmax,ymax]);if(!i){return false}}var n=LiveValidation.massValidate([onscaleVal,offscaleVal,nlevelsVal,layerclassVal,layeridVal]);if(!n){return false}var a=$("#xmax").val()-$("#xmin").val();var s=$("#ymax").val()-$("#ymin").val();if(e.directpgrender!="t"&&this.featurecount>0){if(a==0){om.showError("X bound coordinates are invalid!");return false}if(s==0){om.showError("Y bound coordinates are invalid!");return false}}return true}function onSaveLayer(e){om.hideLoader();layerform.enable();if(e&&e.result=="no"){om.showMessage(e.msg);return}if($('#layerform [name="task"]').val()=="new"){e.layer_name=$('#layerform [name="name"]').val();e.mid=$('#layerform [name="mid"]').val();e.layerid=e.id;giscloud.log.push("layer_new",e);if(IsNumeric(e.id)){$('#layerform [name="task"]').val("update");$('#layerform [name="layerid"]').val(e.id);gcproject.reload(false,false,true,e.id);gcapp.gctoolbar.showLayerList()}}else{e.layer_name=$('#layerform [name="name"]').val();e.mid=$('#layerform [name="mid"]').val();e.layerid=$('#layerform [name="layerid"]').val();giscloud.log.push("layer_update",e);if(gcapp.config&&gcapp.config.newDatagrid&&gcapp.dataGridSelectors.datagridOpened("[default]")){var t=gcapp.gclayer.llist.last_selected_lid;if(t)gcapp.dataGridActions.setLayerId("[default]",parseInt(t),true)}gcproject.reload(false,true,true,e.id)}om.showMessage(e.msg)}function setRasterData(e){var i=JSON.parse(e.styles),s=$(".layerform-raster .-tr-output-format").data("value"),r=$(".layerform-raster .-tr-interpolation-method").data("value"),n=$("#gc_band_render .dropdown-group").data("value")==="multiband",o=$("#layerform_raster_nodata_value").val(),t=$("#source_range_min").val(),a=$("#source_range_max").val(),l=$("#destination_range_min").val(),d=$("#destination_range_max").val(),u=$("#wizardlayerform .-stretched").prop("checked"),c=$("#gcRampValue").data("gradient"),h=$("#colorRampInvert").prop("checked"),f=$("#gcStretched").data("value"),p=parseFloat($("#wizardlayerform .-show-stretched.-percent .-min").val())/100,m=parseFloat($("#wizardlayerform .-show-stretched.-percent .-max").val())/100,g=parseFloat($("#wizardlayerform .-show-stretched.-deviation input").val()),_=f==="percent-clip"?[p,m]:f==="standard-deviation"?[g]:null,v=i.length>0&&i[0].band_index,y=$("#styleranges li");if(i.length===0||n){i=[{}]}window.validateRange&&validateRange();if($("#wizardrastererror .-overlap").data("errors")){return}function b(e){if(t&&t.length>0&&a.length>0){if(l.length===0&&d.length===0){e.destination_range=null;e.source_range=t+" "+a}else{if(l.length===0){l="0"}if(d.length===0){d="256"}e.source_range=t+" "+a;e.destination_range=l+" "+d}}else{e.source_range=null;e.destination_range=null}return e}i.forEach(function(e,t,i){var n=y&&y[i]&&$(y[i]).find(".firstrange").length>0&&Number($(y[i]).find(".firstrange").val()),a=y&&y[i]&&$(y[i]).find(".secondrange").length>0&&Number($(y[i]).find(".secondrange").val());t.format=s;t.interpolation=r;t.fromlevel=$("#stylelevels_from").val();t.tolevel=$("#stylelevels_to").val();t.nodata=o;t.render_type=e?"multiband":"singleband";t=b(t);if(e){return}if((n||n===0)&&n!==t.value_min){t.value_min=n}if((a||a===0)&&a!==t.value_min){t.value_max=a}}.bind(this,n));if(u&&f&&!n){i=[];if(h){c.colors.reverse();c.stops.reverse();c.stops=c.stops.map(function(e,t){e=1-e;return e})}c.stops.forEach(function(e,t){i.push({relief_color:c.colors[t],value_stop:e,visible:true,format:s,interpolation:r,fromlevel:$("#stylelevels_from").val(),tolevel:$("#stylelevels_to").val(),nodata:o,render_type:n?"multiband":"singleband",band_index:v});i[t]=b(i[t]);if(f!=="none"){i[t].stretchMethod=f;i[t].stretchParameters=_}})}e.styles=JSON.stringify(i);delete window.styleform;return e}function saveLayer(){layertype=clayerform.getLayerType();if(layertype=="h3"){layertype="polygon"}$("#layerform [name='styles']").val(explist.clist.serialize());$("#layerform [name='mid']").val(currentMapID);var e=clayerform.getSource("object");var t=om.getFormValues("layerform");if(layertype==="raster"){t=setRasterData(t)}if(!t){return}t.source=JSON.stringify(e);if(e.datasource_id>0)t.datasource_id=e.datasource_id;t.tip=layertype;if(!LiveValidation.massValidate([layernameVal,sourceType]))return;if(!LiveValidation.massValidate([layernameVal,sourceLocation]))return;if(!layertype||!(layertype.length>0)){alert(gclang.Layer_type_is_not_defined_);return}if(!validateGeometry(t))return;if(!(currentMapID>0)){om.showMessage("<span class='messages error'>Map is not defined.</span>");return}var i=gcapp.gclayer.llist.getSelected();if(i&&i.type=="folder"&&i.id)t.parent=i.id;om.showLoader("Saving layer..");layerform.disable(true);var n,a=new $.Deferred;a=new $.Deferred;n=clayerform.columnsEditor.save();fnl.saveLayer(t,a.resolve);$.when(a,n).done(function(e){onSaveLayer.apply(null,e)})}function layerRegenerate(e){layerform.close()}function giveLayerNameBySource(){if($("#layername").length>0&&!($("#layername").val().length>0)){var e=clayerform.getSource("object");$("#layername").val(getNameFromSource(e))}}function getNameFromSource(e){if(!e)return null;if(typeof e=="string")e=getSourceObject(e);if(e.type=="pg")return e.table;else if(e.type=="file"){return e.src.substring(e.src.lastIndexOf("/")+1,e.src.lastIndexOf("."))}}function clearBound(){$("#xmin").val("");$("#ymin").val("");$("#xmax").val("");$("#ymax").val("")}function getBoundFromSource(){clearBound();clayerform.getInfo(undefined,undefined,true)}function sourceChange(){clearBound();clayerform.getInfo();clayerform.columnsEditor.showSourceChangeMessage()}var CExpressionList=new giscloud.blja.Class({Implements:[giscloud.blja.Options,giscloud.blja.Events],options:{},initialize:function(e){var t,i;this.setOptions(this.options,e);var n=[{func:Validate.Presence,options:{notFirst:true}},{func:Validate.Format,options:{pattern:/^[1-9]([0-9]*)(k*)$/i}}];var a=[{func:Validate.Format,options:{pattern:/^[1-9]([0-9]*)(k*)$/i}}];var s=[{func:Validate.Presence,options:{notFirst:true}},{func:Validate.Numericality,options:{onlyInteger:true,minimum:0}}];this.clist=new omRanges("styleranges",{input1Validation:n,input2Validation:a,input3Validation:s,renderFunction:this.styleRangeRenderer.bind(this),headerFunction:this.styleHeaderRenderer.bind(this),serializeFunction:this.styleRangeSerialize.bind(this),sortable:true});this.clist.addEvent("newrange",this.onStyleNewRange.bind(this));this.clist.deserialize(this.options.styles)},styleRangeRenderer:function(t,e){var t=$(t),i=this,n,a,s,r,o,l,d,u=$('<input type="text" />').addClass("firstinput");if(clayerform.layerType&&clayerform.layerType==="raster"){a=$('<input type="number" />').addClass("firstrange");r=$('<i class="fa fa-exclamation-triangle firstrangeinfo" title="Value overlap"/>');d=$("<span />").addClass("range-divider").text("-");s=$('<input type="number" />').addClass("secondrange");o=$('<i class="fa fa-exclamation-triangle secondrangeinfo" title="Value overlap"/>');u.css("display","none")}var c=$("<i/>",{title:"Click and hold to drag up or down"}).addClass("fa fa-ellipsis-v"),h=$("<div/>",{title:"Edit Style"}).addClass("styleicon");if(clayerform.getLayerType()==="raster"){h.append("<input type='hidden' class='color'/>")}else{h.click(this.onStyleIconClick.bind(this))}var f=$("<i/>").addClass("fa fa-check").appendTo(t).click(function(e){$(e.target).toggleClass("faded")});var p='<div class="expression-toggle btn-group" >';if(!clayerform.layerType||clayerform.layerType!=="raster"){p+='    <button type="button" class="btn lf-expression input-button grey-button">'+gclang.lfrm.expression+"</button>"}else{p+='    <button type="button" class="btn lf-expression input-button grey-button">'+__("Range")+"</button>"}p+='    <button type="button" class="btn lf-label input-button grey-button">'+__("Label")+"</button>";p+="</div>";p=$(p);p.appendTo(t).find(".btn").click(function(e){if($(e.target).hasClass("active"))return;$(e.target).parent().find(".btn").removeClass("active dark-grey-button");$(e.target).addClass("active dark-grey-button");i.labelCbChange(t,p.find(".lf-label").hasClass("active"))});u.appendTo(t);a&&a.appendTo(t);r&&r.appendTo(t);d&&d.appendTo(t);s&&s.appendTo(t);o&&o.appendTo(t);c.appendTo(t);h.appendTo(t);if(clayerform.layerType==="raster"){var n=t.find(".color").colorpicker();n.on("change.color",function(e,t,i){var n;if(!i)return;e.find(".color").next().removeClass("nocolorLayerList");e.find(".styleicon").css("background-color",i);e.find(".styleicon").val(i);n=e.data("data");if(n){n.relief_color=i;e.data("data",n)}}.bind(this,t))}if(e){if(e.value_min||e.value_min===0){a.val(e.value_min)}if(e.value_max){s.val(e.value_max)}if(e.showlabel){p.find(".btn").removeClass("active dark-grey-button");p.find(".lf-label").addClass("active dark-grey-button");if(clayerform.layerType==="raster"){i.labelCbChange(t,p.find(".lf-label").hasClass("active"))}if(e.label)u.val(e.label)}else{p.find(".lf-expression").addClass("active dark-grey-button");if(e.expression){u.val(e.expression)}}if(e.visible==false||e.visible=="false")f.addClass("faded");u.data("label",e.label);u.data("expression",e.expression);a&&a.data("range1",e.value_min);s&&s.data("range2",e.value_max);setDivStyle(clayerform.getLayerType(),h,e)}},labelCbChange:function(e,t){var i=e.find("input.firstinput"),n=e.find("input.firstrange"),a=e.find("input.secondrange"),s=e.find(".range-divider");if(t){$(i).data("expression",i.val());i.val($(i).data("label"));if(n.length>0){n.hide();a.hide();s.hide();i.show()}}else{$(i).data("label",i.val());i.val($(i).data("expression"));if(n.length>0){n.show();a.show();s.show();i.hide()}}},styleRangeSerialize:function(e,t){var i=clayerform.getLayerType(),n=$(e).find("input.firstinput");switch(i){case"point":break;default:}var a=explist.clist.getData(t);a.showlabel=$(e).find(".lf-label").hasClass("active");a.visible=!$(e).find(".fa-check").hasClass("faded");if(a.showlabel){a.expression=$(n).data("expression");a.label=n.val()}else{a.expression=n.val();a.label=$(n).data("label")}if(i==="raster"){a.band_index=$("#gcBandsValue").data("band");if($("#gc_band_render .dropdown-group").data("value")==="multiband"){delete a.band_index}}return a},styleHeaderRenderer:function(e,t){var i=new giscloud.blja.Element("span",{text:"From scale:"});i.addClass("hs1");i.inject(e);var n=new giscloud.blja.Element("span",{text:"To scale:"});n.addClass("hs2");n.inject(e);if(!t.inputButton){var a=new giscloud.blja.Element("span",{text:"Value:"});a.addClass("hs3");a.inject(e)}},styleHeaderRenderer:function(e){var e=$(e);var t=$("<div />",{style:"position:relative;"});t.appendTo(e)},onStyleNewRange:function(e){e=$(e);var t=clayerform.getLayerType();if(t==""||t==null)return;if(t=="point"){var i={url:"/icons/defaulticon.png",visible:true,iconsoverlap:2,fontsize:"12",fontcolor:"0,0,0",outline:"255,255,255"};explist.clist.setData(explist.clist.getIndexByLi(e),i);setDivStyle("point",e.find(".styleicon"),i)}else{var n=getRandomStyle({geomtype:t});setDivStyle(clayerform.getLayerType(),e.find(".styleicon"),n);explist.clist.setData(explist.clist.getIndexByLi(e),n)}if(t==="raster"&&window.checkModalHeight){checkModalHeight()}},onIconBrowserSelect:function(e){if(!e)return;if(!e.files)return;if(!e.files.length)return;var t=e.files[0].path;var i=explist.clist.getIndexByLi(icondiv.parent());explist.clist.setData(i,{url:t});setDivStyle("point",icondiv,{url:t})},onStyleFormClose:function(e){window.active_expression_index=null;if(!e||!e.save)return;var t=clayerform.getLayerType();var i=explist.clist.getIndexByLi(icondiv.parent());explist.clist.setData(i,e);if(t=="geometry"&&e.symbol){t="point";clayerform.setLayerType("point");setDivStyle("point",icondiv,e);return}setDivStyle(t,icondiv,e)},onStyleIconClick:function(e){var t=clayerform.getLayerType(),i;if(!(clayerform.getSource().length>0)){alert(gclang.lfrm.no_source);return}icondiv=$(e.target);icondiv=icondiv.prop("tagName")=="IMG"?icondiv.parent():icondiv;switch(t){case"point trenutno isljuceno":iconBrowse=formManager.fileBrowser({upload:true,selectmode:true,showimages:true,extensions:[gcFileExt.Image],postgis:false});iconBrowse.addEvent("close",this.onIconBrowserSelect.bind(this));break;default:window.active_expression_index=explist.clist.getIndexByLi(icondiv.parent());var n=explist.clist.getData(window.active_expression_index);var a=formManager.style({element:icondiv,data:n},t);a.addEvent("close",this.onStyleFormClose.bind(this))}}});function lyrf_onShowSourceFullInfoComplete(e){$("#lyrf_fullsourceinfo").hideLoader();if(!e)$("#lyrf_fullsourceinfo").text("Error getting data for data source.");else if(e.code)$("#lyrf_fullsourceinfo").text("Error "+e.code+": "+e.msg);else $("#lyrf_fullsourceinfo").html(formatGetInfo(e))}function lyrf_onShowSourceFullInfoClick(e){var t=clayerform.getSource("object");if(!t)return;if(t.type!="file"&&t.type!="pg"){$("#lyrf_fullsourceinfo").text("Info is not available for this kind of source type");$("#lyrf_fullsourceinfo").show();return}if(t.src.length>0){$("#lyrf_fullsourceinfo").empty();$("#lyrf_fullsourceinfo").showLoader();$("#lyrf_fullsourceinfo").show();fnl.getInfo(t,lyrf_onShowSourceFullInfoComplete)}else alert(gclang.lfrm.no_source)}function lyrf_typeLayerChange(e){var t=clayerform.getSource("object");if(!t)return;if(t.type=="pg"&&(e.value=="tile"||e.value=="maptemplate"||e.value=="wms"||e.value=="raster")){clayerform.setLayerType(tipcomboObj.lastValue);alert(gclang.lfrm.cannot_set_source.replace("__TYPE__",e.value))}if(t.type=="file"&&(e.value=="tile"||e.value=="maptemplate"||e.value=="wms")){clayerform.setLayerType(tipcomboObj.lastValue);alert(gclang.lfrm.cannot_set_source.replace("__TYPE__",e.value))}if(t.type=="tile"&&e.value!="tile"){clayerform.setLayerType(tipcomboObj.lastValue);alert(gclang.lfrm.cannot_set_source.replace("__TYPE__",e.value))}if(t.type=="gcmap"&&e.value!="maptemplate"){clayerform.setLayerType(tipcomboObj.lastValue);alert(gclang.lfrm.cannot_set_source.replace("__TYPE__",e.value))}if(t.type=="wms"&&e.value!="wms"){clayerform.setLayerType(tipcomboObj.lastValue);alert(gclang.lfrm.cannot_set_source.replace("__TYPE__",e.value))}}function setRenderMethod(e){var t=$("#lyrfrm_directpgrender");if(!t)return;if(e===null)t.show();else t.hide()}(function(d,e,s){"use strict";var t=null,i=null,u=null,n=null,a=null,r=null,o=false,l=false,c=null,h=null,f=null,p=false,m=null,g=null,_=null,v=false,y=false,b=false,w=function(e){h=d.map(e,function(e){return e.name});return h},M=function(e){var i=/^columnsListItem_([\w+\-]+)$/,t=d.map(e,function(e){var t=e.match(i);return t&&t.length&&t[1]});return t},k=function(){f=M(u.sortable("toArray"))},L=function(){var a={};u.children().each(function(e,t){var i=d(t),n=i.find("input[name='idfield']").val();a[n]={alias:i.find(".column-alias > input").val(),render:i.find(".column-render .linkbutton").attr("data-render"),enabled:i.find(".column-enabled > input:checked").length>0,order:e}});return a},S=function(){var s={};u.children().each(function(e,t){var i=d(t),n=i.find("input[name='idfield']").val(),a=i.find(".column-mapping > select").val();if(a){s[a]=n}});return s},T=function(e){var t=u.children(),i=u.find(".column-enabled > input:checked").length,n=i===0,a=i===t.length;if(l){return}if(e===s){if(a){r.prop("checked",true)}else{r.prop("checked",false)}}else{l=true;t.find(".column-enabled > input[type=checkbox]").prop("checked",!!e);l=false}},x=function(){var o,e,l;if(m&&_&&_.definition&&_.mappings){o=JSON.parse(_.definition);e=_.mappings[i]||[];l={};d.each(e,function(e,t){l[t]=e});u.children().each(function(e,t){var i=d(t),n=i.find("input[name='idfield']").val(),a=i.find(".column-mapping > select"),s=[],r=[];d.each(o.items||[],function(e,t){if(t.type==="group"){var i=[];d.each(t.items||[],function(e,t){if(r.includes(t.name))return true;i.push(d("<option/>",{val:t.name,text:t.name,class:"-group-values"}));r.push(t.name)});s.push(d("<optgroup/>",{label:t.name}).append(i))}else{if(r.includes(t.name))return true;s.push(d("<option/>",{val:t.name,text:t.name}));r.push(t.name)}});s.splice(0,0,d("<option/>",{text:"-",val:null}));a.prop("disabled",u.prop("disabled")===true).find("option, optgroup").remove().append.apply(a,s);a.val(l[n])})}else{u.children().each(function(e,t){var i=d(t),n=i.find(".column-mapping > select");n.prop("disabled",true).find("option, optgroup").remove()})}},D=function(){var e=d(this),n=e.val(),t=e.closest(".list-item").find("input[name='idfield']").val();if(n){u.find("select").not(e).each(function(e,t){var i=d(t);if(i.val()===n){i.val(null)}})}_.mappings[i]=S();x()},C=function(e){var t=Y(),i="[id$=_FID],[id$=_CREATED],[id$=_MODIFIED],[id$=_OWNER]";if(e&&e.length){h=w(e);d.tmpl(c,e).appendTo(u);d("tr",u).filter(i).addClass("sys-field-item");u.sortable({axis:"y",handle:".sort-handle",cursor:"n-resize",update:k});r=d("#columnsList thead .column-enabled input[type=checkbox]");T();r.change(function(){T(r.prop("checked"))});u.on("change",".column-enabled > input",function(){T()}).on("change",".column-mapping > select",D);u.find(".column-render .linkbutton").click(I);a.prop("checked",t);O(t);p=true}},I=function(i){var e=d(i.currentTarget).attr("data-render");giscloud.ui.fullScreen({url:"/filemanager/editor",class:"no-padding above-window",id:"file_editor",data:{mode:"javascript",content:e}}).done(function(){d("body").find("#file_editor .gc-full-page-content").on("closing.fullpage",function(e,t){d(i.currentTarget).attr("data-render",t)})})},E=function(e){var t;if(e){t=d.map(e,function(e,t){if(e.render&&e.render.length>0)e.render_exists=true;return d.extend({name:t},e)});if(e["FID"]===s){t.unshift({name:"FID",order:0,enabled:true,alias:null})}t.sort(function(e,t){return e.order-t.order})}return t},O=function(e){if(e){d(".sys-field-item",u).show("fast")}else{d(".sys-field-item",u).hide("fast")}Y(e)},Y=function(e){var t,i=/gc_show_sys_fields=(0|1)/;if(e!=null){document.cookie="gc_show_sys_fields="+(e?1:0)}else{t=document.cookie.match(i);if(t&&t.length>1){return!!parseInt(t[1],10)}else{return a.prop("checked")}}},$=function(){var e,t,i;if(v){return}for(e=0,t=m.length;e<t;e++){i=d("<option/>",{text:m[e].name,value:e});if(_&&m[e].id===_.id){i.prop("selected",m[e].id===_.id);_=m[e]}g.append(i)}},A=function(){if(v){g.empty().prop("disabled",true);y&&y.hide&&y.hide();return}return om.rest("forms",s,s,{noloader:true}).done(function(e){m=e.data;$();x();y&&y.hide&&y.hide()})},P=function(){var e=parseInt(g.val(),10);if(e>-1){_=m[e]}else{_=null}x()},j=function(){p=false;return giscloud.layers.byId(i,{expand:"columns, form"}).done(function(e){o=!!(e&&e.useInfoWindow!=="f");n.attr("checked",o);_=e.form;v=user.id.toString()!==e.owner.toString()}).pipe(function(e){t=e&&e.columns;return t})},N=function(){var e=document.cookie&&document.cookie.match&&document.cookie.match(/\bPHPSESSID=(\w+)\b/i),t=e&&e[1];return om.rest("layers/"+i+"/forms/"+_.id,{mappings:S()},null,{method:"PUT",sessid:t,noloader:true})},F=function(){var e,t;if(b){b=false;return d.Deferred().resolve()}if(this.loaded&&this.loaded.state()==="resolved"){if(_&&_.id&&_.mappings){e=_.id;t=v?d.Deferred().resolve():N()}else{e=-1;t=d.Deferred().resolve()}return d.when(t,giscloud.layers.update(i,{form:e,columns:L(),use_info_window:o}))}return d.Deferred().resolve()},H=function(){d("#tab_attributes").empty().append(d("<div/>",{text:"Layer source has been changed. Save layer before editing attributes.",class:"gc-layer-form-src-changed-msg"})).append("<p>&nbsp;</p>");u&&u.empty();b=true},R=function(){var e=this;function t(){if(!e.disabled){return}u.prop("disabled",true);d("#chooseCustomForm").prop("disabled",true);d("#columnsList").find(".list-item:not(.sys-field-item) .column-alias > input").prop("disabled",true);d("#columnsList").find(".list-item:not(.sys-field-item) .column-enabled input[type=checkbox], "+".list-item:not(.sys-field-item) .updownicon").add("#lyrfrm_edit_attributes,#attrTabPaneTitle").hide();d("#attrNoEdit").show()}this.disabled=true;t();this.loaded&&this.loaded.always(function(){t()})},B=function(){p=false;if(newlayer||["raster","tile"].contains(d("#layertype").val())){return}e("columnsList").showLoader();i=d("#layerid").val();if(!i){return}n=d("#useInfoWindowCheckbox");n.change(function(){o=n.is(":checked")});a=d("#displaySysFieldsCheckbox");a.change(function(){O(a.is(":checked"))});u=d("#columnsList tbody");c=u.template();u.children().first().remove();g=d("#chooseCustomForm").change(P);om.hideLoader();y&&y.hide&&y.hide();y=giscloud.ui.redAlert("Please wait...");this.loaded=j().then(E).done(function(){e("columnsList").hideLoader()}).done(C).then(A)};CLayerForm.__implement({columnsEditor:{initialize:B,save:F,showSourceChangeMessage:H,disable:R}})})(jQuery,$);var wrkCm=[{header:"ID",dataIndex:"id",dataType:"number",hidden:true},{header:"Owner",dataIndex:"owner",dataType:"number",hidden:true},{header:"Name",dataIndex:"name",dataType:"string",width:187}];var mapCm=[{header:"ID",dataIndex:"id",hidden:true},{header:"Owner",dataIndex:"owner",hidden:true},{header:"Name",dataIndex:"name",width:187}];var gcProjectModul=new giscloud.blja.Class({Extends:omModule,options:{id:"workspacemodule",position:"left",orientation:"vertical|horizontal",floating:"none|left|right"},initialize:function(e){this.setOptions(this.options,e);gcapp.addEvent("ready",this.appReady.bind(this))},appReady:function(){var e=window.user&&window.user.language?window.user.language==="en"?null:window.user.language:null,t=window.navigator.userLanguage||window.navigator.language,i=!e?t:t.startsWith(e)?t:e,n,a,s;i=this.langToLocaleMap(i);moment.locale(i);$.fn.datetimepicker.defaults.language=moment.locale();n=window.user&&window.user.options.DATE_FORMAT?window.user.options.DATE_FORMAT:null;a=window.user&&window.user.options.TIME_FORMAT?window.user.options.TIME_FORMAT:null;giscloud.app.dateFormat=n||moment.localeData().longDateFormat("L");giscloud.app.timeFormat=a||moment.localeData().longDateFormat("LT");giscloud.app.longTimeFormat=moment.localeData().longDateFormat("LTS");giscloud.app.datetimeFormat=giscloud.app.dateFormat+" "+giscloud.app.timeFormat;giscloud.app.datetimeSecondsFormat=giscloud.app.dateFormat+" "+giscloud.app.longTimeFormat;s=giscloud.app.timeFormat.substring(0,1);s=s.toUpperCase()===s?"G":"g";giscloud.app.phpDateFormat=giscloud.app.dateFormat.replace(/y+/gi,"Y").replace(/m+/gi,"m").replace(/d+/gi,"d");giscloud.app.phpTimeFormat=giscloud.app.timeFormat.replace(/h+/gi,s).replace(/m+/gi,"i");giscloud.app.phpLongTimeFormat=giscloud.app.longTimeFormat.replace(/h+/gi,s).replace(/m+/gi,"i").replace(/s+/gi,"s");giscloud.app.phpDatetimeFormat=giscloud.app.phpDateFormat+" "+giscloud.app.phpTimeFormat;giscloud.app.phpDatetimeSecondsFormat=giscloud.app.phpDateFormat+" "+giscloud.app.phpLongTimeFormat;giscloud.app.utcOffset=moment.parseZone().utcOffset();if(gcapp.isModuleRegistered(gcapp.gclayer)&&!gcapp.isModuleReady(gcapp.gclayer)){this.appReady.delay(50,this);return}showCookieBar();if(__FIRSTINIT){this.openLastMap()}else if(gcapp.gcmap){gcapp.gcmap.addEvent("ready",this.openLastMap.bind(this))}},domReady:function(){},langToLocaleMap:function(e){switch(e){case"jp":return"ja";case"sw":return"sv";case"si":return"sl";default:return e}},openLastMap:function(){if(openMapId==-2){}if(gcBadLogin||gcBadSite){showLoginForm()}if(is_numeric(openMapId)&&openMapId>=0){this.mapChange(openMapId)}else if(user.options&&is_numeric(user.options.DEFAULT_MAP_ID)){console.log("LOG: openLastMap: ",user.options.DEFAULT_MAP_ID);this.mapChange(user.options.DEFAULT_MAP_ID)}else if(user.options&&typeof user.options.DEFAULT_MAP_ID=="string"){try{var e=JSON.parse(user.options.DEFAULT_MAP_ID);if(e&&e.length){console.log("LOG: openLastMap: ",user.options.DEFAULT_MAP_ID);this.mapChange(e[e.length-1])}}catch(e){console.error("Open last map: error parsing user option 'user.options.DEFAULT_MAP_ID' ",user.options.DEFAULT_MAP_ID)}}else if(openMapId==-1){if(user.id>0)showMapNotAllowedMessage();else showLoginForm(gclang.mmod.no_view_permission)}openMapId=null},resize:function(e,t){if(t){this.container.setStyle("height",t);this.tree.setStyle("height",t-70)}},openInMapViewer:function(e){window.open(fn.getViewerPermalink())},exportMap:function(e){if(!currentMapID){alert(gclang.mmod.no_selection);return}e=$.extend({print:false},e);if(!gcapp.gcmap.proj_src){om.showMessage("You have to define map projection in the 'Map properties' form first to use this feature.");return}formManager.close("expf");this.exportmapform=formManager.open({fid:"expf",overlay:false,minimize:true,draggable:true,title:e.print?__("Print"):gclang.expmapfrm.title,width:450,height:"auto",onTop:true,bootstrap:true,url:fno.liveSite+"map/export_form",data:{mid:currentMapID},closeButtonCallback:"gcproject.exportmapform.close();window.repf_module.close();",buttons:[{html:gclang.expmapfrm.get_image,class:"bluebutton",id:"repf_get_mapnik"},{html:gclang.Close}]});return this.exportmapform},mapClick:function(e){this.mapChange(e.row)},isMapAccessibleByPlan:function(e,t){if(user.active_subscription&&user.active_subscription.type==10&&e.owner!=user.id&&(t||e.share=="f")){var i=true,n=e.owner_subscriptions||e.owner&&e.owner.subscriptions;if(n){jQuery.each(n,function(e,t){if(t.app_instance_id==fno.gcinit_editor_id){if(t.type!=10){return i=false}}})}return i}return true},setMapPrivileges:function(e){if(!e)return;var t=this.isMapAccessibleByPlan(e,true);if(gcapp.ribbonMenu&&fno.gcinit_auth.logged>0){if(t){gcapp.ribbonMenu.tabs.enableTab(3)}else{gcapp.ribbonMenu.tabs.disableTab(3,gclang.mmod.no_edit_permission+" <a class='deletebutton' href='javascript:;' onclick='mapNotAllowed();' >More details</a>")}}else if(gcapp.headerToolbarActions&&fno.gcinit_auth.logged>0){if(t){gcapp.headerToolbarActions.enableFeatureTab()}else{gcapp.headerToolbarActions.disableFeatureTab()}}if(e&&(jQuery.inArray(giscloud.permissions.EDIT,e.permissions)>=0||jQuery.inArray(giscloud.permissions.OWNER,e.permissions)>=0||e.owner==user.id)){if($("mapauxmenu"))$("mapauxmenu").show();if(gcapp.gctoolbar)gcapp.gctoolbar.options.edit=t;editable=t}else{if($("mapauxmenu"))$("mapauxmenu").hide();if(gcapp.gctoolbar)gcapp.gctoolbar.options.edit=false;editable=false}},beforeRefresh:function(e){if(giscloud.ui&&giscloud.ui.edit.isActive()){return}giscloud.maps.byId(e.mid).done(function(e){var t=new Date(e.modified).getTime();if(!mapModifiedTime){mapModifiedTime=t}else if(mapModifiedTime!==t){mapModifiedTime=t;giscloud.ui.map.reloadMap()}})},refreshDatagrid:function(){if(gcapp.config&&gcapp.config.newDatagrid&&gcapp.dataGridSelectors.datagridOpened("[default]")){gcapp.dataGridActions.reloadVisibleFeatures("[default]")}else{gcdatagrid&&gcdatagrid.refresh()}},showDrawer:function(){giscloud.ui.datagridDrawer.show()},isMapArchived:function(e){return e.archived==="t"},displayMapArchivedModal:function(e){var t;if(e&&fno.app_instance_type=="mapeditor")t="The map you are trying to access is archived. You can restore this map in Map Editor under the 'Archived Maps' tab.";else if(e)t="If you own a subscription to Map Editor, you can restore your project in <a href='https://editor.giscloud.com' target='blank'>Map Editor</a> under the Archived Maps tab. Your data is safely stored.";else if(fno.app_instance_type=="mapeditor")t="The map you are trying to access is archived. If you need to access this map, you can contact the map owner to restore it in Map Editor under the 'Archived Maps' tab.";else t="If you need to access this project, contact the project owner to restore it in <a href='https://editor.giscloud.com' target='blank'>Map Editor</a> under the 'Archived Maps' tab. To restore a project, the owner has to own a subscription to Map Editor.";if(formManager.isOpen("maparchivedmodal"))return;gcapp.maparchivedmodal=formManager.showWindow({fid:"maparchivedmodal",bootstrap:true,overlay:true,shadow:true,dragable:false,title:fno.app_instance_type=="mapeditor"?__("Map is archived"):__("This project was archived"),width:300,height:"auto",text:__(t),buttons:[{html:__("Close"),click:"gcapp.maparchivedmodal.close()"}]})},onMapChangeGetData:function(e){var t=$.Deferred();if(gcapp.gclayer&&gcapp.gclayer.llist)gcapp.gclayer.llist.hideLoader();fn.setMap(e);giscloud.ui.map.loading.always(function(){gcapp.setAppState(true)});if(!e){om.showMessage("Error: no map data");return t.resolve()}if(e.result=="no"){return t.resolve()}var i=this.isMapAccessibleByPlan(e);if(!i){mapNotAllowed();gcapp.ribbonMenu.tabs.showTab(0);gcapp.headerToolbarActions&&gcapp.headerToolbarActions.setTab("home_tab");return t.resolve()}var n=this.isMapArchived(e);if(n){this.displayMapArchivedModal(e.owner==user.id);gcapp.ribbonMenu&&gcapp.ribbonMenu.tabs.showTab(0);gcapp.headerToolbarActions&&gcapp.headerToolbarActions.setTab("home_tab");return t.resolve()}this.setMapPrivileges(e);currentMapID=e.mid;if(gcapp.selo&&gcapp.selo.hideInfoTable)gcapp.selo.hideInfoTable();fnm.selection=null;if(e.cache!="yes"){fn.unloadMap();om.showError("There was an error creating cache.");return t.resolve()}giscloud.ui.map.bind("reloaded",this.showDrawer);if(!isNaN(fno.gcinit_dynamicRefreshInterval)&&fno.gcinit_dynamicRefreshInterval>0&&!user.options.MAP_NO_AUTO_REFRESH&&giscloud.app.user){var a=e.options.MAP_AUTO_REFRESH_INTERVAL>1?e.options.MAP_AUTO_REFRESH_INTERVAL:user&&user.options&&user.options.MAP_AUTO_REFRESH_INTERVAL>1?user.options.MAP_AUTO_REFRESH_INTERVAL:fno.gcinit_dynamicRefreshInterval*1e3;clearInterval(setRefreshInterval);giscloud.ui.map.bind("reloaded",this.refreshDatagrid);mapModifiedTime=null;this.beforeRefresh(e);setRefreshInterval=setInterval(this.beforeRefresh.bind(this,e),a)}if(gcapp.gctoolbar){gcapp.gctoolbar.setTool("InfoTool")}gcapp.bookmarks.byMapId(currentMapID,editable);if(fno.gcinit_auth.type>0){$.cookie("giscloud_last_mid",currentMapID)}this.showMap(true,false,function(){t.resolve()});this.fireEvent("getmapdata",{target:this,mapdata:e,mid:currentMapID});giscloud.log.push("map_opened",{mid:currentMapID,name:e.name,html5:true});return t},mapChange:function(e,t){if(!gcapp.gcmap)return;clearInterval(setRefreshInterval);giscloud.ui.map.unbind("reloaded",this.refreshDatagrid);giscloud.ui.map.unbind("reloaded",this.showDrawer);this.unloadProject();this.currentMapID=e;this.fireEvent("mapchange",{target:this,mid:e,rememberLayerSelection:t});if(gcapp&&gcapp.gctoolbar){gcapp.gctoolbar.hideSearch()}if(gcapp.config&&gcapp.config.newDatagrid){gcapp.dataGridActions.setMapId("[default]",parseInt(e))}fnm.getMapDataByID(e,this.onMapChangeGetData.bind(this))},onReload:function(e,t){if(!e){om.showMessage("Error: no map data");return}if(e.result=="no"){return}currentMapID=e.mid;fn.setMap(e);if(e.cache!="yes"){gcapp.gcmap.unload();om.showError("There was an error creating cache.");return}this.showMap(true,false,t)},reload:function(e,t,i,n,a,s){if(!currentMapID)return;if(i)formManager.closeAll();if(t){if(gcapp.gclayer&&gcapp.gclayer.llist)fnl.lastSelection=gcapp.gclayer.llist.getSelection()}var r=this;fnm.getMapDataByID(currentMapID,function(e){var t=$.Deferred();r.onReload(e,function(){if(a)a.apply(this,arguments);t.resolve()});if(is_numeric(n)){if(gcapp.gclayer&&gcapp.gclayer.llist){gcapp.gclayer.llist.options.lastSelection=n;if(!s)gcapp.gclayer.llist.options.zoomToLayer=n}}return t})},refreshMap:function(e){this.showMap(false,false,e)},showMap:function(e,t,i){fn.showMap(i)},showProjectsWindow:function(){gcapp.ribbonMenu.tabs.showTab(0)},newMap:function(){if(user.id==-1){if(confirm("To create a new map you would need a free account. Do you want to sign-up now?"))window.location.href="/sign-up";return}if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}formManager.close("projectform");mapform=formManager.open({fid:"projectform",bootstrap:true,draggable:true,title:gclang.mmod.form_title_new,overlay:true,shadow:true,width:"480px",height:"auto",url:fno.liveSite+"map/form?new=yes",buttons:[{html:gclang.save,class:"bluebutton",click:"saveMap(false);"},{html:gclang.close,click:"mapform.close();"}]});return mapform},hasOpenProject:function(){return currentMapID!=null&&currentMapID!=-1&&currentMapID>=0},unloadProject:function(){var e;if(gcapp.gctoolbar){gcapp.gctoolbar.setTool("InfoTool")}giscloud.ui.map.markers.forEach(function(e){giscloud.ui.map.removeMarker(e)});if(gcapp.gcmap.marker&&gcapp.gcmap.marker.clear){gcapp.gcmap.marker.clear()}currentMapID=null;fn.unloadModule("main");fnl.removeLayers();gcproject.setMapPrivileges();formManager.closeAll();fn.setMap(null);if(gcapp.gcmap)gcapp.gcmap.unload();if(gcdatagrid)gcdatagrid.removeAll(true);gcapp.setAppState(0)},onArchiveMap:function(){var e=arguments.length;while(e--&&!arguments[e]);var t=arguments[e];if(t){om.showError(t)}else{om.showConfirm(__("Map successfully archived."));om.hideLoader();gcapp.loadHomeWorkspace();gcproject.unloadProject()}},onDeleteMap:function(){var e=arguments.length;while(e--&&!arguments[e]);var t=arguments[e];if(t){om.showError(t)}else{om.showConfirm(__("Map successfully deleted."));om.hideLoader();gcapp.deletemapform.close();gcapp.loadHomeWorkspace()}},deleteMap:function(e){var t=$(e.currentTarget).closest(".gc-map-thumb").data("map");var i="om.showLoader();         giscloud.log.push('map_delete', {mid: "+t.id+"});         giscloud.maps.remove("+t.id+").always(function () {             return gcproject.onDeleteMap.apply(this, arguments);         });";gcapp.deletemapform=formManager.showWindow({fid:"deletemapmodal",bootstrap:true,overlay:true,shadow:true,dragable:false,title:__("Delete map"),width:300,height:"auto",text:__("Your map and layers will be deleted permanently and you will not be able to restore them. Your data will remain safely stored. Are you sure you want to delete your map?"),buttons:[{html:__("Delete"),class:"bluebutton",click:i},{html:__("Cancel"),click:"gcapp.deletemapform.close()"}]})},archiveMap:function(){if(!gcapp.isEditable(null,true)){alert(gclang.mmod.no_edit_permission);return}var e=fn.getMap();if(!e){alert(gclang.mmod.no_selection);return}if(e.owner!=user.id){var t=e.options&&e.options.mdc_project;var i=t?"Only project owner can archive this map.":"Only map owner can archive this map.";gcapp.archivenotownermodal=formManager.showWindow({fid:"archivenotownermodal",bootstrap:true,overlay:true,shadow:true,dragable:false,title:__("Not possible to archive map"),width:300,height:"auto",text:__(i),buttons:[{html:__("OK"),click:"gcapp.archivenotownermodal.close()"}]});return}var n="om.showLoader();         giscloud.log.push('map_archive', {mid: "+e.mid+"});         giscloud.maps.archive("+e.mid+").always(function () {             return gcproject.onArchiveMap.apply(this, arguments);         });";gcapp.archivemapform=formManager.showWindow({fid:"archivemapmodal",bootstrap:true,overlay:true,shadow:true,dragable:false,title:__("Archive map"),width:300,height:"auto",text:__("If you archive your map, you will be able to restore it in the 'Archived Maps' tab. Your data will remain safely stored."),buttons:[{html:__("Archive"),class:"bluebutton",click:n},{html:__("Cancel"),click:"gcapp.archivemapform.close()"}]})},onRestoreMap:function(){var e=arguments.length;while(e--&&!arguments[e]);var t=arguments[e];if(t){om.showError(t)}else{om.showConfirm(__("Map successfully restored."));om.hideLoader();gcapp.restoremapform.close();gcapp.loadHomeWorkspace()}},restoreMap:function(e){var t=$(e.currentTarget).closest(".gc-map-thumb").data("map");var i="om.showLoader();         giscloud.log.push('map_restore', {mid: "+t.id+"});         giscloud.maps.restore("+t.id+").always(function () {             return gcproject.onRestoreMap.apply(this, arguments);         });";gcapp.restoremapform=formManager.showWindow({fid:"restoremapmodal",bootstrap:true,overlay:true,shadow:true,dragable:false,title:__("Restore Map"),width:300,height:"auto",text:__("Do you want to restore your map and layers? You will be able to access your map in the Map tab."),buttons:[{html:__("Restore"),class:"bluebutton",click:i},{html:__("Cancel"),click:"gcapp.restoremapform.close()"}]})}});if(fno.gcinit_auth.type>0){gcProjectModul.prototype.editMap=function(e,t){var i=e>=0?e:currentMapID;if(!i)return;if(!gcapp.isEditable(null,true)){alert(gclang.mmod.no_edit_permission);return}buttons=new Array;buttons.push({html:gclang.save,class:"bluebutton",click:"saveMap(false);"});buttons.push({html:gclang.close,click:"mapform.close();"});formManager.close("projectform");mapform=formManager.open({fid:"projectform",bootstrap:true,title:gclang.mmod.form_title_edit,overlay:false,dragable:true,width:580,height:"auto",url:fno.liveSite+"map/form?mapid="+i+(t?"&tab="+t:""),buttons:buttons})};gcProjectModul.prototype.onDuplicateMap=function(e){om.showMessage(e.msg);if(e.result=="yes"&&e.newmid){openMapId=e.newmid;formManager.closeAll();this.mapChange(e.newmid)}};gcProjectModul.prototype.duplicateMap=function(){if(!gcapp.isEditable(null,true)){alert(gclang.mmod.no_edit_permission);return}var e=fn.getMap();if(!e){alert(gclang.mmod.no_selection);return}if(e.owner!=user.id){alert("Only map owner can duplicate the map.");return}else{if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}var t=this;duplicateMapClickHandler=function(){fnm.duplicateMap(e.mid,t.onDuplicateMap.bind(t))};gcapp.duplicatemapform=formManager.showWindow({fid:"duplicatemapmodal",bootstrap:true,overlay:true,shadow:true,dragable:false,title:__("Duplicate map"),width:300,height:"auto",text:gclang.mmod.duplicate_confirm.replace("__MAP_NAME__",e.name),buttons:[{html:__("Duplicate"),class:"bluebutton",click:"duplicateMapClickHandler()"},{html:__("Cancel"),click:"gcapp.duplicatemapform.close()"}]})}};gcProjectModul.prototype.isProjectOpen=function(){return fnm.isVisible()&&currentMapID&&fn.getMap()};gcProjectModul.prototype.sharingAndPublishMap=function(e){if(!this.isProjectOpen()){alert(gclang.mmod.no_selection);return}var t=fn.getMap();if(formManager){formManager.close("mapsharingform");formManager.close("resourcepermissionform")}mapsharingform=formManager.open({bootstrap:true,fid:"mapsharingform",phoneFullSc:true,overlay:false,dragable:true,title:e?"Share":gclang.mmod.form_shareandpublish_title,width:"auto",url:fno.liveSite+"map/formsharing?"+$.param({mid:currentMapID,bound:fnw.getViewBound(),proj4:t.proj4,basic_sharing:e?"yes":"no"}),buttons:[{html:gclang.close,click:"mapsharingform.close();"}]});return mapsharingform}}var selectedSafeID=null;var currentMapID=-1;var acancel=null;var clearSearchResult=null;var editable=false;var setRefreshInterval=null;var mapModifiedTime=null;var currentWorkspaceID=-1;var gcproject;gcproject=new gcProjectModul;function mapNotAllowed(){window.modal_map_not_allowed=giscloud.ui.modal({title:"Action not allowed",content:"<p class='lead' >Free subscription plan does not allow to work with maps created by premium users. Please upgrade your subscription plan.</p><p class='text-center'><button class='btn btn-default btn-primary' onclick='window.modal_map_not_allowed.modal(\"hide\"); showSubscription(); return false;' >Upgrade subscription</button></p>",overlay:false})}function openDocsWindow(e){var t=window.open(fno.gcinit_docs_url,"gc_win","menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes");if(t)t.focus();return false}function showStorageForbiddenMsg(){window.showStorageForbiddenMsgCounter=0;window.formManager.closeAll();window.checkIfUserHasEditorLicence().done(function(e){if(window.showStorageForbiddenMsgCounter>0){return}window.showStorageForbiddenMsgCounter++;$("#showStorageForbiddenMsg").remove();var t=e&&user&&(!user.active_subscription||parseInt(user.active_subscription.type)===10)?__("Your account usage exceeds maximum allowed limits for a Free license. Please assign your Premium license."):__("Your account usage exceeds maximum allowed limits. Please upgrade your plan."),i=window.privateMaps?e&&user&&(!user.active_subscription||parseInt(user.active_subscription.type)===10)?__("Assign your Premium license"):__("Upgrade your plan to a Premium license"):__("Upgrade your storage plan"),n=giscloud.ui.modal({title:i,fid:"showStorageForbiddenMsg",privateButtons:true,content:t,buttons:[{html:__("Upgrade"),class:"bluebutton",click:"$('#showStorageForbiddenMsg').remove(); $('.modal-backdrop').remove(); $('body').removeClass('modal-open'); window.showSubscription();"},{html:__("Cancel"),click:"$('#showStorageForbiddenMsg').remove(); $('.modal-backdrop').remove(); $('body').removeClass('modal-open');"}],modal:true});n.find(".modal-header").css("text-align","center");n.find(".modal-body").css("text-align","center");return n})}function checkIfUserExceedsStorageLimits(){var e,t,i,n;if(!window.user||!window.user.subscriptions||window.user.subscriptions.length===0){return}if(window.user.id===0){return false}if(fno.app_instance_id!=null&&fno.giscloud&&fno.app_instance_id==fno.gcinit_manager_id){return false}e=user.active_subscription;if(!e){if(fno&&!fno.giscloud){return}else{return true}}t=parseInt(e.type)===10;commercialLicence=parseInt(e.type)>=20;if(t&&window.user.private_maps&&window.user.private_maps.length>0){window.privateMaps=true;e.over_limits=true}else{window.privateMaps=false}if(!e.over_limits&&(t||commercialLicence)){return}return true}function checkIfUserHasEditorLicence(){var i=new $.Deferred;giscloud.payment.customers.list({expand:"subscriptions"}).done(function(e){if(!e||e.length===0){i.resolve(false)}var t=e.filter(function(e){var t=e.subscriptions.filter(function(e){return!e.canceled&&!e.disabled&&e.plan&&e.plan.code==="editor"});return t.length>0});i.resolve(t.length>0)}).fail(i.reject);return i.promise()}function getLabelAlias(e,t){switch(t){case"__id":t="FID";break;case"__owner":t="OWNER";break;case"__created":t="CREATED";break;case"__modified":t="MODIFIED";break}return e.columns[t]&&e.columns[t].alias&&e.columns[t].alias.length>0?e.columns[t].alias:t}function openLayerStyleLabels(){var a;if(!window.formManager){return}formManager.close("layerStyleLabelsModal");a=formManager.open({fid:"layerStyleLabelsModal",title:__("Choose attributes"),overlay:false,shadow:false,bootstrap:true,minimize:true,width:600,height:"auto",buttons:[{html:__("Save"),class:"btn-primary",id:"layerStyleLabelsModalSave"},{html:__("Cancel"),class:"btn-default",click:"displayLabels.close();"}],url:fno.liveSite+"layer/form_labels"});$("#layerStyleLabelsModalSave").click(function(e){var t=$("#displayLabelsSelectedParams").children("li"),i=[],n=[];e.preventDefault();t.each(function(e,t){i.push($(t).attr("data-param"));n.push(getLabelAlias(this.layer,$(t).attr("data-param")))}.bind(this));$("#labelfList").text(n.join(", "));$("#labelf").val(i);a.close()}.bind(this))}function showWelcomeForm(e){var t="";if(user.owner_id&&user.owner_id!=user.id){formManager.fullpage({id:"no_subscription",url:"/page/no_subscription"});return}if(user.options&&String(user.options.REGISTRATION_SKIP_WELCOME_SCREEN)==="1"){return}if(fno.app_instance_id!=null&&fno.giscloud&&fno.app_instance_id==fno.gcinit_manager_id){e=true}if(e){t="?"+$.param({hide_subscription:"yes"})}window.open("/consent","_self")}function showSubscription(){formManager.closeFullpage("subscription");formManager.fullpage({id:"subscription",url:"/page/subscription",closeButton:true})}function logIn(){om.gaq("user","login",$("#username").val())}function logSubmit(){logOut()}function logOut(){gcapp.logout();om.gaq("user","logout",user.id)}var loginform;function showLoginForm(e){if(window.user&&window.user.id>-1)return;formManager.close("loginform");var t=[];if(gcBadLogin)t.push("badlogin=yes");else if(gcBadSite)t.push("badsite=yes");else if(gcDisabledApp)t.push("disabled_app=yes");var i={};if(e)i.msg=e;t.push("redirect="+window.location.pathname);window.loginform=formManager.open({fid:"loginform",bootstrap:true,data:i,overlay:true,animation:false,closeOverlayClick:true,dragable:false,title:"Sign In",width:"auto",height:"auto",url:fno.liveSite+"user/login_form?"+t.join("&"),buttons:[{html:gclang.Close}]});return false}function showMapNotAllowedMessage(){formManager.closeAll();gcapp.mapnotallowedform=formManager.showWindow({bootstrap:true,overlay:true,shadow:true,dragable:false,title:"You need permission to access this map.",width:300,height:"auto",text:"You don't have permission to access this map. You can request access from the owner or choose a different account.",buttons:[{html:gclang.close,click:"gcapp.mapnotallowedform.close()"}]});return false}function showCookieBar(){var t=".gc-cookie-message";if((!$(t)||$(t).length===0)&&$.cookie("cookiebar")!=="hide"){$("#gcCookieBar").load("/page/cookie_bar",function(){$(t).find(".gc-cookie-message-close").click(function(e){$.get("/cookie",function(){$(t).remove();console.log("cookie saved")})})})}}(function(e,t,i){giscloud.date={daysInMonth:function(e,t){return new Date(t,e,0).getDate()},getTimelineDateIndex:function(e,n){var a=0,s=false;t(e).each(function(){if(s)return;var e=this;var t=e.options;for(var i=0;i<t.length;i++){if(n==t[i].value){s=true;break}a++}});return a},generateTimeline:function(e,o,l,d){var u=[],l=l||1;var c=parseInt(new Date/1e3);t(e).each(function(){var e=this;var t={label:e,options:[]};u.push(t);for(var i=1;i<=12;i++){var n=parseInt(+new Date(e,i-1)/1e3);if(o){var a=giscloud.date.daysInMonth(i,e),s=Math.floor(a/l);for(var r=1;r<=a;r+=l){var n=parseInt(+new Date(e,i-1,r)/1e3);if(d&&n>c)return u;t.options.push({value:n,text:r+"/"+i+"/"+e.toString().substr(2)})}}else{t.options.push({value:n,text:i+"/"+e.toString().substr(2)})}}});return u}}})(window,jQuery);if(fno.gcinit_auth.logged){function showUsers(){if($("#pageWrapper").length)$("#pageWrapper").load(fno.liveSite+"admin/users")}var rolesform;function showRoles(){$("#pageWrapper").load(fno.liveSite+"admin/roles",{});return;rolesform=formManager.open({title:"Roles Management",width:400,height:"auto",url:fno.liveSite+"/role/form",buttons:[{html:gclang.close,click:"rolesform.close()"}]});return rolesform}function openGeocodingApp(){var e=getUrlFromAppName("geocoding");giscloud.dashboard.openApp({app_url:e,newWindow:true},e)}var userform;function myAccount(e){if(user.id==-1){if(confirm("To get an API key you would need a free account. Do you want to sign-up now?"))window.location.href="/sign-up";return}formManager.close("myaccount");userform=formManager.open({fid:"myaccount",overlay:false,dragable:true,bootstrap:true,title:"",width:600,height:"auto",url:fno.liveSite+"user/form?r="+Math.round(Math.random()*1e5)+(e?"tab="+e:""),buttons:[{html:gclang.save,class:"bluebutton",click:"saveUser()"},{html:gclang.close,click:"userform.close()"}]});return userform}var formreferences;function referenceManager(){if(formreferences)formreferences.close();formreferences=formManager.open({title:"Reference Manager",width:400,height:"auto",url:fno.liveSite+"feature/form_references",data:{new:"yes"},buttons:[{html:gclang.Close,click:"formreferences.close();"}],onClose:function(){}})}function fileManager(e){if(user.id==-1){if(confirm("To upload your data you would need a free account. Do you want to sign-up now?"))window.location.href="/sign-up";return}if(window.ff)window.ff.close();window.ff=formManager.fileBrowser({upload:true,singlemode:true,showpostgis:false,multipleSelection:true,extensions:gcFileExt.AAll,open_upload_form:e,title:gclang.mainmenu.tools_filemanager});if(e)window.ff.container.hide()}var dbmanagerform;function databaseManager(){formManager.close("dbf");dbmanagerform=formManager.open({bootstrap:true,fid:"dbf",minimize:true,overlay:false,dragable:true,title:gclang.dbman.header,width:850,height:"auto",url:fno.liveSite+"dbmanager/form_manager",buttons:[{html:gclang.close,click:"dbmanagerform.close()"}]})}var joinwizardform;function joinWizard(){formManager.close("joinWizardForm");if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}joinwizardform=formManager.open({fid:"joinWizardForm",bootstrap:true,minimize:true,overlay:false,dragable:true,title:gclang.Join_tables_wizard,width:800,height:"auto",url:fno.liveSite+"dbmanager/join_wizard_form",buttons:[{class:"bluebutton",html:__("Join"),click:"gcapp.joinWizard.executeJoin();"},{html:gclang.close,click:"joinwizardform.close()"}]})}function openEditStructureForm(e,t){window.db_editstructure_form=formManager.open({bootstrap:true,overlay:false,minimize:true,dragable:true,title:(e?"'"+e+"' ":"")+gclang.dbman.edit_structure,width:500,height:"auto",url:fno.liveSite+"datasource/form_columns",fdata:{name:e,source:t},buttons:[{html:gclang.Close,click:"db_editstructure_form.close()"}]})}var dsmanagerform;function datasourceManager(){formManager.close("dsf");dsmanagerform=formManager.open({bootstrap:true,fid:"dsf",overlay:false,draggable:true,title:gclang.Datasource_Manager,width:850,height:700,url:fno.liveSite+"datasource/form_manager",buttons:[{html:gclang.close,click:"dsmanagerform.close()"}]})}var projectionwizardform;function showProjectionWizard(e){formManager.close("prjf");projectionwizardform=formManager.open({fid:"prjf",overlay:false,bootstrap:true,dragable:true,title:gclang.reprjfrm.title,width:640,height:"auto",url:fno.liveSite+"layer/form_projection_wizard",data:e,buttons:[{html:"Run",class:"bluebutton",click:"pwf_module.run();"},{html:"Close",click:"pwf_module.close();"}]});return projectionwizardform}var mergewizardform;function showMergeWizard(){formManager.close("mrgf");if(window.checkIfUserExceedsStorageLimits()){return window.showStorageForbiddenMsg()}mergewizardform=formManager.open({fid:"mrgf",overlay:false,bootstrap:true,minimize:true,draggable:true,title:gclang.Merge_Wizard,width:640,height:"auto",url:fno.liveSite+"layer/form_merge_wizard",buttons:[{html:gclang.Merge,class:"bluebutton",click:"mrgf_module.run();"},{html:gclang.Close,click:"mrgf_module.close();"}]});return mergewizardform}var formsmanagerform;function showFormsManager(){formManager.fullpage({id:"formsmanager",url:fno.liveSite+"layer/form_forms_manager",class:"no-padding"})}var addressmodelmanagerform;function showAddressModelManager(){addressmodelmanagerform=formManager.open({fid:"addressmodelmanager",oneInstance:true,dragable:true,title:gclang["Address_Models"],width:500,height:"auto",url:fno.liveSite+"geocoding/geocoder/form_address_model_manager",buttons:[{html:gclang.Close,click:"addressmodelmanagerform.close();"}]});return formsmanagerform}function findPropertyByText(e,t){for(var i in e){if(e.hasOwnProperty(i)&&t.startsWith(i.toString())){return e[i]}}}function getLicenceDisc(i,n){var a=0,s=[4,15,30,50,100,200,500],r={editor12:[50,50,50,40,40,30,30],editor6:[25,25,25,20,20,15,15],editor:[5,5,5,4,4,3,3],viewer12:[20,20,20,10,10,10,10],viewer6:[10,10,10,5,5,5,5],viewer:[2,2,2,1,1,1,1],mdc12:[20,20,20,20,10,10,10],mdc6:[10,10,10,10,5,5,5],mdc:[2,2,2,2,1,1,1]};if(n<5){return a}if(!findPropertyByText(r,i)){return a}$.each(s,function(e,t){if(n>s[e]){a+=findPropertyByText(r,i)[e]*(n-s[e])}});return a*100}function getUrlFromAppName(e){var t="https://";var i="";var n=".giscloud.com/";if(fno&&fno.domain){n="."+fno.domain+"/"}if(fno&&fno.domainprefix){i=fno.domainprefix}return t+i+e+n}}function getTimezone(i){var n;if(typeof i!=="string"&&moment(i).isValid()){return{value:i,timezone:null}}getTimezones().forEach(function(e){var t;if(i.match(" "+e.Abbreviation+"$")){t=i.lastIndexOf(e.Abbreviation);i=i.substring(0,t-1);n=e.Abbreviation}else if(i.match(" "+e.Name+"$")){t=i.lastIndexOf(e.Name);i=i.substring(0,t-1);n=e.Name}});return{value:i,timezone:n}}function getUtcOffsets(e){var t=["-12:00","-11:00","-10:00","-09:30","-09:00","-08:00","-07:00","-06:00","-05:00","-04:30","-04:00","-03:30","-03:00","-02:00","-01:00","00:00","01:00","02:00","03:00","03:30","04:00","04:30","05:00","05:30","05:45","06:00","06:30","07:00","08:00","08:45","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:45","13:00","14:00"];return e?t[e]:t}function formatDateTime(e,t,i){var n,a,s=e,r=moment.parseZone(s),o=typeof s!=="number"&&giscloud.app.utcOffset-r.utcOffset(),l;if(!e){return""}if(typeof e!=="object"||Object.keys(e).length===0){e={value:e}}if(!t){t="date"}n=giscloud.app[t==="mdcLocationTime"?"datetimeSecondsFormat":t+"Format"];if(t==="datetime"&&i){a=moment(e.value).format(n);return a}switch(t){case"date":if(typeof e.value==="string"&&(e.value.match(" 00:00:00 AM$")||e.value.match(" 00:00:00 PM$"))){e.value=e.value.split(" 00:00:00 AM")[0].split(" 00:00:00 PM")[0]}a=moment(e.value).isValid()?moment.parseZone(e.value).format(n):moment(e.value,n,true).isValid()?e.value:"Invalid date";break;case"time":if(typeof e.value==="string"&&(e.value.includes("AM")||e.value.includes("PM"))){a=moment(e.value,"hh:mm:ss A").format(n)}else{a=moment(e.value,"hh:mm:ss").format(n)}break;case"datetime":default:if(typeof e.value==="string"&&!moment(e.value).isValid()){e=getTimezone(e.value)}if(moment(e.value).isValid()&&moment.parseZone(e.value,n,true).isValid()){a=e.value}else{a=moment(e.value).isValid()?moment.parseZone(e.value).format(n):moment(e.value,n,true).isValid()?e.value:"Invalid date"}if(e.timezone&&a!=="Invalid date"){a+=" "+e.timezone}else if(!i&&(o||/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(:\d{2}(\.\d+)?)?Z$/.test(s))&&a!=="Invalid date"){a+=" (UTC";if(r._offset!==0){l=Math.abs(r._offset%60);a+=(r._offset>0?"+":"-")+("0"+Math.floor(Math.abs(r._offset)/60)).slice(-2);a+=":"+("0"+(l||"0")).slice(-2)}else{a+="+00:00"}a+=")"}break}if(a==="Invalid date"){a=s}return a}function getTimezones(){return[{Abbreviation:"A",Name:"Alpha Time Zone",DisplayName:"Alpha Time Zone(UTC + 1)",Offset:"1 hours"},{Abbreviation:"ACDT",Name:"Australian Central Daylight Time",DisplayName:"Australian Central Daylight Time(UTC + 10:30)",Offset:"10:30 hours"},{Abbreviation:"ACST",Name:"Australian Central Standard Time",DisplayName:"Australian Central Standard Time(UTC + 9:30)",Offset:"9:30 hours"},{Abbreviation:"ADT",Name:"Atlantic Daylight Time",DisplayName:"Atlantic Daylight Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"ADT",Name:"Atlantic Daylight Time",DisplayName:"Atlantic Daylight Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"AEDT",Name:"Australian Eastern Daylight Time",DisplayName:"Australian Eastern Daylight Time(UTC + 11)",Offset:"11 hours"},{Abbreviation:"AEST",Name:"Australian Eastern Standard Time",DisplayName:"Australian Eastern Standard Time(UTC + 10)",Offset:"10 hours"},{Abbreviation:"AFT",Name:"Afghanistan Time",DisplayName:"Afghanistan Time(UTC + 4:30)",Offset:"4:30 hours"},{Abbreviation:"AKDT",Name:"Alaska Daylight Time",DisplayName:"Alaska Daylight Time(UTC - 8)",Offset:"-8 hours"},{Abbreviation:"AKST",Name:"Alaska Standard Time",DisplayName:"Alaska Standard Time(UTC - 9)",Offset:"-9 hours"},{Abbreviation:"ALMT",Name:"Alma-Ata Time",DisplayName:"Alma-Ata Time(UTC + 6)",Offset:"6 hours"},{Abbreviation:"AMST",Name:"Armenia Summer Time",DisplayName:"Armenia Summer Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"AMST",Name:"Amazon Summer Time",DisplayName:"Amazon Summer Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"AMT",Name:"Armenia Time",DisplayName:"Armenia Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"AMT",Name:"Amazon Time",DisplayName:"Amazon Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"ANAST",Name:"Anadyr Summer Time",DisplayName:"Anadyr Summer Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"ANAT",Name:"Anadyr Time",DisplayName:"Anadyr Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"AQTT",Name:"Aqtobe Time",DisplayName:"Aqtobe Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"ART",Name:"Argentina Time",DisplayName:"Argentina Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"AST",Name:"Arabia Standard Time",DisplayName:"Arabia Standard Time(UTC + 3)",Offset:"3 hours"},{Abbreviation:"AST",Name:"Atlantic Standard Time",DisplayName:"Atlantic Standard Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"AWDT",Name:"Australian Western Daylight Time",DisplayName:"Australian Western Daylight Time(UTC + 9)",Offset:"9 hours"},{Abbreviation:"AWST",Name:"Australian Western Standard Time",DisplayName:"Australian Western Standard Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"AZOST",Name:"Azores Summer Time",DisplayName:"Azores Summer Time(UTC)",Offset:"0 hours"},{Abbreviation:"AZOT",Name:"Azores Time",DisplayName:"Azores Time(UTC - 1)",Offset:"-1 hours"},{Abbreviation:"AZST",Name:"Azerbaijan Summer Time",DisplayName:"Azerbaijan Summer Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"AZT",Name:"Azerbaijan Time",DisplayName:"Azerbaijan Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"B",Name:"Bravo Time Zone",DisplayName:"Bravo Time Zone(UTC + 2)",Offset:"2 hours"},{Abbreviation:"BNT",Name:"Brunei Darussalam Time",DisplayName:"Brunei Darussalam Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"BOT",Name:"Bolivia Time",DisplayName:"Bolivia Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"BRST",Name:"Brasilia Summer Time",DisplayName:"Brasilia Summer Time(UTC - 2)",Offset:"-2 hours"},{Abbreviation:"BRT",Name:"Braslia time",DisplayName:"Braslia time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"BST",Name:"Bangladesh Standard Time",DisplayName:"Bangladesh Standard Time(UTC + 6)",Offset:"6 hours"},{Abbreviation:"BST",Name:"British Summer Time",DisplayName:"British Summer Time(UTC + 1)",Offset:"1 hours"},{Abbreviation:"BTT",Name:"Bhutan Time",DisplayName:"Bhutan Time(UTC + 6)",Offset:"6 hours"},{Abbreviation:"C",Name:"Charlie Time Zone",DisplayName:"Charlie Time Zone(UTC + 3)",Offset:"3 hours"},{Abbreviation:"CAST",Name:"Casey Time",DisplayName:"Casey Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"CAT",Name:"Central Africa Time",DisplayName:"Central Africa Time(UTC + 2)",Offset:"2 hours"},{Abbreviation:"CCT",Name:"Cocos Islands Time",DisplayName:"Cocos Islands Time(UTC + 6:30)",Offset:"6:30 hours"},{Abbreviation:"CDT",Name:"Cuba Daylight Time",DisplayName:"Cuba Daylight Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"CDT",Name:"Central Daylight Time",DisplayName:"Central Daylight Time(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"CEST",Name:"Central European Summer Time",DisplayName:"Central European Summer Time(UTC + 2)",Offset:"2 hours"},{Abbreviation:"CET",Name:"Central European Time",DisplayName:"Central European Time(UTC + 1)",Offset:"1 hours"},{Abbreviation:"CHADT",Name:"Chatham Island Daylight Time",DisplayName:"Chatham Island Daylight Time(UTC + 13:45)",Offset:"13:45 hours"},{Abbreviation:"CHAST",Name:"Chatham Island Standard Time",DisplayName:"Chatham Island Standard Time(UTC + 12:45)",Offset:"12:45 hours"},{Abbreviation:"CKT",Name:"Cook Island Time",DisplayName:"Cook Island Time(UTC - 10)",Offset:"-10 hours"},{Abbreviation:"CLST",Name:"Chile Summer Time",DisplayName:"Chile Summer Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"CLT",Name:"Chile Standard Time",DisplayName:"Chile Standard Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"COT",Name:"Colombia Time",DisplayName:"Colombia Time(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"CST",Name:"China Standard Time",DisplayName:"China Standard Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"CST",Name:"Central Standard Time",DisplayName:"Central Standard Time(UTC - 6)",Offset:"-6 hours"},{Abbreviation:"CST",Name:"Cuba Standard Time",DisplayName:"Cuba Standard Time(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"CVT",Name:"Cape Verde Time",DisplayName:"Cape Verde Time(UTC - 1)",Offset:"-1 hours"},{Abbreviation:"CXT",Name:"Christmas Island Time",DisplayName:"Christmas Island Time(UTC + 7)",Offset:"7 hours"},{Abbreviation:"ChST",Name:"Chamorro Standard Time",DisplayName:"Chamorro Standard Time(UTC + 10)",Offset:"10 hours"},{Abbreviation:"D",Name:"Delta Time Zone",DisplayName:"Delta Time Zone(UTC + 4)",Offset:"4 hours"},{Abbreviation:"DAVT",Name:"Davis Time",DisplayName:"Davis Time(UTC + 7)",Offset:"7 hours"},{Abbreviation:"E",Name:"Echo Time Zone",DisplayName:"Echo Time Zone(UTC + 5)",Offset:"5 hours"},{Abbreviation:"EASST",Name:"Easter Island Summer Time",DisplayName:"Easter Island Summer Time(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"EAST",Name:"Easter Island Standard Time",DisplayName:"Easter Island Standard Time(UTC - 6)",Offset:"-6 hours"},{Abbreviation:"EAT",Name:"Eastern Africa Time",DisplayName:"Eastern Africa Time(UTC + 3)",Offset:"3 hours"},{Abbreviation:"EAT",Name:"East Africa Time",DisplayName:"East Africa Time(UTC + 3)",Offset:"3 hours"},{Abbreviation:"ECT",Name:"Ecuador Time",DisplayName:"Ecuador Time(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"EDT",Name:"Eastern Daylight Time",DisplayName:"Eastern Daylight Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"EEST",Name:"Eastern European Summer Time",DisplayName:"Eastern European Summer Time(UTC + 3)",Offset:"3 hours"},{Abbreviation:"EET",Name:"Eastern European Time",DisplayName:"Eastern European Time(UTC + 2)",Offset:"2 hours"},{Abbreviation:"EGST",Name:"Eastern Greenland Summer Time",DisplayName:"Eastern Greenland Summer Time(UTC)",Offset:"0 hours"},{Abbreviation:"EGT",Name:"East Greenland Time",DisplayName:"East Greenland Time(UTC - 1)",Offset:"-1 hours"},{Abbreviation:"EST",Name:"Eastern Standard Time",DisplayName:"Eastern Standard Time(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"ET",Name:"Tiempo del Este",DisplayName:"Tiempo del Este(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"F",Name:"Foxtrot Time Zone",DisplayName:"Foxtrot Time Zone(UTC + 6)",Offset:"6 hours"},{Abbreviation:"FJST",Name:"Fiji Summer Time",DisplayName:"Fiji Summer Time(UTC + 13)",Offset:"13 hours"},{Abbreviation:"FJT",Name:"Fiji Time",DisplayName:"Fiji Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"FKST",Name:"Falkland Islands Summer Time",DisplayName:"Falkland Islands Summer Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"FKT",Name:"Falkland Island Time",DisplayName:"Falkland Island Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"FNT",Name:"Fernando de Noronha Time",DisplayName:"Fernando de Noronha Time(UTC - 2)",Offset:"-2 hours"},{Abbreviation:"G",Name:"Golf Time Zone",DisplayName:"Golf Time Zone(UTC + 7)",Offset:"7 hours"},{Abbreviation:"GALT",Name:"Galapagos Time",DisplayName:"Galapagos Time(UTC - 6)",Offset:"-6 hours"},{Abbreviation:"GAMT",Name:"Gambier Time",DisplayName:"Gambier Time(UTC - 9)",Offset:"-9 hours"},{Abbreviation:"GET",Name:"Georgia Standard Time",DisplayName:"Georgia Standard Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"GFT",Name:"French Guiana Time",DisplayName:"French Guiana Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"GILT",Name:"Gilbert Island Time",DisplayName:"Gilbert Island Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"GMT",Name:"Greenwich Mean Time",DisplayName:"Greenwich Mean Time(UTC)",Offset:"0 hours"},{Abbreviation:"GST",Name:"Gulf Standard Time",DisplayName:"Gulf Standard Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"GYT",Name:"Guyana Time",DisplayName:"Guyana Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"H",Name:"Hotel Time Zone",DisplayName:"Hotel Time Zone(UTC + 8)",Offset:"8 hours"},{Abbreviation:"HAA",Name:"Heure Avance de l'Atlantique",DisplayName:"Heure Avance de l'Atlantique(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"HAC",Name:"Heure Avance du Centre",DisplayName:"Heure Avance du Centre(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"HADT",Name:"Hawaii-Aleutian Daylight Time",DisplayName:"Hawaii-Aleutian Daylight Time(UTC - 9)",Offset:"-9 hours"},{Abbreviation:"HAE",Name:"Heure Avance de l'Est",DisplayName:"Heure Avance de l'Est(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"HAP",Name:"Heure Avance du Pacifique",DisplayName:"Heure Avance du Pacifique(UTC - 7)",Offset:"-7 hours"},{Abbreviation:"HAR",Name:"Heure Avance des Rocheuses",DisplayName:"Heure Avance des Rocheuses(UTC - 6)",Offset:"-6 hours"},{Abbreviation:"HAST",Name:"Hawaii-Aleutian Standard Time",DisplayName:"Hawaii-Aleutian Standard Time(UTC - 10)",Offset:"-10 hours"},{Abbreviation:"HAT",Name:"Heure Avance de Terre-Neuve",DisplayName:"Heure Avance de Terre-Neuve(UTC - 2:30)",Offset:"-2:30 hours"},{Abbreviation:"HAY",Name:"Heure Avance du Yukon",DisplayName:"Heure Avance du Yukon(UTC - 8)",Offset:"-8 hours"},{Abbreviation:"HKT",Name:"Hong Kong Time",DisplayName:"Hong Kong Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"HLV",Name:"Hora Legal de Venezuela",DisplayName:"Hora Legal de Venezuela(UTC - 4:30)",Offset:"-4:30 hours"},{Abbreviation:"HNA",Name:"Heure Normale de l'Atlantique",DisplayName:"Heure Normale de l'Atlantique(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"HNC",Name:"Heure Normale du Centre",DisplayName:"Heure Normale du Centre(UTC - 6)",Offset:"-6 hours"},{Abbreviation:"HNE",Name:"Heure Normale de l'Est",DisplayName:"Heure Normale de l'Est(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"HNP",Name:"Heure Normale du Pacifique",DisplayName:"Heure Normale du Pacifique(UTC - 8)",Offset:"-8 hours"},{Abbreviation:"HNR",Name:"Heure Normale des Rocheuses",DisplayName:"Heure Normale des Rocheuses(UTC - 7)",Offset:"-7 hours"},{Abbreviation:"HNT",Name:"Heure Normale de Terre-Neuve",DisplayName:"Heure Normale de Terre-Neuve(UTC - 3:30)",Offset:"-3:30 hours"},{Abbreviation:"HNY",Name:"Heure Normale du Yukon",DisplayName:"Heure Normale du Yukon(UTC - 9)",Offset:"-9 hours"},{Abbreviation:"HOVT",Name:"Hovd Time",DisplayName:"Hovd Time(UTC + 7)",Offset:"7 hours"},{Abbreviation:"I",Name:"India Time Zone",DisplayName:"India Time Zone(UTC + 9)",Offset:"9 hours"},{Abbreviation:"ICT",Name:"Indochina Time",DisplayName:"Indochina Time(UTC + 7)",Offset:"7 hours"},{Abbreviation:"IDT",Name:"Israel Daylight Time",DisplayName:"Israel Daylight Time(UTC + 3)",Offset:"3 hours"},{Abbreviation:"IOT",Name:"Indian Chagos Time",DisplayName:"Indian Chagos Time(UTC + 6)",Offset:"6 hours"},{Abbreviation:"IRDT",Name:"Iran Daylight Time",DisplayName:"Iran Daylight Time(UTC + 4:30)",Offset:"4:30 hours"},{Abbreviation:"IRKST",Name:"Irkutsk Summer Time",DisplayName:"Irkutsk Summer Time(UTC + 9)",Offset:"9 hours"},{Abbreviation:"IRKT",Name:"Irkutsk Time",DisplayName:"Irkutsk Time(UTC + 9)",Offset:"9 hours"},{Abbreviation:"IRST",Name:"Iran Standard Time",DisplayName:"Iran Standard Time(UTC + 3:30)",Offset:"3:30 hours"},{Abbreviation:"IST",Name:"Israel Standard Time",DisplayName:"Israel Standard Time(UTC + 2)",Offset:"2 hours"},{Abbreviation:"IST",Name:"India Standard Time",DisplayName:"India Standard Time(UTC + 5:30)",Offset:"5:30 hours"},{Abbreviation:"IST",Name:"Irish Standard Time",DisplayName:"Irish Standard Time(UTC + 1)",Offset:"1 hours"},{Abbreviation:"JST",Name:"Japan Standard Time",DisplayName:"Japan Standard Time(UTC + 9)",Offset:"9 hours"},{Abbreviation:"K",Name:"Kilo Time Zone",DisplayName:"Kilo Time Zone(UTC + 10)",Offset:"10 hours"},{Abbreviation:"KGT",Name:"Kyrgyzstan Time",DisplayName:"Kyrgyzstan Time(UTC + 6)",Offset:"6 hours"},{Abbreviation:"KRAST",Name:"Krasnoyarsk Summer Time",DisplayName:"Krasnoyarsk Summer Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"KRAT",Name:"Krasnoyarsk Time",DisplayName:"Krasnoyarsk Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"KST",Name:"Korea Standard Time",DisplayName:"Korea Standard Time(UTC + 9)",Offset:"9 hours"},{Abbreviation:"KUYT",Name:"Kuybyshev Time",DisplayName:"Kuybyshev Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"L",Name:"Lima Time Zone",DisplayName:"Lima Time Zone(UTC + 11)",Offset:"11 hours"},{Abbreviation:"LHDT",Name:"Lord Howe Daylight Time",DisplayName:"Lord Howe Daylight Time(UTC + 11)",Offset:"11 hours"},{Abbreviation:"LHST",Name:"Lord Howe Standard Time",DisplayName:"Lord Howe Standard Time(UTC + 10:30)",Offset:"10:30 hours"},{Abbreviation:"LINT",Name:"Line Islands Time",DisplayName:"Line Islands Time(UTC + 14)",Offset:"14 hours"},{Abbreviation:"M",Name:"Mike Time Zone",DisplayName:"Mike Time Zone(UTC + 12)",Offset:"12 hours"},{Abbreviation:"MAGST",Name:"Magadan Summer Time",DisplayName:"Magadan Summer Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"MAGT",Name:"Magadan Time",DisplayName:"Magadan Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"MART",Name:"Marquesas Time",DisplayName:"Marquesas Time(UTC - 9:30)",Offset:"-9:30 hours"},{Abbreviation:"MAWT",Name:"Mawson Time",DisplayName:"Mawson Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"MDT",Name:"Mountain Daylight Time",DisplayName:"Mountain Daylight Time(UTC - 6)",Offset:"-6 hours"},{Abbreviation:"MESZ",Name:"Mitteleuropische Sommerzeit",DisplayName:"Mitteleuropische Sommerzeit(UTC + 2)",Offset:"2 hours"},{Abbreviation:"MEZ",Name:"Mitteleuropische Zeit",DisplayName:"Mitteleuropische Zeit(UTC + 1)",Offset:"1 hours"},{Abbreviation:"MHT",Name:"Marshall Islands Time",DisplayName:"Marshall Islands Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"MMT",Name:"Myanmar Time",DisplayName:"Myanmar Time(UTC + 6:30)",Offset:"6:30 hours"},{Abbreviation:"MSD",Name:"Moscow Daylight Time",DisplayName:"Moscow Daylight Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"MSK",Name:"Moscow Standard Time",DisplayName:"Moscow Standard Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"MST",Name:"Mountain Standard Time",DisplayName:"Mountain Standard Time(UTC - 7)",Offset:"-7 hours"},{Abbreviation:"MUT",Name:"Mauritius Time",DisplayName:"Mauritius Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"MVT",Name:"Maldives Time",DisplayName:"Maldives Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"MYT",Name:"Malaysia Time",DisplayName:"Malaysia Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"N",Name:"November Time Zone",DisplayName:"November Time Zone(UTC - 1)",Offset:"-1 hours"},{Abbreviation:"NCT",Name:"New Caledonia Time",DisplayName:"New Caledonia Time(UTC + 11)",Offset:"11 hours"},{Abbreviation:"NDT",Name:"Newfoundland Daylight Time",DisplayName:"Newfoundland Daylight Time(UTC - 2:30)",Offset:"-2:30 hours"},{Abbreviation:"NFT",Name:"Norfolk Time",DisplayName:"Norfolk Time(UTC + 11:30)",Offset:"11:30 hours"},{Abbreviation:"NOVST",Name:"Novosibirsk Summer Time",DisplayName:"Novosibirsk Summer Time(UTC + 7)",Offset:"7 hours"},{Abbreviation:"NOVT",Name:"Novosibirsk Time",DisplayName:"Novosibirsk Time(UTC + 6)",Offset:"6 hours"},{Abbreviation:"NPT",Name:"Nepal Time",DisplayName:"Nepal Time(UTC + 5:45)",Offset:"5:45 hours"},{Abbreviation:"NST",Name:"Newfoundland Standard Time",DisplayName:"Newfoundland Standard Time(UTC - 3:30)",Offset:"-3:30 hours"},{Abbreviation:"NUT",Name:"Niue Time",DisplayName:"Niue Time(UTC - 11)",Offset:"-11 hours"},{Abbreviation:"NZDT",Name:"New Zealand Daylight Time",DisplayName:"New Zealand Daylight Time(UTC + 13)",Offset:"13 hours"},{Abbreviation:"NZST",Name:"New Zealand Standard Time",DisplayName:"New Zealand Standard Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"O",Name:"Oscar Time Zone",DisplayName:"Oscar Time Zone(UTC - 2)",Offset:"-2 hours"},{Abbreviation:"OMSST",Name:"Omsk Summer Time",DisplayName:"Omsk Summer Time(UTC + 7)",Offset:"7 hours"},{Abbreviation:"OMST",Name:"Omsk Standard Time",DisplayName:"Omsk Standard Time(UTC + 7)",Offset:"7 hours"},{Abbreviation:"P",Name:"Papa Time Zone",DisplayName:"Papa Time Zone(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"PDT",Name:"Pacific Daylight Time",DisplayName:"Pacific Daylight Time(UTC - 7)",Offset:"-7 hours"},{Abbreviation:"PET",Name:"Peru Time",DisplayName:"Peru Time(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"PETST",Name:"Kamchatka Summer Time",DisplayName:"Kamchatka Summer Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"PETT",Name:"Kamchatka Time",DisplayName:"Kamchatka Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"PGT",Name:"Papua New Guinea Time",DisplayName:"Papua New Guinea Time(UTC + 10)",Offset:"10 hours"},{Abbreviation:"PHOT",Name:"Phoenix Island Time",DisplayName:"Phoenix Island Time(UTC + 13)",Offset:"13 hours"},{Abbreviation:"PHT",Name:"Philippine Time",DisplayName:"Philippine Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"PKT",Name:"Pakistan Standard Time",DisplayName:"Pakistan Standard Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"PMDT",Name:"Pierre & Miquelon Daylight Time",DisplayName:"Pierre & Miquelon Daylight Time(UTC - 2)",Offset:"-2 hours"},{Abbreviation:"PMST",Name:"Pierre & Miquelon Standard Time",DisplayName:"Pierre & Miquelon Standard Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"PONT",Name:"Pohnpei Standard Time",DisplayName:"Pohnpei Standard Time(UTC + 11)",Offset:"11 hours"},{Abbreviation:"PST",Name:"Pacific Standard Time",DisplayName:"Pacific Standard Time(UTC - 8)",Offset:"-8 hours"},{Abbreviation:"PST",Name:"Pitcairn Standard Time",DisplayName:"Pitcairn Standard Time(UTC - 8)",Offset:"-8 hours"},{Abbreviation:"PT",Name:"Tiempo del Pacfico",DisplayName:"Tiempo del Pacfico(UTC - 8)",Offset:"-8 hours"},{Abbreviation:"PWT",Name:"Palau Time",DisplayName:"Palau Time(UTC + 9)",Offset:"9 hours"},{Abbreviation:"PYST",Name:"Paraguay Summer Time",DisplayName:"Paraguay Summer Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"PYT",Name:"Paraguay Time",DisplayName:"Paraguay Time(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"Q",Name:"Quebec Time Zone",DisplayName:"Quebec Time Zone(UTC - 4)",Offset:"-4 hours"},{Abbreviation:"R",Name:"Romeo Time Zone",DisplayName:"Romeo Time Zone(UTC - 5)",Offset:"-5 hours"},{Abbreviation:"RET",Name:"Reunion Time",DisplayName:"Reunion Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"S",Name:"Sierra Time Zone",DisplayName:"Sierra Time Zone(UTC - 6)",Offset:"-6 hours"},{Abbreviation:"SAMT",Name:"Samara Time",DisplayName:"Samara Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"SAST",Name:"South Africa Standard Time",DisplayName:"South Africa Standard Time(UTC + 2)",Offset:"2 hours"},{Abbreviation:"SBT",Name:"Solomon IslandsTime",DisplayName:"Solomon IslandsTime(UTC + 11)",Offset:"11 hours"},{Abbreviation:"SCT",Name:"Seychelles Time",DisplayName:"Seychelles Time(UTC + 4)",Offset:"4 hours"},{Abbreviation:"SGT",Name:"Singapore Time",DisplayName:"Singapore Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"SRT",Name:"Suriname Time",DisplayName:"Suriname Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"SST",Name:"Samoa Standard Time",DisplayName:"Samoa Standard Time(UTC - 11)",Offset:"-11 hours"},{Abbreviation:"T",Name:"Tango Time Zone",DisplayName:"Tango Time Zone(UTC - 7)",Offset:"-7 hours"},{Abbreviation:"TAHT",Name:"Tahiti Time",DisplayName:"Tahiti Time(UTC - 10)",Offset:"-10 hours"},{Abbreviation:"TFT",Name:"French Southern and Antarctic Time",DisplayName:"French Southern and Antarctic Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"TJT",Name:"Tajikistan Time",DisplayName:"Tajikistan Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"TKT",Name:"Tokelau Time",DisplayName:"Tokelau Time(UTC + 13)",Offset:"13 hours"},{Abbreviation:"TLT",Name:"East Timor Time",DisplayName:"East Timor Time(UTC + 9)",Offset:"9 hours"},{Abbreviation:"TMT",Name:"Turkmenistan Time",DisplayName:"Turkmenistan Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"TVT",Name:"Tuvalu Time",DisplayName:"Tuvalu Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"U",Name:"Uniform Time Zone",DisplayName:"Uniform Time Zone(UTC - 8)",Offset:"-8 hours"},{Abbreviation:"ULAT",Name:"Ulaanbaatar Time",DisplayName:"Ulaanbaatar Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"UTC",Name:"Coordinated Universal Time",DisplayName:"Coordinated Universal Time(UTC)",Offset:"0 hours"},{Abbreviation:"UYST",Name:"Uruguay Summer Time",DisplayName:"Uruguay Summer Time(UTC - 2)",Offset:"-2 hours"},{Abbreviation:"UYT",Name:"Uruguay Time",DisplayName:"Uruguay Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"UZT",Name:"Uzbekistan Time",DisplayName:"Uzbekistan Time(UTC + 5)",Offset:"5 hours"},{Abbreviation:"V",Name:"Victor Time Zone",DisplayName:"Victor Time Zone(UTC - 9)",Offset:"-9 hours"},{Abbreviation:"VET",Name:"Venezuelan Standard Time",DisplayName:"Venezuelan Standard Time(UTC - 4:30)",Offset:"-4:30 hours"},{Abbreviation:"VLAST",Name:"Vladivostok Summer Time",DisplayName:"Vladivostok Summer Time(UTC + 11)",Offset:"11 hours"},{Abbreviation:"VLAT",Name:"Vladivostok Time",DisplayName:"Vladivostok Time(UTC + 11)",Offset:"11 hours"},{Abbreviation:"VUT",Name:"Vanuatu Time",DisplayName:"Vanuatu Time(UTC + 11)",Offset:"11 hours"},{Abbreviation:"W",Name:"Whiskey Time Zone",DisplayName:"Whiskey Time Zone(UTC - 10)",Offset:"-10 hours"},{Abbreviation:"WAST",Name:"West Africa Summer Time",DisplayName:"West Africa Summer Time(UTC + 2)",Offset:"2 hours"},{Abbreviation:"WAT",Name:"West Africa Time",DisplayName:"West Africa Time(UTC + 1)",Offset:"1 hours"},{Abbreviation:"WEST",Name:"Western European Summer Time",DisplayName:"Western European Summer Time(UTC + 1)",Offset:"1 hours"},{Abbreviation:"WESZ",Name:"Westeuropische Sommerzeit",DisplayName:"Westeuropische Sommerzeit(UTC + 1)",Offset:"1 hours"},{Abbreviation:"WET",Name:"Western European Time",DisplayName:"Western European Time(UTC)",Offset:"0 hours"},{Abbreviation:"WEZ",Name:"Westeuropische Zeit",DisplayName:"Westeuropische Zeit(UTC)",Offset:"0 hours"},{Abbreviation:"WFT",Name:"Wallis and Futuna Time",DisplayName:"Wallis and Futuna Time(UTC + 12)",Offset:"12 hours"},{Abbreviation:"WGST",Name:"Western Greenland Summer Time",DisplayName:"Western Greenland Summer Time(UTC - 2)",Offset:"-2 hours"},{Abbreviation:"WGT",Name:"West Greenland Time",DisplayName:"West Greenland Time(UTC - 3)",Offset:"-3 hours"},{Abbreviation:"WIB",Name:"Western Indonesian Time",DisplayName:"Western Indonesian Time(UTC + 7)",Offset:"7 hours"},{Abbreviation:"WIT",Name:"Eastern Indonesian Time",DisplayName:"Eastern Indonesian Time(UTC + 9)",Offset:"9 hours"},{Abbreviation:"WITA",Name:"Central Indonesian Time",DisplayName:"Central Indonesian Time(UTC + 8)",Offset:"8 hours"},{Abbreviation:"WST",Name:"Western Sahara Summer Time",DisplayName:"Western Sahara Summer Time(UTC + 1)",Offset:"1 hours"},{Abbreviation:"WST",Name:"West Samoa Time",DisplayName:"West Samoa Time(UTC + 13)",Offset:"13 hours"},{Abbreviation:"WT",Name:"Western Sahara Standard Time",DisplayName:"Western Sahara Standard Time(UTC)",Offset:"0 hours"},{Abbreviation:"X",Name:"X-ray Time Zone",DisplayName:"X-ray Time Zone(UTC - 11)",Offset:"-11 hours"},{Abbreviation:"Y",Name:"Yankee Time Zone",DisplayName:"Yankee Time Zone(UTC - 12)",Offset:"-12 hours"},{Abbreviation:"YAKST",Name:"Yakutsk Summer Time",DisplayName:"Yakutsk Summer Time(UTC + 10)",Offset:"10 hours"},{Abbreviation:"YAKT",Name:"Yakutsk Time",DisplayName:"Yakutsk Time(UTC + 10)",Offset:"10 hours"},{Abbreviation:"YAPT",Name:"Yap Time",DisplayName:"Yap Time(UTC + 10)",Offset:"10 hours"},{Abbreviation:"YEKST",Name:"Yekaterinburg Summer Time",DisplayName:"Yekaterinburg Summer Time(UTC + 6)",Offset:"6 hours"},{Abbreviation:"YEKT",Name:" Yekaterinburg Time",DisplayName:" Yekaterinburg Time(UTC + 6)",Offset:"6 hours"},{Abbreviation:"Z",Name:"Zulu Time Zone",DisplayName:"Zulu Time Zone(UTC)",Offset:"0 hours"}]}function resolveMultilang(e){var t;if(e===null||typeof e!=="object"){return e}t=window.user&&window.user.language||(window.navigator.userLanguage||window.navigator.language).replace(/^([^-]+).*$/,"$1");return e[t]||e["default"]}function getTranslationLanguagesWithCodes(){return[{language:"Afrikaans",code:"af"},{language:"Albanian",code:"sq"},{language:"Amharic",code:"am"},{language:"Arabic",code:"ar"},{language:"Armenian",code:"hy"},{language:"Azerbaijani",code:"az"},{language:"Basque",code:"eu"},{language:"Belarusian",code:"be"},{language:"Bengali",code:"bn"},{language:"Bosnian",code:"bs"},{language:"Bulgarian",code:"bg"},{language:"Catalan",code:"ca"},{language:"Cebuano",code:"ceb"},{language:"Chinese (Simplified)",code:"zh-CN"},{language:"Chinese (Traditional)",code:"zh-TW"},{language:"Corsican",code:"co"},{language:"Croatian",code:"hr"},{language:"Czech",code:"cs"},{language:"Danish",code:"da"},{language:"Dutch",code:"nl"},{language:"English",code:"en"},{language:"Esperanto",code:"eo"},{language:"Estonian",code:"et"},{language:"Finnish",code:"fi"},{language:"French",code:"fr"},{language:"Frisian",code:"fy"},{language:"Galician",code:"gl"},{language:"Georgian",code:"ka"},{language:"German",code:"de"},{language:"Greek",code:"el"},{language:"Gujarati",code:"gu"},{language:"Haitian Creole",code:"ht"},{language:"Hausa",code:"ha"},{language:"Hawaiian",code:"haw"},{language:"Hebrew",code:"iw"},{language:"Hindi",code:"hi"},{language:"Hmong",code:"hmn"},{language:"Hungarian",code:"hu"},{language:"Icelandic",code:"is"},{language:"Igbo",code:"ig"},{language:"Indonesian",code:"id"},{language:"Irish",code:"ga"},{language:"Italian",code:"it"},{language:"Japanese",code:"ja"},{language:"Javanese",code:"jw"},{language:"Kannada",code:"kn"},{language:"Kazakh",code:"kk"},{language:"Khmer",code:"km"},{language:"Korean",code:"ko"},{language:"Kurdish",code:"ku"},{language:"Kyrgyz",code:"ky"},{language:"Lao",code:"lo"},{language:"Latin",code:"la"},{language:"Latvian",code:"lv"},{language:"Lithuanian",code:"lt"},{language:"Luxembourgish",code:"lb"},{language:"Macedonian",code:"mk"},{language:"Malagasy",code:"mg"},{language:"Malay",code:"ms"},{language:"Malayalam",code:"ml"},{language:"Maltese",code:"mt"},{language:"Maori",code:"mi"},{language:"Marathi",code:"mr"},{language:"Mongolian",code:"mn"},{language:"Myanmar (Burmese)",code:"my"},{language:"Nepali",code:"ne"},{language:"Norwegian",code:"no"},{language:"Nyanja (Chichewa)",code:"ny"},{language:"Pashto",code:"ps"},{language:"Persian",code:"fa"},{language:"Polish",code:"pl"},{language:"Portuguese (Portugal, Brazil)",code:"pt"},{language:"Punjabi",code:"pa"},{language:"Romanian",code:"ro"},{language:"Russian",code:"ru"},{language:"Samoan",code:"sm"},{language:"Scots Gaelic",code:"gd"},{language:"Serbian",code:"sr"},{language:"Sesotho",code:"st"},{language:"Shona",code:"sn"},{language:"Sindhi",code:"sd"},{language:"Sinhala (Sinhalese)",code:"si"},{language:"Slovak",code:"sk"},{language:"Slovenian",code:"sl"},{language:"Somali",code:"so"},{language:"Spanish",code:"es"},{language:"Sundanese",code:"su"},{language:"Swahili",code:"sw"},{language:"Swedish",code:"sv"},{language:"Tagalog (Filipino)",code:"tl"},{language:"Tajik",code:"tg"},{language:"Tamil",code:"ta"},{language:"Telugu",code:"te"},{language:"Thai",code:"th"},{language:"Turkish",code:"tr"},{language:"Ukrainian",code:"uk"},{language:"Urdu",code:"ur"},{language:"Uzbek",code:"uz"},{language:"Vietnamese",code:"vi"},{language:"Welsh",code:"cy"},{language:"Xhosa",code:"xh"},{language:"Yiddish",code:"yi"},{language:"Yoruba",code:"yo"},{language:"Zulu",code:"zu"}]}var omniWMS=new giscloud.blja.Class({Extends:omModule,options:{url:fno.liveSite+"modules_gc/layer/cwms.php",module:"wms"},initialize:function(e){this.setOptions(this.options,e);var t=this},getWMSBound:function(e,t,i){var n=this.getGlobalBound(e,t?t.boundingbox:null,i),a=new $.Deferred,s,r;if(n)return a.resolve(n);if(e=="EPSG:4326"&&t.latlongbound)return a.resolve(t.latlongbound);s=fno.liveSite+"modules_gc/layer/cwms.php";r={task:"getboundprojected",module:"wms",latlongbound:t.latlongbound,bound:t.boundingbox,srs:e};om.showLoader("Trying to get WMS layer bounding...");$.post(s,r,null,"json").always(function(){om.hideLoader()}).done(function(e){if(!e||e.result==="no"){alert(gclang.Can_t_get_WMS_layer_bounding);a.reject()}else{a.resolve(e)}});return a},getGlobalBound:function(e,t,i){if(t){for(var n=0;n<t.length;n++){var a=t[n];if(a.srs==e)return a}}else{if(!i||!i.boundingbox)return null;for(var n=0;n<i.boundingbox.length;n++){var a=i.boundingbox[n];if(a.srs==e||a.crs==e)return a}}return null}});window.giscloud.wms=new omniWMS;(function(n,e){"use strict";var a=false;gcapp.bookmarks={byMapId:function(e){giscloud.bookmarks.byMapId(e).done(function(e){if(a){try{n("#bookmarks_dropdown").gcautocomplete("closeContainer")}catch(e){}}if(fno.newHeader){n("#bookmarks_dropdown").remove();var t=n("<div>",{id:"bookmarks_dropdown",role:"main","aria-label":"Bookmarks Search Dropdown"}).append(n("<input/>",{"aria-label":"Bookmarks Search"}),n("<div/>",{class:"gc-container"}));t.appendTo("body")}var i=[];n.each(e.data,function(e,t){i.push({label:t.name,state:t.state,id:t.id})});if(user.id!==-1){n("#bookmarks_dropdown").gcautocomplete({source:i,editable:editable,select:function(e,t){if(t.item.action=="new"){gcapp.bookmarks.create(t.item)}else{var i=t.item.state;if(i.position){giscloud.ui.map.center(new giscloud.LonLat(i.position.lon,i.position.lat),i.zoom,i.bearing,i.pitch)}else{giscloud.ui.map.instance.setViewUsingInternalCoords([i.lng,i.lat],i.zoom)}}},remove:function(e,t){gcapp.bookmarks.remove(t.item)},toggleBtn:"#ribb_bookmarks"})}a=true})},create:function(e){var t={position:giscloud.ui.map.center(),zoom:giscloud.ui.map.scale(),bearing:giscloud.ui.map.bearing(),pitch:giscloud.ui.map.pitch()};giscloud.bookmarks.create({name:e.value,map_id:currentMapID,state:JSON.stringify(t)}).done(function(e){gcapp.bookmarks.byMapId(currentMapID)})},remove:function(t){if(confirm("Do you really want to delete '"+t.label+"' bookmark?"))giscloud.bookmarks.remove(t.id).done(function(e){om.showConfirm("Bookmark '"+t.label+"' has been deleted.");gcapp.bookmarks.byMapId(currentMapID)})}}})(giscloud.exposeJQuery());(function(e,t,i){e(i).bind("keydown","backspace",function(e){e.preventDefault()});if(t.user&&t.user.options&&t.user.options.HOTKEYS==0)return;e(i).bind("keydown","l",function(){showLoginForm()});e(i).bind("keydown","o",function(){logOut()});e(i).bind("keydown","p",function(){gcapp.gctoolbar.setTool("DragTool")});e(i).bind("keydown","i",function(){gcapp.gctoolbar.setTool("InfoTool")});e(i).bind("keydown","z",function(){gcapp.gctoolbar.setTool("SelectAreaTool")});e(i).bind("keydown","ctrl+d",function(){gcapp.gctoolbar.setTool("viewall")});e(i).bind("keydown","c",function(){if(!fno.app_instance_id)gcproject.newMap()});e(i).bind("keydown","a",function(){if(gcapp.gclayer&&!fno.app_instance_id)gcapp.gclayer.newLayer()});return;jQuery(i).keypress(function(e){if(!gcapp.isReady())return;var t=String.fromCharCode(e.which);if(jQuery(e.currentTarget.activeElement).get(0).tagName!=jQuery("body").get(0).tagName||(e.ctrlKey||e.metaKey)&&jQuery.inArray(t,["x","c","v"])!=-1)return;switch(t){case"l":gcapp.signupcombo.open();break;case"o":logSubmit();break;case"s":if(!fno.app_instance_id)gcproject.sharingAndPublishMap();break;case"i":gcapp.gctoolbar.setTool("InfoTool");break;case"p":gcapp.gctoolbar.setTool("DragTool");break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(gcapp.homepage&&!fno.app_instance_id)gcapp.homepage.openMapByIndex(t-1);break;case"h":if(gcapp.homepage&&!fno.app_instance_id)gcapp.loadHomeWorkspace();break;case"w":if(gcapp.homepage&&!fno.app_instance_id)gcapp.gotoMapView();break;case"g":if(e.ctrlKey&&currentMapID)fnm.clearMapCache(currentMapID,null,true);break;case"f":break;case"c":if(!fno.app_instance_id)gcproject.newMap();break;case"a":if(gcapp.gclayer&&!fno.app_instance_id)gcapp.gclayer.newLayer();break}})})(jQuery,window,window.document);(function(l){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};gcApp.utils={initLightbox:function(){var e=l("a[data-lightbox-gallery]");if(user.options.OPEN_LINKS_IN_NEW_WINDOW==1){e.off("click").click(function(e){e.preventDefault();e.stopPropagation();window.open(l(this).attr("href"))})}else if(e.length>0){e.filter(function(e,t){return l(t).data("lightboxGallery")===undefined});e.map(function(e,t){if(!l(t).attr("data-lightbox-type")){l(t).attr("data-lightbox-type","iframe")}});e.nivoLightbox({beforeHideLightbox:function(){l(".nivo-lightbox-content").empty()}}).click(function(e){e.preventDefault();e.stopPropagation()})}},checkIfOptionExist:function e(t,i,n){var a=false;if(i!==undefined&&typeof i==="string"&&l.inArray(i.toUpperCase(),["MAP","USER","APPINSTANCE"])===-1){throw"instance value '"+i+"' is not valid. For check expected MAP/USER/APPINSTANCE or undefined to check both."}if(n===true&&!i){throw"if returnValue is true instance value is required."}if(i===undefined||i===null){if(window.user&&window.user.options&&window.user.options[t]||window.giscloud.ui.map&&window.giscloud.ui.map.options&&window.giscloud.ui.map.options[t]||window.giscloud.app&&window.giscloud.app.option(t)){a=true}}else{if(i.toUpperCase()==="MAP"){if(window.giscloud.ui.map&&window.giscloud.ui.map.options&&window.giscloud.ui.map.options[t]){a=n?window.giscloud.ui.map.options[t]:true}}if(i.toUpperCase()==="USER"){if(window.user&&window.user.options&&window.user.options[t]){a=n?window.user.options[t]:true}}if(i.toUpperCase()==="APPINSTANCE"){if(window.giscloud.app&&window.giscloud.app.option(t)){a=n?window.giscloud.app.option(t):true}}}return a},getLayerOption:function(e,i){var n;if(e){l.each(e,function(e,t){if(t.option_name==i){n=t}});if(n)return n}return null},getSessionID:function(){var e=document.cookie&&document.cookie.match&&document.cookie.match(/\bPHPSESSID=(\w+)\b/i),t=e&&e[1];return t},format_display_data:function(e,t){var i="";var n='<span class="comment">-</span>';switch(t){case"timestamp":i=gcApp.utils.niceDate(new Date(e*1e3),true,true);break;case"period":i=gcApp.utils.nicePeriod(new Date(e*1e3));break;case"bool":if(e==1||e=="t"){i='<span style="color:green;">'+gclang["Yes"]+"</span>"}else if(e==0||e=="f"){i=gclang["No"]}else{i=n}break;case"speed":if(gcApp.utils.isNumber(e)&&e>0)i=e+" [Km/h]";else i=n;break;default:if(e)i=e;else i=n}return i},nicePeriod:function(e){e=e/1e3;h="";m="";s="";day="";retval="";if(e>60){if(e<3600)m=parseInt(e/60)+" min";else if(e<86400){h=parseInt(e/3600)+" h ";m=parseInt(v%3600/60)+" min"}else{d=parseInt(e/86400);v0=e;day=d+" dan";if(d>1)day+="a";if(d==0){day="";e+=" ";h=parseInt(v0%86400/3600);if(h>0)h=h+" h"}}}else if(e>1){s=e+" s"}retval=day+h+m+s;return retval},niceDate:function(e,t,i){var n=["Jan","Feb","Mar","Apr","MayShort","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var a=gclang[n[e.getMonth()]];var s=a;if(i){s+=" "+e.getDate()}s+=", "+e.getFullYear();if(t){var r=e.getMinutes();if(r<10){r="0"+r}s+=" "+e.getHours()+":"+r}return s},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},truncateString:function(e,t,i){var n=e.length>t,a=n?e.substr(0,t-1):e;a=i&&n?a.substr(0,a.lastIndexOf(" ")):a;return n?a+"&hellip;":a},getPlanStoreCode:function(e){var i,n;n=typeof e=="string"?e:e&&e.code?e.code:null;if(!n){return null}l.each(window.jsplans,function(e,t){if(l.inArray(n,t)>=0){i=e;return-1}});return i},formatPrice:function(e,t,i,n,a,s){t=!(t>0)?1:t;n=!(n>0)?1:n;i=n>1?n+" "+i+"s":i;var r=t*e;if(a){if(is_numeric(a.amount_off)&&a.amount_off>0){r-=Format.round(a.amount_off,2)}if(is_numeric(a.percent_off)&&a.percent_off>0){r=Format.round(r*a.percent_off/100,2)}}var o=this.getPlanStoreCode(s);var l=o=="portal"?"per ":"user/";r=r/100;r+=r==parseInt(r)?".00":"";return"$"+r+" "+(i?l+i:"")},subscribeUser:function(e,t,r){return om.rest("users/"+e+"/subscriptions.json",t,null,{method:"POST"}).success(function(e,t,i){var n=i.getAllResponseHeaders("Location"),a=n&&n.match(/subscriptions\/(\d+)/),s=a[1];if(r)r(s)}).fail(function(){if(r)r()})},createProgressBar:function(e,t,i){i=i||{};var n,a,s,r=i.max||100,o=i.units!==undefined?i.units:"%";if(t>r){t=r;l("#"+e+":first-child").addClass("progress-bar-danger")}if(i.max==0){l("#"+e+":first-child").html("<span>"+t+o+(i.showmax?" / 0":"")+"</span>");l("#"+e).css("width","100%")}else{l("#"+e+":first-child").html("<span>"+t+o+(i.showmax?" / "+r:"")+"</span>");l("#"+e).css("width",100*t/r+"%")}},getIntVal:function(e,t){var i=parseInt(e,10);if(isNaN(i))i=e;if(typeof t==="undefined"){t=0}return i===0?0:i||t},escapeHtml:function e(t,i,n){var a="",s=o,r;if(!l.isArray(i)){i=i?[i]:[]}l.map(s,function(e,t){if(i.indexOf(t)===-1){a=a+t}else{delete s[t]}});a=new RegExp("["+a+"]","g");r=String(t).replace(a,function(e){return s[e]});return n?encodeURIComponent(r):r},unescapeHtml:function e(t,i,n){var a="",s=o;if(!l.isArray(i)){i=i?[i]:[]}l.map(s,function(e,t){if(i.indexOf(t)===-1){a=a+(a!==""?"|":"")+e}else{delete s[t]}});if(n){t=decodeURIComponent(t)}a=new RegExp(a,"g");return String(t).replace(a,function(i){var n;l.map(s,function(e,t){if(i===e){n=t}});return n})},currentMapProjectOption:function e(){var t=fn&&fn.currentMap,i=giscloud.app.user.options(),n=i&&i["MDC_PROJECT_OPTION"]||"mdc_project",a=t&&t.options&&t.options[n];if(!a)return false;if(typeof a==="string"){try{a=JSON.parse(a)}catch(e){return false}}return a},isMdcpLayerOfCurrentMap:function e(t){var i=this.currentMapProjectOption();if(!i)return false;if(!i.layerId)return false;return i.layerId.toString()===t.toString()}}})(jQuery);(function(o){o.fn.serializeObject=function(){var a=this,s={},t={},r={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};this.build=function(e,t,i){e[t]=i;return e};this.push_counter=function(e){if(t[e]===undefined){t[e]=0}return t[e]++};o.each(o(this).serializeArray(),function(){if(!r.validate.test(this.name)){return}var e,t=this.name.match(r.key),i=this.value,n=this.name;while((e=t.pop())!==undefined){n=n.replace(new RegExp("\\["+e+"\\]$"),"");if(e.match(r.push)){i=a.build([],a.push_counter(n),i)}else if(e.match(r.fixed)){i=a.build([],e,i)}else if(e.match(r.named)){i=a.build({},e,i)}}s=o.extend(true,s,i)});return s};o.fn.copyByIconClick=function e(t){var i=t.target,n=t.message||"Copied!",a=o(this);if(!i)return;var s=document.getElementById(i);if(!s)return;if(!a.data("bs.tooltip")){a.tooltip({placement:"auto top",trigger:"manual",title:n})}s.select();s.setSelectionRange(0,99999);document.execCommand("copy");a.tooltip("show");setTimeout(function(){a.tooltip("hide")}.bind(this),1e3)}})(jQuery);if(window.XBBCODE){XBBCODE.addTags({googleit:{openTag:function(e,t){var i='"http://www.google.com/#q= '+t+'"';return"<a href="+i+">"},closeTag:function(e,t){return"</a>"}},dollar:{displayContent:false,openTag:function(e,t){if(t&&is_numeric(t))return"$"+(t*1).format({decimals:2});else return t},closeTag:function(e,t){return""}}})}$(window).resize(function(){var e;if(e){clearTimeout(e)}e=setTimeout(t,500);function t(){$(window).trigger("afterResize",this)}});$.fn.textWidth=function(){var e=jQuery(this);if(e.length===0){return this}var t=e.html();if(e[0].nodeName=="INPUT"){t=e.val()}var i="<span>"+t+"</span>";jQuery("body").append(i);var n=jQuery("span").last();n.css({"font-size":e.css("font-size"),"font-family":e.css("font-family")});var a=n.width()+5;n.remove();return a};$(window).on("loaded.bs.select refreshed.bs.select",function(e){var t=$(e.target),i=t.data("selectpicker")?t.data("selectpicker"):null,n;if(i===null||i.options.noTooltip){return}$.map(i.$menu.find("span.text"),function(e){$(e).closest("li").attr("title",$(e).text())})});(function(r,e){var n=0;r.widget("ui.gcautocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:true,delay:0,minLength:0,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var i,n,a;var t=this;this.container=this.element.addClass("gc-autocomplete");this.element=this.element.children("input");if(!editable)this.element.css("visibility","hidden");this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-gcautocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly")){i=true;a=true;n=true;return}i=false;a=false;n=false;var t=r.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:i=true;this._move("previousPage",e);break;case t.PAGE_DOWN:i=true;this._move("nextPage",e);break;case t.UP:i=true;this._keyEvent("previous",e);break;case t.DOWN:i=true;this._keyEvent("next",e);break;case t.ENTER:case t.NUMPAD_ENTER:if(this.menu.active){i=true;e.preventDefault();this.menu.select(e)}break;case t.TAB:if(this.menu.active){this.menu.select(e)}break;case t.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(e);e.preventDefault()}break;default:n=true;this._searchTimeout(e);break}},keypress:function(e){if(i){i=false;e.preventDefault();return}if(n){return}var t=r.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:this._move("previousPage",e);break;case t.PAGE_DOWN:this._move("nextPage",e);break;case t.UP:this._keyEvent("previous",e);break;case t.DOWN:this._keyEvent("next",e);break}},input:function(e){if(a){a=false;e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(e);this._change(e)}});this._initSource();this.menu=r("<ul>").addClass("ui-autocomplete").appendTo(this.container.children(".gc-container")[0]).menu({input:r(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(e){e.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];if(!r(e.target).closest(".ui-menu-item").length){this._delay(function(){var t=this;this.document.one("mousedown",function(e){if(e.target!==t.element[0]&&e.target!==i&&!r.contains(i,e.target)){t.close()}})})}},menufocus:function(e,t){return;if(this.isNewMenu){this.isNewMenu=false;if(e.originalEvent&&/^mouse/.test(e.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){r(e.target).trigger(e.originalEvent)});return}}var i=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete");if(false!==this._trigger("focus",e,{item:i})){if(e.originalEvent&&/^key/.test(e.originalEvent.type)){this._value(i.value)}}else{this.liveRegion.text(i.value)}},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),n=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=n;this._delay(function(){this.previous=n;this.selectedItem=i})}if(false!==this._trigger("select",e,{item:i})){this._value(i.value)}this.term=this._value();this.close(e);this.selectedItem=i}});t.__open=false;r(document).mouseup(function(e){if(t.__open&&!t.container.is(e.target)&&r(t.options.toggleBtn).has(e.target).length===0&&t.container.has(e.target).length===0){t.closeContainer()}});r(this.options.toggleBtn).click(function(){if(t.__open)t.closeContainer();else{t.openContainer()}});this.liveRegion=r("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);if(r.fn.bgiframe){this.menu.element.bgiframe()}this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-gcautocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t);if(e==="source"){this._initSource()}if(e==="appendTo"){this.menu.element.appendTo(this.document.find(t||"body")[0])}if(e==="disabled"&&t&&this.xhr){this.xhr.abort()}},_isMultiLine:function(){if(this.element.is("textarea")){return true}if(this.element.is("input")){return false}return this.element.prop("isContentEditable")},_initSource:function(){var i,n,a=this;if(r.isArray(this.options.source)){i=this.options.source;this.source=function(e,t){t(r.ui.gcautocomplete.filter(i,e.term))}}else if(typeof this.options.source==="string"){n=this.options.source;this.source=function(e,t){if(a.xhr){a.xhr.abort()}a.xhr=r.ajax({url:n,data:e,dataType:"json",success:function(e){t(e)},error:function(){t([])}})}}else{this.source=this.options.source}},_searchTimeout:function(e){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,e)}},this.options.delay)},search:function(e,t){e=e!=null?e:this._value();this.term=this._value();if(e.length<this.options.minLength){return this.close(t)}if(this._trigger("search",t)===false){return}return this._search(e)},_search:function(e){this.pending++;this.element.addClass("ui-gcautocomplete-loading");this.cancelSearch=false;this.source({term:e},this._response())},_response:function(){var t=this,i=++n;return function(e){if(i===n){t.__response(e)}t.pending--;if(!t.pending){t.element.removeClass("ui-gcautocomplete-loading")}}},__response:function(e){if(!this.options.disabled){e=this._normalize(e);this._suggest(e);this._trigger("open")}else{this.close()}return;if(e){e=this._normalize(e)}this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length&&!this.cancelSearch){this._suggest(e);this._trigger("open")}else{this._close()}},openContainer:function(e){this.container.show();this.element.val("");this.search();this.element.focus();this.container.position(r.extend({of:this.options.toggleBtn},this.options.position));this.__open=true;if(!editable)this.container.find("ul.ui-autocomplete").css("top","-20px")},closeContainer:function(e){this.container.hide();this.__open=false},close:function(e,t){if(!t)return;this.cancelSearch=true;this._close(e)},_close:function(e){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",e)}},_change:function(e){if(this.previous!==this._value()){this._trigger("change",e,{item:this.selectedItem})}},_normalize:function(e){if(e.length&&e[0].label&&e[0].value){return e}return r.map(e,function(e){if(typeof e==="string"){return{label:e,value:e}}return r.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var t=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(t,e);this.menu.refresh();t.show();this._resizeMenu();t.position(r.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+40,this.element.outerWidth()+40));this.container.outerWidth(Math.max(e.width("").outerWidth()+8,this.element.outerWidth()+7));var t=34;this.container.outerHeight(Math.max(e.height("").outerHeight()+t,this.element.outerHeight()+t))},_renderMenu:function(n,e){var a=this,i=r.trim(a.element.val()),s;r.each(e,function(e,t){if(t.value==i)s=true});if(this.options.editable&&i&&!s){r("<li></li>").data("ui-autocomplete-item",{action:"new",value:i}).append(r("<a></a>").text(__("Create new")+" ("+i+")")).appendTo(n);if(e.length>0)n.append("<li class='ui-autocomplete-divider'><div></div></li>")}r.each(e,function(e,t){var i=a._renderItemData(n,t);i.find(".fa-times").click(function(e){a._trigger("remove",e,{item:t});e.stopPropagation()})})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){var i=r("<li></li>"),n;if(this.options.editable)n=r("<a></a>").html("<i class='fa fa-times' ></i> "+t.label);else n=r("<a></a>").text(t.label);return i.append(n).appendTo(e)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term);this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t);t.preventDefault()}}});r.extend(r.ui.gcautocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var i=new RegExp(r.ui.gcautocomplete.escapeRegex(t),"i");return r.grep(e,function(e){return i.test(e.label||e.value||e)})}})})(jQuery);(function(e,t){giscloud.ui.resources=giscloud.ui.resources||{};giscloud.ui.resources.permissionForm=function(e,t){formManager.close("resourcepermissionform");var i=formManager.open({bootstrap:true,fid:"resourcepermissionform",overlay:false,dragable:true,title:t&&t.custom_title||__("Sharing settings"),fdata:{resource_id:e,options:t},width:600,height:"auto",url:fno.liveSite+"resource/form_permission",buttons:[{html:gclang.Close}]});return i}})(jQuery,$);(function(n){gcapp.addEvent("ready",function(){if(!n("body").hasClass("gc-responsive"))return;if(gcapp.homepage)gcapp.homepage.refresh();if(user.options.THEME_COLOR)n(".navbar").addClass("gc-no-hover");var e=n(".main-menu-button"),t;if(e.length>0){t=new giscloud.ui.Panel({type:"vertical",position:"left",push:true,closeButton:0});e.click(function(){t.toggle()})}if(gcapp.gcmap){gcproject.addEvent("getmapdata",function(){var e=fn.getMap().options.LOGO_LINK,t=giscloud.ui.map.markers;if(t.length>0){n.each(t,function(e,t){giscloud.ui.map.removeMarker(t)})}e=e?e:user.options.LOGO_LINK?user.options.LOGO_LINK:"/";n("a.navbar-brand").attr("href",e).attr("target","_blank");if(gcapp.gclayer&&gcapp.gclayer.llist){gcapp.gclayer.llist.addEvent("toggle",function(e){})}})}});function a(){var e=n("#example-navbar-collapse"),t=n(".nav.navbar-nav");if(e.height()>t.height())e.attr("style","display: -webkit-flex !important;");else e.attr("style","display: block !important;")}function s(){a();n("ul.nav.navbar-nav").parent().removeClass("text-center");n("ul.nav.navbar-nav").removeClass("navbar-center");n(".nav.pull-right").append(n(".nav.navbar-nav").find("li.dropdown").has("#dropdown-myaccount"));n(".nav.pull-right").show()}function r(){n("ul.nav.navbar-nav").parent().addClass("text-center");n("ul.nav.navbar-nav").addClass("navbar-center");n("#example-navbar-collapse").css("width",n(window).width());n(".nav.pull-right").hide();n(".nav.navbar-nav.navbar-center").append(n(".nav.pull-right").find("li").first())}function i(){if(user.id<=0){n(document).ready(function(){giscloud.ui.ready.then(function(){giscloud.ui.map.ready(function(){showLoginForm()})})})}else{n(".nav.pull-right").show()}}function o(){if(user.id>0){n(".nav.pull-right").show()}else{n(".nav.pull-right").hide()}}n(function(){if(window.location.href&&window.location.href.split("/").length>0){var e=window.location.href.split("/").pop();if(e.match(/builder/gi)){i()}else{o()}}if(fno.mobilebrowser){n(".datagrid-pulltab,.navbar").addClass("mobile")}else{n(".datagrid-pulltab,.navbar").addClass("non-mobile")}if(!n("body").hasClass("gc-responsive")||n("body").hasClass("gc-new-design"))return;n("#sign_in_button").click(function(){showLoginForm()});function t(){var e=n("body").height();n("#mapPanel").height(e-50)}n(window).resize(t);t();n(document).ready(function(){giscloud.ui.ready.then(function(){var e=n(window).width();if(e>=768)a();else{n(".navbar-toggle").parent().css("top","0px").css("right","0px").css("position","absolute")}if(giscloud.ui.map){giscloud.ui.map.initializing.done(function(){if(user.options.MODULE_DATAGRID&&user.options.MODULE_DATAGRID==="0"){n("#gc_portal_datagrid_module").hide();n(".datagrid-pulltab.hidden-xs").remove()}else giscloud.ui.datagridDrawer.init(false,{leaveMapAlone:false}).show();if(e<768)r();giscloud.ui.map.ready(function(){n(window).resize(function(){e=n(window).width();if(e<768)r();else s()})})})}var t=new URLSearchParams(window.location.search),i=t.get("view")?t.get("view").replaceAll(" ","+"):null;if(i&&i.length>8){i&&gcapp.view.setView(i)}if(fno.view){gcapp.view.setViewVisibility(JSON.parse(fno.view.params).visibility);gcapp.view.setViewFolders(JSON.parse(fno.view.params).folders)}})})})})(jQuery);(function(i){i(function(){if(!i("body").hasClass("gc-new-design"))return;var t=130;function e(){var e=i("body").height();i("#mapPanel").height(e-t)}i(window).resize(e);e();i("#sign_in_button").click(function(){showLoginForm()});gcapp.addEvent("ready",function(){if(user.options.THEME_COLOR)i(".navbar").addClass("gc-no-hover");var e=i(".main-menu-button"),t;if(e.length>0){t=new giscloud.ui.Panel({type:"vertical",position:"left",push:true,closeButton:0});e.click(function(){t.toggle()})}gcapp.gcmap.addEvent("ready",function(){gcproject.addEvent("getmapdata",function(){})})});gcapp.addEvent("ready",function(){})})})(jQuery);